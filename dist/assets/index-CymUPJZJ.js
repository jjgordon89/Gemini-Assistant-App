var rV=Object.defineProperty;var BD=n=>{throw TypeError(n)};var sV=(n,e,t)=>e in n?rV(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var _t=(n,e,t)=>sV(n,typeof e!="symbol"?e+"":e,t),YT=(n,e,t)=>e.has(n)||BD("Cannot "+t);var S=(n,e,t)=>(YT(n,e,"read from private field"),t?t.call(n):e.get(n)),$=(n,e,t)=>e.has(n)?BD("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),L=(n,e,t,i)=>(YT(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),z=(n,e,t)=>(YT(n,e,"access private method"),t);var rr=(n,e,t,i)=>({set _(r){L(n,e,r,t)},get _(){return S(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var oV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zF(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var WT={exports:{}},Sm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FD;function aV(){if(FD)return Sm;FD=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,s){var o=null;if(s!==void 0&&(o=""+s),r.key!==void 0&&(o=""+r.key),"key"in r){s={};for(var a in r)a!=="key"&&(s[a]=r[a])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:o,ref:r!==void 0?r:null,props:s}}return Sm.Fragment=e,Sm.jsx=t,Sm.jsxs=t,Sm}var PD;function lV(){return PD||(PD=1,WT.exports=aV()),WT.exports}var ne=lV(),KT={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LD;function uV(){if(LD)return Et;LD=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(N){return N===null||typeof N!="object"?null:(N=p&&N[p]||N["@@iterator"],typeof N=="function"?N:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function A(N,ce,Me){this.props=N,this.context=ce,this.refs=w,this.updater=Me||g}A.prototype.isReactComponent={},A.prototype.setState=function(N,ce){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ce,"setState")},A.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function E(){}E.prototype=A.prototype;function M(N,ce,Me){this.props=N,this.context=ce,this.refs=w,this.updater=Me||g}var I=M.prototype=new E;I.constructor=M,v(I,A.prototype),I.isPureReactComponent=!0;var R=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function k(N,ce,Me,q,Re,je){return Me=je.ref,{$$typeof:n,type:N,key:ce,ref:Me!==void 0?Me:null,props:je}}function j(N,ce){return k(N.type,ce,void 0,void 0,void 0,N.props)}function U(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function F(N){var ce={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Me){return ce[Me]})}var J=/\/+/g;function G(N,ce){return typeof N=="object"&&N!==null&&N.key!=null?F(""+N.key):ce.toString(36)}function ee(){}function oe(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ee,ee):(N.status="pending",N.then(function(ce){N.status==="pending"&&(N.status="fulfilled",N.value=ce)},function(ce){N.status==="pending"&&(N.status="rejected",N.reason=ce)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function me(N,ce,Me,q,Re){var je=typeof N;(je==="undefined"||je==="boolean")&&(N=null);var re=!1;if(N===null)re=!0;else switch(je){case"bigint":case"string":case"number":re=!0;break;case"object":switch(N.$$typeof){case n:case e:re=!0;break;case f:return re=N._init,me(re(N._payload),ce,Me,q,Re)}}if(re)return Re=Re(N),re=q===""?"."+G(N,0):q,R(Re)?(Me="",re!=null&&(Me=re.replace(J,"$&/")+"/"),me(Re,ce,Me,"",function(fe){return fe})):Re!=null&&(U(Re)&&(Re=j(Re,Me+(Re.key==null||N&&N.key===Re.key?"":(""+Re.key).replace(J,"$&/")+"/")+re)),ce.push(Re)),1;re=0;var ae=q===""?".":q+":";if(R(N))for(var de=0;de<N.length;de++)q=N[de],je=ae+G(q,de),re+=me(q,ce,Me,je,Re);else if(de=m(N),typeof de=="function")for(N=de.call(N),de=0;!(q=N.next()).done;)q=q.value,je=ae+G(q,de++),re+=me(q,ce,Me,je,Re);else if(je==="object"){if(typeof N.then=="function")return me(oe(N),ce,Me,q,Re);throw ce=String(N),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return re}function Q(N,ce,Me){if(N==null)return N;var q=[],Re=0;return me(N,q,"","",function(je){return ce.call(Me,je,Re++)}),q}function V(N){if(N._status===-1){var ce=N._result;ce=ce(),ce.then(function(Me){(N._status===0||N._status===-1)&&(N._status=1,N._result=Me)},function(Me){(N._status===0||N._status===-1)&&(N._status=2,N._result=Me)}),N._status===-1&&(N._status=0,N._result=ce)}if(N._status===1)return N._result.default;throw N._result}var te=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function xe(){}return Et.Children={map:Q,forEach:function(N,ce,Me){Q(N,function(){ce.apply(this,arguments)},Me)},count:function(N){var ce=0;return Q(N,function(){ce++}),ce},toArray:function(N){return Q(N,function(ce){return ce})||[]},only:function(N){if(!U(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Et.Component=A,Et.Fragment=t,Et.Profiler=r,Et.PureComponent=M,Et.StrictMode=i,Et.Suspense=c,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Et.__COMPILER_RUNTIME={__proto__:null,c:function(N){return D.H.useMemoCache(N)}},Et.cache=function(N){return function(){return N.apply(null,arguments)}},Et.cloneElement=function(N,ce,Me){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var q=v({},N.props),Re=N.key,je=void 0;if(ce!=null)for(re in ce.ref!==void 0&&(je=void 0),ce.key!==void 0&&(Re=""+ce.key),ce)!C.call(ce,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&ce.ref===void 0||(q[re]=ce[re]);var re=arguments.length-2;if(re===1)q.children=Me;else if(1<re){for(var ae=Array(re),de=0;de<re;de++)ae[de]=arguments[de+2];q.children=ae}return k(N.type,Re,void 0,void 0,je,q)},Et.createContext=function(N){return N={$$typeof:o,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:s,_context:N},N},Et.createElement=function(N,ce,Me){var q,Re={},je=null;if(ce!=null)for(q in ce.key!==void 0&&(je=""+ce.key),ce)C.call(ce,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(Re[q]=ce[q]);var re=arguments.length-2;if(re===1)Re.children=Me;else if(1<re){for(var ae=Array(re),de=0;de<re;de++)ae[de]=arguments[de+2];Re.children=ae}if(N&&N.defaultProps)for(q in re=N.defaultProps,re)Re[q]===void 0&&(Re[q]=re[q]);return k(N,je,void 0,void 0,null,Re)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(N){return{$$typeof:a,render:N}},Et.isValidElement=U,Et.lazy=function(N){return{$$typeof:f,_payload:{_status:-1,_result:N},_init:V}},Et.memo=function(N,ce){return{$$typeof:u,type:N,compare:ce===void 0?null:ce}},Et.startTransition=function(N){var ce=D.T,Me={};D.T=Me;try{var q=N(),Re=D.S;Re!==null&&Re(Me,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(xe,te)}catch(je){te(je)}finally{D.T=ce}},Et.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Et.use=function(N){return D.H.use(N)},Et.useActionState=function(N,ce,Me){return D.H.useActionState(N,ce,Me)},Et.useCallback=function(N,ce){return D.H.useCallback(N,ce)},Et.useContext=function(N){return D.H.useContext(N)},Et.useDebugValue=function(){},Et.useDeferredValue=function(N,ce){return D.H.useDeferredValue(N,ce)},Et.useEffect=function(N,ce,Me){var q=D.H;if(typeof Me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return q.useEffect(N,ce)},Et.useId=function(){return D.H.useId()},Et.useImperativeHandle=function(N,ce,Me){return D.H.useImperativeHandle(N,ce,Me)},Et.useInsertionEffect=function(N,ce){return D.H.useInsertionEffect(N,ce)},Et.useLayoutEffect=function(N,ce){return D.H.useLayoutEffect(N,ce)},Et.useMemo=function(N,ce){return D.H.useMemo(N,ce)},Et.useOptimistic=function(N,ce){return D.H.useOptimistic(N,ce)},Et.useReducer=function(N,ce,Me){return D.H.useReducer(N,ce,Me)},Et.useRef=function(N){return D.H.useRef(N)},Et.useState=function(N){return D.H.useState(N)},Et.useSyncExternalStore=function(N,ce,Me){return D.H.useSyncExternalStore(N,ce,Me)},Et.useTransition=function(){return D.H.useTransition()},Et.version="19.1.0",Et}var UD;function XE(){return UD||(UD=1,KT.exports=uV()),KT.exports}var pe=XE();const VF=mS(pe);var XT={exports:{}},wm={},JT={exports:{}},ZT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD;function cV(){return zD||(zD=1,function(n){function e(Q,V){var te=Q.length;Q.push(V);e:for(;0<te;){var xe=te-1>>>1,N=Q[xe];if(0<r(N,V))Q[xe]=V,Q[te]=N,te=xe;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var V=Q[0],te=Q.pop();if(te!==V){Q[0]=te;e:for(var xe=0,N=Q.length,ce=N>>>1;xe<ce;){var Me=2*(xe+1)-1,q=Q[Me],Re=Me+1,je=Q[Re];if(0>r(q,te))Re<N&&0>r(je,q)?(Q[xe]=je,Q[Re]=te,xe=Re):(Q[xe]=q,Q[Me]=te,xe=Me);else if(Re<N&&0>r(je,te))Q[xe]=je,Q[Re]=te,xe=Re;else break e}}return V}function r(Q,V){var te=Q.sortIndex-V.sortIndex;return te!==0?te:Q.id-V.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],f=1,p=null,m=3,g=!1,v=!1,w=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function R(Q){for(var V=t(u);V!==null;){if(V.callback===null)i(u);else if(V.startTime<=Q)i(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=t(u)}}function D(Q){if(w=!1,R(Q),!v)if(t(c)!==null)v=!0,C||(C=!0,G());else{var V=t(u);V!==null&&me(D,V.startTime-Q)}}var C=!1,k=-1,j=5,U=-1;function F(){return A?!0:!(n.unstable_now()-U<j)}function J(){if(A=!1,C){var Q=n.unstable_now();U=Q;var V=!0;try{e:{v=!1,w&&(w=!1,M(k),k=-1),g=!0;var te=m;try{t:{for(R(Q),p=t(c);p!==null&&!(p.expirationTime>Q&&F());){var xe=p.callback;if(typeof xe=="function"){p.callback=null,m=p.priorityLevel;var N=xe(p.expirationTime<=Q);if(Q=n.unstable_now(),typeof N=="function"){p.callback=N,R(Q),V=!0;break t}p===t(c)&&i(c),R(Q)}else i(c);p=t(c)}if(p!==null)V=!0;else{var ce=t(u);ce!==null&&me(D,ce.startTime-Q),V=!1}}break e}finally{p=null,m=te,g=!1}V=void 0}}finally{V?G():C=!1}}}var G;if(typeof I=="function")G=function(){I(J)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,oe=ee.port2;ee.port1.onmessage=J,G=function(){oe.postMessage(null)}}else G=function(){E(J,0)};function me(Q,V){k=E(function(){Q(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(Q){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var te=m;m=V;try{return Q()}finally{m=te}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(Q,V){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var te=m;m=Q;try{return V()}finally{m=te}},n.unstable_scheduleCallback=function(Q,V,te){var xe=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?xe+te:xe):te=xe,Q){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=te+N,Q={id:f++,callback:V,priorityLevel:Q,startTime:te,expirationTime:N,sortIndex:-1},te>xe?(Q.sortIndex=te,e(u,Q),t(c)===null&&Q===t(u)&&(w?(M(k),k=-1):w=!0,me(D,te-xe))):(Q.sortIndex=N,e(c,Q),v||g||(v=!0,C||(C=!0,G()))),Q},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(Q){var V=m;return function(){var te=m;m=V;try{return Q.apply(this,arguments)}finally{m=te}}}}(ZT)),ZT}var VD;function dV(){return VD||(VD=1,JT.exports=cV()),JT.exports}var QT={exports:{}},Hi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jD;function fV(){if(jD)return Hi;jD=1;var n=XE();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(c,u,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:c,containerInfo:u,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Hi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hi.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(c,u,null,f)},Hi.flushSync=function(c){var u=o.T,f=i.p;try{if(o.T=null,i.p=2,c)return c()}finally{o.T=u,i.p=f,i.d.f()}},Hi.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(c,u))},Hi.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Hi.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,p=a(f,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?i.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:g}):f==="script"&&i.d.X(c,{crossOrigin:p,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Hi.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=a(u.as,u.crossOrigin);i.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(c)},Hi.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,p=a(f,u.crossOrigin);i.d.L(c,f,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Hi.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=a(u.as,u.crossOrigin);i.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(c)},Hi.requestFormReset=function(c){i.d.r(c)},Hi.unstable_batchedUpdates=function(c,u){return c(u)},Hi.useFormState=function(c,u,f){return o.H.useFormState(c,u,f)},Hi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Hi.version="19.1.0",Hi}var qD;function hV(){if(qD)return QT.exports;qD=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),QT.exports=fV(),QT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HD;function pV(){if(HD)return wm;HD=1;var n=dV(),e=XE(),t=hV();function i(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var d=l,h=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(h=d.return),l=d.return;while(l)}return d.tag===3?h:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function a(l){if(s(l)!==l)throw Error(i(188))}function c(l){var d=l.alternate;if(!d){if(d=s(l),d===null)throw Error(i(188));return d!==l?null:l}for(var h=l,y=d;;){var T=h.return;if(T===null)break;var x=T.alternate;if(x===null){if(y=T.return,y!==null){h=y;continue}break}if(T.child===x.child){for(x=T.child;x;){if(x===h)return a(T),l;if(x===y)return a(T),d;x=x.sibling}throw Error(i(188))}if(h.return!==y.return)h=T,y=x;else{for(var O=!1,H=T.child;H;){if(H===h){O=!0,h=T,y=x;break}if(H===y){O=!0,y=T,h=x;break}H=H.sibling}if(!O){for(H=x.child;H;){if(H===h){O=!0,h=x,y=T;break}if(H===y){O=!0,y=x,h=T;break}H=H.sibling}if(!O)throw Error(i(189))}}if(h.alternate!==y)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?l:d}function u(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=u(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),I=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=J&&l[J]||l["@@iterator"],typeof l=="function"?l:null)}var ee=Symbol.for("react.client.reference");function oe(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===ee?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case A:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case C:return"SuspenseList";case U:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case I:return(l.displayName||"Context")+".Provider";case M:return(l._context.displayName||"Context")+".Consumer";case R:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case k:return d=l.displayName||null,d!==null?d:oe(l.type)||"Memo";case j:d=l._payload,l=l._init;try{return oe(l(d))}catch{}}return null}var me=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},xe=[],N=-1;function ce(l){return{current:l}}function Me(l){0>N||(l.current=xe[N],xe[N]=null,N--)}function q(l,d){N++,xe[N]=l.current,l.current=d}var Re=ce(null),je=ce(null),re=ce(null),ae=ce(null);function de(l,d){switch(q(re,d),q(je,l),q(Re,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?uD(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=uD(d),l=cD(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Me(Re),q(Re,l)}function fe(){Me(Re),Me(je),Me(re)}function Pe(l){l.memoizedState!==null&&q(ae,l);var d=Re.current,h=cD(d,l.type);d!==h&&(q(je,l),q(Re,h))}function Ue(l){je.current===l&&(Me(Re),Me(je)),ae.current===l&&(Me(ae),gm._currentValue=te)}var Je=Object.prototype.hasOwnProperty,$e=n.unstable_scheduleCallback,tt=n.unstable_cancelCallback,Ut=n.unstable_shouldYield,zt=n.unstable_requestPaint,Zt=n.unstable_now,$t=n.unstable_getCurrentPriorityLevel,we=n.unstable_ImmediatePriority,Ae=n.unstable_UserBlockingPriority,Se=n.unstable_NormalPriority,Ze=n.unstable_LowPriority,ge=n.unstable_IdlePriority,X=n.log,Y=n.unstable_setDisableYieldValue,Z=null,ue=null;function Oe(l){if(typeof X=="function"&&Y(l),ue&&typeof ue.setStrictMode=="function")try{ue.setStrictMode(Z,l)}catch{}}var Le=Math.clz32?Math.clz32:ei,st=Math.log,Yt=Math.LN2;function ei(l){return l>>>=0,l===0?32:31-(st(l)/Yt|0)|0}var Mn=256,Si=4194304;function En(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function vn(l,d,h){var y=l.pendingLanes;if(y===0)return 0;var T=0,x=l.suspendedLanes,O=l.pingedLanes;l=l.warmLanes;var H=y&134217727;return H!==0?(y=H&~x,y!==0?T=En(y):(O&=H,O!==0?T=En(O):h||(h=H&~l,h!==0&&(T=En(h))))):(H=y&~x,H!==0?T=En(H):O!==0?T=En(O):h||(h=y&~l,h!==0&&(T=En(h)))),T===0?0:d!==0&&d!==T&&(d&x)===0&&(x=T&-T,h=d&-d,x>=h||x===32&&(h&4194048)!==0)?d:T}function Ce(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ve(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mn(){var l=Mn;return Mn<<=1,(Mn&4194048)===0&&(Mn=256),l}function Ui(){var l=Si;return Si<<=1,(Si&62914560)===0&&(Si=4194304),l}function tr(l){for(var d=[],h=0;31>h;h++)d.push(l);return d}function pr(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function $o(l,d,h,y,T,x){var O=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var H=l.entanglements,ie=l.expirationTimes,Te=l.hiddenUpdates;for(h=O&~h;0<h;){var De=31-Le(h),Ne=1<<De;H[De]=0,ie[De]=-1;var Ee=Te[De];if(Ee!==null)for(Te[De]=null,De=0;De<Ee.length;De++){var Ie=Ee[De];Ie!==null&&(Ie.lane&=-536870913)}h&=~Ne}y!==0&&Ru(l,y,0),x!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=x&~(O&~d))}function Ru(l,d,h){l.pendingLanes|=d,l.suspendedLanes&=~d;var y=31-Le(d);l.entangledLanes|=d,l.entanglements[y]=l.entanglements[y]|1073741824|h&4194090}function g_(l,d){var h=l.entangledLanes|=d;for(l=l.entanglements;h;){var y=31-Le(h),T=1<<y;T&d|l[y]&d&&(l[y]|=d),h&=~T}}function _p(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function vp(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function jd(){var l=V.p;return l!==0?l:(l=window.event,l===void 0?32:MD(l.type))}function Sp(l,d){var h=V.p;try{return V.p=l,d()}finally{V.p=h}}var lo=Math.random().toString(36).slice(2),wi="__reactFiber$"+lo,zi="__reactProps$"+lo,cl="__reactContainer$"+lo,ti="__reactEvents$"+lo,KS="__reactListeners$"+lo,XS="__reactHandles$"+lo,y_="__reactResources$"+lo,dl="__reactMarker$"+lo;function wp(l){delete l[wi],delete l[zi],delete l[ti],delete l[KS],delete l[XS]}function uo(l){var d=l[wi];if(d)return d;for(var h=l.parentNode;h;){if(d=h[cl]||h[wi]){if(h=d.alternate,d.child!==null||h!==null&&h.child!==null)for(l=pD(l);l!==null;){if(h=l[wi])return h;l=pD(l)}return d}l=h,h=l.parentNode}return null}function co(l){if(l=l[wi]||l[cl]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function ku(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(i(33))}function fl(l){var d=l[y_];return d||(d=l[y_]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function qn(l){l[dl]=!0}var hl=new Set,Nu={};function Yo(l,d){pl(l,d),pl(l+"Capture",d)}function pl(l,d){for(Nu[l]=d,l=0;l<d.length;l++)hl.add(d[l])}var Tp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),b_={},__={};function qd(l){return Je.call(__,l)?!0:Je.call(b_,l)?!1:Tp.test(l)?__[l]=!0:(b_[l]=!0,!1)}function Vi(l,d,h){if(qd(d))if(h===null)l.removeAttribute(d);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+h)}}function ml(l,d,h){if(h===null)l.removeAttribute(d);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+h)}}function ss(l,d,h,y){if(y===null)l.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(d,h,""+y)}}var fo,Ap;function gl(l){if(fo===void 0)try{throw Error()}catch(h){var d=h.stack.trim().match(/\n( *(at )?)/);fo=d&&d[1]||"",Ap=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fo+l+Ap}var Ep=!1;function Cp(l,d){if(!l||Ep)return"";Ep=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(Ie){var Ee=Ie}Reflect.construct(l,[],Ne)}else{try{Ne.call()}catch(Ie){Ee=Ie}l.call(Ne.prototype)}}else{try{throw Error()}catch(Ie){Ee=Ie}(Ne=l())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(Ie){if(Ie&&Ee&&typeof Ie.stack=="string")return[Ie.stack,Ee.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=y.DetermineComponentFrameRoot(),O=x[0],H=x[1];if(O&&H){var ie=O.split(`
`),Te=H.split(`
`);for(T=y=0;y<ie.length&&!ie[y].includes("DetermineComponentFrameRoot");)y++;for(;T<Te.length&&!Te[T].includes("DetermineComponentFrameRoot");)T++;if(y===ie.length||T===Te.length)for(y=ie.length-1,T=Te.length-1;1<=y&&0<=T&&ie[y]!==Te[T];)T--;for(;1<=y&&0<=T;y--,T--)if(ie[y]!==Te[T]){if(y!==1||T!==1)do if(y--,T--,0>T||ie[y]!==Te[T]){var De=`
`+ie[y].replace(" at new "," at ");return l.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",l.displayName)),De}while(1<=y&&0<=T);break}}}finally{Ep=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?gl(h):""}function Hd(l){switch(l.tag){case 26:case 27:case 5:return gl(l.type);case 16:return gl("Lazy");case 13:return gl("Suspense");case 19:return gl("SuspenseList");case 0:case 15:return Cp(l.type,!1);case 11:return Cp(l.type.render,!1);case 1:return Cp(l.type,!0);case 31:return gl("Activity");default:return""}}function Ip(l){try{var d="";do d+=Hd(l),l=l.return;while(l);return d}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function nr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function v_(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function JS(l){var d=v_(l)?"checked":"value",h=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),y=""+l[d];if(!l.hasOwnProperty(d)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var T=h.get,x=h.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(O){y=""+O,x.call(this,O)}}),Object.defineProperty(l,d,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Gd(l){l._valueTracker||(l._valueTracker=JS(l))}function S_(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var h=d.getValue(),y="";return l&&(y=v_(l)?l.checked?"true":"false":l.value),l=y,l!==h?(d.setValue(l),!0):!1}function Ou(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var w_=/[\n"\\]/g;function ni(l){return l.replace(w_,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function $d(l,d,h,y,T,x,O,H){l.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?l.type=O:l.removeAttribute("type"),d!=null?O==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+nr(d)):l.value!==""+nr(d)&&(l.value=""+nr(d)):O!=="submit"&&O!=="reset"||l.removeAttribute("value"),d!=null?xp(l,O,nr(d)):h!=null?xp(l,O,nr(h)):y!=null&&l.removeAttribute("value"),T==null&&x!=null&&(l.defaultChecked=!!x),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?l.name=""+nr(H):l.removeAttribute("name")}function ZS(l,d,h,y,T,x,O,H){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(l.type=x),d!=null||h!=null){if(!(x!=="submit"&&x!=="reset"||d!=null))return;h=h!=null?""+nr(h):"",d=d!=null?""+nr(d):h,H||d===l.value||(l.value=d),l.defaultValue=d}y=y??T,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=H?l.checked:!!y,l.defaultChecked=!!y,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.name=O)}function xp(l,d,h){d==="number"&&Ou(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function Bu(l,d,h,y){if(l=l.options,d){d={};for(var T=0;T<h.length;T++)d["$"+h[T]]=!0;for(h=0;h<l.length;h++)T=d.hasOwnProperty("$"+l[h].value),l[h].selected!==T&&(l[h].selected=T),T&&y&&(l[h].defaultSelected=!0)}else{for(h=""+nr(h),d=null,T=0;T<l.length;T++){if(l[T].value===h){l[T].selected=!0,y&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function T_(l,d,h){if(d!=null&&(d=""+nr(d),d!==l.value&&(l.value=d),h==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=h!=null?""+nr(h):""}function A_(l,d,h,y){if(d==null){if(y!=null){if(h!=null)throw Error(i(92));if(me(y)){if(1<y.length)throw Error(i(93));y=y[0]}h=y}h==null&&(h=""),d=h}h=nr(d),l.defaultValue=h,y=l.textContent,y===h&&y!==""&&y!==null&&(l.value=y)}function yl(l,d){if(d){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=d;return}}l.textContent=d}var QS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mp(l,d,h){var y=d.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":y?l.setProperty(d,h):typeof h!="number"||h===0||QS.has(d)?d==="float"?l.cssFloat=h:l[d]=(""+h).trim():l[d]=h+"px"}function Fu(l,d,h){if(d!=null&&typeof d!="object")throw Error(i(62));if(l=l.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var T in d)y=d[T],d.hasOwnProperty(T)&&h[T]!==y&&Mp(l,T,y)}else for(var x in d)d.hasOwnProperty(x)&&Mp(l,x,d[x])}function Yd(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ew=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),E_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wd(l){return E_.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Kd=null;function Pu(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ms=null,bl=null;function C_(l){var d=co(l);if(d&&(l=d.stateNode)){var h=l[zi]||null;e:switch(l=d.stateNode,d.type){case"input":if($d(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),d=h.name,h.type==="radio"&&d!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ni(""+d)+'"][type="radio"]'),d=0;d<h.length;d++){var y=h[d];if(y!==l&&y.form===l.form){var T=y[zi]||null;if(!T)throw Error(i(90));$d(y,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<h.length;d++)y=h[d],y.form===l.form&&S_(y)}break e;case"textarea":T_(l,h.value,h.defaultValue);break e;case"select":d=h.value,d!=null&&Bu(l,!!h.multiple,d,!1)}}}var Dp=!1;function Xd(l,d,h){if(Dp)return l(d,h);Dp=!0;try{var y=l(d);return y}finally{if(Dp=!1,(Ms!==null||bl!==null)&&(av(),Ms&&(d=Ms,l=bl,bl=Ms=null,C_(d),l)))for(d=0;d<l.length;d++)C_(l[d])}}function _l(l,d){var h=l.stateNode;if(h===null)return null;var y=h[zi]||null;if(y===null)return null;h=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(i(231,d,typeof h));return h}var Ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jd=!1;if(Ds)try{var Wo={};Object.defineProperty(Wo,"passive",{get:function(){Jd=!0}}),window.addEventListener("test",Wo,Wo),window.removeEventListener("test",Wo,Wo)}catch{Jd=!1}var Rs=null,Zd=null,Ko=null;function Rp(){if(Ko)return Ko;var l,d=Zd,h=d.length,y,T="value"in Rs?Rs.value:Rs.textContent,x=T.length;for(l=0;l<h&&d[l]===T[l];l++);var O=h-l;for(y=1;y<=O&&d[h-y]===T[x-y];y++);return Ko=T.slice(l,1<y?1-y:void 0)}function Qd(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Xo(){return!0}function Mr(){return!1}function di(l){function d(h,y,T,x,O){this._reactName=h,this._targetInst=T,this.type=y,this.nativeEvent=x,this.target=O,this.currentTarget=null;for(var H in l)l.hasOwnProperty(H)&&(h=l[H],this[H]=h?h(x):x[H]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Xo:Mr,this.isPropagationStopped=Mr,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),d}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vl=di(os),Lu=f({},os,{view:0,detail:0}),tw=di(Lu),kp,Uu,zu,Vu=f({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:at,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==zu&&(zu&&l.type==="mousemove"?(kp=l.screenX-zu.screenX,Uu=l.screenY-zu.screenY):Uu=kp=0,zu=l),kp)},movementY:function(l){return"movementY"in l?l.movementY:Uu}}),Dn=di(Vu),B=f({},Vu,{dataTransfer:0}),P=di(B),W=f({},Lu,{relatedTarget:0}),K=di(W),se=f({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),ye=di(se),be=f({},os,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Fe=di(be),nt=f({},os,{data:0}),qe=di(nt),He={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},an={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hn(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=an[l])?!!d[l]:!1}function at(){return Hn}var Tt=f({},Lu,{key:function(l){if(l.key){var d=He[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Qd(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ut[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:at,charCode:function(l){return l.type==="keypress"?Qd(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Qd(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),ct=di(Tt),Rn=f({},Vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Un=di(Rn),ii=f({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:at}),ks=di(ii),ji=f({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),ho=di(ji),Jo=f({},Vu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),ef=di(Jo),I_=f({},os,{newState:0,oldState:0}),I4=di(I_),x4=[9,13,27,32],nw=Ds&&"CompositionEvent"in window,Np=null;Ds&&"documentMode"in document&&(Np=document.documentMode);var M4=Ds&&"TextEvent"in window&&!Np,bI=Ds&&(!nw||Np&&8<Np&&11>=Np),_I=" ",vI=!1;function SI(l,d){switch(l){case"keyup":return x4.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wI(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var tf=!1;function D4(l,d){switch(l){case"compositionend":return wI(d);case"keypress":return d.which!==32?null:(vI=!0,_I);case"textInput":return l=d.data,l===_I&&vI?null:l;default:return null}}function R4(l,d){if(tf)return l==="compositionend"||!nw&&SI(l,d)?(l=Rp(),Ko=Zd=Rs=null,tf=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return bI&&d.locale!=="ko"?null:d.data;default:return null}}var k4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TI(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!k4[l.type]:d==="textarea"}function AI(l,d,h,y){Ms?bl?bl.push(y):bl=[y]:Ms=y,d=hv(d,"onChange"),0<d.length&&(h=new vl("onChange","change",null,h,y),l.push({event:h,listeners:d}))}var Op=null,Bp=null;function N4(l){rD(l,0)}function x_(l){var d=ku(l);if(S_(d))return l}function EI(l,d){if(l==="change")return d}var CI=!1;if(Ds){var iw;if(Ds){var rw="oninput"in document;if(!rw){var II=document.createElement("div");II.setAttribute("oninput","return;"),rw=typeof II.oninput=="function"}iw=rw}else iw=!1;CI=iw&&(!document.documentMode||9<document.documentMode)}function xI(){Op&&(Op.detachEvent("onpropertychange",MI),Bp=Op=null)}function MI(l){if(l.propertyName==="value"&&x_(Bp)){var d=[];AI(d,Bp,l,Pu(l)),Xd(N4,d)}}function O4(l,d,h){l==="focusin"?(xI(),Op=d,Bp=h,Op.attachEvent("onpropertychange",MI)):l==="focusout"&&xI()}function B4(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return x_(Bp)}function F4(l,d){if(l==="click")return x_(d)}function P4(l,d){if(l==="input"||l==="change")return x_(d)}function L4(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Dr=typeof Object.is=="function"?Object.is:L4;function Fp(l,d){if(Dr(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var h=Object.keys(l),y=Object.keys(d);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var T=h[y];if(!Je.call(d,T)||!Dr(l[T],d[T]))return!1}return!0}function DI(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function RI(l,d){var h=DI(l);l=0;for(var y;h;){if(h.nodeType===3){if(y=l+h.textContent.length,l<=d&&y>=d)return{node:h,offset:d-l};l=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=DI(h)}}function kI(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?kI(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function NI(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Ou(l.document);d instanceof l.HTMLIFrameElement;){try{var h=typeof d.contentWindow.location.href=="string"}catch{h=!1}if(h)l=d.contentWindow;else break;d=Ou(l.document)}return d}function sw(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var U4=Ds&&"documentMode"in document&&11>=document.documentMode,nf=null,ow=null,Pp=null,aw=!1;function OI(l,d,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;aw||nf==null||nf!==Ou(y)||(y=nf,"selectionStart"in y&&sw(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Pp&&Fp(Pp,y)||(Pp=y,y=hv(ow,"onSelect"),0<y.length&&(d=new vl("onSelect","select",null,d,h),l.push({event:d,listeners:y}),d.target=nf)))}function ju(l,d){var h={};return h[l.toLowerCase()]=d.toLowerCase(),h["Webkit"+l]="webkit"+d,h["Moz"+l]="moz"+d,h}var rf={animationend:ju("Animation","AnimationEnd"),animationiteration:ju("Animation","AnimationIteration"),animationstart:ju("Animation","AnimationStart"),transitionrun:ju("Transition","TransitionRun"),transitionstart:ju("Transition","TransitionStart"),transitioncancel:ju("Transition","TransitionCancel"),transitionend:ju("Transition","TransitionEnd")},lw={},BI={};Ds&&(BI=document.createElement("div").style,"AnimationEvent"in window||(delete rf.animationend.animation,delete rf.animationiteration.animation,delete rf.animationstart.animation),"TransitionEvent"in window||delete rf.transitionend.transition);function qu(l){if(lw[l])return lw[l];if(!rf[l])return l;var d=rf[l],h;for(h in d)if(d.hasOwnProperty(h)&&h in BI)return lw[l]=d[h];return l}var FI=qu("animationend"),PI=qu("animationiteration"),LI=qu("animationstart"),z4=qu("transitionrun"),V4=qu("transitionstart"),j4=qu("transitioncancel"),UI=qu("transitionend"),zI=new Map,uw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uw.push("scrollEnd");function Ns(l,d){zI.set(l,d),Yo(d,[l])}var VI=new WeakMap;function as(l,d){if(typeof l=="object"&&l!==null){var h=VI.get(l);return h!==void 0?h:(d={value:l,source:d,stack:Ip(d)},VI.set(l,d),d)}return{value:l,source:d,stack:Ip(d)}}var ls=[],sf=0,cw=0;function M_(){for(var l=sf,d=cw=sf=0;d<l;){var h=ls[d];ls[d++]=null;var y=ls[d];ls[d++]=null;var T=ls[d];ls[d++]=null;var x=ls[d];if(ls[d++]=null,y!==null&&T!==null){var O=y.pending;O===null?T.next=T:(T.next=O.next,O.next=T),y.pending=T}x!==0&&jI(h,T,x)}}function D_(l,d,h,y){ls[sf++]=l,ls[sf++]=d,ls[sf++]=h,ls[sf++]=y,cw|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function dw(l,d,h,y){return D_(l,d,h,y),R_(l)}function of(l,d){return D_(l,null,null,d),R_(l)}function jI(l,d,h){l.lanes|=h;var y=l.alternate;y!==null&&(y.lanes|=h);for(var T=!1,x=l.return;x!==null;)x.childLanes|=h,y=x.alternate,y!==null&&(y.childLanes|=h),x.tag===22&&(l=x.stateNode,l===null||l._visibility&1||(T=!0)),l=x,x=x.return;return l.tag===3?(x=l.stateNode,T&&d!==null&&(T=31-Le(h),l=x.hiddenUpdates,y=l[T],y===null?l[T]=[d]:y.push(d),d.lane=h|536870912),x):null}function R_(l){if(50<lm)throw lm=0,yT=null,Error(i(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var af={};function q4(l,d,h,y){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(l,d,h,y){return new q4(l,d,h,y)}function fw(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Zo(l,d){var h=l.alternate;return h===null?(h=Rr(l.tag,d,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=d,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,d=l.dependencies,h.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function qI(l,d){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,d=h.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function k_(l,d,h,y,T,x){var O=0;if(y=l,typeof l=="function")fw(l)&&(O=1);else if(typeof l=="string")O=Gz(l,h,Re.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case U:return l=Rr(31,h,d,T),l.elementType=U,l.lanes=x,l;case v:return Hu(h.children,T,x,d);case w:O=8,T|=24;break;case A:return l=Rr(12,h,d,T|2),l.elementType=A,l.lanes=x,l;case D:return l=Rr(13,h,d,T),l.elementType=D,l.lanes=x,l;case C:return l=Rr(19,h,d,T),l.elementType=C,l.lanes=x,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case I:O=10;break e;case M:O=9;break e;case R:O=11;break e;case k:O=14;break e;case j:O=16,y=null;break e}O=29,h=Error(i(130,l===null?"null":typeof l,"")),y=null}return d=Rr(O,h,d,T),d.elementType=l,d.type=y,d.lanes=x,d}function Hu(l,d,h,y){return l=Rr(7,l,y,d),l.lanes=h,l}function hw(l,d,h){return l=Rr(6,l,null,d),l.lanes=h,l}function pw(l,d,h){return d=Rr(4,l.children!==null?l.children:[],l.key,d),d.lanes=h,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var lf=[],uf=0,N_=null,O_=0,us=[],cs=0,Gu=null,Qo=1,ea="";function $u(l,d){lf[uf++]=O_,lf[uf++]=N_,N_=l,O_=d}function HI(l,d,h){us[cs++]=Qo,us[cs++]=ea,us[cs++]=Gu,Gu=l;var y=Qo;l=ea;var T=32-Le(y)-1;y&=~(1<<T),h+=1;var x=32-Le(d)+T;if(30<x){var O=T-T%5;x=(y&(1<<O)-1).toString(32),y>>=O,T-=O,Qo=1<<32-Le(d)+T|h<<T|y,ea=x+l}else Qo=1<<x|h<<T|y,ea=l}function mw(l){l.return!==null&&($u(l,1),HI(l,1,0))}function gw(l){for(;l===N_;)N_=lf[--uf],lf[uf]=null,O_=lf[--uf],lf[uf]=null;for(;l===Gu;)Gu=us[--cs],us[cs]=null,ea=us[--cs],us[cs]=null,Qo=us[--cs],us[cs]=null}var ir=null,zn=null,Xt=!1,Yu=null,po=!1,yw=Error(i(519));function Wu(l){var d=Error(i(418,""));throw zp(as(d,l)),yw}function GI(l){var d=l.stateNode,h=l.type,y=l.memoizedProps;switch(d[wi]=l,d[zi]=y,h){case"dialog":Pt("cancel",d),Pt("close",d);break;case"iframe":case"object":case"embed":Pt("load",d);break;case"video":case"audio":for(h=0;h<cm.length;h++)Pt(cm[h],d);break;case"source":Pt("error",d);break;case"img":case"image":case"link":Pt("error",d),Pt("load",d);break;case"details":Pt("toggle",d);break;case"input":Pt("invalid",d),ZS(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Gd(d);break;case"select":Pt("invalid",d);break;case"textarea":Pt("invalid",d),A_(d,y.value,y.defaultValue,y.children),Gd(d)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||d.textContent===""+h||y.suppressHydrationWarning===!0||lD(d.textContent,h)?(y.popover!=null&&(Pt("beforetoggle",d),Pt("toggle",d)),y.onScroll!=null&&Pt("scroll",d),y.onScrollEnd!=null&&Pt("scrollend",d),y.onClick!=null&&(d.onclick=pv),d=!0):d=!1,d||Wu(l)}function $I(l){for(ir=l.return;ir;)switch(ir.tag){case 5:case 13:po=!1;return;case 27:case 3:po=!0;return;default:ir=ir.return}}function Lp(l){if(l!==ir)return!1;if(!Xt)return $I(l),Xt=!0,!1;var d=l.tag,h;if((h=d!==3&&d!==27)&&((h=d===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||NT(l.type,l.memoizedProps)),h=!h),h&&zn&&Wu(l),$I(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(h=l.data,h==="/$"){if(d===0){zn=Bs(l.nextSibling);break e}d--}else h!=="$"&&h!=="$!"&&h!=="$?"||d++;l=l.nextSibling}zn=null}}else d===27?(d=zn,Fl(l.type)?(l=PT,PT=null,zn=l):zn=d):zn=ir?Bs(l.stateNode.nextSibling):null;return!0}function Up(){zn=ir=null,Xt=!1}function YI(){var l=Yu;return l!==null&&(yr===null?yr=l:yr.push.apply(yr,l),Yu=null),l}function zp(l){Yu===null?Yu=[l]:Yu.push(l)}var bw=ce(null),Ku=null,ta=null;function Sl(l,d,h){q(bw,d._currentValue),d._currentValue=h}function na(l){l._currentValue=bw.current,Me(bw)}function _w(l,d,h){for(;l!==null;){var y=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),l===h)break;l=l.return}}function vw(l,d,h,y){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var x=T.dependencies;if(x!==null){var O=T.child;x=x.firstContext;e:for(;x!==null;){var H=x;x=T;for(var ie=0;ie<d.length;ie++)if(H.context===d[ie]){x.lanes|=h,H=x.alternate,H!==null&&(H.lanes|=h),_w(x.return,h,l),y||(O=null);break e}x=H.next}}else if(T.tag===18){if(O=T.return,O===null)throw Error(i(341));O.lanes|=h,x=O.alternate,x!==null&&(x.lanes|=h),_w(O,h,l),O=null}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===l){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}}function Vp(l,d,h,y){l=null;for(var T=d,x=!1;T!==null;){if(!x){if((T.flags&524288)!==0)x=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var O=T.alternate;if(O===null)throw Error(i(387));if(O=O.memoizedProps,O!==null){var H=T.type;Dr(T.pendingProps.value,O.value)||(l!==null?l.push(H):l=[H])}}else if(T===ae.current){if(O=T.alternate,O===null)throw Error(i(387));O.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(gm):l=[gm])}T=T.return}l!==null&&vw(d,l,h,y),d.flags|=262144}function B_(l){for(l=l.firstContext;l!==null;){if(!Dr(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Xu(l){Ku=l,ta=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function qi(l){return WI(Ku,l)}function F_(l,d){return Ku===null&&Xu(l),WI(l,d)}function WI(l,d){var h=d._currentValue;if(d={context:d,memoizedValue:h,next:null},ta===null){if(l===null)throw Error(i(308));ta=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else ta=ta.next=d;return h}var H4=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(h,y){l.push(y)}};this.abort=function(){d.aborted=!0,l.forEach(function(h){return h()})}},G4=n.unstable_scheduleCallback,$4=n.unstable_NormalPriority,fi={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sw(){return{controller:new H4,data:new Map,refCount:0}}function jp(l){l.refCount--,l.refCount===0&&G4($4,function(){l.controller.abort()})}var qp=null,ww=0,cf=0,df=null;function Y4(l,d){if(qp===null){var h=qp=[];ww=0,cf=AT(),df={status:"pending",value:void 0,then:function(y){h.push(y)}}}return ww++,d.then(KI,KI),d}function KI(){if(--ww===0&&qp!==null){df!==null&&(df.status="fulfilled");var l=qp;qp=null,cf=0,df=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function W4(l,d){var h=[],y={status:"pending",value:null,reason:null,then:function(T){h.push(T)}};return l.then(function(){y.status="fulfilled",y.value=d;for(var T=0;T<h.length;T++)(0,h[T])(d)},function(T){for(y.status="rejected",y.reason=T,T=0;T<h.length;T++)(0,h[T])(void 0)}),y}var XI=Q.S;Q.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&Y4(l,d),XI!==null&&XI(l,d)};var Ju=ce(null);function Tw(){var l=Ju.current;return l!==null?l:gn.pooledCache}function P_(l,d){d===null?q(Ju,Ju.current):q(Ju,d.pool)}function JI(){var l=Tw();return l===null?null:{parent:fi._currentValue,pool:l}}var Hp=Error(i(460)),ZI=Error(i(474)),L_=Error(i(542)),Aw={then:function(){}};function QI(l){return l=l.status,l==="fulfilled"||l==="rejected"}function U_(){}function ex(l,d,h){switch(h=l[h],h===void 0?l.push(d):h!==d&&(d.then(U_,U_),d=h),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,nx(l),l;default:if(typeof d.status=="string")d.then(U_,U_);else{if(l=gn,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=d,l.status="pending",l.then(function(y){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=y}},function(y){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,nx(l),l}throw Gp=d,Hp}}var Gp=null;function tx(){if(Gp===null)throw Error(i(459));var l=Gp;return Gp=null,l}function nx(l){if(l===Hp||l===L_)throw Error(i(483))}var wl=!1;function Ew(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cw(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Tl(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Al(l,d,h){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(en&2)!==0){var T=y.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),y.pending=d,d=R_(l),jI(l,null,h),d}return D_(l,y,d,h),R_(l)}function $p(l,d,h){if(d=d.updateQueue,d!==null&&(d=d.shared,(h&4194048)!==0)){var y=d.lanes;y&=l.pendingLanes,h|=y,d.lanes=h,g_(l,h)}}function Iw(l,d){var h=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var T=null,x=null;if(h=h.firstBaseUpdate,h!==null){do{var O={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};x===null?T=x=O:x=x.next=O,h=h.next}while(h!==null);x===null?T=x=d:x=x.next=d}else T=x=d;h={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:x,shared:y.shared,callbacks:y.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=d}var xw=!1;function Yp(){if(xw){var l=df;if(l!==null)throw l}}function Wp(l,d,h,y){xw=!1;var T=l.updateQueue;wl=!1;var x=T.firstBaseUpdate,O=T.lastBaseUpdate,H=T.shared.pending;if(H!==null){T.shared.pending=null;var ie=H,Te=ie.next;ie.next=null,O===null?x=Te:O.next=Te,O=ie;var De=l.alternate;De!==null&&(De=De.updateQueue,H=De.lastBaseUpdate,H!==O&&(H===null?De.firstBaseUpdate=Te:H.next=Te,De.lastBaseUpdate=ie))}if(x!==null){var Ne=T.baseState;O=0,De=Te=ie=null,H=x;do{var Ee=H.lane&-536870913,Ie=Ee!==H.lane;if(Ie?(Ht&Ee)===Ee:(y&Ee)===Ee){Ee!==0&&Ee===cf&&(xw=!0),De!==null&&(De=De.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var gt=l,pt=H;Ee=d;var cn=h;switch(pt.tag){case 1:if(gt=pt.payload,typeof gt=="function"){Ne=gt.call(cn,Ne,Ee);break e}Ne=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=pt.payload,Ee=typeof gt=="function"?gt.call(cn,Ne,Ee):gt,Ee==null)break e;Ne=f({},Ne,Ee);break e;case 2:wl=!0}}Ee=H.callback,Ee!==null&&(l.flags|=64,Ie&&(l.flags|=8192),Ie=T.callbacks,Ie===null?T.callbacks=[Ee]:Ie.push(Ee))}else Ie={lane:Ee,tag:H.tag,payload:H.payload,callback:H.callback,next:null},De===null?(Te=De=Ie,ie=Ne):De=De.next=Ie,O|=Ee;if(H=H.next,H===null){if(H=T.shared.pending,H===null)break;Ie=H,H=Ie.next,Ie.next=null,T.lastBaseUpdate=Ie,T.shared.pending=null}}while(!0);De===null&&(ie=Ne),T.baseState=ie,T.firstBaseUpdate=Te,T.lastBaseUpdate=De,x===null&&(T.shared.lanes=0),kl|=O,l.lanes=O,l.memoizedState=Ne}}function ix(l,d){if(typeof l!="function")throw Error(i(191,l));l.call(d)}function rx(l,d){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)ix(h[l],d)}var ff=ce(null),z_=ce(0);function sx(l,d){l=ua,q(z_,l),q(ff,d),ua=l|d.baseLanes}function Mw(){q(z_,ua),q(ff,ff.current)}function Dw(){ua=z_.current,Me(ff),Me(z_)}var El=0,kt=null,ln=null,ri=null,V_=!1,hf=!1,Zu=!1,j_=0,Kp=0,pf=null,K4=0;function Gn(){throw Error(i(321))}function Rw(l,d){if(d===null)return!1;for(var h=0;h<d.length&&h<l.length;h++)if(!Dr(l[h],d[h]))return!1;return!0}function kw(l,d,h,y,T,x){return El=x,kt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Q.H=l===null||l.memoizedState===null?jx:qx,Zu=!1,x=h(y,T),Zu=!1,hf&&(x=ax(d,h,y,T)),ox(l),x}function ox(l){Q.H=W_;var d=ln!==null&&ln.next!==null;if(El=0,ri=ln=kt=null,V_=!1,Kp=0,pf=null,d)throw Error(i(300));l===null||Ti||(l=l.dependencies,l!==null&&B_(l)&&(Ti=!0))}function ax(l,d,h,y){kt=l;var T=0;do{if(hf&&(pf=null),Kp=0,hf=!1,25<=T)throw Error(i(301));if(T+=1,ri=ln=null,l.updateQueue!=null){var x=l.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}Q.H=nz,x=d(h,y)}while(hf);return x}function X4(){var l=Q.H,d=l.useState()[0];return d=typeof d.then=="function"?Xp(d):d,l=l.useState()[0],(ln!==null?ln.memoizedState:null)!==l&&(kt.flags|=1024),d}function Nw(){var l=j_!==0;return j_=0,l}function Ow(l,d,h){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~h}function Bw(l){if(V_){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}V_=!1}El=0,ri=ln=kt=null,hf=!1,Kp=j_=0,pf=null}function mr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?kt.memoizedState=ri=l:ri=ri.next=l,ri}function si(){if(ln===null){var l=kt.alternate;l=l!==null?l.memoizedState:null}else l=ln.next;var d=ri===null?kt.memoizedState:ri.next;if(d!==null)ri=d,ln=l;else{if(l===null)throw kt.alternate===null?Error(i(467)):Error(i(310));ln=l,l={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},ri===null?kt.memoizedState=ri=l:ri=ri.next=l}return ri}function Fw(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xp(l){var d=Kp;return Kp+=1,pf===null&&(pf=[]),l=ex(pf,l,d),d=kt,(ri===null?d.memoizedState:ri.next)===null&&(d=d.alternate,Q.H=d===null||d.memoizedState===null?jx:qx),l}function q_(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Xp(l);if(l.$$typeof===I)return qi(l)}throw Error(i(438,String(l)))}function Pw(l){var d=null,h=kt.updateQueue;if(h!==null&&(d=h.memoCache),d==null){var y=kt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),h===null&&(h=Fw(),kt.updateQueue=h),h.memoCache=d,h=d.data[d.index],h===void 0)for(h=d.data[d.index]=Array(l),y=0;y<l;y++)h[y]=F;return d.index++,h}function ia(l,d){return typeof d=="function"?d(l):d}function H_(l){var d=si();return Lw(d,ln,l)}function Lw(l,d,h){var y=l.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=h;var T=l.baseQueue,x=y.pending;if(x!==null){if(T!==null){var O=T.next;T.next=x.next,x.next=O}d.baseQueue=T=x,y.pending=null}if(x=l.baseState,T===null)l.memoizedState=x;else{d=T.next;var H=O=null,ie=null,Te=d,De=!1;do{var Ne=Te.lane&-536870913;if(Ne!==Te.lane?(Ht&Ne)===Ne:(El&Ne)===Ne){var Ee=Te.revertLane;if(Ee===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),Ne===cf&&(De=!0);else if((El&Ee)===Ee){Te=Te.next,Ee===cf&&(De=!0);continue}else Ne={lane:0,revertLane:Te.revertLane,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null},ie===null?(H=ie=Ne,O=x):ie=ie.next=Ne,kt.lanes|=Ee,kl|=Ee;Ne=Te.action,Zu&&h(x,Ne),x=Te.hasEagerState?Te.eagerState:h(x,Ne)}else Ee={lane:Ne,revertLane:Te.revertLane,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null},ie===null?(H=ie=Ee,O=x):ie=ie.next=Ee,kt.lanes|=Ne,kl|=Ne;Te=Te.next}while(Te!==null&&Te!==d);if(ie===null?O=x:ie.next=H,!Dr(x,l.memoizedState)&&(Ti=!0,De&&(h=df,h!==null)))throw h;l.memoizedState=x,l.baseState=O,l.baseQueue=ie,y.lastRenderedState=x}return T===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Uw(l){var d=si(),h=d.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=l;var y=h.dispatch,T=h.pending,x=d.memoizedState;if(T!==null){h.pending=null;var O=T=T.next;do x=l(x,O.action),O=O.next;while(O!==T);Dr(x,d.memoizedState)||(Ti=!0),d.memoizedState=x,d.baseQueue===null&&(d.baseState=x),h.lastRenderedState=x}return[x,y]}function lx(l,d,h){var y=kt,T=si(),x=Xt;if(x){if(h===void 0)throw Error(i(407));h=h()}else h=d();var O=!Dr((ln||T).memoizedState,h);O&&(T.memoizedState=h,Ti=!0),T=T.queue;var H=dx.bind(null,y,T,l);if(Jp(2048,8,H,[l]),T.getSnapshot!==d||O||ri!==null&&ri.memoizedState.tag&1){if(y.flags|=2048,mf(9,G_(),cx.bind(null,y,T,h,d),null),gn===null)throw Error(i(349));x||(El&124)!==0||ux(y,d,h)}return h}function ux(l,d,h){l.flags|=16384,l={getSnapshot:d,value:h},d=kt.updateQueue,d===null?(d=Fw(),kt.updateQueue=d,d.stores=[l]):(h=d.stores,h===null?d.stores=[l]:h.push(l))}function cx(l,d,h,y){d.value=h,d.getSnapshot=y,fx(d)&&hx(l)}function dx(l,d,h){return h(function(){fx(d)&&hx(l)})}function fx(l){var d=l.getSnapshot;l=l.value;try{var h=d();return!Dr(l,h)}catch{return!0}}function hx(l){var d=of(l,2);d!==null&&Fr(d,l,2)}function zw(l){var d=mr();if(typeof l=="function"){var h=l;if(l=h(),Zu){Oe(!0);try{h()}finally{Oe(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:l},d}function px(l,d,h,y){return l.baseState=h,Lw(l,ln,typeof y=="function"?y:ia)}function J4(l,d,h,y,T){if(Y_(l))throw Error(i(485));if(l=d.action,l!==null){var x={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){x.listeners.push(O)}};Q.T!==null?h(!0):x.isTransition=!1,y(x),h=d.pending,h===null?(x.next=d.pending=x,mx(d,x)):(x.next=h.next,d.pending=h.next=x)}}function mx(l,d){var h=d.action,y=d.payload,T=l.state;if(d.isTransition){var x=Q.T,O={};Q.T=O;try{var H=h(T,y),ie=Q.S;ie!==null&&ie(O,H),gx(l,d,H)}catch(Te){Vw(l,d,Te)}finally{Q.T=x}}else try{x=h(T,y),gx(l,d,x)}catch(Te){Vw(l,d,Te)}}function gx(l,d,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){yx(l,d,y)},function(y){return Vw(l,d,y)}):yx(l,d,h)}function yx(l,d,h){d.status="fulfilled",d.value=h,bx(d),l.state=h,d=l.pending,d!==null&&(h=d.next,h===d?l.pending=null:(h=h.next,d.next=h,mx(l,h)))}function Vw(l,d,h){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=h,bx(d),d=d.next;while(d!==y)}l.action=null}function bx(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function _x(l,d){return d}function vx(l,d){if(Xt){var h=gn.formState;if(h!==null){e:{var y=kt;if(Xt){if(zn){t:{for(var T=zn,x=po;T.nodeType!==8;){if(!x){T=null;break t}if(T=Bs(T.nextSibling),T===null){T=null;break t}}x=T.data,T=x==="F!"||x==="F"?T:null}if(T){zn=Bs(T.nextSibling),y=T.data==="F!";break e}}Wu(y)}y=!1}y&&(d=h[0])}}return h=mr(),h.memoizedState=h.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_x,lastRenderedState:d},h.queue=y,h=Ux.bind(null,kt,y),y.dispatch=h,y=zw(!1),x=$w.bind(null,kt,!1,y.queue),y=mr(),T={state:d,dispatch:null,action:l,pending:null},y.queue=T,h=J4.bind(null,kt,T,x,h),T.dispatch=h,y.memoizedState=l,[d,h,!1]}function Sx(l){var d=si();return wx(d,ln,l)}function wx(l,d,h){if(d=Lw(l,d,_x)[0],l=H_(ia)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=Xp(d)}catch(O){throw O===Hp?L_:O}else y=d;d=si();var T=d.queue,x=T.dispatch;return h!==d.memoizedState&&(kt.flags|=2048,mf(9,G_(),Z4.bind(null,T,h),null)),[y,x,l]}function Z4(l,d){l.action=d}function Tx(l){var d=si(),h=ln;if(h!==null)return wx(d,h,l);si(),d=d.memoizedState,h=si();var y=h.queue.dispatch;return h.memoizedState=l,[d,y,!1]}function mf(l,d,h,y){return l={tag:l,create:h,deps:y,inst:d,next:null},d=kt.updateQueue,d===null&&(d=Fw(),kt.updateQueue=d),h=d.lastEffect,h===null?d.lastEffect=l.next=l:(y=h.next,h.next=l,l.next=y,d.lastEffect=l),l}function G_(){return{destroy:void 0,resource:void 0}}function Ax(){return si().memoizedState}function $_(l,d,h,y){var T=mr();y=y===void 0?null:y,kt.flags|=l,T.memoizedState=mf(1|d,G_(),h,y)}function Jp(l,d,h,y){var T=si();y=y===void 0?null:y;var x=T.memoizedState.inst;ln!==null&&y!==null&&Rw(y,ln.memoizedState.deps)?T.memoizedState=mf(d,x,h,y):(kt.flags|=l,T.memoizedState=mf(1|d,x,h,y))}function Ex(l,d){$_(8390656,8,l,d)}function Cx(l,d){Jp(2048,8,l,d)}function Ix(l,d){return Jp(4,2,l,d)}function xx(l,d){return Jp(4,4,l,d)}function Mx(l,d){if(typeof d=="function"){l=l();var h=d(l);return function(){typeof h=="function"?h():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Dx(l,d,h){h=h!=null?h.concat([l]):null,Jp(4,4,Mx.bind(null,d,l),h)}function jw(){}function Rx(l,d){var h=si();d=d===void 0?null:d;var y=h.memoizedState;return d!==null&&Rw(d,y[1])?y[0]:(h.memoizedState=[l,d],l)}function kx(l,d){var h=si();d=d===void 0?null:d;var y=h.memoizedState;if(d!==null&&Rw(d,y[1]))return y[0];if(y=l(),Zu){Oe(!0);try{l()}finally{Oe(!1)}}return h.memoizedState=[y,d],y}function qw(l,d,h){return h===void 0||(El&1073741824)!==0?l.memoizedState=d:(l.memoizedState=h,l=BM(),kt.lanes|=l,kl|=l,h)}function Nx(l,d,h,y){return Dr(h,d)?h:ff.current!==null?(l=qw(l,h,y),Dr(l,d)||(Ti=!0),l):(El&42)===0?(Ti=!0,l.memoizedState=h):(l=BM(),kt.lanes|=l,kl|=l,d)}function Ox(l,d,h,y,T){var x=V.p;V.p=x!==0&&8>x?x:8;var O=Q.T,H={};Q.T=H,$w(l,!1,d,h);try{var ie=T(),Te=Q.S;if(Te!==null&&Te(H,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var De=W4(ie,y);Zp(l,d,De,Br(l))}else Zp(l,d,y,Br(l))}catch(Ne){Zp(l,d,{then:function(){},status:"rejected",reason:Ne},Br())}finally{V.p=x,Q.T=O}}function Q4(){}function Hw(l,d,h,y){if(l.tag!==5)throw Error(i(476));var T=Bx(l).queue;Ox(l,T,d,te,h===null?Q4:function(){return Fx(l),h(y)})}function Bx(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:te},next:null};var h={};return d.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:h},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Fx(l){var d=Bx(l).next.queue;Zp(l,d,{},Br())}function Gw(){return qi(gm)}function Px(){return si().memoizedState}function Lx(){return si().memoizedState}function ez(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var h=Br();l=Tl(h);var y=Al(d,l,h);y!==null&&(Fr(y,d,h),$p(y,d,h)),d={cache:Sw()},l.payload=d;return}d=d.return}}function tz(l,d,h){var y=Br();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Y_(l)?zx(d,h):(h=dw(l,d,h,y),h!==null&&(Fr(h,l,y),Vx(h,d,y)))}function Ux(l,d,h){var y=Br();Zp(l,d,h,y)}function Zp(l,d,h,y){var T={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Y_(l))zx(d,T);else{var x=l.alternate;if(l.lanes===0&&(x===null||x.lanes===0)&&(x=d.lastRenderedReducer,x!==null))try{var O=d.lastRenderedState,H=x(O,h);if(T.hasEagerState=!0,T.eagerState=H,Dr(H,O))return D_(l,d,T,0),gn===null&&M_(),!1}catch{}finally{}if(h=dw(l,d,T,y),h!==null)return Fr(h,l,y),Vx(h,d,y),!0}return!1}function $w(l,d,h,y){if(y={lane:2,revertLane:AT(),action:y,hasEagerState:!1,eagerState:null,next:null},Y_(l)){if(d)throw Error(i(479))}else d=dw(l,h,y,2),d!==null&&Fr(d,l,2)}function Y_(l){var d=l.alternate;return l===kt||d!==null&&d===kt}function zx(l,d){hf=V_=!0;var h=l.pending;h===null?d.next=d:(d.next=h.next,h.next=d),l.pending=d}function Vx(l,d,h){if((h&4194048)!==0){var y=d.lanes;y&=l.pendingLanes,h|=y,d.lanes=h,g_(l,h)}}var W_={readContext:qi,use:q_,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn},jx={readContext:qi,use:q_,useCallback:function(l,d){return mr().memoizedState=[l,d===void 0?null:d],l},useContext:qi,useEffect:Ex,useImperativeHandle:function(l,d,h){h=h!=null?h.concat([l]):null,$_(4194308,4,Mx.bind(null,d,l),h)},useLayoutEffect:function(l,d){return $_(4194308,4,l,d)},useInsertionEffect:function(l,d){$_(4,2,l,d)},useMemo:function(l,d){var h=mr();d=d===void 0?null:d;var y=l();if(Zu){Oe(!0);try{l()}finally{Oe(!1)}}return h.memoizedState=[y,d],y},useReducer:function(l,d,h){var y=mr();if(h!==void 0){var T=h(d);if(Zu){Oe(!0);try{h(d)}finally{Oe(!1)}}}else T=d;return y.memoizedState=y.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},y.queue=l,l=l.dispatch=tz.bind(null,kt,l),[y.memoizedState,l]},useRef:function(l){var d=mr();return l={current:l},d.memoizedState=l},useState:function(l){l=zw(l);var d=l.queue,h=Ux.bind(null,kt,d);return d.dispatch=h,[l.memoizedState,h]},useDebugValue:jw,useDeferredValue:function(l,d){var h=mr();return qw(h,l,d)},useTransition:function(){var l=zw(!1);return l=Ox.bind(null,kt,l.queue,!0,!1),mr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,h){var y=kt,T=mr();if(Xt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=d(),gn===null)throw Error(i(349));(Ht&124)!==0||ux(y,d,h)}T.memoizedState=h;var x={value:h,getSnapshot:d};return T.queue=x,Ex(dx.bind(null,y,x,l),[l]),y.flags|=2048,mf(9,G_(),cx.bind(null,y,x,h,d),null),h},useId:function(){var l=mr(),d=gn.identifierPrefix;if(Xt){var h=ea,y=Qo;h=(y&~(1<<32-Le(y)-1)).toString(32)+h,d="«"+d+"R"+h,h=j_++,0<h&&(d+="H"+h.toString(32)),d+="»"}else h=K4++,d="«"+d+"r"+h.toString(32)+"»";return l.memoizedState=d},useHostTransitionStatus:Gw,useFormState:vx,useActionState:vx,useOptimistic:function(l){var d=mr();d.memoizedState=d.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=h,d=$w.bind(null,kt,!0,h),h.dispatch=d,[l,d]},useMemoCache:Pw,useCacheRefresh:function(){return mr().memoizedState=ez.bind(null,kt)}},qx={readContext:qi,use:q_,useCallback:Rx,useContext:qi,useEffect:Cx,useImperativeHandle:Dx,useInsertionEffect:Ix,useLayoutEffect:xx,useMemo:kx,useReducer:H_,useRef:Ax,useState:function(){return H_(ia)},useDebugValue:jw,useDeferredValue:function(l,d){var h=si();return Nx(h,ln.memoizedState,l,d)},useTransition:function(){var l=H_(ia)[0],d=si().memoizedState;return[typeof l=="boolean"?l:Xp(l),d]},useSyncExternalStore:lx,useId:Px,useHostTransitionStatus:Gw,useFormState:Sx,useActionState:Sx,useOptimistic:function(l,d){var h=si();return px(h,ln,l,d)},useMemoCache:Pw,useCacheRefresh:Lx},nz={readContext:qi,use:q_,useCallback:Rx,useContext:qi,useEffect:Cx,useImperativeHandle:Dx,useInsertionEffect:Ix,useLayoutEffect:xx,useMemo:kx,useReducer:Uw,useRef:Ax,useState:function(){return Uw(ia)},useDebugValue:jw,useDeferredValue:function(l,d){var h=si();return ln===null?qw(h,l,d):Nx(h,ln.memoizedState,l,d)},useTransition:function(){var l=Uw(ia)[0],d=si().memoizedState;return[typeof l=="boolean"?l:Xp(l),d]},useSyncExternalStore:lx,useId:Px,useHostTransitionStatus:Gw,useFormState:Tx,useActionState:Tx,useOptimistic:function(l,d){var h=si();return ln!==null?px(h,ln,l,d):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:Pw,useCacheRefresh:Lx},gf=null,Qp=0;function K_(l){var d=Qp;return Qp+=1,gf===null&&(gf=[]),ex(gf,l,d)}function em(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function X_(l,d){throw d.$$typeof===p?Error(i(525)):(l=Object.prototype.toString.call(d),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function Hx(l){var d=l._init;return d(l._payload)}function Gx(l){function d(he,le){if(l){var _e=he.deletions;_e===null?(he.deletions=[le],he.flags|=16):_e.push(le)}}function h(he,le){if(!l)return null;for(;le!==null;)d(he,le),le=le.sibling;return null}function y(he){for(var le=new Map;he!==null;)he.key!==null?le.set(he.key,he):le.set(he.index,he),he=he.sibling;return le}function T(he,le){return he=Zo(he,le),he.index=0,he.sibling=null,he}function x(he,le,_e){return he.index=_e,l?(_e=he.alternate,_e!==null?(_e=_e.index,_e<le?(he.flags|=67108866,le):_e):(he.flags|=67108866,le)):(he.flags|=1048576,le)}function O(he){return l&&he.alternate===null&&(he.flags|=67108866),he}function H(he,le,_e,ke){return le===null||le.tag!==6?(le=hw(_e,he.mode,ke),le.return=he,le):(le=T(le,_e),le.return=he,le)}function ie(he,le,_e,ke){var Qe=_e.type;return Qe===v?De(he,le,_e.props.children,ke,_e.key):le!==null&&(le.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===j&&Hx(Qe)===le.type)?(le=T(le,_e.props),em(le,_e),le.return=he,le):(le=k_(_e.type,_e.key,_e.props,null,he.mode,ke),em(le,_e),le.return=he,le)}function Te(he,le,_e,ke){return le===null||le.tag!==4||le.stateNode.containerInfo!==_e.containerInfo||le.stateNode.implementation!==_e.implementation?(le=pw(_e,he.mode,ke),le.return=he,le):(le=T(le,_e.children||[]),le.return=he,le)}function De(he,le,_e,ke,Qe){return le===null||le.tag!==7?(le=Hu(_e,he.mode,ke,Qe),le.return=he,le):(le=T(le,_e),le.return=he,le)}function Ne(he,le,_e){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=hw(""+le,he.mode,_e),le.return=he,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case m:return _e=k_(le.type,le.key,le.props,null,he.mode,_e),em(_e,le),_e.return=he,_e;case g:return le=pw(le,he.mode,_e),le.return=he,le;case j:var ke=le._init;return le=ke(le._payload),Ne(he,le,_e)}if(me(le)||G(le))return le=Hu(le,he.mode,_e,null),le.return=he,le;if(typeof le.then=="function")return Ne(he,K_(le),_e);if(le.$$typeof===I)return Ne(he,F_(he,le),_e);X_(he,le)}return null}function Ee(he,le,_e,ke){var Qe=le!==null?le.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return Qe!==null?null:H(he,le,""+_e,ke);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case m:return _e.key===Qe?ie(he,le,_e,ke):null;case g:return _e.key===Qe?Te(he,le,_e,ke):null;case j:return Qe=_e._init,_e=Qe(_e._payload),Ee(he,le,_e,ke)}if(me(_e)||G(_e))return Qe!==null?null:De(he,le,_e,ke,null);if(typeof _e.then=="function")return Ee(he,le,K_(_e),ke);if(_e.$$typeof===I)return Ee(he,le,F_(he,_e),ke);X_(he,_e)}return null}function Ie(he,le,_e,ke,Qe){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return he=he.get(_e)||null,H(le,he,""+ke,Qe);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case m:return he=he.get(ke.key===null?_e:ke.key)||null,ie(le,he,ke,Qe);case g:return he=he.get(ke.key===null?_e:ke.key)||null,Te(le,he,ke,Qe);case j:var Ot=ke._init;return ke=Ot(ke._payload),Ie(he,le,_e,ke,Qe)}if(me(ke)||G(ke))return he=he.get(_e)||null,De(le,he,ke,Qe,null);if(typeof ke.then=="function")return Ie(he,le,_e,K_(ke),Qe);if(ke.$$typeof===I)return Ie(he,le,_e,F_(le,ke),Qe);X_(le,ke)}return null}function gt(he,le,_e,ke){for(var Qe=null,Ot=null,lt=le,mt=le=0,Ei=null;lt!==null&&mt<_e.length;mt++){lt.index>mt?(Ei=lt,lt=null):Ei=lt.sibling;var Wt=Ee(he,lt,_e[mt],ke);if(Wt===null){lt===null&&(lt=Ei);break}l&&lt&&Wt.alternate===null&&d(he,lt),le=x(Wt,le,mt),Ot===null?Qe=Wt:Ot.sibling=Wt,Ot=Wt,lt=Ei}if(mt===_e.length)return h(he,lt),Xt&&$u(he,mt),Qe;if(lt===null){for(;mt<_e.length;mt++)lt=Ne(he,_e[mt],ke),lt!==null&&(le=x(lt,le,mt),Ot===null?Qe=lt:Ot.sibling=lt,Ot=lt);return Xt&&$u(he,mt),Qe}for(lt=y(lt);mt<_e.length;mt++)Ei=Ie(lt,he,mt,_e[mt],ke),Ei!==null&&(l&&Ei.alternate!==null&&lt.delete(Ei.key===null?mt:Ei.key),le=x(Ei,le,mt),Ot===null?Qe=Ei:Ot.sibling=Ei,Ot=Ei);return l&&lt.forEach(function(Vl){return d(he,Vl)}),Xt&&$u(he,mt),Qe}function pt(he,le,_e,ke){if(_e==null)throw Error(i(151));for(var Qe=null,Ot=null,lt=le,mt=le=0,Ei=null,Wt=_e.next();lt!==null&&!Wt.done;mt++,Wt=_e.next()){lt.index>mt?(Ei=lt,lt=null):Ei=lt.sibling;var Vl=Ee(he,lt,Wt.value,ke);if(Vl===null){lt===null&&(lt=Ei);break}l&&lt&&Vl.alternate===null&&d(he,lt),le=x(Vl,le,mt),Ot===null?Qe=Vl:Ot.sibling=Vl,Ot=Vl,lt=Ei}if(Wt.done)return h(he,lt),Xt&&$u(he,mt),Qe;if(lt===null){for(;!Wt.done;mt++,Wt=_e.next())Wt=Ne(he,Wt.value,ke),Wt!==null&&(le=x(Wt,le,mt),Ot===null?Qe=Wt:Ot.sibling=Wt,Ot=Wt);return Xt&&$u(he,mt),Qe}for(lt=y(lt);!Wt.done;mt++,Wt=_e.next())Wt=Ie(lt,he,mt,Wt.value,ke),Wt!==null&&(l&&Wt.alternate!==null&&lt.delete(Wt.key===null?mt:Wt.key),le=x(Wt,le,mt),Ot===null?Qe=Wt:Ot.sibling=Wt,Ot=Wt);return l&&lt.forEach(function(iV){return d(he,iV)}),Xt&&$u(he,mt),Qe}function cn(he,le,_e,ke){if(typeof _e=="object"&&_e!==null&&_e.type===v&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case m:e:{for(var Qe=_e.key;le!==null;){if(le.key===Qe){if(Qe=_e.type,Qe===v){if(le.tag===7){h(he,le.sibling),ke=T(le,_e.props.children),ke.return=he,he=ke;break e}}else if(le.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===j&&Hx(Qe)===le.type){h(he,le.sibling),ke=T(le,_e.props),em(ke,_e),ke.return=he,he=ke;break e}h(he,le);break}else d(he,le);le=le.sibling}_e.type===v?(ke=Hu(_e.props.children,he.mode,ke,_e.key),ke.return=he,he=ke):(ke=k_(_e.type,_e.key,_e.props,null,he.mode,ke),em(ke,_e),ke.return=he,he=ke)}return O(he);case g:e:{for(Qe=_e.key;le!==null;){if(le.key===Qe)if(le.tag===4&&le.stateNode.containerInfo===_e.containerInfo&&le.stateNode.implementation===_e.implementation){h(he,le.sibling),ke=T(le,_e.children||[]),ke.return=he,he=ke;break e}else{h(he,le);break}else d(he,le);le=le.sibling}ke=pw(_e,he.mode,ke),ke.return=he,he=ke}return O(he);case j:return Qe=_e._init,_e=Qe(_e._payload),cn(he,le,_e,ke)}if(me(_e))return gt(he,le,_e,ke);if(G(_e)){if(Qe=G(_e),typeof Qe!="function")throw Error(i(150));return _e=Qe.call(_e),pt(he,le,_e,ke)}if(typeof _e.then=="function")return cn(he,le,K_(_e),ke);if(_e.$$typeof===I)return cn(he,le,F_(he,_e),ke);X_(he,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint"?(_e=""+_e,le!==null&&le.tag===6?(h(he,le.sibling),ke=T(le,_e),ke.return=he,he=ke):(h(he,le),ke=hw(_e,he.mode,ke),ke.return=he,he=ke),O(he)):h(he,le)}return function(he,le,_e,ke){try{Qp=0;var Qe=cn(he,le,_e,ke);return gf=null,Qe}catch(lt){if(lt===Hp||lt===L_)throw lt;var Ot=Rr(29,lt,null,he.mode);return Ot.lanes=ke,Ot.return=he,Ot}finally{}}}var yf=Gx(!0),$x=Gx(!1),ds=ce(null),mo=null;function Cl(l){var d=l.alternate;q(hi,hi.current&1),q(ds,l),mo===null&&(d===null||ff.current!==null||d.memoizedState!==null)&&(mo=l)}function Yx(l){if(l.tag===22){if(q(hi,hi.current),q(ds,l),mo===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(mo=l)}}else Il()}function Il(){q(hi,hi.current),q(ds,ds.current)}function ra(l){Me(ds),mo===l&&(mo=null),Me(hi)}var hi=ce(0);function J_(l){for(var d=l;d!==null;){if(d.tag===13){var h=d.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||FT(h)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function Yw(l,d,h,y){d=l.memoizedState,h=h(y,d),h=h==null?d:f({},d,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var Ww={enqueueSetState:function(l,d,h){l=l._reactInternals;var y=Br(),T=Tl(y);T.payload=d,h!=null&&(T.callback=h),d=Al(l,T,y),d!==null&&(Fr(d,l,y),$p(d,l,y))},enqueueReplaceState:function(l,d,h){l=l._reactInternals;var y=Br(),T=Tl(y);T.tag=1,T.payload=d,h!=null&&(T.callback=h),d=Al(l,T,y),d!==null&&(Fr(d,l,y),$p(d,l,y))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var h=Br(),y=Tl(h);y.tag=2,d!=null&&(y.callback=d),d=Al(l,y,h),d!==null&&(Fr(d,l,h),$p(d,l,h))}};function Wx(l,d,h,y,T,x,O){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,x,O):d.prototype&&d.prototype.isPureReactComponent?!Fp(h,y)||!Fp(T,x):!0}function Kx(l,d,h,y){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(h,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(h,y),d.state!==l&&Ww.enqueueReplaceState(d,d.state,null)}function Qu(l,d){var h=d;if("ref"in d){h={};for(var y in d)y!=="ref"&&(h[y]=d[y])}if(l=l.defaultProps){h===d&&(h=f({},h));for(var T in l)h[T]===void 0&&(h[T]=l[T])}return h}var Z_=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Xx(l){Z_(l)}function Jx(l){console.error(l)}function Zx(l){Z_(l)}function Q_(l,d){try{var h=l.onUncaughtError;h(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function Qx(l,d,h){try{var y=l.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Kw(l,d,h){return h=Tl(h),h.tag=3,h.payload={element:null},h.callback=function(){Q_(l,d)},h}function eM(l){return l=Tl(l),l.tag=3,l}function tM(l,d,h,y){var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var x=y.value;l.payload=function(){return T(x)},l.callback=function(){Qx(d,h,y)}}var O=h.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(l.callback=function(){Qx(d,h,y),typeof T!="function"&&(Nl===null?Nl=new Set([this]):Nl.add(this));var H=y.stack;this.componentDidCatch(y.value,{componentStack:H!==null?H:""})})}function iz(l,d,h,y,T){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=h.alternate,d!==null&&Vp(d,h,T,!0),h=ds.current,h!==null){switch(h.tag){case 13:return mo===null?_T():h.alternate===null&&Vn===0&&(Vn=3),h.flags&=-257,h.flags|=65536,h.lanes=T,y===Aw?h.flags|=16384:(d=h.updateQueue,d===null?h.updateQueue=new Set([y]):d.add(y),ST(l,y,T)),!1;case 22:return h.flags|=65536,y===Aw?h.flags|=16384:(d=h.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=d):(h=d.retryQueue,h===null?d.retryQueue=new Set([y]):h.add(y)),ST(l,y,T)),!1}throw Error(i(435,h.tag))}return ST(l,y,T),_T(),!1}if(Xt)return d=ds.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,y!==yw&&(l=Error(i(422),{cause:y}),zp(as(l,h)))):(y!==yw&&(d=Error(i(423),{cause:y}),zp(as(d,h))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,y=as(y,h),T=Kw(l.stateNode,y,T),Iw(l,T),Vn!==4&&(Vn=2)),!1;var x=Error(i(520),{cause:y});if(x=as(x,h),am===null?am=[x]:am.push(x),Vn!==4&&(Vn=2),d===null)return!0;y=as(y,h),h=d;do{switch(h.tag){case 3:return h.flags|=65536,l=T&-T,h.lanes|=l,l=Kw(h.stateNode,y,l),Iw(h,l),!1;case 1:if(d=h.type,x=h.stateNode,(h.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Nl===null||!Nl.has(x))))return h.flags|=65536,T&=-T,h.lanes|=T,T=eM(T),tM(T,l,h,y),Iw(h,T),!1}h=h.return}while(h!==null);return!1}var nM=Error(i(461)),Ti=!1;function Ri(l,d,h,y){d.child=l===null?$x(d,null,h,y):yf(d,l.child,h,y)}function iM(l,d,h,y,T){h=h.render;var x=d.ref;if("ref"in y){var O={};for(var H in y)H!=="ref"&&(O[H]=y[H])}else O=y;return Xu(d),y=kw(l,d,h,O,x,T),H=Nw(),l!==null&&!Ti?(Ow(l,d,T),sa(l,d,T)):(Xt&&H&&mw(d),d.flags|=1,Ri(l,d,y,T),d.child)}function rM(l,d,h,y,T){if(l===null){var x=h.type;return typeof x=="function"&&!fw(x)&&x.defaultProps===void 0&&h.compare===null?(d.tag=15,d.type=x,sM(l,d,x,y,T)):(l=k_(h.type,null,y,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(x=l.child,!iT(l,T)){var O=x.memoizedProps;if(h=h.compare,h=h!==null?h:Fp,h(O,y)&&l.ref===d.ref)return sa(l,d,T)}return d.flags|=1,l=Zo(x,y),l.ref=d.ref,l.return=d,d.child=l}function sM(l,d,h,y,T){if(l!==null){var x=l.memoizedProps;if(Fp(x,y)&&l.ref===d.ref)if(Ti=!1,d.pendingProps=y=x,iT(l,T))(l.flags&131072)!==0&&(Ti=!0);else return d.lanes=l.lanes,sa(l,d,T)}return Xw(l,d,h,y,T)}function oM(l,d,h){var y=d.pendingProps,T=y.children,x=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((d.flags&128)!==0){if(y=x!==null?x.baseLanes|h:h,l!==null){for(T=d.child=l.child,x=0;T!==null;)x=x|T.lanes|T.childLanes,T=T.sibling;d.childLanes=x&~y}else d.childLanes=0,d.child=null;return aM(l,d,y,h)}if((h&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&P_(d,x!==null?x.cachePool:null),x!==null?sx(d,x):Mw(),Yx(d);else return d.lanes=d.childLanes=536870912,aM(l,d,x!==null?x.baseLanes|h:h,h)}else x!==null?(P_(d,x.cachePool),sx(d,x),Il(),d.memoizedState=null):(l!==null&&P_(d,null),Mw(),Il());return Ri(l,d,T,h),d.child}function aM(l,d,h,y){var T=Tw();return T=T===null?null:{parent:fi._currentValue,pool:T},d.memoizedState={baseLanes:h,cachePool:T},l!==null&&P_(d,null),Mw(),Yx(d),l!==null&&Vp(l,d,y,!0),null}function ev(l,d){var h=d.ref;if(h===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(l===null||l.ref!==h)&&(d.flags|=4194816)}}function Xw(l,d,h,y,T){return Xu(d),h=kw(l,d,h,y,void 0,T),y=Nw(),l!==null&&!Ti?(Ow(l,d,T),sa(l,d,T)):(Xt&&y&&mw(d),d.flags|=1,Ri(l,d,h,T),d.child)}function lM(l,d,h,y,T,x){return Xu(d),d.updateQueue=null,h=ax(d,y,h,T),ox(l),y=Nw(),l!==null&&!Ti?(Ow(l,d,x),sa(l,d,x)):(Xt&&y&&mw(d),d.flags|=1,Ri(l,d,h,x),d.child)}function uM(l,d,h,y,T){if(Xu(d),d.stateNode===null){var x=af,O=h.contextType;typeof O=="object"&&O!==null&&(x=qi(O)),x=new h(y,x),d.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Ww,d.stateNode=x,x._reactInternals=d,x=d.stateNode,x.props=y,x.state=d.memoizedState,x.refs={},Ew(d),O=h.contextType,x.context=typeof O=="object"&&O!==null?qi(O):af,x.state=d.memoizedState,O=h.getDerivedStateFromProps,typeof O=="function"&&(Yw(d,h,O,y),x.state=d.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(O=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),O!==x.state&&Ww.enqueueReplaceState(x,x.state,null),Wp(d,y,x,T),Yp(),x.state=d.memoizedState),typeof x.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(l===null){x=d.stateNode;var H=d.memoizedProps,ie=Qu(h,H);x.props=ie;var Te=x.context,De=h.contextType;O=af,typeof De=="object"&&De!==null&&(O=qi(De));var Ne=h.getDerivedStateFromProps;De=typeof Ne=="function"||typeof x.getSnapshotBeforeUpdate=="function",H=d.pendingProps!==H,De||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(H||Te!==O)&&Kx(d,x,y,O),wl=!1;var Ee=d.memoizedState;x.state=Ee,Wp(d,y,x,T),Yp(),Te=d.memoizedState,H||Ee!==Te||wl?(typeof Ne=="function"&&(Yw(d,h,Ne,y),Te=d.memoizedState),(ie=wl||Wx(d,h,ie,y,Ee,Te,O))?(De||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(d.flags|=4194308)):(typeof x.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=Te),x.props=y,x.state=Te,x.context=O,y=ie):(typeof x.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{x=d.stateNode,Cw(l,d),O=d.memoizedProps,De=Qu(h,O),x.props=De,Ne=d.pendingProps,Ee=x.context,Te=h.contextType,ie=af,typeof Te=="object"&&Te!==null&&(ie=qi(Te)),H=h.getDerivedStateFromProps,(Te=typeof H=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(O!==Ne||Ee!==ie)&&Kx(d,x,y,ie),wl=!1,Ee=d.memoizedState,x.state=Ee,Wp(d,y,x,T),Yp();var Ie=d.memoizedState;O!==Ne||Ee!==Ie||wl||l!==null&&l.dependencies!==null&&B_(l.dependencies)?(typeof H=="function"&&(Yw(d,h,H,y),Ie=d.memoizedState),(De=wl||Wx(d,h,De,y,Ee,Ie,ie)||l!==null&&l.dependencies!==null&&B_(l.dependencies))?(Te||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(y,Ie,ie),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(y,Ie,ie)),typeof x.componentDidUpdate=="function"&&(d.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof x.componentDidUpdate!="function"||O===l.memoizedProps&&Ee===l.memoizedState||(d.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===l.memoizedProps&&Ee===l.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=Ie),x.props=y,x.state=Ie,x.context=ie,y=De):(typeof x.componentDidUpdate!="function"||O===l.memoizedProps&&Ee===l.memoizedState||(d.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||O===l.memoizedProps&&Ee===l.memoizedState||(d.flags|=1024),y=!1)}return x=y,ev(l,d),y=(d.flags&128)!==0,x||y?(x=d.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:x.render(),d.flags|=1,l!==null&&y?(d.child=yf(d,l.child,null,T),d.child=yf(d,null,h,T)):Ri(l,d,h,T),d.memoizedState=x.state,l=d.child):l=sa(l,d,T),l}function cM(l,d,h,y){return Up(),d.flags|=256,Ri(l,d,h,y),d.child}var Jw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zw(l){return{baseLanes:l,cachePool:JI()}}function Qw(l,d,h){return l=l!==null?l.childLanes&~h:0,d&&(l|=fs),l}function dM(l,d,h){var y=d.pendingProps,T=!1,x=(d.flags&128)!==0,O;if((O=x)||(O=l!==null&&l.memoizedState===null?!1:(hi.current&2)!==0),O&&(T=!0,d.flags&=-129),O=(d.flags&32)!==0,d.flags&=-33,l===null){if(Xt){if(T?Cl(d):Il(),Xt){var H=zn,ie;if(ie=H){e:{for(ie=H,H=po;ie.nodeType!==8;){if(!H){H=null;break e}if(ie=Bs(ie.nextSibling),ie===null){H=null;break e}}H=ie}H!==null?(d.memoizedState={dehydrated:H,treeContext:Gu!==null?{id:Qo,overflow:ea}:null,retryLane:536870912,hydrationErrors:null},ie=Rr(18,null,null,0),ie.stateNode=H,ie.return=d,d.child=ie,ir=d,zn=null,ie=!0):ie=!1}ie||Wu(d)}if(H=d.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return FT(H)?d.lanes=32:d.lanes=536870912,null;ra(d)}return H=y.children,y=y.fallback,T?(Il(),T=d.mode,H=tv({mode:"hidden",children:H},T),y=Hu(y,T,h,null),H.return=d,y.return=d,H.sibling=y,d.child=H,T=d.child,T.memoizedState=Zw(h),T.childLanes=Qw(l,O,h),d.memoizedState=Jw,y):(Cl(d),eT(d,H))}if(ie=l.memoizedState,ie!==null&&(H=ie.dehydrated,H!==null)){if(x)d.flags&256?(Cl(d),d.flags&=-257,d=tT(l,d,h)):d.memoizedState!==null?(Il(),d.child=l.child,d.flags|=128,d=null):(Il(),T=y.fallback,H=d.mode,y=tv({mode:"visible",children:y.children},H),T=Hu(T,H,h,null),T.flags|=2,y.return=d,T.return=d,y.sibling=T,d.child=y,yf(d,l.child,null,h),y=d.child,y.memoizedState=Zw(h),y.childLanes=Qw(l,O,h),d.memoizedState=Jw,d=T);else if(Cl(d),FT(H)){if(O=H.nextSibling&&H.nextSibling.dataset,O)var Te=O.dgst;O=Te,y=Error(i(419)),y.stack="",y.digest=O,zp({value:y,source:null,stack:null}),d=tT(l,d,h)}else if(Ti||Vp(l,d,h,!1),O=(h&l.childLanes)!==0,Ti||O){if(O=gn,O!==null&&(y=h&-h,y=(y&42)!==0?1:_p(y),y=(y&(O.suspendedLanes|h))!==0?0:y,y!==0&&y!==ie.retryLane))throw ie.retryLane=y,of(l,y),Fr(O,l,y),nM;H.data==="$?"||_T(),d=tT(l,d,h)}else H.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ie.treeContext,zn=Bs(H.nextSibling),ir=d,Xt=!0,Yu=null,po=!1,l!==null&&(us[cs++]=Qo,us[cs++]=ea,us[cs++]=Gu,Qo=l.id,ea=l.overflow,Gu=d),d=eT(d,y.children),d.flags|=4096);return d}return T?(Il(),T=y.fallback,H=d.mode,ie=l.child,Te=ie.sibling,y=Zo(ie,{mode:"hidden",children:y.children}),y.subtreeFlags=ie.subtreeFlags&65011712,Te!==null?T=Zo(Te,T):(T=Hu(T,H,h,null),T.flags|=2),T.return=d,y.return=d,y.sibling=T,d.child=y,y=T,T=d.child,H=l.child.memoizedState,H===null?H=Zw(h):(ie=H.cachePool,ie!==null?(Te=fi._currentValue,ie=ie.parent!==Te?{parent:Te,pool:Te}:ie):ie=JI(),H={baseLanes:H.baseLanes|h,cachePool:ie}),T.memoizedState=H,T.childLanes=Qw(l,O,h),d.memoizedState=Jw,y):(Cl(d),h=l.child,l=h.sibling,h=Zo(h,{mode:"visible",children:y.children}),h.return=d,h.sibling=null,l!==null&&(O=d.deletions,O===null?(d.deletions=[l],d.flags|=16):O.push(l)),d.child=h,d.memoizedState=null,h)}function eT(l,d){return d=tv({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function tv(l,d){return l=Rr(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function tT(l,d,h){return yf(d,l.child,null,h),l=eT(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function fM(l,d,h){l.lanes|=d;var y=l.alternate;y!==null&&(y.lanes|=d),_w(l.return,d,h)}function nT(l,d,h,y,T){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:T}:(x.isBackwards=d,x.rendering=null,x.renderingStartTime=0,x.last=y,x.tail=h,x.tailMode=T)}function hM(l,d,h){var y=d.pendingProps,T=y.revealOrder,x=y.tail;if(Ri(l,d,y.children,h),y=hi.current,(y&2)!==0)y=y&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&fM(l,h,d);else if(l.tag===19)fM(l,h,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(q(hi,y),T){case"forwards":for(h=d.child,T=null;h!==null;)l=h.alternate,l!==null&&J_(l)===null&&(T=h),h=h.sibling;h=T,h===null?(T=d.child,d.child=null):(T=h.sibling,h.sibling=null),nT(d,!1,T,h,x);break;case"backwards":for(h=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&J_(l)===null){d.child=T;break}l=T.sibling,T.sibling=h,h=T,T=l}nT(d,!0,h,null,x);break;case"together":nT(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function sa(l,d,h){if(l!==null&&(d.dependencies=l.dependencies),kl|=d.lanes,(h&d.childLanes)===0)if(l!==null){if(Vp(l,d,h,!1),(h&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(i(153));if(d.child!==null){for(l=d.child,h=Zo(l,l.pendingProps),d.child=h,h.return=d;l.sibling!==null;)l=l.sibling,h=h.sibling=Zo(l,l.pendingProps),h.return=d;h.sibling=null}return d.child}function iT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&B_(l)))}function rz(l,d,h){switch(d.tag){case 3:de(d,d.stateNode.containerInfo),Sl(d,fi,l.memoizedState.cache),Up();break;case 27:case 5:Pe(d);break;case 4:de(d,d.stateNode.containerInfo);break;case 10:Sl(d,d.type,d.memoizedProps.value);break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(Cl(d),d.flags|=128,null):(h&d.child.childLanes)!==0?dM(l,d,h):(Cl(d),l=sa(l,d,h),l!==null?l.sibling:null);Cl(d);break;case 19:var T=(l.flags&128)!==0;if(y=(h&d.childLanes)!==0,y||(Vp(l,d,h,!1),y=(h&d.childLanes)!==0),T){if(y)return hM(l,d,h);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),q(hi,hi.current),y)break;return null;case 22:case 23:return d.lanes=0,oM(l,d,h);case 24:Sl(d,fi,l.memoizedState.cache)}return sa(l,d,h)}function pM(l,d,h){if(l!==null)if(l.memoizedProps!==d.pendingProps)Ti=!0;else{if(!iT(l,h)&&(d.flags&128)===0)return Ti=!1,rz(l,d,h);Ti=(l.flags&131072)!==0}else Ti=!1,Xt&&(d.flags&1048576)!==0&&HI(d,O_,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var y=d.elementType,T=y._init;if(y=T(y._payload),d.type=y,typeof y=="function")fw(y)?(l=Qu(y,l),d.tag=1,d=uM(null,d,y,l,h)):(d.tag=0,d=Xw(null,d,y,l,h));else{if(y!=null){if(T=y.$$typeof,T===R){d.tag=11,d=iM(null,d,y,l,h);break e}else if(T===k){d.tag=14,d=rM(null,d,y,l,h);break e}}throw d=oe(y)||y,Error(i(306,d,""))}}return d;case 0:return Xw(l,d,d.type,d.pendingProps,h);case 1:return y=d.type,T=Qu(y,d.pendingProps),uM(l,d,y,T,h);case 3:e:{if(de(d,d.stateNode.containerInfo),l===null)throw Error(i(387));y=d.pendingProps;var x=d.memoizedState;T=x.element,Cw(l,d),Wp(d,y,null,h);var O=d.memoizedState;if(y=O.cache,Sl(d,fi,y),y!==x.cache&&vw(d,[fi],h,!0),Yp(),y=O.element,x.isDehydrated)if(x={element:y,isDehydrated:!1,cache:O.cache},d.updateQueue.baseState=x,d.memoizedState=x,d.flags&256){d=cM(l,d,y,h);break e}else if(y!==T){T=as(Error(i(424)),d),zp(T),d=cM(l,d,y,h);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(zn=Bs(l.firstChild),ir=d,Xt=!0,Yu=null,po=!0,h=$x(d,null,y,h),d.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Up(),y===T){d=sa(l,d,h);break e}Ri(l,d,y,h)}d=d.child}return d;case 26:return ev(l,d),l===null?(h=bD(d.type,null,d.pendingProps,null))?d.memoizedState=h:Xt||(h=d.type,l=d.pendingProps,y=mv(re.current).createElement(h),y[wi]=d,y[zi]=l,Ni(y,h,l),qn(y),d.stateNode=y):d.memoizedState=bD(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Pe(d),l===null&&Xt&&(y=d.stateNode=mD(d.type,d.pendingProps,re.current),ir=d,po=!0,T=zn,Fl(d.type)?(PT=T,zn=Bs(y.firstChild)):zn=T),Ri(l,d,d.pendingProps.children,h),ev(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Xt&&((T=y=zn)&&(y=kz(y,d.type,d.pendingProps,po),y!==null?(d.stateNode=y,ir=d,zn=Bs(y.firstChild),po=!1,T=!0):T=!1),T||Wu(d)),Pe(d),T=d.type,x=d.pendingProps,O=l!==null?l.memoizedProps:null,y=x.children,NT(T,x)?y=null:O!==null&&NT(T,O)&&(d.flags|=32),d.memoizedState!==null&&(T=kw(l,d,X4,null,null,h),gm._currentValue=T),ev(l,d),Ri(l,d,y,h),d.child;case 6:return l===null&&Xt&&((l=h=zn)&&(h=Nz(h,d.pendingProps,po),h!==null?(d.stateNode=h,ir=d,zn=null,l=!0):l=!1),l||Wu(d)),null;case 13:return dM(l,d,h);case 4:return de(d,d.stateNode.containerInfo),y=d.pendingProps,l===null?d.child=yf(d,null,y,h):Ri(l,d,y,h),d.child;case 11:return iM(l,d,d.type,d.pendingProps,h);case 7:return Ri(l,d,d.pendingProps,h),d.child;case 8:return Ri(l,d,d.pendingProps.children,h),d.child;case 12:return Ri(l,d,d.pendingProps.children,h),d.child;case 10:return y=d.pendingProps,Sl(d,d.type,y.value),Ri(l,d,y.children,h),d.child;case 9:return T=d.type._context,y=d.pendingProps.children,Xu(d),T=qi(T),y=y(T),d.flags|=1,Ri(l,d,y,h),d.child;case 14:return rM(l,d,d.type,d.pendingProps,h);case 15:return sM(l,d,d.type,d.pendingProps,h);case 19:return hM(l,d,h);case 31:return y=d.pendingProps,h=d.mode,y={mode:y.mode,children:y.children},l===null?(h=tv(y,h),h.ref=d.ref,d.child=h,h.return=d,d=h):(h=Zo(l.child,y),h.ref=d.ref,d.child=h,h.return=d,d=h),d;case 22:return oM(l,d,h);case 24:return Xu(d),y=qi(fi),l===null?(T=Tw(),T===null&&(T=gn,x=Sw(),T.pooledCache=x,x.refCount++,x!==null&&(T.pooledCacheLanes|=h),T=x),d.memoizedState={parent:y,cache:T},Ew(d),Sl(d,fi,T)):((l.lanes&h)!==0&&(Cw(l,d),Wp(d,null,null,h),Yp()),T=l.memoizedState,x=d.memoizedState,T.parent!==y?(T={parent:y,cache:y},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),Sl(d,fi,y)):(y=x.cache,Sl(d,fi,y),y!==T.cache&&vw(d,[fi],h,!0))),Ri(l,d,d.pendingProps.children,h),d.child;case 29:throw d.pendingProps}throw Error(i(156,d.tag))}function oa(l){l.flags|=4}function mM(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!TD(d)){if(d=ds.current,d!==null&&((Ht&4194048)===Ht?mo!==null:(Ht&62914560)!==Ht&&(Ht&536870912)===0||d!==mo))throw Gp=Aw,ZI;l.flags|=8192}}function nv(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Ui():536870912,l.lanes|=d,Sf|=d)}function tm(l,d){if(!Xt)switch(l.tailMode){case"hidden":d=l.tail;for(var h=null;d!==null;)d.alternate!==null&&(h=d),d=d.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function kn(l){var d=l.alternate!==null&&l.alternate.child===l.child,h=0,y=0;if(d)for(var T=l.child;T!==null;)h|=T.lanes|T.childLanes,y|=T.subtreeFlags&65011712,y|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)h|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=y,l.childLanes=h,d}function sz(l,d,h){var y=d.pendingProps;switch(gw(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(d),null;case 1:return kn(d),null;case 3:return h=d.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),na(fi),fe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(Lp(d)?oa(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,YI())),kn(d),null;case 26:return h=d.memoizedState,l===null?(oa(d),h!==null?(kn(d),mM(d,h)):(kn(d),d.flags&=-16777217)):h?h!==l.memoizedState?(oa(d),kn(d),mM(d,h)):(kn(d),d.flags&=-16777217):(l.memoizedProps!==y&&oa(d),kn(d),d.flags&=-16777217),null;case 27:Ue(d),h=re.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==y&&oa(d);else{if(!y){if(d.stateNode===null)throw Error(i(166));return kn(d),null}l=Re.current,Lp(d)?GI(d):(l=mD(T,y,h),d.stateNode=l,oa(d))}return kn(d),null;case 5:if(Ue(d),h=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==y&&oa(d);else{if(!y){if(d.stateNode===null)throw Error(i(166));return kn(d),null}if(l=Re.current,Lp(d))GI(d);else{switch(T=mv(re.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?T.createElement("select",{is:y.is}):T.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?T.createElement(h,{is:y.is}):T.createElement(h)}}l[wi]=d,l[zi]=y;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(Ni(l,h,y),h){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&oa(d)}}return kn(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==y&&oa(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(i(166));if(l=re.current,Lp(d)){if(l=d.stateNode,h=d.memoizedProps,y=null,T=ir,T!==null)switch(T.tag){case 27:case 5:y=T.memoizedProps}l[wi]=d,l=!!(l.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||lD(l.nodeValue,h)),l||Wu(d)}else l=mv(l).createTextNode(y),l[wi]=d,d.stateNode=l}return kn(d),null;case 13:if(y=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=Lp(d),y!==null&&y.dehydrated!==null){if(l===null){if(!T)throw Error(i(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(i(317));T[wi]=d}else Up(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;kn(d),T=!1}else T=YI(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(ra(d),d):(ra(d),null)}if(ra(d),(d.flags&128)!==0)return d.lanes=h,d;if(h=y!==null,l=l!==null&&l.memoizedState!==null,h){y=d.child,T=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(T=y.alternate.memoizedState.cachePool.pool);var x=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(x=y.memoizedState.cachePool.pool),x!==T&&(y.flags|=2048)}return h!==l&&h&&(d.child.flags|=8192),nv(d,d.updateQueue),kn(d),null;case 4:return fe(),l===null&&xT(d.stateNode.containerInfo),kn(d),null;case 10:return na(d.type),kn(d),null;case 19:if(Me(hi),T=d.memoizedState,T===null)return kn(d),null;if(y=(d.flags&128)!==0,x=T.rendering,x===null)if(y)tm(T,!1);else{if(Vn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(x=J_(l),x!==null){for(d.flags|=128,tm(T,!1),l=x.updateQueue,d.updateQueue=l,nv(d,l),d.subtreeFlags=0,l=h,h=d.child;h!==null;)qI(h,l),h=h.sibling;return q(hi,hi.current&1|2),d.child}l=l.sibling}T.tail!==null&&Zt()>sv&&(d.flags|=128,y=!0,tm(T,!1),d.lanes=4194304)}else{if(!y)if(l=J_(x),l!==null){if(d.flags|=128,y=!0,l=l.updateQueue,d.updateQueue=l,nv(d,l),tm(T,!0),T.tail===null&&T.tailMode==="hidden"&&!x.alternate&&!Xt)return kn(d),null}else 2*Zt()-T.renderingStartTime>sv&&h!==536870912&&(d.flags|=128,y=!0,tm(T,!1),d.lanes=4194304);T.isBackwards?(x.sibling=d.child,d.child=x):(l=T.last,l!==null?l.sibling=x:d.child=x,T.last=x)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=Zt(),d.sibling=null,l=hi.current,q(hi,y?l&1|2:l&1),d):(kn(d),null);case 22:case 23:return ra(d),Dw(),y=d.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(h&536870912)!==0&&(d.flags&128)===0&&(kn(d),d.subtreeFlags&6&&(d.flags|=8192)):kn(d),h=d.updateQueue,h!==null&&nv(d,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==h&&(d.flags|=2048),l!==null&&Me(Ju),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),d.memoizedState.cache!==h&&(d.flags|=2048),na(fi),kn(d),null;case 25:return null;case 30:return null}throw Error(i(156,d.tag))}function oz(l,d){switch(gw(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return na(fi),fe(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Ue(d),null;case 13:if(ra(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(i(340));Up()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Me(hi),null;case 4:return fe(),null;case 10:return na(d.type),null;case 22:case 23:return ra(d),Dw(),l!==null&&Me(Ju),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return na(fi),null;case 25:return null;default:return null}}function gM(l,d){switch(gw(d),d.tag){case 3:na(fi),fe();break;case 26:case 27:case 5:Ue(d);break;case 4:fe();break;case 13:ra(d);break;case 19:Me(hi);break;case 10:na(d.type);break;case 22:case 23:ra(d),Dw(),l!==null&&Me(Ju);break;case 24:na(fi)}}function nm(l,d){try{var h=d.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var T=y.next;h=T;do{if((h.tag&l)===l){y=void 0;var x=h.create,O=h.inst;y=x(),O.destroy=y}h=h.next}while(h!==T)}}catch(H){hn(d,d.return,H)}}function xl(l,d,h){try{var y=d.updateQueue,T=y!==null?y.lastEffect:null;if(T!==null){var x=T.next;y=x;do{if((y.tag&l)===l){var O=y.inst,H=O.destroy;if(H!==void 0){O.destroy=void 0,T=d;var ie=h,Te=H;try{Te()}catch(De){hn(T,ie,De)}}}y=y.next}while(y!==x)}}catch(De){hn(d,d.return,De)}}function yM(l){var d=l.updateQueue;if(d!==null){var h=l.stateNode;try{rx(d,h)}catch(y){hn(l,l.return,y)}}}function bM(l,d,h){h.props=Qu(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(y){hn(l,d,y)}}function im(l,d){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof h=="function"?l.refCleanup=h(y):h.current=y}}catch(T){hn(l,d,T)}}function go(l,d){var h=l.ref,y=l.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(T){hn(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(T){hn(l,d,T)}else h.current=null}function _M(l){var d=l.type,h=l.memoizedProps,y=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(T){hn(l,l.return,T)}}function rT(l,d,h){try{var y=l.stateNode;Iz(y,l.type,h,d),y[zi]=d}catch(T){hn(l,l.return,T)}}function vM(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Fl(l.type)||l.tag===4}function sT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||vM(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Fl(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function oT(l,d,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,d):(d=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,d.appendChild(l),h=h._reactRootContainer,h!=null||d.onclick!==null||(d.onclick=pv));else if(y!==4&&(y===27&&Fl(l.type)&&(h=l.stateNode,d=null),l=l.child,l!==null))for(oT(l,d,h),l=l.sibling;l!==null;)oT(l,d,h),l=l.sibling}function iv(l,d,h){var y=l.tag;if(y===5||y===6)l=l.stateNode,d?h.insertBefore(l,d):h.appendChild(l);else if(y!==4&&(y===27&&Fl(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(iv(l,d,h),l=l.sibling;l!==null;)iv(l,d,h),l=l.sibling}function SM(l){var d=l.stateNode,h=l.memoizedProps;try{for(var y=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);Ni(d,y,h),d[wi]=l,d[zi]=h}catch(x){hn(l,l.return,x)}}var aa=!1,$n=!1,aT=!1,wM=typeof WeakSet=="function"?WeakSet:Set,Ai=null;function az(l,d){if(l=l.containerInfo,RT=Sv,l=NI(l),sw(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var T=y.anchorOffset,x=y.focusNode;y=y.focusOffset;try{h.nodeType,x.nodeType}catch{h=null;break e}var O=0,H=-1,ie=-1,Te=0,De=0,Ne=l,Ee=null;t:for(;;){for(var Ie;Ne!==h||T!==0&&Ne.nodeType!==3||(H=O+T),Ne!==x||y!==0&&Ne.nodeType!==3||(ie=O+y),Ne.nodeType===3&&(O+=Ne.nodeValue.length),(Ie=Ne.firstChild)!==null;)Ee=Ne,Ne=Ie;for(;;){if(Ne===l)break t;if(Ee===h&&++Te===T&&(H=O),Ee===x&&++De===y&&(ie=O),(Ie=Ne.nextSibling)!==null)break;Ne=Ee,Ee=Ne.parentNode}Ne=Ie}h=H===-1||ie===-1?null:{start:H,end:ie}}else h=null}h=h||{start:0,end:0}}else h=null;for(kT={focusedElem:l,selectionRange:h},Sv=!1,Ai=d;Ai!==null;)if(d=Ai,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,Ai=l;else for(;Ai!==null;){switch(d=Ai,x=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&x!==null){l=void 0,h=d,T=x.memoizedProps,x=x.memoizedState,y=h.stateNode;try{var gt=Qu(h.type,T,h.elementType===h.type);l=y.getSnapshotBeforeUpdate(gt,x),y.__reactInternalSnapshotBeforeUpdate=l}catch(pt){hn(h,h.return,pt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,h=l.nodeType,h===9)BT(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":BT(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=d.sibling,l!==null){l.return=d.return,Ai=l;break}Ai=d.return}}function TM(l,d,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:Ml(l,h),y&4&&nm(5,h);break;case 1:if(Ml(l,h),y&4)if(l=h.stateNode,d===null)try{l.componentDidMount()}catch(O){hn(h,h.return,O)}else{var T=Qu(h.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(O){hn(h,h.return,O)}}y&64&&yM(h),y&512&&im(h,h.return);break;case 3:if(Ml(l,h),y&64&&(l=h.updateQueue,l!==null)){if(d=null,h.child!==null)switch(h.child.tag){case 27:case 5:d=h.child.stateNode;break;case 1:d=h.child.stateNode}try{rx(l,d)}catch(O){hn(h,h.return,O)}}break;case 27:d===null&&y&4&&SM(h);case 26:case 5:Ml(l,h),d===null&&y&4&&_M(h),y&512&&im(h,h.return);break;case 12:Ml(l,h);break;case 13:Ml(l,h),y&4&&CM(l,h),y&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=gz.bind(null,h),Oz(l,h))));break;case 22:if(y=h.memoizedState!==null||aa,!y){d=d!==null&&d.memoizedState!==null||$n,T=aa;var x=$n;aa=y,($n=d)&&!x?Dl(l,h,(h.subtreeFlags&8772)!==0):Ml(l,h),aa=T,$n=x}break;case 30:break;default:Ml(l,h)}}function AM(l){var d=l.alternate;d!==null&&(l.alternate=null,AM(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&wp(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Cn=null,gr=!1;function la(l,d,h){for(h=h.child;h!==null;)EM(l,d,h),h=h.sibling}function EM(l,d,h){if(ue&&typeof ue.onCommitFiberUnmount=="function")try{ue.onCommitFiberUnmount(Z,h)}catch{}switch(h.tag){case 26:$n||go(h,d),la(l,d,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:$n||go(h,d);var y=Cn,T=gr;Fl(h.type)&&(Cn=h.stateNode,gr=!1),la(l,d,h),fm(h.stateNode),Cn=y,gr=T;break;case 5:$n||go(h,d);case 6:if(y=Cn,T=gr,Cn=null,la(l,d,h),Cn=y,gr=T,Cn!==null)if(gr)try{(Cn.nodeType===9?Cn.body:Cn.nodeName==="HTML"?Cn.ownerDocument.body:Cn).removeChild(h.stateNode)}catch(x){hn(h,d,x)}else try{Cn.removeChild(h.stateNode)}catch(x){hn(h,d,x)}break;case 18:Cn!==null&&(gr?(l=Cn,hD(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),vm(l)):hD(Cn,h.stateNode));break;case 4:y=Cn,T=gr,Cn=h.stateNode.containerInfo,gr=!0,la(l,d,h),Cn=y,gr=T;break;case 0:case 11:case 14:case 15:$n||xl(2,h,d),$n||xl(4,h,d),la(l,d,h);break;case 1:$n||(go(h,d),y=h.stateNode,typeof y.componentWillUnmount=="function"&&bM(h,d,y)),la(l,d,h);break;case 21:la(l,d,h);break;case 22:$n=(y=$n)||h.memoizedState!==null,la(l,d,h),$n=y;break;default:la(l,d,h)}}function CM(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{vm(l)}catch(h){hn(d,d.return,h)}}function lz(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new wM),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new wM),d;default:throw Error(i(435,l.tag))}}function lT(l,d){var h=lz(l);d.forEach(function(y){var T=yz.bind(null,l,y);h.has(y)||(h.add(y),y.then(T,T))})}function kr(l,d){var h=d.deletions;if(h!==null)for(var y=0;y<h.length;y++){var T=h[y],x=l,O=d,H=O;e:for(;H!==null;){switch(H.tag){case 27:if(Fl(H.type)){Cn=H.stateNode,gr=!1;break e}break;case 5:Cn=H.stateNode,gr=!1;break e;case 3:case 4:Cn=H.stateNode.containerInfo,gr=!0;break e}H=H.return}if(Cn===null)throw Error(i(160));EM(x,O,T),Cn=null,gr=!1,x=T.alternate,x!==null&&(x.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)IM(d,l),d=d.sibling}var Os=null;function IM(l,d){var h=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:kr(d,l),Nr(l),y&4&&(xl(3,l,l.return),nm(3,l),xl(5,l,l.return));break;case 1:kr(d,l),Nr(l),y&512&&($n||h===null||go(h,h.return)),y&64&&aa&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var T=Os;if(kr(d,l),Nr(l),y&512&&($n||h===null||go(h,h.return)),y&4){var x=h!==null?h.memoizedState:null;if(y=l.memoizedState,h===null)if(y===null)if(l.stateNode===null){e:{y=l.type,h=l.memoizedProps,T=T.ownerDocument||T;t:switch(y){case"title":x=T.getElementsByTagName("title")[0],(!x||x[dl]||x[wi]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=T.createElement(y),T.head.insertBefore(x,T.querySelector("head > title"))),Ni(x,y,h),x[wi]=l,qn(x),y=x;break e;case"link":var O=SD("link","href",T).get(y+(h.href||""));if(O){for(var H=0;H<O.length;H++)if(x=O[H],x.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&x.getAttribute("rel")===(h.rel==null?null:h.rel)&&x.getAttribute("title")===(h.title==null?null:h.title)&&x.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){O.splice(H,1);break t}}x=T.createElement(y),Ni(x,y,h),T.head.appendChild(x);break;case"meta":if(O=SD("meta","content",T).get(y+(h.content||""))){for(H=0;H<O.length;H++)if(x=O[H],x.getAttribute("content")===(h.content==null?null:""+h.content)&&x.getAttribute("name")===(h.name==null?null:h.name)&&x.getAttribute("property")===(h.property==null?null:h.property)&&x.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&x.getAttribute("charset")===(h.charSet==null?null:h.charSet)){O.splice(H,1);break t}}x=T.createElement(y),Ni(x,y,h),T.head.appendChild(x);break;default:throw Error(i(468,y))}x[wi]=l,qn(x),y=x}l.stateNode=y}else wD(T,l.type,l.stateNode);else l.stateNode=vD(T,y,l.memoizedProps);else x!==y?(x===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):x.count--,y===null?wD(T,l.type,l.stateNode):vD(T,y,l.memoizedProps)):y===null&&l.stateNode!==null&&rT(l,l.memoizedProps,h.memoizedProps)}break;case 27:kr(d,l),Nr(l),y&512&&($n||h===null||go(h,h.return)),h!==null&&y&4&&rT(l,l.memoizedProps,h.memoizedProps);break;case 5:if(kr(d,l),Nr(l),y&512&&($n||h===null||go(h,h.return)),l.flags&32){T=l.stateNode;try{yl(T,"")}catch(Ie){hn(l,l.return,Ie)}}y&4&&l.stateNode!=null&&(T=l.memoizedProps,rT(l,T,h!==null?h.memoizedProps:T)),y&1024&&(aT=!0);break;case 6:if(kr(d,l),Nr(l),y&4){if(l.stateNode===null)throw Error(i(162));y=l.memoizedProps,h=l.stateNode;try{h.nodeValue=y}catch(Ie){hn(l,l.return,Ie)}}break;case 3:if(bv=null,T=Os,Os=gv(d.containerInfo),kr(d,l),Os=T,Nr(l),y&4&&h!==null&&h.memoizedState.isDehydrated)try{vm(d.containerInfo)}catch(Ie){hn(l,l.return,Ie)}aT&&(aT=!1,xM(l));break;case 4:y=Os,Os=gv(l.stateNode.containerInfo),kr(d,l),Nr(l),Os=y;break;case 12:kr(d,l),Nr(l);break;case 13:kr(d,l),Nr(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(pT=Zt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,lT(l,y)));break;case 22:T=l.memoizedState!==null;var ie=h!==null&&h.memoizedState!==null,Te=aa,De=$n;if(aa=Te||T,$n=De||ie,kr(d,l),$n=De,aa=Te,Nr(l),y&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(h===null||ie||aa||$n||ec(l)),h=null,d=l;;){if(d.tag===5||d.tag===26){if(h===null){ie=h=d;try{if(x=ie.stateNode,T)O=x.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{H=ie.stateNode;var Ne=ie.memoizedProps.style,Ee=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;H.style.display=Ee==null||typeof Ee=="boolean"?"":(""+Ee).trim()}}catch(Ie){hn(ie,ie.return,Ie)}}}else if(d.tag===6){if(h===null){ie=d;try{ie.stateNode.nodeValue=T?"":ie.memoizedProps}catch(Ie){hn(ie,ie.return,Ie)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=l.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,lT(l,h))));break;case 19:kr(d,l),Nr(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,lT(l,y)));break;case 30:break;case 21:break;default:kr(d,l),Nr(l)}}function Nr(l){var d=l.flags;if(d&2){try{for(var h,y=l.return;y!==null;){if(vM(y)){h=y;break}y=y.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var T=h.stateNode,x=sT(l);iv(l,x,T);break;case 5:var O=h.stateNode;h.flags&32&&(yl(O,""),h.flags&=-33);var H=sT(l);iv(l,H,O);break;case 3:case 4:var ie=h.stateNode.containerInfo,Te=sT(l);oT(l,Te,ie);break;default:throw Error(i(161))}}catch(De){hn(l,l.return,De)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function xM(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;xM(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Ml(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)TM(l,d.alternate,d),d=d.sibling}function ec(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:xl(4,d,d.return),ec(d);break;case 1:go(d,d.return);var h=d.stateNode;typeof h.componentWillUnmount=="function"&&bM(d,d.return,h),ec(d);break;case 27:fm(d.stateNode);case 26:case 5:go(d,d.return),ec(d);break;case 22:d.memoizedState===null&&ec(d);break;case 30:ec(d);break;default:ec(d)}l=l.sibling}}function Dl(l,d,h){for(h=h&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,T=l,x=d,O=x.flags;switch(x.tag){case 0:case 11:case 15:Dl(T,x,h),nm(4,x);break;case 1:if(Dl(T,x,h),y=x,T=y.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Te){hn(y,y.return,Te)}if(y=x,T=y.updateQueue,T!==null){var H=y.stateNode;try{var ie=T.shared.hiddenCallbacks;if(ie!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ie.length;T++)ix(ie[T],H)}catch(Te){hn(y,y.return,Te)}}h&&O&64&&yM(x),im(x,x.return);break;case 27:SM(x);case 26:case 5:Dl(T,x,h),h&&y===null&&O&4&&_M(x),im(x,x.return);break;case 12:Dl(T,x,h);break;case 13:Dl(T,x,h),h&&O&4&&CM(T,x);break;case 22:x.memoizedState===null&&Dl(T,x,h),im(x,x.return);break;case 30:break;default:Dl(T,x,h)}d=d.sibling}}function uT(l,d){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&jp(h))}function cT(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&jp(l))}function yo(l,d,h,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)MM(l,d,h,y),d=d.sibling}function MM(l,d,h,y){var T=d.flags;switch(d.tag){case 0:case 11:case 15:yo(l,d,h,y),T&2048&&nm(9,d);break;case 1:yo(l,d,h,y);break;case 3:yo(l,d,h,y),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&jp(l)));break;case 12:if(T&2048){yo(l,d,h,y),l=d.stateNode;try{var x=d.memoizedProps,O=x.id,H=x.onPostCommit;typeof H=="function"&&H(O,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ie){hn(d,d.return,ie)}}else yo(l,d,h,y);break;case 13:yo(l,d,h,y);break;case 23:break;case 22:x=d.stateNode,O=d.alternate,d.memoizedState!==null?x._visibility&2?yo(l,d,h,y):rm(l,d):x._visibility&2?yo(l,d,h,y):(x._visibility|=2,bf(l,d,h,y,(d.subtreeFlags&10256)!==0)),T&2048&&uT(O,d);break;case 24:yo(l,d,h,y),T&2048&&cT(d.alternate,d);break;default:yo(l,d,h,y)}}function bf(l,d,h,y,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var x=l,O=d,H=h,ie=y,Te=O.flags;switch(O.tag){case 0:case 11:case 15:bf(x,O,H,ie,T),nm(8,O);break;case 23:break;case 22:var De=O.stateNode;O.memoizedState!==null?De._visibility&2?bf(x,O,H,ie,T):rm(x,O):(De._visibility|=2,bf(x,O,H,ie,T)),T&&Te&2048&&uT(O.alternate,O);break;case 24:bf(x,O,H,ie,T),T&&Te&2048&&cT(O.alternate,O);break;default:bf(x,O,H,ie,T)}d=d.sibling}}function rm(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var h=l,y=d,T=y.flags;switch(y.tag){case 22:rm(h,y),T&2048&&uT(y.alternate,y);break;case 24:rm(h,y),T&2048&&cT(y.alternate,y);break;default:rm(h,y)}d=d.sibling}}var sm=8192;function _f(l){if(l.subtreeFlags&sm)for(l=l.child;l!==null;)DM(l),l=l.sibling}function DM(l){switch(l.tag){case 26:_f(l),l.flags&sm&&l.memoizedState!==null&&Yz(Os,l.memoizedState,l.memoizedProps);break;case 5:_f(l);break;case 3:case 4:var d=Os;Os=gv(l.stateNode.containerInfo),_f(l),Os=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=sm,sm=16777216,_f(l),sm=d):_f(l));break;default:_f(l)}}function RM(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function om(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var h=0;h<d.length;h++){var y=d[h];Ai=y,NM(y,l)}RM(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)kM(l),l=l.sibling}function kM(l){switch(l.tag){case 0:case 11:case 15:om(l),l.flags&2048&&xl(9,l,l.return);break;case 3:om(l);break;case 12:om(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,rv(l)):om(l);break;default:om(l)}}function rv(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var h=0;h<d.length;h++){var y=d[h];Ai=y,NM(y,l)}RM(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:xl(8,d,d.return),rv(d);break;case 22:h=d.stateNode,h._visibility&2&&(h._visibility&=-3,rv(d));break;default:rv(d)}l=l.sibling}}function NM(l,d){for(;Ai!==null;){var h=Ai;switch(h.tag){case 0:case 11:case 15:xl(8,h,d);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:jp(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Ai=y;else e:for(h=l;Ai!==null;){y=Ai;var T=y.sibling,x=y.return;if(AM(y),y===h){Ai=null;break e}if(T!==null){T.return=x,Ai=T;break e}Ai=x}}}var uz={getCacheForType:function(l){var d=qi(fi),h=d.data.get(l);return h===void 0&&(h=l(),d.data.set(l,h)),h}},cz=typeof WeakMap=="function"?WeakMap:Map,en=0,gn=null,Ft=null,Ht=0,tn=0,Or=null,Rl=!1,vf=!1,dT=!1,ua=0,Vn=0,kl=0,tc=0,fT=0,fs=0,Sf=0,am=null,yr=null,hT=!1,pT=0,sv=1/0,ov=null,Nl=null,ki=0,Ol=null,wf=null,Tf=0,mT=0,gT=null,OM=null,lm=0,yT=null;function Br(){if((en&2)!==0&&Ht!==0)return Ht&-Ht;if(Q.T!==null){var l=cf;return l!==0?l:AT()}return jd()}function BM(){fs===0&&(fs=(Ht&536870912)===0||Xt?mn():536870912);var l=ds.current;return l!==null&&(l.flags|=32),fs}function Fr(l,d,h){(l===gn&&(tn===2||tn===9)||l.cancelPendingCommit!==null)&&(Af(l,0),Bl(l,Ht,fs,!1)),pr(l,h),((en&2)===0||l!==gn)&&(l===gn&&((en&2)===0&&(tc|=h),Vn===4&&Bl(l,Ht,fs,!1)),bo(l))}function FM(l,d,h){if((en&6)!==0)throw Error(i(327));var y=!h&&(d&124)===0&&(d&l.expiredLanes)===0||Ce(l,d),T=y?hz(l,d):vT(l,d,!0),x=y;do{if(T===0){vf&&!y&&Bl(l,d,0,!1);break}else{if(h=l.current.alternate,x&&!dz(h)){T=vT(l,d,!1),x=!1;continue}if(T===2){if(x=d,l.errorRecoveryDisabledLanes&x)var O=0;else O=l.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){d=O;e:{var H=l;T=am;var ie=H.current.memoizedState.isDehydrated;if(ie&&(Af(H,O).flags|=256),O=vT(H,O,!1),O!==2){if(dT&&!ie){H.errorRecoveryDisabledLanes|=x,tc|=x,T=4;break e}x=yr,yr=T,x!==null&&(yr===null?yr=x:yr.push.apply(yr,x))}T=O}if(x=!1,T!==2)continue}}if(T===1){Af(l,0),Bl(l,d,0,!0);break}e:{switch(y=l,x=T,x){case 0:case 1:throw Error(i(345));case 4:if((d&4194048)!==d)break;case 6:Bl(y,d,fs,!Rl);break e;case 2:yr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((d&62914560)===d&&(T=pT+300-Zt(),10<T)){if(Bl(y,d,fs,!Rl),vn(y,0,!0)!==0)break e;y.timeoutHandle=dD(PM.bind(null,y,h,yr,ov,hT,d,fs,tc,Sf,Rl,x,2,-0,0),T);break e}PM(y,h,yr,ov,hT,d,fs,tc,Sf,Rl,x,0,-0,0)}}break}while(!0);bo(l)}function PM(l,d,h,y,T,x,O,H,ie,Te,De,Ne,Ee,Ie){if(l.timeoutHandle=-1,Ne=d.subtreeFlags,(Ne&8192||(Ne&16785408)===16785408)&&(mm={stylesheets:null,count:0,unsuspend:$z},DM(d),Ne=Wz(),Ne!==null)){l.cancelPendingCommit=Ne(HM.bind(null,l,d,x,h,y,T,O,H,ie,De,1,Ee,Ie)),Bl(l,x,O,!Te);return}HM(l,d,x,h,y,T,O,H,ie)}function dz(l){for(var d=l;;){var h=d.tag;if((h===0||h===11||h===15)&&d.flags&16384&&(h=d.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var T=h[y],x=T.getSnapshot;T=T.value;try{if(!Dr(x(),T))return!1}catch{return!1}}if(h=d.child,d.subtreeFlags&16384&&h!==null)h.return=d,d=h;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Bl(l,d,h,y){d&=~fT,d&=~tc,l.suspendedLanes|=d,l.pingedLanes&=~d,y&&(l.warmLanes|=d),y=l.expirationTimes;for(var T=d;0<T;){var x=31-Le(T),O=1<<x;y[x]=-1,T&=~O}h!==0&&Ru(l,h,d)}function av(){return(en&6)===0?(um(0),!1):!0}function bT(){if(Ft!==null){if(tn===0)var l=Ft.return;else l=Ft,ta=Ku=null,Bw(l),gf=null,Qp=0,l=Ft;for(;l!==null;)gM(l.alternate,l),l=l.return;Ft=null}}function Af(l,d){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,Mz(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),bT(),gn=l,Ft=h=Zo(l.current,null),Ht=d,tn=0,Or=null,Rl=!1,vf=Ce(l,d),dT=!1,Sf=fs=fT=tc=kl=Vn=0,yr=am=null,hT=!1,(d&8)!==0&&(d|=d&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=d;0<y;){var T=31-Le(y),x=1<<T;d|=l[T],y&=~x}return ua=d,M_(),h}function LM(l,d){kt=null,Q.H=W_,d===Hp||d===L_?(d=tx(),tn=3):d===ZI?(d=tx(),tn=4):tn=d===nM?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Or=d,Ft===null&&(Vn=1,Q_(l,as(d,l.current)))}function UM(){var l=Q.H;return Q.H=W_,l===null?W_:l}function zM(){var l=Q.A;return Q.A=uz,l}function _T(){Vn=4,Rl||(Ht&4194048)!==Ht&&ds.current!==null||(vf=!0),(kl&134217727)===0&&(tc&134217727)===0||gn===null||Bl(gn,Ht,fs,!1)}function vT(l,d,h){var y=en;en|=2;var T=UM(),x=zM();(gn!==l||Ht!==d)&&(ov=null,Af(l,d)),d=!1;var O=Vn;e:do try{if(tn!==0&&Ft!==null){var H=Ft,ie=Or;switch(tn){case 8:bT(),O=6;break e;case 3:case 2:case 9:case 6:ds.current===null&&(d=!0);var Te=tn;if(tn=0,Or=null,Ef(l,H,ie,Te),h&&vf){O=0;break e}break;default:Te=tn,tn=0,Or=null,Ef(l,H,ie,Te)}}fz(),O=Vn;break}catch(De){LM(l,De)}while(!0);return d&&l.shellSuspendCounter++,ta=Ku=null,en=y,Q.H=T,Q.A=x,Ft===null&&(gn=null,Ht=0,M_()),O}function fz(){for(;Ft!==null;)VM(Ft)}function hz(l,d){var h=en;en|=2;var y=UM(),T=zM();gn!==l||Ht!==d?(ov=null,sv=Zt()+500,Af(l,d)):vf=Ce(l,d);e:do try{if(tn!==0&&Ft!==null){d=Ft;var x=Or;t:switch(tn){case 1:tn=0,Or=null,Ef(l,d,x,1);break;case 2:case 9:if(QI(x)){tn=0,Or=null,jM(d);break}d=function(){tn!==2&&tn!==9||gn!==l||(tn=7),bo(l)},x.then(d,d);break e;case 3:tn=7;break e;case 4:tn=5;break e;case 7:QI(x)?(tn=0,Or=null,jM(d)):(tn=0,Or=null,Ef(l,d,x,7));break;case 5:var O=null;switch(Ft.tag){case 26:O=Ft.memoizedState;case 5:case 27:var H=Ft;if(!O||TD(O)){tn=0,Or=null;var ie=H.sibling;if(ie!==null)Ft=ie;else{var Te=H.return;Te!==null?(Ft=Te,lv(Te)):Ft=null}break t}}tn=0,Or=null,Ef(l,d,x,5);break;case 6:tn=0,Or=null,Ef(l,d,x,6);break;case 8:bT(),Vn=6;break e;default:throw Error(i(462))}}pz();break}catch(De){LM(l,De)}while(!0);return ta=Ku=null,Q.H=y,Q.A=T,en=h,Ft!==null?0:(gn=null,Ht=0,M_(),Vn)}function pz(){for(;Ft!==null&&!Ut();)VM(Ft)}function VM(l){var d=pM(l.alternate,l,ua);l.memoizedProps=l.pendingProps,d===null?lv(l):Ft=d}function jM(l){var d=l,h=d.alternate;switch(d.tag){case 15:case 0:d=lM(h,d,d.pendingProps,d.type,void 0,Ht);break;case 11:d=lM(h,d,d.pendingProps,d.type.render,d.ref,Ht);break;case 5:Bw(d);default:gM(h,d),d=Ft=qI(d,ua),d=pM(h,d,ua)}l.memoizedProps=l.pendingProps,d===null?lv(l):Ft=d}function Ef(l,d,h,y){ta=Ku=null,Bw(d),gf=null,Qp=0;var T=d.return;try{if(iz(l,T,d,h,Ht)){Vn=1,Q_(l,as(h,l.current)),Ft=null;return}}catch(x){if(T!==null)throw Ft=T,x;Vn=1,Q_(l,as(h,l.current)),Ft=null;return}d.flags&32768?(Xt||y===1?l=!0:vf||(Ht&536870912)!==0?l=!1:(Rl=l=!0,(y===2||y===9||y===3||y===6)&&(y=ds.current,y!==null&&y.tag===13&&(y.flags|=16384))),qM(d,l)):lv(d)}function lv(l){var d=l;do{if((d.flags&32768)!==0){qM(d,Rl);return}l=d.return;var h=sz(d.alternate,d,ua);if(h!==null){Ft=h;return}if(d=d.sibling,d!==null){Ft=d;return}Ft=d=l}while(d!==null);Vn===0&&(Vn=5)}function qM(l,d){do{var h=oz(l.alternate,l);if(h!==null){h.flags&=32767,Ft=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!d&&(l=l.sibling,l!==null)){Ft=l;return}Ft=l=h}while(l!==null);Vn=6,Ft=null}function HM(l,d,h,y,T,x,O,H,ie){l.cancelPendingCommit=null;do uv();while(ki!==0);if((en&6)!==0)throw Error(i(327));if(d!==null){if(d===l.current)throw Error(i(177));if(x=d.lanes|d.childLanes,x|=cw,$o(l,h,x,O,H,ie),l===gn&&(Ft=gn=null,Ht=0),wf=d,Ol=l,Tf=h,mT=x,gT=T,OM=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,bz(Se,function(){return KM(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=Q.T,Q.T=null,T=V.p,V.p=2,O=en,en|=4;try{az(l,d,h)}finally{en=O,V.p=T,Q.T=y}}ki=1,GM(),$M(),YM()}}function GM(){if(ki===1){ki=0;var l=Ol,d=wf,h=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||h){h=Q.T,Q.T=null;var y=V.p;V.p=2;var T=en;en|=4;try{IM(d,l);var x=kT,O=NI(l.containerInfo),H=x.focusedElem,ie=x.selectionRange;if(O!==H&&H&&H.ownerDocument&&kI(H.ownerDocument.documentElement,H)){if(ie!==null&&sw(H)){var Te=ie.start,De=ie.end;if(De===void 0&&(De=Te),"selectionStart"in H)H.selectionStart=Te,H.selectionEnd=Math.min(De,H.value.length);else{var Ne=H.ownerDocument||document,Ee=Ne&&Ne.defaultView||window;if(Ee.getSelection){var Ie=Ee.getSelection(),gt=H.textContent.length,pt=Math.min(ie.start,gt),cn=ie.end===void 0?pt:Math.min(ie.end,gt);!Ie.extend&&pt>cn&&(O=cn,cn=pt,pt=O);var he=RI(H,pt),le=RI(H,cn);if(he&&le&&(Ie.rangeCount!==1||Ie.anchorNode!==he.node||Ie.anchorOffset!==he.offset||Ie.focusNode!==le.node||Ie.focusOffset!==le.offset)){var _e=Ne.createRange();_e.setStart(he.node,he.offset),Ie.removeAllRanges(),pt>cn?(Ie.addRange(_e),Ie.extend(le.node,le.offset)):(_e.setEnd(le.node,le.offset),Ie.addRange(_e))}}}}for(Ne=[],Ie=H;Ie=Ie.parentNode;)Ie.nodeType===1&&Ne.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Ne.length;H++){var ke=Ne[H];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}Sv=!!RT,kT=RT=null}finally{en=T,V.p=y,Q.T=h}}l.current=d,ki=2}}function $M(){if(ki===2){ki=0;var l=Ol,d=wf,h=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||h){h=Q.T,Q.T=null;var y=V.p;V.p=2;var T=en;en|=4;try{TM(l,d.alternate,d)}finally{en=T,V.p=y,Q.T=h}}ki=3}}function YM(){if(ki===4||ki===3){ki=0,zt();var l=Ol,d=wf,h=Tf,y=OM;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ki=5:(ki=0,wf=Ol=null,WM(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(Nl=null),vp(h),d=d.stateNode,ue&&typeof ue.onCommitFiberRoot=="function")try{ue.onCommitFiberRoot(Z,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=Q.T,T=V.p,V.p=2,Q.T=null;try{for(var x=l.onRecoverableError,O=0;O<y.length;O++){var H=y[O];x(H.value,{componentStack:H.stack})}}finally{Q.T=d,V.p=T}}(Tf&3)!==0&&uv(),bo(l),T=l.pendingLanes,(h&4194090)!==0&&(T&42)!==0?l===yT?lm++:(lm=0,yT=l):lm=0,um(0)}}function WM(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,jp(d)))}function uv(l){return GM(),$M(),YM(),KM()}function KM(){if(ki!==5)return!1;var l=Ol,d=mT;mT=0;var h=vp(Tf),y=Q.T,T=V.p;try{V.p=32>h?32:h,Q.T=null,h=gT,gT=null;var x=Ol,O=Tf;if(ki=0,wf=Ol=null,Tf=0,(en&6)!==0)throw Error(i(331));var H=en;if(en|=4,kM(x.current),MM(x,x.current,O,h),en=H,um(0,!1),ue&&typeof ue.onPostCommitFiberRoot=="function")try{ue.onPostCommitFiberRoot(Z,x)}catch{}return!0}finally{V.p=T,Q.T=y,WM(l,d)}}function XM(l,d,h){d=as(h,d),d=Kw(l.stateNode,d,2),l=Al(l,d,2),l!==null&&(pr(l,2),bo(l))}function hn(l,d,h){if(l.tag===3)XM(l,l,h);else for(;d!==null;){if(d.tag===3){XM(d,l,h);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Nl===null||!Nl.has(y))){l=as(h,l),h=eM(2),y=Al(d,h,2),y!==null&&(tM(h,y,d,l),pr(y,2),bo(y));break}}d=d.return}}function ST(l,d,h){var y=l.pingCache;if(y===null){y=l.pingCache=new cz;var T=new Set;y.set(d,T)}else T=y.get(d),T===void 0&&(T=new Set,y.set(d,T));T.has(h)||(dT=!0,T.add(h),l=mz.bind(null,l,d,h),d.then(l,l))}function mz(l,d,h){var y=l.pingCache;y!==null&&y.delete(d),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,gn===l&&(Ht&h)===h&&(Vn===4||Vn===3&&(Ht&62914560)===Ht&&300>Zt()-pT?(en&2)===0&&Af(l,0):fT|=h,Sf===Ht&&(Sf=0)),bo(l)}function JM(l,d){d===0&&(d=Ui()),l=of(l,d),l!==null&&(pr(l,d),bo(l))}function gz(l){var d=l.memoizedState,h=0;d!==null&&(h=d.retryLane),JM(l,h)}function yz(l,d){var h=0;switch(l.tag){case 13:var y=l.stateNode,T=l.memoizedState;T!==null&&(h=T.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(d),JM(l,h)}function bz(l,d){return $e(l,d)}var cv=null,Cf=null,wT=!1,dv=!1,TT=!1,nc=0;function bo(l){l!==Cf&&l.next===null&&(Cf===null?cv=Cf=l:Cf=Cf.next=l),dv=!0,wT||(wT=!0,vz())}function um(l,d){if(!TT&&dv){TT=!0;do for(var h=!1,y=cv;y!==null;){if(l!==0){var T=y.pendingLanes;if(T===0)var x=0;else{var O=y.suspendedLanes,H=y.pingedLanes;x=(1<<31-Le(42|l)+1)-1,x&=T&~(O&~H),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(h=!0,tD(y,x))}else x=Ht,x=vn(y,y===gn?x:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(x&3)===0||Ce(y,x)||(h=!0,tD(y,x));y=y.next}while(h);TT=!1}}function _z(){ZM()}function ZM(){dv=wT=!1;var l=0;nc!==0&&(xz()&&(l=nc),nc=0);for(var d=Zt(),h=null,y=cv;y!==null;){var T=y.next,x=QM(y,d);x===0?(y.next=null,h===null?cv=T:h.next=T,T===null&&(Cf=h)):(h=y,(l!==0||(x&3)!==0)&&(dv=!0)),y=T}um(l)}function QM(l,d){for(var h=l.suspendedLanes,y=l.pingedLanes,T=l.expirationTimes,x=l.pendingLanes&-62914561;0<x;){var O=31-Le(x),H=1<<O,ie=T[O];ie===-1?((H&h)===0||(H&y)!==0)&&(T[O]=ve(H,d)):ie<=d&&(l.expiredLanes|=H),x&=~H}if(d=gn,h=Ht,h=vn(l,l===d?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,h===0||l===d&&(tn===2||tn===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&tt(y),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||Ce(l,h)){if(d=h&-h,d===l.callbackPriority)return d;switch(y!==null&&tt(y),vp(h)){case 2:case 8:h=Ae;break;case 32:h=Se;break;case 268435456:h=ge;break;default:h=Se}return y=eD.bind(null,l),h=$e(h,y),l.callbackPriority=d,l.callbackNode=h,d}return y!==null&&y!==null&&tt(y),l.callbackPriority=2,l.callbackNode=null,2}function eD(l,d){if(ki!==0&&ki!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(uv()&&l.callbackNode!==h)return null;var y=Ht;return y=vn(l,l===gn?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(FM(l,y,d),QM(l,Zt()),l.callbackNode!=null&&l.callbackNode===h?eD.bind(null,l):null)}function tD(l,d){if(uv())return null;FM(l,d,!0)}function vz(){Dz(function(){(en&6)!==0?$e(we,_z):ZM()})}function AT(){return nc===0&&(nc=mn()),nc}function nD(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Wd(""+l)}function iD(l,d){var h=d.ownerDocument.createElement("input");return h.name=d.name,h.value=d.value,l.id&&h.setAttribute("form",l.id),d.parentNode.insertBefore(h,d),l=new FormData(l),h.parentNode.removeChild(h),l}function Sz(l,d,h,y,T){if(d==="submit"&&h&&h.stateNode===T){var x=nD((T[zi]||null).action),O=y.submitter;O&&(d=(d=O[zi]||null)?nD(d.formAction):O.getAttribute("formAction"),d!==null&&(x=d,O=null));var H=new vl("action","action",null,y,T);l.push({event:H,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(nc!==0){var ie=O?iD(T,O):new FormData(T);Hw(h,{pending:!0,data:ie,method:T.method,action:x},null,ie)}}else typeof x=="function"&&(H.preventDefault(),ie=O?iD(T,O):new FormData(T),Hw(h,{pending:!0,data:ie,method:T.method,action:x},x,ie))},currentTarget:T}]})}}for(var ET=0;ET<uw.length;ET++){var CT=uw[ET],wz=CT.toLowerCase(),Tz=CT[0].toUpperCase()+CT.slice(1);Ns(wz,"on"+Tz)}Ns(FI,"onAnimationEnd"),Ns(PI,"onAnimationIteration"),Ns(LI,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(z4,"onTransitionRun"),Ns(V4,"onTransitionStart"),Ns(j4,"onTransitionCancel"),Ns(UI,"onTransitionEnd"),pl("onMouseEnter",["mouseout","mouseover"]),pl("onMouseLeave",["mouseout","mouseover"]),pl("onPointerEnter",["pointerout","pointerover"]),pl("onPointerLeave",["pointerout","pointerover"]),Yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Az=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cm));function rD(l,d){d=(d&4)!==0;for(var h=0;h<l.length;h++){var y=l[h],T=y.event;y=y.listeners;e:{var x=void 0;if(d)for(var O=y.length-1;0<=O;O--){var H=y[O],ie=H.instance,Te=H.currentTarget;if(H=H.listener,ie!==x&&T.isPropagationStopped())break e;x=H,T.currentTarget=Te;try{x(T)}catch(De){Z_(De)}T.currentTarget=null,x=ie}else for(O=0;O<y.length;O++){if(H=y[O],ie=H.instance,Te=H.currentTarget,H=H.listener,ie!==x&&T.isPropagationStopped())break e;x=H,T.currentTarget=Te;try{x(T)}catch(De){Z_(De)}T.currentTarget=null,x=ie}}}}function Pt(l,d){var h=d[ti];h===void 0&&(h=d[ti]=new Set);var y=l+"__bubble";h.has(y)||(sD(d,l,2,!1),h.add(y))}function IT(l,d,h){var y=0;d&&(y|=4),sD(h,l,y,d)}var fv="_reactListening"+Math.random().toString(36).slice(2);function xT(l){if(!l[fv]){l[fv]=!0,hl.forEach(function(h){h!=="selectionchange"&&(Az.has(h)||IT(h,!1,l),IT(h,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[fv]||(d[fv]=!0,IT("selectionchange",!1,d))}}function sD(l,d,h,y){switch(MD(d)){case 2:var T=Jz;break;case 8:T=Zz;break;default:T=jT}h=T.bind(null,d,h,l),T=void 0,!Jd||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),y?T!==void 0?l.addEventListener(d,h,{capture:!0,passive:T}):l.addEventListener(d,h,!0):T!==void 0?l.addEventListener(d,h,{passive:T}):l.addEventListener(d,h,!1)}function MT(l,d,h,y,T){var x=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var H=y.stateNode.containerInfo;if(H===T)break;if(O===4)for(O=y.return;O!==null;){var ie=O.tag;if((ie===3||ie===4)&&O.stateNode.containerInfo===T)return;O=O.return}for(;H!==null;){if(O=uo(H),O===null)return;if(ie=O.tag,ie===5||ie===6||ie===26||ie===27){y=x=O;continue e}H=H.parentNode}}y=y.return}Xd(function(){var Te=x,De=Pu(h),Ne=[];e:{var Ee=zI.get(l);if(Ee!==void 0){var Ie=vl,gt=l;switch(l){case"keypress":if(Qd(h)===0)break e;case"keydown":case"keyup":Ie=ct;break;case"focusin":gt="focus",Ie=K;break;case"focusout":gt="blur",Ie=K;break;case"beforeblur":case"afterblur":Ie=K;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=P;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=ks;break;case FI:case PI:case LI:Ie=ye;break;case UI:Ie=ho;break;case"scroll":case"scrollend":Ie=tw;break;case"wheel":Ie=ef;break;case"copy":case"cut":case"paste":Ie=Fe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Un;break;case"toggle":case"beforetoggle":Ie=I4}var pt=(d&4)!==0,cn=!pt&&(l==="scroll"||l==="scrollend"),he=pt?Ee!==null?Ee+"Capture":null:Ee;pt=[];for(var le=Te,_e;le!==null;){var ke=le;if(_e=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||_e===null||he===null||(ke=_l(le,he),ke!=null&&pt.push(dm(le,ke,_e))),cn)break;le=le.return}0<pt.length&&(Ee=new Ie(Ee,gt,null,h,De),Ne.push({event:Ee,listeners:pt}))}}if((d&7)===0){e:{if(Ee=l==="mouseover"||l==="pointerover",Ie=l==="mouseout"||l==="pointerout",Ee&&h!==Kd&&(gt=h.relatedTarget||h.fromElement)&&(uo(gt)||gt[cl]))break e;if((Ie||Ee)&&(Ee=De.window===De?De:(Ee=De.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Ie?(gt=h.relatedTarget||h.toElement,Ie=Te,gt=gt?uo(gt):null,gt!==null&&(cn=s(gt),pt=gt.tag,gt!==cn||pt!==5&&pt!==27&&pt!==6)&&(gt=null)):(Ie=null,gt=Te),Ie!==gt)){if(pt=Dn,ke="onMouseLeave",he="onMouseEnter",le="mouse",(l==="pointerout"||l==="pointerover")&&(pt=Un,ke="onPointerLeave",he="onPointerEnter",le="pointer"),cn=Ie==null?Ee:ku(Ie),_e=gt==null?Ee:ku(gt),Ee=new pt(ke,le+"leave",Ie,h,De),Ee.target=cn,Ee.relatedTarget=_e,ke=null,uo(De)===Te&&(pt=new pt(he,le+"enter",gt,h,De),pt.target=_e,pt.relatedTarget=cn,ke=pt),cn=ke,Ie&&gt)t:{for(pt=Ie,he=gt,le=0,_e=pt;_e;_e=If(_e))le++;for(_e=0,ke=he;ke;ke=If(ke))_e++;for(;0<le-_e;)pt=If(pt),le--;for(;0<_e-le;)he=If(he),_e--;for(;le--;){if(pt===he||he!==null&&pt===he.alternate)break t;pt=If(pt),he=If(he)}pt=null}else pt=null;Ie!==null&&oD(Ne,Ee,Ie,pt,!1),gt!==null&&cn!==null&&oD(Ne,cn,gt,pt,!0)}}e:{if(Ee=Te?ku(Te):window,Ie=Ee.nodeName&&Ee.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&Ee.type==="file")var Qe=EI;else if(TI(Ee))if(CI)Qe=P4;else{Qe=B4;var Ot=O4}else Ie=Ee.nodeName,!Ie||Ie.toLowerCase()!=="input"||Ee.type!=="checkbox"&&Ee.type!=="radio"?Te&&Yd(Te.elementType)&&(Qe=EI):Qe=F4;if(Qe&&(Qe=Qe(l,Te))){AI(Ne,Qe,h,De);break e}Ot&&Ot(l,Ee,Te),l==="focusout"&&Te&&Ee.type==="number"&&Te.memoizedProps.value!=null&&xp(Ee,"number",Ee.value)}switch(Ot=Te?ku(Te):window,l){case"focusin":(TI(Ot)||Ot.contentEditable==="true")&&(nf=Ot,ow=Te,Pp=null);break;case"focusout":Pp=ow=nf=null;break;case"mousedown":aw=!0;break;case"contextmenu":case"mouseup":case"dragend":aw=!1,OI(Ne,h,De);break;case"selectionchange":if(U4)break;case"keydown":case"keyup":OI(Ne,h,De)}var lt;if(nw)e:{switch(l){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else tf?SI(l,h)&&(mt="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(mt="onCompositionStart");mt&&(bI&&h.locale!=="ko"&&(tf||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&tf&&(lt=Rp()):(Rs=De,Zd="value"in Rs?Rs.value:Rs.textContent,tf=!0)),Ot=hv(Te,mt),0<Ot.length&&(mt=new qe(mt,l,null,h,De),Ne.push({event:mt,listeners:Ot}),lt?mt.data=lt:(lt=wI(h),lt!==null&&(mt.data=lt)))),(lt=M4?D4(l,h):R4(l,h))&&(mt=hv(Te,"onBeforeInput"),0<mt.length&&(Ot=new qe("onBeforeInput","beforeinput",null,h,De),Ne.push({event:Ot,listeners:mt}),Ot.data=lt)),Sz(Ne,l,Te,h,De)}rD(Ne,d)})}function dm(l,d,h){return{instance:l,listener:d,currentTarget:h}}function hv(l,d){for(var h=d+"Capture",y=[];l!==null;){var T=l,x=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||x===null||(T=_l(l,h),T!=null&&y.unshift(dm(l,T,x)),T=_l(l,d),T!=null&&y.push(dm(l,T,x))),l.tag===3)return y;l=l.return}return[]}function If(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function oD(l,d,h,y,T){for(var x=d._reactName,O=[];h!==null&&h!==y;){var H=h,ie=H.alternate,Te=H.stateNode;if(H=H.tag,ie!==null&&ie===y)break;H!==5&&H!==26&&H!==27||Te===null||(ie=Te,T?(Te=_l(h,x),Te!=null&&O.unshift(dm(h,Te,ie))):T||(Te=_l(h,x),Te!=null&&O.push(dm(h,Te,ie)))),h=h.return}O.length!==0&&l.push({event:d,listeners:O})}var Ez=/\r\n?/g,Cz=/\u0000|\uFFFD/g;function aD(l){return(typeof l=="string"?l:""+l).replace(Ez,`
`).replace(Cz,"")}function lD(l,d){return d=aD(d),aD(l)===d}function pv(){}function un(l,d,h,y,T,x){switch(h){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||yl(l,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&yl(l,""+y);break;case"className":ml(l,"class",y);break;case"tabIndex":ml(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ml(l,h,y);break;case"style":Fu(l,y,x);break;case"data":if(d!=="object"){ml(l,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||h!=="href")){l.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=Wd(""+y),l.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(h==="formAction"?(d!=="input"&&un(l,d,"name",T.name,T,null),un(l,d,"formEncType",T.formEncType,T,null),un(l,d,"formMethod",T.formMethod,T,null),un(l,d,"formTarget",T.formTarget,T,null)):(un(l,d,"encType",T.encType,T,null),un(l,d,"method",T.method,T,null),un(l,d,"target",T.target,T,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(h);break}y=Wd(""+y),l.setAttribute(h,y);break;case"onClick":y!=null&&(l.onclick=pv);break;case"onScroll":y!=null&&Pt("scroll",l);break;case"onScrollEnd":y!=null&&Pt("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(h=y.__html,h!=null){if(T.children!=null)throw Error(i(60));l.innerHTML=h}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}h=Wd(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""+y):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":y===!0?l.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(h,y):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(h,y):l.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(h):l.setAttribute(h,y);break;case"popover":Pt("beforetoggle",l),Pt("toggle",l),Vi(l,"popover",y);break;case"xlinkActuate":ss(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ss(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ss(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ss(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ss(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ss(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ss(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ss(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ss(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Vi(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=ew.get(h)||h,Vi(l,h,y))}}function DT(l,d,h,y,T,x){switch(h){case"style":Fu(l,y,x);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(h=y.__html,h!=null){if(T.children!=null)throw Error(i(60));l.innerHTML=h}}break;case"children":typeof y=="string"?yl(l,y):(typeof y=="number"||typeof y=="bigint")&&yl(l,""+y);break;case"onScroll":y!=null&&Pt("scroll",l);break;case"onScrollEnd":y!=null&&Pt("scrollend",l);break;case"onClick":y!=null&&(l.onclick=pv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nu.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(T=h.endsWith("Capture"),d=h.slice(2,T?h.length-7:void 0),x=l[zi]||null,x=x!=null?x[h]:null,typeof x=="function"&&l.removeEventListener(d,x,T),typeof y=="function")){typeof x!="function"&&x!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(d,y,T);break e}h in l?l[h]=y:y===!0?l.setAttribute(h,""):Vi(l,h,y)}}}function Ni(l,d,h){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",l),Pt("load",l);var y=!1,T=!1,x;for(x in h)if(h.hasOwnProperty(x)){var O=h[x];if(O!=null)switch(x){case"src":y=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,d));default:un(l,d,x,O,h,null)}}T&&un(l,d,"srcSet",h.srcSet,h,null),y&&un(l,d,"src",h.src,h,null);return;case"input":Pt("invalid",l);var H=x=O=T=null,ie=null,Te=null;for(y in h)if(h.hasOwnProperty(y)){var De=h[y];if(De!=null)switch(y){case"name":T=De;break;case"type":O=De;break;case"checked":ie=De;break;case"defaultChecked":Te=De;break;case"value":x=De;break;case"defaultValue":H=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(i(137,d));break;default:un(l,d,y,De,h,null)}}ZS(l,x,H,ie,Te,O,T,!1),Gd(l);return;case"select":Pt("invalid",l),y=O=x=null;for(T in h)if(h.hasOwnProperty(T)&&(H=h[T],H!=null))switch(T){case"value":x=H;break;case"defaultValue":O=H;break;case"multiple":y=H;default:un(l,d,T,H,h,null)}d=x,h=O,l.multiple=!!y,d!=null?Bu(l,!!y,d,!1):h!=null&&Bu(l,!!y,h,!0);return;case"textarea":Pt("invalid",l),x=T=y=null;for(O in h)if(h.hasOwnProperty(O)&&(H=h[O],H!=null))switch(O){case"value":y=H;break;case"defaultValue":T=H;break;case"children":x=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(91));break;default:un(l,d,O,H,h,null)}A_(l,y,T,x),Gd(l);return;case"option":for(ie in h)if(h.hasOwnProperty(ie)&&(y=h[ie],y!=null))switch(ie){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:un(l,d,ie,y,h,null)}return;case"dialog":Pt("beforetoggle",l),Pt("toggle",l),Pt("cancel",l),Pt("close",l);break;case"iframe":case"object":Pt("load",l);break;case"video":case"audio":for(y=0;y<cm.length;y++)Pt(cm[y],l);break;case"image":Pt("error",l),Pt("load",l);break;case"details":Pt("toggle",l);break;case"embed":case"source":case"link":Pt("error",l),Pt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Te in h)if(h.hasOwnProperty(Te)&&(y=h[Te],y!=null))switch(Te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,d));default:un(l,d,Te,y,h,null)}return;default:if(Yd(d)){for(De in h)h.hasOwnProperty(De)&&(y=h[De],y!==void 0&&DT(l,d,De,y,h,void 0));return}}for(H in h)h.hasOwnProperty(H)&&(y=h[H],y!=null&&un(l,d,H,y,h,null))}function Iz(l,d,h,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,x=null,O=null,H=null,ie=null,Te=null,De=null;for(Ie in h){var Ne=h[Ie];if(h.hasOwnProperty(Ie)&&Ne!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":ie=Ne;default:y.hasOwnProperty(Ie)||un(l,d,Ie,null,y,Ne)}}for(var Ee in y){var Ie=y[Ee];if(Ne=h[Ee],y.hasOwnProperty(Ee)&&(Ie!=null||Ne!=null))switch(Ee){case"type":x=Ie;break;case"name":T=Ie;break;case"checked":Te=Ie;break;case"defaultChecked":De=Ie;break;case"value":O=Ie;break;case"defaultValue":H=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(i(137,d));break;default:Ie!==Ne&&un(l,d,Ee,Ie,y,Ne)}}$d(l,O,H,ie,Te,De,x,T);return;case"select":Ie=O=H=Ee=null;for(x in h)if(ie=h[x],h.hasOwnProperty(x)&&ie!=null)switch(x){case"value":break;case"multiple":Ie=ie;default:y.hasOwnProperty(x)||un(l,d,x,null,y,ie)}for(T in y)if(x=y[T],ie=h[T],y.hasOwnProperty(T)&&(x!=null||ie!=null))switch(T){case"value":Ee=x;break;case"defaultValue":H=x;break;case"multiple":O=x;default:x!==ie&&un(l,d,T,x,y,ie)}d=H,h=O,y=Ie,Ee!=null?Bu(l,!!h,Ee,!1):!!y!=!!h&&(d!=null?Bu(l,!!h,d,!0):Bu(l,!!h,h?[]:"",!1));return;case"textarea":Ie=Ee=null;for(H in h)if(T=h[H],h.hasOwnProperty(H)&&T!=null&&!y.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:un(l,d,H,null,y,T)}for(O in y)if(T=y[O],x=h[O],y.hasOwnProperty(O)&&(T!=null||x!=null))switch(O){case"value":Ee=T;break;case"defaultValue":Ie=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:T!==x&&un(l,d,O,T,y,x)}T_(l,Ee,Ie);return;case"option":for(var gt in h)if(Ee=h[gt],h.hasOwnProperty(gt)&&Ee!=null&&!y.hasOwnProperty(gt))switch(gt){case"selected":l.selected=!1;break;default:un(l,d,gt,null,y,Ee)}for(ie in y)if(Ee=y[ie],Ie=h[ie],y.hasOwnProperty(ie)&&Ee!==Ie&&(Ee!=null||Ie!=null))switch(ie){case"selected":l.selected=Ee&&typeof Ee!="function"&&typeof Ee!="symbol";break;default:un(l,d,ie,Ee,y,Ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in h)Ee=h[pt],h.hasOwnProperty(pt)&&Ee!=null&&!y.hasOwnProperty(pt)&&un(l,d,pt,null,y,Ee);for(Te in y)if(Ee=y[Te],Ie=h[Te],y.hasOwnProperty(Te)&&Ee!==Ie&&(Ee!=null||Ie!=null))switch(Te){case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(i(137,d));break;default:un(l,d,Te,Ee,y,Ie)}return;default:if(Yd(d)){for(var cn in h)Ee=h[cn],h.hasOwnProperty(cn)&&Ee!==void 0&&!y.hasOwnProperty(cn)&&DT(l,d,cn,void 0,y,Ee);for(De in y)Ee=y[De],Ie=h[De],!y.hasOwnProperty(De)||Ee===Ie||Ee===void 0&&Ie===void 0||DT(l,d,De,Ee,y,Ie);return}}for(var he in h)Ee=h[he],h.hasOwnProperty(he)&&Ee!=null&&!y.hasOwnProperty(he)&&un(l,d,he,null,y,Ee);for(Ne in y)Ee=y[Ne],Ie=h[Ne],!y.hasOwnProperty(Ne)||Ee===Ie||Ee==null&&Ie==null||un(l,d,Ne,Ee,y,Ie)}var RT=null,kT=null;function mv(l){return l.nodeType===9?l:l.ownerDocument}function uD(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cD(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function NT(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var OT=null;function xz(){var l=window.event;return l&&l.type==="popstate"?l===OT?!1:(OT=l,!0):(OT=null,!1)}var dD=typeof setTimeout=="function"?setTimeout:void 0,Mz=typeof clearTimeout=="function"?clearTimeout:void 0,fD=typeof Promise=="function"?Promise:void 0,Dz=typeof queueMicrotask=="function"?queueMicrotask:typeof fD<"u"?function(l){return fD.resolve(null).then(l).catch(Rz)}:dD;function Rz(l){setTimeout(function(){throw l})}function Fl(l){return l==="head"}function hD(l,d){var h=d,y=0,T=0;do{var x=h.nextSibling;if(l.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(0<y&&8>y){h=y;var O=l.ownerDocument;if(h&1&&fm(O.documentElement),h&2&&fm(O.body),h&4)for(h=O.head,fm(h),O=h.firstChild;O;){var H=O.nextSibling,ie=O.nodeName;O[dl]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&O.rel.toLowerCase()==="stylesheet"||h.removeChild(O),O=H}}if(T===0){l.removeChild(x),vm(d);return}T--}else h==="$"||h==="$?"||h==="$!"?T++:y=h.charCodeAt(0)-48;else y=0;h=x}while(h);vm(d)}function BT(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var h=d;switch(d=d.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":BT(h),wp(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function kz(l,d,h,y){for(;l.nodeType===1;){var T=h;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[dl])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(x=l.getAttribute("rel"),x==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(x!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(x=l.getAttribute("src"),(x!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&x&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var x=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===x)return l}else return l;if(l=Bs(l.nextSibling),l===null)break}return null}function Nz(l,d,h){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Bs(l.nextSibling),l===null))return null;return l}function FT(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function Oz(l,d){var h=l.ownerDocument;if(l.data!=="$?"||h.readyState==="complete")d();else{var y=function(){d(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Bs(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var PT=null;function pD(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"){if(d===0)return l;d--}else h==="/$"&&d++}l=l.previousSibling}return null}function mD(l,d,h){switch(d=mv(h),l){case"html":if(l=d.documentElement,!l)throw Error(i(452));return l;case"head":if(l=d.head,!l)throw Error(i(453));return l;case"body":if(l=d.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function fm(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);wp(l)}var hs=new Map,gD=new Set;function gv(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ca=V.d;V.d={f:Bz,r:Fz,D:Pz,C:Lz,L:Uz,m:zz,X:jz,S:Vz,M:qz};function Bz(){var l=ca.f(),d=av();return l||d}function Fz(l){var d=co(l);d!==null&&d.tag===5&&d.type==="form"?Fx(d):ca.r(l)}var xf=typeof document>"u"?null:document;function yD(l,d,h){var y=xf;if(y&&typeof d=="string"&&d){var T=ni(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof h=="string"&&(T+='[crossorigin="'+h+'"]'),gD.has(T)||(gD.add(T),l={rel:l,crossOrigin:h,href:d},y.querySelector(T)===null&&(d=y.createElement("link"),Ni(d,"link",l),qn(d),y.head.appendChild(d)))}}function Pz(l){ca.D(l),yD("dns-prefetch",l,null)}function Lz(l,d){ca.C(l,d),yD("preconnect",l,d)}function Uz(l,d,h){ca.L(l,d,h);var y=xf;if(y&&l&&d){var T='link[rel="preload"][as="'+ni(d)+'"]';d==="image"&&h&&h.imageSrcSet?(T+='[imagesrcset="'+ni(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(T+='[imagesizes="'+ni(h.imageSizes)+'"]')):T+='[href="'+ni(l)+'"]';var x=T;switch(d){case"style":x=Mf(l);break;case"script":x=Df(l)}hs.has(x)||(l=f({rel:"preload",href:d==="image"&&h&&h.imageSrcSet?void 0:l,as:d},h),hs.set(x,l),y.querySelector(T)!==null||d==="style"&&y.querySelector(hm(x))||d==="script"&&y.querySelector(pm(x))||(d=y.createElement("link"),Ni(d,"link",l),qn(d),y.head.appendChild(d)))}}function zz(l,d){ca.m(l,d);var h=xf;if(h&&l){var y=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+ni(y)+'"][href="'+ni(l)+'"]',x=T;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Df(l)}if(!hs.has(x)&&(l=f({rel:"modulepreload",href:l},d),hs.set(x,l),h.querySelector(T)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(pm(x)))return}y=h.createElement("link"),Ni(y,"link",l),qn(y),h.head.appendChild(y)}}}function Vz(l,d,h){ca.S(l,d,h);var y=xf;if(y&&l){var T=fl(y).hoistableStyles,x=Mf(l);d=d||"default";var O=T.get(x);if(!O){var H={loading:0,preload:null};if(O=y.querySelector(hm(x)))H.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},h),(h=hs.get(x))&&LT(l,h);var ie=O=y.createElement("link");qn(ie),Ni(ie,"link",l),ie._p=new Promise(function(Te,De){ie.onload=Te,ie.onerror=De}),ie.addEventListener("load",function(){H.loading|=1}),ie.addEventListener("error",function(){H.loading|=2}),H.loading|=4,yv(O,d,y)}O={type:"stylesheet",instance:O,count:1,state:H},T.set(x,O)}}}function jz(l,d){ca.X(l,d);var h=xf;if(h&&l){var y=fl(h).hoistableScripts,T=Df(l),x=y.get(T);x||(x=h.querySelector(pm(T)),x||(l=f({src:l,async:!0},d),(d=hs.get(T))&&UT(l,d),x=h.createElement("script"),qn(x),Ni(x,"link",l),h.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},y.set(T,x))}}function qz(l,d){ca.M(l,d);var h=xf;if(h&&l){var y=fl(h).hoistableScripts,T=Df(l),x=y.get(T);x||(x=h.querySelector(pm(T)),x||(l=f({src:l,async:!0,type:"module"},d),(d=hs.get(T))&&UT(l,d),x=h.createElement("script"),qn(x),Ni(x,"link",l),h.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},y.set(T,x))}}function bD(l,d,h,y){var T=(T=re.current)?gv(T):null;if(!T)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(d=Mf(h.href),h=fl(T).hoistableStyles,y=h.get(d),y||(y={type:"style",instance:null,count:0,state:null},h.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=Mf(h.href);var x=fl(T).hoistableStyles,O=x.get(l);if(O||(T=T.ownerDocument||T,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(l,O),(x=T.querySelector(hm(l)))&&!x._p&&(O.instance=x,O.state.loading=5),hs.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},hs.set(l,h),x||Hz(T,l,h,O.state))),d&&y===null)throw Error(i(528,""));return O}if(d&&y!==null)throw Error(i(529,""));return null;case"script":return d=h.async,h=h.src,typeof h=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Df(h),h=fl(T).hoistableScripts,y=h.get(d),y||(y={type:"script",instance:null,count:0,state:null},h.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function Mf(l){return'href="'+ni(l)+'"'}function hm(l){return'link[rel="stylesheet"]['+l+"]"}function _D(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function Hz(l,d,h,y){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=l.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),Ni(d,"link",h),qn(d),l.head.appendChild(d))}function Df(l){return'[src="'+ni(l)+'"]'}function pm(l){return"script[async]"+l}function vD(l,d,h){if(d.count++,d.instance===null)switch(d.type){case"style":var y=l.querySelector('style[data-href~="'+ni(h.href)+'"]');if(y)return d.instance=y,qn(y),y;var T=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),qn(y),Ni(y,"style",T),yv(y,h.precedence,l),d.instance=y;case"stylesheet":T=Mf(h.href);var x=l.querySelector(hm(T));if(x)return d.state.loading|=4,d.instance=x,qn(x),x;y=_D(h),(T=hs.get(T))&&LT(y,T),x=(l.ownerDocument||l).createElement("link"),qn(x);var O=x;return O._p=new Promise(function(H,ie){O.onload=H,O.onerror=ie}),Ni(x,"link",y),d.state.loading|=4,yv(x,h.precedence,l),d.instance=x;case"script":return x=Df(h.src),(T=l.querySelector(pm(x)))?(d.instance=T,qn(T),T):(y=h,(T=hs.get(x))&&(y=f({},h),UT(y,T)),l=l.ownerDocument||l,T=l.createElement("script"),qn(T),Ni(T,"link",y),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(i(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,yv(y,h.precedence,l));return d.instance}function yv(l,d,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=y.length?y[y.length-1]:null,x=T,O=0;O<y.length;O++){var H=y[O];if(H.dataset.precedence===d)x=H;else if(x!==T)break}x?x.parentNode.insertBefore(l,x.nextSibling):(d=h.nodeType===9?h.head:h,d.insertBefore(l,d.firstChild))}function LT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function UT(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var bv=null;function SD(l,d,h){if(bv===null){var y=new Map,T=bv=new Map;T.set(h,y)}else T=bv,y=T.get(h),y||(y=new Map,T.set(h,y));if(y.has(l))return y;for(y.set(l,null),h=h.getElementsByTagName(l),T=0;T<h.length;T++){var x=h[T];if(!(x[dl]||x[wi]||l==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var O=x.getAttribute(d)||"";O=l+O;var H=y.get(O);H?H.push(x):y.set(O,[x])}}return y}function wD(l,d,h){l=l.ownerDocument||l,l.head.insertBefore(h,d==="title"?l.querySelector("head > title"):null)}function Gz(l,d,h){if(h===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function TD(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var mm=null;function $z(){}function Yz(l,d,h){if(mm===null)throw Error(i(475));var y=mm;if(d.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=Mf(h.href),x=l.querySelector(hm(T));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=_v.bind(y),l.then(y,y)),d.state.loading|=4,d.instance=x,qn(x);return}x=l.ownerDocument||l,h=_D(h),(T=hs.get(T))&&LT(h,T),x=x.createElement("link"),qn(x);var O=x;O._p=new Promise(function(H,ie){O.onload=H,O.onerror=ie}),Ni(x,"link",h),d.instance=x}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(y.count++,d=_v.bind(y),l.addEventListener("load",d),l.addEventListener("error",d))}}function Wz(){if(mm===null)throw Error(i(475));var l=mm;return l.stylesheets&&l.count===0&&zT(l,l.stylesheets),0<l.count?function(d){var h=setTimeout(function(){if(l.stylesheets&&zT(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(h)}}:null}function _v(){if(this.count--,this.count===0){if(this.stylesheets)zT(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var vv=null;function zT(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,vv=new Map,d.forEach(Kz,l),vv=null,_v.call(l))}function Kz(l,d){if(!(d.state.loading&4)){var h=vv.get(l);if(h)var y=h.get(null);else{h=new Map,vv.set(l,h);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<T.length;x++){var O=T[x];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(h.set(O.dataset.precedence,O),y=O)}y&&h.set(null,y)}T=d.instance,O=T.getAttribute("data-precedence"),x=h.get(O)||y,x===y&&h.set(null,T),h.set(O,T),this.count++,y=_v.bind(this),T.addEventListener("load",y),T.addEventListener("error",y),x?x.parentNode.insertBefore(T,x.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var gm={$$typeof:I,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function Xz(l,d,h,y,T,x,O,H){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=y,this.onUncaughtError=T,this.onCaughtError=x,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function AD(l,d,h,y,T,x,O,H,ie,Te,De,Ne){return l=new Xz(l,d,h,O,H,ie,Te,Ne),d=1,x===!0&&(d|=24),x=Rr(3,null,null,d),l.current=x,x.stateNode=l,d=Sw(),d.refCount++,l.pooledCache=d,d.refCount++,x.memoizedState={element:y,isDehydrated:h,cache:d},Ew(x),l}function ED(l){return l?(l=af,l):af}function CD(l,d,h,y,T,x){T=ED(T),y.context===null?y.context=T:y.pendingContext=T,y=Tl(d),y.payload={element:h},x=x===void 0?null:x,x!==null&&(y.callback=x),h=Al(l,y,d),h!==null&&(Fr(h,l,d),$p(h,l,d))}function ID(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<d?h:d}}function VT(l,d){ID(l,d),(l=l.alternate)&&ID(l,d)}function xD(l){if(l.tag===13){var d=of(l,67108864);d!==null&&Fr(d,l,67108864),VT(l,67108864)}}var Sv=!0;function Jz(l,d,h,y){var T=Q.T;Q.T=null;var x=V.p;try{V.p=2,jT(l,d,h,y)}finally{V.p=x,Q.T=T}}function Zz(l,d,h,y){var T=Q.T;Q.T=null;var x=V.p;try{V.p=8,jT(l,d,h,y)}finally{V.p=x,Q.T=T}}function jT(l,d,h,y){if(Sv){var T=qT(y);if(T===null)MT(l,d,y,wv,h),DD(l,y);else if(eV(T,l,d,h,y))y.stopPropagation();else if(DD(l,y),d&4&&-1<Qz.indexOf(l)){for(;T!==null;){var x=co(T);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var O=En(x.pendingLanes);if(O!==0){var H=x;for(H.pendingLanes|=2,H.entangledLanes|=2;O;){var ie=1<<31-Le(O);H.entanglements[1]|=ie,O&=~ie}bo(x),(en&6)===0&&(sv=Zt()+500,um(0))}}break;case 13:H=of(x,2),H!==null&&Fr(H,x,2),av(),VT(x,2)}if(x=qT(y),x===null&&MT(l,d,y,wv,h),x===T)break;T=x}T!==null&&y.stopPropagation()}else MT(l,d,y,null,h)}}function qT(l){return l=Pu(l),HT(l)}var wv=null;function HT(l){if(wv=null,l=uo(l),l!==null){var d=s(l);if(d===null)l=null;else{var h=d.tag;if(h===13){if(l=o(d),l!==null)return l;l=null}else if(h===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return wv=l,null}function MD(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case we:return 2;case Ae:return 8;case Se:case Ze:return 32;case ge:return 268435456;default:return 32}default:return 32}}var GT=!1,Pl=null,Ll=null,Ul=null,ym=new Map,bm=new Map,zl=[],Qz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function DD(l,d){switch(l){case"focusin":case"focusout":Pl=null;break;case"dragenter":case"dragleave":Ll=null;break;case"mouseover":case"mouseout":Ul=null;break;case"pointerover":case"pointerout":ym.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":bm.delete(d.pointerId)}}function _m(l,d,h,y,T,x){return l===null||l.nativeEvent!==x?(l={blockedOn:d,domEventName:h,eventSystemFlags:y,nativeEvent:x,targetContainers:[T]},d!==null&&(d=co(d),d!==null&&xD(d)),l):(l.eventSystemFlags|=y,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function eV(l,d,h,y,T){switch(d){case"focusin":return Pl=_m(Pl,l,d,h,y,T),!0;case"dragenter":return Ll=_m(Ll,l,d,h,y,T),!0;case"mouseover":return Ul=_m(Ul,l,d,h,y,T),!0;case"pointerover":var x=T.pointerId;return ym.set(x,_m(ym.get(x)||null,l,d,h,y,T)),!0;case"gotpointercapture":return x=T.pointerId,bm.set(x,_m(bm.get(x)||null,l,d,h,y,T)),!0}return!1}function RD(l){var d=uo(l.target);if(d!==null){var h=s(d);if(h!==null){if(d=h.tag,d===13){if(d=o(h),d!==null){l.blockedOn=d,Sp(l.priority,function(){if(h.tag===13){var y=Br();y=_p(y);var T=of(h,y);T!==null&&Fr(T,h,y),VT(h,y)}});return}}else if(d===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Tv(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var h=qT(l.nativeEvent);if(h===null){h=l.nativeEvent;var y=new h.constructor(h.type,h);Kd=y,h.target.dispatchEvent(y),Kd=null}else return d=co(h),d!==null&&xD(d),l.blockedOn=h,!1;d.shift()}return!0}function kD(l,d,h){Tv(l)&&h.delete(d)}function tV(){GT=!1,Pl!==null&&Tv(Pl)&&(Pl=null),Ll!==null&&Tv(Ll)&&(Ll=null),Ul!==null&&Tv(Ul)&&(Ul=null),ym.forEach(kD),bm.forEach(kD)}function Av(l,d){l.blockedOn===d&&(l.blockedOn=null,GT||(GT=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,tV)))}var Ev=null;function ND(l){Ev!==l&&(Ev=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ev===l&&(Ev=null);for(var d=0;d<l.length;d+=3){var h=l[d],y=l[d+1],T=l[d+2];if(typeof y!="function"){if(HT(y||h)===null)continue;break}var x=co(h);x!==null&&(l.splice(d,3),d-=3,Hw(x,{pending:!0,data:T,method:h.method,action:y},y,T))}}))}function vm(l){function d(ie){return Av(ie,l)}Pl!==null&&Av(Pl,l),Ll!==null&&Av(Ll,l),Ul!==null&&Av(Ul,l),ym.forEach(d),bm.forEach(d);for(var h=0;h<zl.length;h++){var y=zl[h];y.blockedOn===l&&(y.blockedOn=null)}for(;0<zl.length&&(h=zl[0],h.blockedOn===null);)RD(h),h.blockedOn===null&&zl.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var T=h[y],x=h[y+1],O=T[zi]||null;if(typeof x=="function")O||ND(h);else if(O){var H=null;if(x&&x.hasAttribute("formAction")){if(T=x,O=x[zi]||null)H=O.formAction;else if(HT(T)!==null)continue}else H=O.action;typeof H=="function"?h[y+1]=H:(h.splice(y,3),y-=3),ND(h)}}}function $T(l){this._internalRoot=l}Cv.prototype.render=$T.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(i(409));var h=d.current,y=Br();CD(h,y,l,d,null,null)},Cv.prototype.unmount=$T.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;CD(l.current,2,null,l,null,null),av(),d[cl]=null}};function Cv(l){this._internalRoot=l}Cv.prototype.unstable_scheduleHydration=function(l){if(l){var d=jd();l={blockedOn:null,target:l,priority:d};for(var h=0;h<zl.length&&d!==0&&d<zl[h].priority;h++);zl.splice(h,0,l),h===0&&RD(l)}};var OD=e.version;if(OD!=="19.1.0")throw Error(i(527,OD,"19.1.0"));V.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=c(d),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var nV={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iv.isDisabled&&Iv.supportsFiber)try{Z=Iv.inject(nV),ue=Iv}catch{}}return wm.createRoot=function(l,d){if(!r(l))throw Error(i(299));var h=!1,y="",T=Xx,x=Jx,O=Zx,H=null;return d!=null&&(d.unstable_strictMode===!0&&(h=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(x=d.onCaughtError),d.onRecoverableError!==void 0&&(O=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(H=d.unstable_transitionCallbacks)),d=AD(l,1,!1,null,null,h,y,T,x,O,H,null),l[cl]=d.current,xT(l),new $T(d)},wm.hydrateRoot=function(l,d,h){if(!r(l))throw Error(i(299));var y=!1,T="",x=Xx,O=Jx,H=Zx,ie=null,Te=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(T=h.identifierPrefix),h.onUncaughtError!==void 0&&(x=h.onUncaughtError),h.onCaughtError!==void 0&&(O=h.onCaughtError),h.onRecoverableError!==void 0&&(H=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(ie=h.unstable_transitionCallbacks),h.formState!==void 0&&(Te=h.formState)),d=AD(l,1,!0,d,h??null,y,T,x,O,H,ie,Te),d.context=ED(null),h=d.current,y=Br(),y=_p(y),T=Tl(y),T.callback=null,Al(h,T,y),h=y,d.current.lanes=h,pr(d,h),bo(d),l[cl]=d.current,xT(l),new Cv(d)},wm.version="19.1.0",wm}var GD;function mV(){if(GD)return XT.exports;GD=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),XT.exports=pV(),XT.exports}var gV=mV();const yV=mS(gV);var Tm={},$D;function bV(){if($D)return Tm;$D=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.parse=o,Tm.serialize=u;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,g){const v=new s,w=m.length;if(w<2)return v;const A=(g==null?void 0:g.decode)||f;let E=0;do{const M=m.indexOf("=",E);if(M===-1)break;const I=m.indexOf(";",E),R=I===-1?w:I;if(M>R){E=m.lastIndexOf(";",M-1)+1;continue}const D=a(m,E,M),C=c(m,M,D),k=m.slice(D,C);if(v[k]===void 0){let j=a(m,M+1,R),U=c(m,R,j);const F=A(m.slice(j,U));v[k]=F}E=R+1}while(E<w);return v}function a(m,g,v){do{const w=m.charCodeAt(g);if(w!==32&&w!==9)return g}while(++g<v);return v}function c(m,g,v){for(;g>v;){const w=m.charCodeAt(--g);if(w!==32&&w!==9)return g+1}return v}function u(m,g,v){const w=(v==null?void 0:v.encode)||encodeURIComponent;if(!n.test(m))throw new TypeError(`argument name is invalid: ${m}`);const A=w(g);if(!e.test(A))throw new TypeError(`argument val is invalid: ${g}`);let E=m+"="+A;if(!v)return E;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);E+="; Max-Age="+v.maxAge}if(v.domain){if(!t.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);E+="; Domain="+v.domain}if(v.path){if(!i.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);E+="; Path="+v.path}if(v.expires){if(!p(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);E+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(E+="; HttpOnly"),v.secure&&(E+="; Secure"),v.partitioned&&(E+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return E}function f(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function p(m){return r.call(m)==="[object Date]"}return Tm}bV();var YD="popstate";function _V(n={}){function e(r,s){let{pathname:o="/",search:a="",hash:c=""}=kd(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),jA("",{pathname:o,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let o=r.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=r.location.href,u=c.indexOf("#");a=u===-1?c:c.slice(0,u)}return a+"#"+(typeof s=="string"?s:ky(s))}function i(r,s){Es(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return SV(e,t,i,n)}function xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Es(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vV(){return Math.random().toString(36).substring(2,10)}function WD(n,e){return{usr:n.state,key:n.key,idx:e}}function jA(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?kd(e):e,state:t,key:e&&e.key||i||vV()}}function ky({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function kd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function SV(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a="POP",c=null,u=f();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function f(){return(o.state||{idx:null}).idx}function p(){a="POP";let A=f(),E=A==null?null:A-u;u=A,c&&c({action:a,location:w.location,delta:E})}function m(A,E){a="PUSH";let M=jA(w.location,A,E);t&&t(M,A),u=f()+1;let I=WD(M,u),R=w.createHref(M);try{o.pushState(I,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(R)}s&&c&&c({action:a,location:w.location,delta:1})}function g(A,E){a="REPLACE";let M=jA(w.location,A,E);t&&t(M,A),u=f();let I=WD(M,u),R=w.createHref(M);o.replaceState(I,"",R),s&&c&&c({action:a,location:w.location,delta:0})}function v(A){return wV(A)}let w={get action(){return a},get location(){return n(r,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(YD,p),c=A,()=>{r.removeEventListener(YD,p),c=null}},createHref(A){return e(r,A)},createURL:v,encodeLocation(A){let E=v(A);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:g,go(A){return o.go(A)}};return w}function wV(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),xn(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:ky(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function jF(n,e,t="/"){return TV(n,e,t,!1)}function TV(n,e,t,i){let r=typeof e=="string"?kd(e):e,s=rl(r.pathname||"/",t);if(s==null)return null;let o=qF(n);AV(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=BV(s);a=NV(o[c],u,i)}return a}function qF(n,e=[],t=[],i=""){let r=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(xn(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length));let u=el([i,c.relativePath]),f=t.concat(c);s.children&&s.children.length>0&&(xn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),qF(s.children,e,f,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:RV(u,s.index),routesMeta:f})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let c of HF(s.path))r(s,o,c)}),e}function HF(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=HF(i.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),r&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function AV(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kV(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var EV=/^:[\w-]+$/,CV=3,IV=2,xV=1,MV=10,DV=-2,KD=n=>n==="*";function RV(n,e){let t=n.split("/"),i=t.length;return t.some(KD)&&(i+=DV),e&&(i+=IV),t.filter(r=>!KD(r)).reduce((r,s)=>r+(EV.test(s)?CV:s===""?xV:MV),i)}function kV(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function NV(n,e,t=!1){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let c=i[a],u=a===i.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=M0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),m=c.route;if(!p&&u&&t&&!i[i.length-1].route.index&&(p=M0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:el([s,p.pathname]),pathnameBase:UV(el([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=el([s,p.pathnameBase]))}return o}function M0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=OV(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,{paramName:f,isOptional:p},m)=>{if(f==="*"){let v=a[m]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[m];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function OV(n,e=!1,t=!0){Es(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(i.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function BV(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Es(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function rl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function FV(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?kd(n):n;return{pathname:t?t.startsWith("/")?t:PV(t,e):e,search:zV(i),hash:VV(r)}}function PV(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function eA(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LV(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function JE(n){let e=LV(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function ZE(n,e,t,i=!1){let r;typeof n=="string"?r=kd(n):(r={...n},xn(!r.pathname||!r.pathname.includes("?"),eA("?","pathname","search",r)),xn(!r.pathname||!r.pathname.includes("#"),eA("#","pathname","hash",r)),xn(!r.search||!r.search.includes("#"),eA("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let p=e.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}a=p>=0?e[p]:"/"}let c=FV(r,a),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var el=n=>n.join("/").replace(/\/\/+/g,"/"),UV=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zV=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VV=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jV(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var GF=["POST","PUT","PATCH","DELETE"];new Set(GF);var qV=["GET",...GF];new Set(qV);var lp=pe.createContext(null);lp.displayName="DataRouter";var gS=pe.createContext(null);gS.displayName="DataRouterState";var $F=pe.createContext({isTransitioning:!1});$F.displayName="ViewTransition";var HV=pe.createContext(new Map);HV.displayName="Fetchers";var GV=pe.createContext(null);GV.displayName="Await";var ao=pe.createContext(null);ao.displayName="Navigation";var t_=pe.createContext(null);t_.displayName="Location";var Ho=pe.createContext({outlet:null,matches:[],isDataRoute:!1});Ho.displayName="Route";var QE=pe.createContext(null);QE.displayName="RouteError";function $V(n,{relative:e}={}){xn(up(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=pe.useContext(ao),{hash:r,pathname:s,search:o}=n_(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:el([t,s])),i.createHref({pathname:a,search:o,hash:r})}function up(){return pe.useContext(t_)!=null}function Cu(){return xn(up(),"useLocation() may be used only in the context of a <Router> component."),pe.useContext(t_).location}var YF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WF(n){pe.useContext(ao).static||pe.useLayoutEffect(n)}function KF(){let{isDataRoute:n}=pe.useContext(Ho);return n?s6():YV()}function YV(){xn(up(),"useNavigate() may be used only in the context of a <Router> component.");let n=pe.useContext(lp),{basename:e,navigator:t}=pe.useContext(ao),{matches:i}=pe.useContext(Ho),{pathname:r}=Cu(),s=JSON.stringify(JE(i)),o=pe.useRef(!1);return WF(()=>{o.current=!0}),pe.useCallback((c,u={})=>{if(Es(o.current,YF),!o.current)return;if(typeof c=="number"){t.go(c);return}let f=ZE(c,JSON.parse(s),r,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:el([e,f.pathname])),(u.replace?t.replace:t.push)(f,u.state,u)},[e,t,s,r,n])}pe.createContext(null);function n_(n,{relative:e}={}){let{matches:t}=pe.useContext(Ho),{pathname:i}=Cu(),r=JSON.stringify(JE(t));return pe.useMemo(()=>ZE(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function WV(n,e){return XF(n,e)}function XF(n,e,t,i){var E;xn(up(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=pe.useContext(ao),{matches:s}=pe.useContext(Ho),o=s[s.length-1],a=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",f=o&&o.route;{let M=f&&f.path||"";JF(c,!f||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let p=Cu(),m;if(e){let M=typeof e=="string"?kd(e):e;xn(u==="/"||((E=M.pathname)==null?void 0:E.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${M.pathname}" was given in the \`location\` prop.`),m=M}else m=p;let g=m.pathname||"/",v=g;if(u!=="/"){let M=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(M.length).join("/")}let w=jF(n,{pathname:v});Es(f||w!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Es(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=QV(w&&w.map(M=>Object.assign({},M,{params:Object.assign({},a,M.params),pathname:el([u,r.encodeLocation?r.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?u:el([u,r.encodeLocation?r.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),s,t,i);return e&&A?pe.createElement(t_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},A):A}function KV(){let n=r6(),e=jV(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=pe.createElement(pe.Fragment,null,pe.createElement("p",null,"💿 Hey developer 👋"),pe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",pe.createElement("code",{style:s},"ErrorBoundary")," or"," ",pe.createElement("code",{style:s},"errorElement")," prop on your route.")),pe.createElement(pe.Fragment,null,pe.createElement("h2",null,"Unexpected Application Error!"),pe.createElement("h3",{style:{fontStyle:"italic"}},e),t?pe.createElement("pre",{style:r},t):null,o)}var XV=pe.createElement(KV,null),JV=class extends pe.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?pe.createElement(Ho.Provider,{value:this.props.routeContext},pe.createElement(QE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZV({routeContext:n,match:e,children:t}){let i=pe.useContext(lp);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),pe.createElement(Ho.Provider,{value:n},t)}function QV(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,s=t==null?void 0:t.errors;if(s!=null){let c=r.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);xn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,a=-1;if(t)for(let c=0;c<r.length;c++){let u=r[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=c),u.route.id){let{loaderData:f,errors:p}=t,m=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||m){o=!0,a>=0?r=r.slice(0,a+1):r=[r[0]];break}}}return r.reduceRight((c,u,f)=>{let p,m=!1,g=null,v=null;t&&(p=s&&u.route.id?s[u.route.id]:void 0,g=u.route.errorElement||XV,o&&(a<0&&f===0?(JF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):a===f&&(m=!0,v=u.route.hydrateFallbackElement||null)));let w=e.concat(r.slice(0,f+1)),A=()=>{let E;return p?E=g:m?E=v:u.route.Component?E=pe.createElement(u.route.Component,null):u.route.element?E=u.route.element:E=c,pe.createElement(ZV,{match:u,routeContext:{outlet:c,matches:w,isDataRoute:t!=null},children:E})};return t&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?pe.createElement(JV,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:A(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):A()},null)}function eC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e6(n){let e=pe.useContext(lp);return xn(e,eC(n)),e}function t6(n){let e=pe.useContext(gS);return xn(e,eC(n)),e}function n6(n){let e=pe.useContext(Ho);return xn(e,eC(n)),e}function tC(n){let e=n6(n),t=e.matches[e.matches.length-1];return xn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function i6(){return tC("useRouteId")}function r6(){var i;let n=pe.useContext(QE),e=t6("useRouteError"),t=tC("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function s6(){let{router:n}=e6("useNavigate"),e=tC("useNavigate"),t=pe.useRef(!1);return WF(()=>{t.current=!0}),pe.useCallback(async(r,s={})=>{Es(t.current,YF),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...s}))},[n,e])}var XD={};function JF(n,e,t){!e&&!XD[n]&&(XD[n]=!0,Es(!1,t))}pe.memo(o6);function o6({routes:n,future:e,state:t}){return XF(n,void 0,t,e)}function a6({to:n,replace:e,state:t,relative:i}){xn(up(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=pe.useContext(ao);Es(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=pe.useContext(Ho),{pathname:o}=Cu(),a=KF(),c=ZE(n,JE(s),o,i==="path"),u=JSON.stringify(c);return pe.useEffect(()=>{a(JSON.parse(u),{replace:e,state:t,relative:i})},[a,u,i,e,t]),null}function qA(n){xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function l6({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:s=!1}){xn(!up(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=pe.useMemo(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof t=="string"&&(t=kd(t));let{pathname:c="/",search:u="",hash:f="",state:p=null,key:m="default"}=t,g=pe.useMemo(()=>{let v=rl(c,o);return v==null?null:{location:{pathname:v,search:u,hash:f,state:p,key:m},navigationType:i}},[o,c,u,f,p,m,i]);return Es(g!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:pe.createElement(ao.Provider,{value:a},pe.createElement(t_.Provider,{children:e,value:g}))}function u6({children:n,location:e}){return WV(HA(n),e)}function HA(n,e=[]){let t=[];return pe.Children.forEach(n,(i,r)=>{if(!pe.isValidElement(i))return;let s=[...e,r];if(i.type===pe.Fragment){t.push.apply(t,HA(i.props.children,s));return}xn(i.type===qA,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=HA(i.props.children,s)),t.push(o)}),t}var $v="get",Yv="application/x-www-form-urlencoded";function yS(n){return n!=null&&typeof n.tagName=="string"}function c6(n){return yS(n)&&n.tagName.toLowerCase()==="button"}function d6(n){return yS(n)&&n.tagName.toLowerCase()==="form"}function f6(n){return yS(n)&&n.tagName.toLowerCase()==="input"}function h6(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function p6(n,e){return n.button===0&&(!e||e==="_self")&&!h6(n)}var xv=null;function m6(){if(xv===null)try{new FormData(document.createElement("form"),0),xv=!1}catch{xv=!0}return xv}var g6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tA(n){return n!=null&&!g6.has(n)?(Es(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yv}"`),null):n}function y6(n,e){let t,i,r,s,o;if(d6(n)){let a=n.getAttribute("action");i=a?rl(a,e):null,t=n.getAttribute("method")||$v,r=tA(n.getAttribute("enctype"))||Yv,s=new FormData(n)}else if(c6(n)||f6(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||a.getAttribute("action");if(i=c?rl(c,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||$v,r=tA(n.getAttribute("formenctype"))||tA(a.getAttribute("enctype"))||Yv,s=new FormData(a,n),!m6()){let{name:u,type:f,value:p}=n;if(f==="image"){let m=u?`${u}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else u&&s.append(u,p)}}else{if(yS(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=$v,i=null,r=Yv,o=n}return s&&r==="text/plain"&&(o=s,s=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:s,body:o}}function nC(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function b6(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _6(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function v6(n,e,t){let i=await Promise.all(n.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await b6(s,t);return o.links?o.links():[]}return[]}));return A6(i.flat(1).filter(_6).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function JD(n,e,t,i,r,s){let o=(c,u)=>t[u]?c.route.id!==t[u].route.id:!0,a=(c,u)=>{var f;return t[u].pathname!==c.pathname||((f=t[u].route.path)==null?void 0:f.endsWith("*"))&&t[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>o(c,u)||a(c,u)):s==="data"?e.filter((c,u)=>{var p;let f=i.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,u)||a(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((p=t[0])==null?void 0:p.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function S6(n,e,{includeHydrateFallback:t}={}){return w6(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function w6(n){return[...new Set(n)]}function T6(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function A6(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let s=JSON.stringify(T6(r));return t.has(s)||(t.add(s),i.push({key:s,link:r})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var E6=new Set([100,101,204,205]);function C6(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&rl(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function ZF(){let n=pe.useContext(lp);return nC(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function I6(){let n=pe.useContext(gS);return nC(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var iC=pe.createContext(void 0);iC.displayName="FrameworkContext";function QF(){let n=pe.useContext(iC);return nC(n,"You must render this element inside a <HydratedRouter> element"),n}function x6(n,e){let t=pe.useContext(iC),[i,r]=pe.useState(!1),[s,o]=pe.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:p}=e,m=pe.useRef(null);pe.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let w=E=>{E.forEach(M=>{o(M.isIntersecting)})},A=new IntersectionObserver(w,{threshold:.5});return m.current&&A.observe(m.current),()=>{A.disconnect()}}},[n]),pe.useEffect(()=>{if(i){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[i]);let g=()=>{r(!0)},v=()=>{r(!1),o(!1)};return t?n!=="intent"?[s,m,{}]:[s,m,{onFocus:Am(a,g),onBlur:Am(c,v),onMouseEnter:Am(u,g),onMouseLeave:Am(f,v),onTouchStart:Am(p,g)}]:[!1,m,{}]}function Am(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function M6({page:n,...e}){let{router:t}=ZF(),i=pe.useMemo(()=>jF(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?pe.createElement(R6,{page:n,matches:i,...e}):null}function D6(n){let{manifest:e,routeModules:t}=QF(),[i,r]=pe.useState([]);return pe.useEffect(()=>{let s=!1;return v6(n,e,t).then(o=>{s||r(o)}),()=>{s=!0}},[n,e,t]),i}function R6({page:n,matches:e,...t}){let i=Cu(),{manifest:r,routeModules:s}=QF(),{basename:o}=ZF(),{loaderData:a,matches:c}=I6(),u=pe.useMemo(()=>JD(n,e,c,r,i,"data"),[n,e,c,r,i]),f=pe.useMemo(()=>JD(n,e,c,r,i,"assets"),[n,e,c,r,i]),p=pe.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let v=new Set,w=!1;if(e.forEach(E=>{var I;let M=r.routes[E.route.id];!M||!M.hasLoader||(!u.some(R=>R.route.id===E.route.id)&&E.route.id in a&&((I=s[E.route.id])!=null&&I.shouldRevalidate)||M.hasClientLoader?w=!0:v.add(E.route.id))}),v.size===0)return[];let A=C6(n,o);return w&&v.size>0&&A.searchParams.set("_routes",e.filter(E=>v.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[o,a,i,r,u,e,n,s]),m=pe.useMemo(()=>S6(f,r),[f,r]),g=D6(f);return pe.createElement(pe.Fragment,null,p.map(v=>pe.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),m.map(v=>pe.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),g.map(({key:v,link:w})=>pe.createElement("link",{key:v,...w})))}function k6(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var e2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{e2&&(window.__reactRouterVersion="7.6.1")}catch{}function N6({basename:n,children:e,window:t}){let i=pe.useRef();i.current==null&&(i.current=_V({window:t,v5Compat:!0}));let r=i.current,[s,o]=pe.useState({action:r.action,location:r.location}),a=pe.useCallback(c=>{pe.startTransition(()=>o(c))},[o]);return pe.useLayoutEffect(()=>r.listen(a),[r,a]),pe.createElement(l6,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:r})}var t2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n2=pe.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:s,replace:o,state:a,target:c,to:u,preventScrollReset:f,viewTransition:p,...m},g){let{basename:v}=pe.useContext(ao),w=typeof u=="string"&&t2.test(u),A,E=!1;if(typeof u=="string"&&w&&(A=u,e2))try{let U=new URL(window.location.href),F=u.startsWith("//")?new URL(U.protocol+u):new URL(u),J=rl(F.pathname,v);F.origin===U.origin&&J!=null?u=J+F.search+F.hash:E=!0}catch{Es(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=$V(u,{relative:r}),[I,R,D]=x6(i,m),C=P6(u,{replace:o,state:a,target:c,preventScrollReset:f,relative:r,viewTransition:p});function k(U){e&&e(U),U.defaultPrevented||C(U)}let j=pe.createElement("a",{...m,...D,href:A||M,onClick:E||s?e:k,ref:k6(g,R),target:c,"data-discover":!w&&t==="render"?"true":void 0});return I&&!w?pe.createElement(pe.Fragment,null,j,pe.createElement(M6,{page:M})):j});n2.displayName="Link";var O6=pe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:s,to:o,viewTransition:a,children:c,...u},f){let p=n_(o,{relative:u.relative}),m=Cu(),g=pe.useContext(gS),{navigator:v,basename:w}=pe.useContext(ao),A=g!=null&&j6(p)&&a===!0,E=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,M=m.pathname,I=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(M=M.toLowerCase(),I=I?I.toLowerCase():null,E=E.toLowerCase()),I&&w&&(I=rl(I,w)||I);const R=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=M===E||!r&&M.startsWith(E)&&M.charAt(R)==="/",C=I!=null&&(I===E||!r&&I.startsWith(E)&&I.charAt(E.length)==="/"),k={isActive:D,isPending:C,isTransitioning:A},j=D?e:void 0,U;typeof i=="function"?U=i(k):U=[i,D?"active":null,C?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let F=typeof s=="function"?s(k):s;return pe.createElement(n2,{...u,"aria-current":j,className:U,ref:f,style:F,to:o,viewTransition:a},typeof c=="function"?c(k):c)});O6.displayName="NavLink";var B6=pe.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:s,method:o=$v,action:a,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:p,...m},g)=>{let v=z6(),w=V6(a,{relative:u}),A=o.toLowerCase()==="get"?"get":"post",E=typeof a=="string"&&t2.test(a),M=I=>{if(c&&c(I),I.defaultPrevented)return;I.preventDefault();let R=I.nativeEvent.submitter,D=(R==null?void 0:R.getAttribute("formmethod"))||o;v(R||I.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:s,relative:u,preventScrollReset:f,viewTransition:p})};return pe.createElement("form",{ref:g,method:A,action:w,onSubmit:i?c:M,...m,"data-discover":!E&&n==="render"?"true":void 0})});B6.displayName="Form";function F6(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i2(n){let e=pe.useContext(lp);return xn(e,F6(n)),e}function P6(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:s,viewTransition:o}={}){let a=KF(),c=Cu(),u=n_(n,{relative:s});return pe.useCallback(f=>{if(p6(f,e)){f.preventDefault();let p=t!==void 0?t:ky(c)===ky(u);a(n,{replace:p,state:i,preventScrollReset:r,relative:s,viewTransition:o})}},[c,a,u,t,i,e,n,r,s,o])}var L6=0,U6=()=>`__${String(++L6)}__`;function z6(){let{router:n}=i2("useSubmit"),{basename:e}=pe.useContext(ao),t=i6();return pe.useCallback(async(i,r={})=>{let{action:s,method:o,encType:a,formData:c,body:u}=y6(i,e);if(r.navigate===!1){let f=r.fetcherKey||U6();await n.fetch(f,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await n.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:u,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function V6(n,{relative:e}={}){let{basename:t}=pe.useContext(ao),i=pe.useContext(Ho);xn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...n_(n||".",{relative:e})},o=Cu();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),c=a.getAll("index");if(c.some(f=>f==="")){a.delete("index"),c.filter(p=>p).forEach(p=>a.append("index",p));let f=a.toString();s.search=f?`?${f}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:el([t,s.pathname])),ky(s)}function j6(n,e={}){let t=pe.useContext($F);xn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=i2("useViewTransitionState"),r=n_(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=rl(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=rl(t.nextLocation.pathname,i)||t.nextLocation.pathname;return M0(r.pathname,o)!=null||M0(r.pathname,s)!=null}[...E6];var Ss=(n=>(n.USER="user",n.MODEL="model",n.SYSTEM="system",n))(Ss||{}),sn=(n=>(n.GEMINI="Gemini",n.OPENAI="OpenAI",n.GROQ="Groq",n.HUGGINGFACE="HuggingFace",n.OPENROUTER="OpenRouter",n))(sn||{});const ZD=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:ne.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),q6=({className:n})=>ne.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:[ne.jsx("path",{d:"M19.5 12h-15A2.5 2.5 0 012 9.5V8.4A2.5 2.5 0 014.56 6H5V4.5A2.5 2.5 0 017.5 2h9A2.5 2.5 0 0119 4.5V6h.44A2.5 2.5 0 0122 8.4v1.1A2.5 2.5 0 0119.5 12zM7.5 4a.5.5 0 00-.5.5V6h10V4.5a.5.5 0 00-.5-.5h-9zM4 9.5A1.5 1.5 0 015.5 8h13A1.5 1.5 0 0120 9.5v.05H4V9.5zM7 10.5a1 1 0 100-2 1 1 0 000 2zm10 0a1 1 0 100-2 1 1 0 000 2z"}),ne.jsx("path",{d:"M5.5 14h13a1.5 1.5 0 011.5 1.5v3A1.5 1.5 0 0118.5 20H15v1.5A1.5 1.5 0 0113.5 23h-3A1.5 1.5 0 019 21.5V20H5.5A1.5 1.5 0 014 18.5v-3A1.5 1.5 0 015.5 14zm5 .5a.5.5 0 00-.5.5v2a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-2a.5.5 0 00-.5-.5h-3z"})]}),H6=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:ne.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1-8h-2V7h2v2z"})}),G6=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),$6=({className:n})=>ne.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[ne.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),ne.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Y6=({className:n})=>ne.jsxs("svg",{className:n,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[ne.jsxs("defs",{children:[ne.jsxs("radialGradient",{id:"chromaGradient",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[ne.jsx("stop",{offset:"0%",style:{stopColor:"#DA70D6",stopOpacity:1}}),ne.jsx("stop",{offset:"50%",style:{stopColor:"#7B68EE",stopOpacity:.8}}),ne.jsx("stop",{offset:"100%",style:{stopColor:"#00BFFF",stopOpacity:.6}})]}),ne.jsxs("filter",{id:"sphereShine",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[ne.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3",result:"blur"}),ne.jsx("feOffset",{in:"blur",dx:"3",dy:"-3",result:"offsetBlur"}),ne.jsx("feSpecularLighting",{in:"blur",surfaceScale:"5",specularConstant:".75",specularExponent:"20",lightingColor:"#ffeeaa",result:"specOut",children:ne.jsx("fePointLight",{x:"-5000",y:"-10000",z:"20000"})}),ne.jsx("feComposite",{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),ne.jsx("feComposite",{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]})]}),ne.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"url(#chromaGradient)",filter:"url(#sphereShine)"})]}),W6=({className:n})=>ne.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.646.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 1.903c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.333.183-.583.495-.646.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.646-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.903c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.646-.869l.213-1.28z"}),ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),K6=({className:n})=>ne.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"48px",height:"48px",children:[ne.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),ne.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),ne.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),ne.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),ne.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),Rf=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),Mv=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),X6=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"})}),J6=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z"})}),Z6=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Gf=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),Q6=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),ej=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.25 12L18 14.25a6 6 0 01-6 6H6a6 6 0 01-6-6V6a6 6 0 016-6h6a6 6 0 016 6v3M15 9.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),tj=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),QD=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.122 2.122l7.81-7.81"})}),nj=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),ij=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),rj=({className:n})=>ne.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:ne.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12.56 0c.34-.059.68-.111 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),sj=({className:n})=>ne.jsx("div",{className:`${n} flex items-center justify-center bg-gradient-to-tr from-purple-500 to-pink-500 rounded-full text-xs font-bold text-white p-1`,children:"G"}),oj=({className:n})=>ne.jsx("div",{className:`${n} flex items-center justify-center bg-green-500 rounded-full text-xs font-bold text-white p-1`,children:"OA"}),aj=({className:n})=>ne.jsx("div",{className:`${n} flex items-center justify-center bg-yellow-500 rounded-full text-xs font-bold text-black p-1`,children:"GR"}),lj=({className:n})=>ne.jsx("div",{className:`${n} flex items-center justify-center bg-gray-700 rounded-full text-xs font-bold text-white p-1`,children:"HF"}),uj=({className:n})=>ne.jsx("div",{className:`${n} flex items-center justify-center bg-blue-500 rounded-full text-xs font-bold text-white p-1`,children:"OR"}),cj=({onSendMessage:n,isLoading:e,onFileChange:t,uploadedFileData:i})=>{const[r,s]=pe.useState(""),o=pe.useRef(null),a=p=>{p.preventDefault(),(r.trim()||i)&&!e&&(n(r),s(""))},c=()=>{var p;(p=o.current)==null||p.click()},u=p=>{var g;const m=(g=p.target.files)==null?void 0:g[0];m&&t(m),p.target&&(p.target.value="")},f=()=>{t(null),o.current&&(o.current.value="")};return ne.jsxs("div",{className:"p-4 border-t border-purple-900/50 bg-black/30 backdrop-blur-sm",children:[i&&ne.jsxs("div",{className:"mb-2 flex items-center justify-between text-sm text-purple-300 bg-purple-900/30 p-2 rounded-md",children:[ne.jsxs("span",{className:"truncate",children:[ne.jsx(QD,{className:"w-4 h-4 inline mr-2 flex-shrink-0"}),i.name]}),ne.jsx("button",{onClick:f,className:"p-1 text-purple-300 hover:text-red-400 disabled:opacity-50",disabled:e,"aria-label":"Clear selected file",children:ne.jsx(nj,{className:"w-5 h-5"})})]}),ne.jsxs("form",{onSubmit:a,className:"flex items-center space-x-3",children:[ne.jsx("button",{type:"button",onClick:c,disabled:e,className:"p-3 text-purple-400 hover:text-purple-200 rounded-full hover:bg-purple-700/50 disabled:opacity-50 transition-colors","aria-label":"Attach file",children:ne.jsx(QD,{className:"w-6 h-6"})}),ne.jsx("input",{type:"file",ref:o,onChange:u,className:"hidden"}),ne.jsx("input",{type:"text",value:r,onChange:p=>s(p.target.value),placeholder:"Type your message or describe the file...",className:"flex-grow p-3 bg-gray-800/50 border border-purple-700/60 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none text-white placeholder-gray-400 transition-all duration-200 ease-in-out",disabled:e}),ne.jsx("button",{type:"submit",disabled:e||!r.trim()&&!i,className:"p-3 bg-gradient-to-br from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-gray-900",children:e?ne.jsx($6,{className:"w-6 h-6 animate-spin"}):ne.jsx(G6,{className:"w-6 h-6"})})]})]})};function dj(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const fj=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hj=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,pj={};function eR(n,e){return(pj.jsx?hj:fj).test(n)}const mj=/[ \t\n\f\r]/g;function gj(n){return typeof n=="object"?n.type==="text"?tR(n.value):!1:tR(n)}function tR(n){return n.replace(mj,"")===""}let i_=class{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}};i_.prototype.normal={};i_.prototype.property={};i_.prototype.space=void 0;function r2(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new i_(t,i,e)}function GA(n){return n.toLowerCase()}class Cr{constructor(e,t){this.attribute=t,this.property=e}}Cr.prototype.attribute="";Cr.prototype.booleanish=!1;Cr.prototype.boolean=!1;Cr.prototype.commaOrSpaceSeparated=!1;Cr.prototype.commaSeparated=!1;Cr.prototype.defined=!1;Cr.prototype.mustUseProperty=!1;Cr.prototype.number=!1;Cr.prototype.overloadedBoolean=!1;Cr.prototype.property="";Cr.prototype.spaceSeparated=!1;Cr.prototype.space=void 0;let yj=0;const Ct=Nd(),li=Nd(),$A=Nd(),ze=Nd(),bn=Nd(),Kf=Nd(),Hr=Nd();function Nd(){return 2**++yj}const YA=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ct,booleanish:li,commaOrSpaceSeparated:Hr,commaSeparated:Kf,number:ze,overloadedBoolean:$A,spaceSeparated:bn},Symbol.toStringTag,{value:"Module"})),nA=Object.keys(YA);class rC extends Cr{constructor(e,t,i,r){let s=-1;if(super(e,t),nR(this,"space",r),typeof i=="number")for(;++s<nA.length;){const o=nA[s];nR(this,nA[s],(i&YA[o])===YA[o])}}}rC.prototype.defined=!0;function nR(n,e,t){t&&(n[e]=t)}function cp(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const s=new rC(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,t[GA(i)]=i,t[GA(s.attribute)]=i}return new i_(e,t,n.space)}const s2=cp({properties:{ariaActiveDescendant:null,ariaAtomic:li,ariaAutoComplete:null,ariaBusy:li,ariaChecked:li,ariaColCount:ze,ariaColIndex:ze,ariaColSpan:ze,ariaControls:bn,ariaCurrent:null,ariaDescribedBy:bn,ariaDetails:null,ariaDisabled:li,ariaDropEffect:bn,ariaErrorMessage:null,ariaExpanded:li,ariaFlowTo:bn,ariaGrabbed:li,ariaHasPopup:null,ariaHidden:li,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bn,ariaLevel:ze,ariaLive:null,ariaModal:li,ariaMultiLine:li,ariaMultiSelectable:li,ariaOrientation:null,ariaOwns:bn,ariaPlaceholder:null,ariaPosInSet:ze,ariaPressed:li,ariaReadOnly:li,ariaRelevant:null,ariaRequired:li,ariaRoleDescription:bn,ariaRowCount:ze,ariaRowIndex:ze,ariaRowSpan:ze,ariaSelected:li,ariaSetSize:ze,ariaSort:null,ariaValueMax:ze,ariaValueMin:ze,ariaValueNow:ze,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function o2(n,e){return e in n?n[e]:e}function a2(n,e){return o2(n,e.toLowerCase())}const bj=cp({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Kf,acceptCharset:bn,accessKey:bn,action:null,allow:null,allowFullScreen:Ct,allowPaymentRequest:Ct,allowUserMedia:Ct,alt:null,as:null,async:Ct,autoCapitalize:null,autoComplete:bn,autoFocus:Ct,autoPlay:Ct,blocking:bn,capture:null,charSet:null,checked:Ct,cite:null,className:bn,cols:ze,colSpan:null,content:null,contentEditable:li,controls:Ct,controlsList:bn,coords:ze|Kf,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ct,defer:Ct,dir:null,dirName:null,disabled:Ct,download:$A,draggable:li,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ct,formTarget:null,headers:bn,height:ze,hidden:$A,high:ze,href:null,hrefLang:null,htmlFor:bn,httpEquiv:bn,id:null,imageSizes:null,imageSrcSet:null,inert:Ct,inputMode:null,integrity:null,is:null,isMap:Ct,itemId:null,itemProp:bn,itemRef:bn,itemScope:Ct,itemType:bn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ct,low:ze,manifest:null,max:null,maxLength:ze,media:null,method:null,min:null,minLength:ze,multiple:Ct,muted:Ct,name:null,nonce:null,noModule:Ct,noValidate:Ct,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ct,optimum:ze,pattern:null,ping:bn,placeholder:null,playsInline:Ct,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ct,referrerPolicy:null,rel:bn,required:Ct,reversed:Ct,rows:ze,rowSpan:ze,sandbox:bn,scope:null,scoped:Ct,seamless:Ct,selected:Ct,shadowRootClonable:Ct,shadowRootDelegatesFocus:Ct,shadowRootMode:null,shape:null,size:ze,sizes:null,slot:null,span:ze,spellCheck:li,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ze,step:null,style:null,tabIndex:ze,target:null,title:null,translate:null,type:null,typeMustMatch:Ct,useMap:null,value:li,width:ze,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bn,axis:null,background:null,bgColor:null,border:ze,borderColor:null,bottomMargin:ze,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ct,declare:Ct,event:null,face:null,frame:null,frameBorder:null,hSpace:ze,leftMargin:ze,link:null,longDesc:null,lowSrc:null,marginHeight:ze,marginWidth:ze,noResize:Ct,noHref:Ct,noShade:Ct,noWrap:Ct,object:null,profile:null,prompt:null,rev:null,rightMargin:ze,rules:null,scheme:null,scrolling:li,standby:null,summary:null,text:null,topMargin:ze,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ze,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ct,disableRemotePlayback:Ct,prefix:null,property:null,results:ze,security:null,unselectable:null},space:"html",transform:a2}),_j=cp({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Hr,accentHeight:ze,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ze,amplitude:ze,arabicForm:null,ascent:ze,attributeName:null,attributeType:null,azimuth:ze,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ze,by:null,calcMode:null,capHeight:ze,className:bn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ze,diffuseConstant:ze,direction:null,display:null,dur:null,divisor:ze,dominantBaseline:null,download:Ct,dx:null,dy:null,edgeMode:null,editable:null,elevation:ze,enableBackground:null,end:null,event:null,exponent:ze,externalResourcesRequired:null,fill:null,fillOpacity:ze,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Kf,g2:Kf,glyphName:Kf,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ze,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ze,horizOriginX:ze,horizOriginY:ze,id:null,ideographic:ze,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ze,k:ze,k1:ze,k2:ze,k3:ze,k4:ze,kernelMatrix:Hr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ze,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ze,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ze,overlineThickness:ze,paintOrder:null,panose1:null,path:null,pathLength:ze,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ze,pointsAtY:ze,pointsAtZ:ze,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Hr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Hr,rev:Hr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Hr,requiredFeatures:Hr,requiredFonts:Hr,requiredFormats:Hr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ze,specularExponent:ze,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ze,strikethroughThickness:ze,string:null,stroke:null,strokeDashArray:Hr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ze,strokeOpacity:ze,strokeWidth:null,style:null,surfaceScale:ze,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Hr,tabIndex:ze,tableValues:null,target:null,targetX:ze,targetY:ze,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Hr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ze,underlineThickness:ze,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ze,values:null,vAlphabetic:ze,vMathematical:ze,vectorEffect:null,vHanging:ze,vIdeographic:ze,version:null,vertAdvY:ze,vertOriginX:ze,vertOriginY:ze,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ze,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:o2}),l2=cp({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),u2=cp({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:a2}),c2=cp({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),vj={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Sj=/[A-Z]/g,iR=/-[a-z]/g,wj=/^data[-\w.:]+$/i;function Tj(n,e){const t=GA(e);let i=e,r=Cr;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&wj.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(iR,Ej);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!iR.test(s)){let o=s.replace(Sj,Aj);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=rC}return new r(i,e)}function Aj(n){return"-"+n.toLowerCase()}function Ej(n){return n.charAt(1).toUpperCase()}const Cj=r2([s2,bj,l2,u2,c2],"html"),sC=r2([s2,_j,l2,u2,c2],"svg");function Ij(n){return n.join(" ").trim()}var kf={},iA,rR;function xj(){if(rR)return iA;rR=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,c=`
`,u="/",f="*",p="",m="comment",g="declaration";iA=function(w,A){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];A=A||{};var E=1,M=1;function I(ee){var oe=ee.match(e);oe&&(E+=oe.length);var me=ee.lastIndexOf(c);M=~me?ee.length-me:M+ee.length}function R(){var ee={line:E,column:M};return function(oe){return oe.position=new D(ee),j(),oe}}function D(ee){this.start=ee,this.end={line:E,column:M},this.source=A.source}D.prototype.content=w;function C(ee){var oe=new Error(A.source+":"+E+":"+M+": "+ee);if(oe.reason=ee,oe.filename=A.source,oe.line=E,oe.column=M,oe.source=w,!A.silent)throw oe}function k(ee){var oe=ee.exec(w);if(oe){var me=oe[0];return I(me),w=w.slice(me.length),oe}}function j(){k(t)}function U(ee){var oe;for(ee=ee||[];oe=F();)oe!==!1&&ee.push(oe);return ee}function F(){var ee=R();if(!(u!=w.charAt(0)||f!=w.charAt(1))){for(var oe=2;p!=w.charAt(oe)&&(f!=w.charAt(oe)||u!=w.charAt(oe+1));)++oe;if(oe+=2,p===w.charAt(oe-1))return C("End of comment missing");var me=w.slice(2,oe-2);return M+=2,I(me),w=w.slice(oe),M+=2,ee({type:m,comment:me})}}function J(){var ee=R(),oe=k(i);if(oe){if(F(),!k(r))return C("property missing ':'");var me=k(s),Q=ee({type:g,property:v(oe[0].replace(n,p)),value:me?v(me[0].replace(n,p)):p});return k(o),Q}}function G(){var ee=[];U(ee);for(var oe;oe=J();)oe!==!1&&(ee.push(oe),U(ee));return ee}return j(),G()};function v(w){return w?w.replace(a,p):p}return iA}var sR;function Mj(){if(sR)return kf;sR=1;var n=kf&&kf.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(kf,"__esModule",{value:!0}),kf.default=t;var e=n(xj());function t(i,r){var s=null;if(!i||typeof i!="string")return s;var o=(0,e.default)(i),a=typeof r=="function";return o.forEach(function(c){if(c.type==="declaration"){var u=c.property,f=c.value;a?r(u,f,c):f&&(s=s||{},s[u]=f)}}),s}return kf}var Em={},oR;function Dj(){if(oR)return Em;oR=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(u){return!u||t.test(u)||n.test(u)},o=function(u,f){return f.toUpperCase()},a=function(u,f){return"".concat(f,"-")},c=function(u,f){return f===void 0&&(f={}),s(u)?u:(u=u.toLowerCase(),f.reactCompat?u=u.replace(r,a):u=u.replace(i,a),u.replace(e,o))};return Em.camelCase=c,Em}var Cm,aR;function Rj(){if(aR)return Cm;aR=1;var n=Cm&&Cm.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=n(Mj()),t=Dj();function i(r,s){var o={};return!r||typeof r!="string"||(0,e.default)(r,function(a,c){a&&c&&(o[(0,t.camelCase)(a,s)]=c)}),o}return i.default=i,Cm=i,Cm}var kj=Rj();const Nj=mS(kj),d2=f2("end"),oC=f2("start");function f2(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function Oj(n){const e=oC(n),t=d2(n);if(e&&t)return{start:e,end:t}}function Ey(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?lR(n.position):"start"in n||"end"in n?lR(n):"line"in n||"column"in n?WA(n):""}function WA(n){return uR(n&&n.line)+":"+uR(n&&n.column)}function lR(n){return WA(n&&n.start)+"-"+WA(n&&n.end)}function uR(n){return n&&typeof n=="number"?n:1}class Qi extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",s={},o=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?r=e:!s.cause&&e&&(o=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const c=i.indexOf(":");c===-1?s.ruleId=i:(s.source=i.slice(0,c),s.ruleId=i.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=a?a.line:void 0,this.name=Ey(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Qi.prototype.file="";Qi.prototype.name="";Qi.prototype.reason="";Qi.prototype.message="";Qi.prototype.stack="";Qi.prototype.column=void 0;Qi.prototype.line=void 0;Qi.prototype.ancestors=void 0;Qi.prototype.cause=void 0;Qi.prototype.fatal=void 0;Qi.prototype.place=void 0;Qi.prototype.ruleId=void 0;Qi.prototype.source=void 0;const aC={}.hasOwnProperty,Bj=new Map,Fj=/[A-Z]/g,Pj=new Set(["table","tbody","thead","tfoot","tr"]),Lj=new Set(["td","th"]),h2="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Uj(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=Yj(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=$j(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?sC:Cj,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=p2(r,n,void 0);return s&&typeof s!="string"?s:r.create(n,r.Fragment,{children:s||void 0},void 0)}function p2(n,e,t){if(e.type==="element")return zj(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Vj(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return qj(n,e,t);if(e.type==="mdxjsEsm")return jj(n,e);if(e.type==="root")return Hj(n,e,t);if(e.type==="text")return Gj(n,e)}function zj(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=sC,n.schema=r),n.ancestors.push(e);const s=g2(n,e.tagName,!1),o=Wj(n,e);let a=uC(n,e);return Pj.has(e.tagName)&&(a=a.filter(function(c){return typeof c=="string"?!gj(c):!0})),m2(n,o,s,e),lC(o,a),n.ancestors.pop(),n.schema=i,n.create(e,s,o,t)}function Vj(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}Ny(n,e.position)}function jj(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);Ny(n,e.position)}function qj(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=sC,n.schema=r),n.ancestors.push(e);const s=e.name===null?n.Fragment:g2(n,e.name,!0),o=Kj(n,e),a=uC(n,e);return m2(n,o,s,e),lC(o,a),n.ancestors.pop(),n.schema=i,n.create(e,s,o,t)}function Hj(n,e,t){const i={};return lC(i,uC(n,e)),n.create(e,n.Fragment,i,t)}function Gj(n,e){return e.value}function m2(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function lC(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function $j(n,e,t){return i;function i(r,s,o,a){const u=Array.isArray(o.children)?t:e;return a?u(s,o,a):u(s,o)}}function Yj(n,e){return t;function t(i,r,s,o){const a=Array.isArray(s.children),c=oC(i);return e(r,s,o,a,{columnNumber:c?c.column-1:void 0,fileName:n,lineNumber:c?c.line:void 0},void 0)}}function Wj(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&aC.call(e.properties,r)){const s=Xj(n,r,e.properties[r]);if(s){const[o,a]=s;n.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Lj.has(e.tagName)?i=a:t[o]=a}}if(i){const s=t.style||(t.style={});s[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function Kj(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(t,n.evaluater.evaluateExpression(a.argument))}else Ny(n,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const a=i.value.data.estree.body[0];a.type,s=n.evaluater.evaluateExpression(a.expression)}else Ny(n,e.position);else s=i.value===null?!0:i.value;t[r]=s}return t}function uC(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:Bj;for(;++i<e.children.length;){const s=e.children[i];let o;if(n.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=r.get(c)||0;o=c+"-"+u,r.set(c,u+1)}}const a=p2(n,s,o);a!==void 0&&t.push(a)}return t}function Xj(n,e,t){const i=Tj(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?dj(t):Ij(t)),i.property==="style"){let r=typeof t=="object"?t:Jj(n,String(t));return n.stylePropertyNameCase==="css"&&(r=Zj(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?vj[i.property]||i.property:i.attribute,t]}}function Jj(n,e){try{return Nj(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new Qi("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=h2+"#cannot-parse-style-attribute",r}}function g2(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,o;for(;++s<r.length;){const a=eR(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}i=o}else i=eR(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return aC.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);Ny(n)}function Ny(n,e){const t=new Qi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=h2+"#cannot-handle-mdx-estrees-without-createevaluater",t}function Zj(n){const e={};let t;for(t in n)aC.call(n,t)&&(e[Qj(t)]=n[t]);return e}function Qj(n){let e=n.replace(Fj,e8);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function e8(n){return"-"+n.toLowerCase()}const rA={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},t8={};function cC(n,e){const t=t8,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return y2(n,i,r)}function y2(n,e,t){if(n8(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return cR(n.children,e,t)}return Array.isArray(n)?cR(n,e,t):""}function cR(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=y2(n[r],e,t);return i.join("")}function n8(n){return!!(n&&typeof n=="object")}const dR=document.createElement("i");function dC(n){const e="&"+n+";";dR.innerHTML=e;const t=dR.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function ns(n,e,t,i){const r=n.length;let s=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)o=Array.from(i),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);s<i.length;)o=i.slice(s,s+1e4),o.unshift(e,0),n.splice(...o),s+=1e4,e+=1e4}function vs(n,e){return n.length>0?(ns(n,n.length,0,e),n):e}const fR={}.hasOwnProperty;function b2(n){const e={};let t=-1;for(;++t<n.length;)i8(e,n[t]);return e}function i8(n,e){let t;for(t in e){const r=(fR.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let o;if(s)for(o in s){fR.call(r,o)||(r[o]=[]);const a=s[o];r8(r[o],Array.isArray(a)?a:a?[a]:[])}}}function r8(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);ns(n,0,0,i)}function _2(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function so(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const lr=Iu(/[A-Za-z]/),Ji=Iu(/[\dA-Za-z]/),s8=Iu(/[#-'*+\--9=?A-Z^-~]/);function D0(n){return n!==null&&(n<32||n===127)}const KA=Iu(/\d/),o8=Iu(/[\dA-Fa-f]/),a8=Iu(/[!-/:-@[-`{-~]/);function ht(n){return n!==null&&n<-2}function pn(n){return n!==null&&(n<0||n===32)}function Lt(n){return n===-2||n===-1||n===32}const bS=Iu(new RegExp("\\p{P}|\\p{S}","u")),Td=Iu(/\s/);function Iu(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function dp(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const s=n.charCodeAt(t);let o="";if(s===37&&Ji(n.charCodeAt(t+1))&&Ji(n.charCodeAt(t+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=n.charCodeAt(t+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),r=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(n.slice(i,t),encodeURIComponent(o)),i=t+r+1,o=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function Gt(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Lt(c)?(n.enter(t),a(c)):e(c)}function a(c){return Lt(c)&&s++<r?(n.consume(c),a):(n.exit(t),e(c))}}const l8={tokenize:u8};function u8(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),Gt(n,e,"linePrefix")}function r(a){return n.enter("paragraph"),s(a)}function s(a){const c=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=c),t=c,o(a)}function o(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return ht(a)?(n.consume(a),n.exit("chunkText"),s):(n.consume(a),o)}}const c8={tokenize:d8},hR={tokenize:f8};function d8(n){const e=this,t=[];let i=0,r,s,o;return a;function a(I){if(i<t.length){const R=t[i];return e.containerState=R[1],n.attempt(R[0].continuation,c,u)(I)}return u(I)}function c(I){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&M();const R=e.events.length;let D=R,C;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){C=e.events[D][1].end;break}E(i);let k=R;for(;k<e.events.length;)e.events[k][1].end={...C},k++;return ns(e.events,D+1,0,e.events.slice(R)),e.events.length=k,u(I)}return a(I)}function u(I){if(i===t.length){if(!r)return m(I);if(r.currentConstruct&&r.currentConstruct.concrete)return v(I);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(hR,f,p)(I)}function f(I){return r&&M(),E(i),m(I)}function p(I){return e.parser.lazy[e.now().line]=i!==t.length,o=e.now().offset,v(I)}function m(I){return e.containerState={},n.attempt(hR,g,v)(I)}function g(I){return i++,t.push([e.currentConstruct,e.containerState]),m(I)}function v(I){if(I===null){r&&M(),E(0),n.consume(I);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),w(I)}function w(I){if(I===null){A(n.exit("chunkFlow"),!0),E(0),n.consume(I);return}return ht(I)?(n.consume(I),A(n.exit("chunkFlow")),i=0,e.interrupt=void 0,a):(n.consume(I),w)}function A(I,R){const D=e.sliceStream(I);if(R&&D.push(null),I.previous=s,s&&(s.next=I),s=I,r.defineSkip(I.start),r.write(D),e.parser.lazy[I.start.line]){let C=r.events.length;for(;C--;)if(r.events[C][1].start.offset<o&&(!r.events[C][1].end||r.events[C][1].end.offset>o))return;const k=e.events.length;let j=k,U,F;for(;j--;)if(e.events[j][0]==="exit"&&e.events[j][1].type==="chunkFlow"){if(U){F=e.events[j][1].end;break}U=!0}for(E(i),C=k;C<e.events.length;)e.events[C][1].end={...F},C++;ns(e.events,j+1,0,e.events.slice(k)),e.events.length=C}}function E(I){let R=t.length;for(;R-- >I;){const D=t[R];e.containerState=D[1],D[0].exit.call(e,n)}t.length=I}function M(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function f8(n,e,t){return Gt(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qh(n){if(n===null||pn(n)||Td(n))return 1;if(bS(n))return 2}function _S(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const s=n[r].resolveAll;s&&!i.includes(s)&&(e=s(e,t),i.push(s))}return e}const XA={name:"attention",resolveAll:h8,tokenize:p8};function h8(n,e){let t=-1,i,r,s,o,a,c,u,f;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;c=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const p={...n[i][1].end},m={...n[t][1].start};pR(p,-c),pR(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...n[i][1].end}},a={type:c>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:m},s={type:c>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:c>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},n[i][1].end={...o.start},n[t][1].start={...a.end},u=[],n[i][1].end.offset-n[i][1].start.offset&&(u=vs(u,[["enter",n[i][1],e],["exit",n[i][1],e]])),u=vs(u,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=vs(u,_S(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),u=vs(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(f=2,u=vs(u,[["enter",n[t][1],e],["exit",n[t][1],e]])):f=0,ns(n,i-1,t-i+3,u),t=i+u.length-f-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function p8(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Qh(i);let s;return o;function o(c){return s=c,n.enter("attentionSequence"),a(c)}function a(c){if(c===s)return n.consume(c),a;const u=n.exit("attentionSequence"),f=Qh(c),p=!f||f===2&&r||t.includes(c),m=!r||r===2&&f||t.includes(i);return u._open=!!(s===42?p:p&&(r||!m)),u._close=!!(s===42?m:m&&(f||!p)),e(c)}}function pR(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const m8={name:"autolink",tokenize:g8};function g8(n,e,t){let i=0;return r;function r(g){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(g),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(g){return lr(g)?(n.consume(g),o):g===64?t(g):u(g)}function o(g){return g===43||g===45||g===46||Ji(g)?(i=1,a(g)):u(g)}function a(g){return g===58?(n.consume(g),i=0,c):(g===43||g===45||g===46||Ji(g))&&i++<32?(n.consume(g),a):(i=0,u(g))}function c(g){return g===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(g),n.exit("autolinkMarker"),n.exit("autolink"),e):g===null||g===32||g===60||D0(g)?t(g):(n.consume(g),c)}function u(g){return g===64?(n.consume(g),f):s8(g)?(n.consume(g),u):t(g)}function f(g){return Ji(g)?p(g):t(g)}function p(g){return g===46?(n.consume(g),i=0,f):g===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(g),n.exit("autolinkMarker"),n.exit("autolink"),e):m(g)}function m(g){if((g===45||Ji(g))&&i++<63){const v=g===45?m:p;return n.consume(g),v}return t(g)}}const r_={partial:!0,tokenize:y8};function y8(n,e,t){return i;function i(s){return Lt(s)?Gt(n,r,"linePrefix")(s):r(s)}function r(s){return s===null||ht(s)?e(s):t(s)}}const v2={continuation:{tokenize:_8},exit:v8,name:"blockQuote",tokenize:b8};function b8(n,e,t){const i=this;return r;function r(o){if(o===62){const a=i.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),s}return t(o)}function s(o){return Lt(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function _8(n,e,t){const i=this;return r;function r(o){return Lt(o)?Gt(n,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return n.attempt(v2,e,t)(o)}}function v8(n){n.exit("blockQuote")}const S2={name:"characterEscape",tokenize:S8};function S8(n,e,t){return i;function i(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),r}function r(s){return a8(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const w2={name:"characterReference",tokenize:w8};function w8(n,e,t){const i=this;let r=0,s,o;return a;function a(p){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),c}function c(p){return p===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(p),n.exit("characterReferenceMarkerNumeric"),u):(n.enter("characterReferenceValue"),s=31,o=Ji,f(p))}function u(p){return p===88||p===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(p),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,o=o8,f):(n.enter("characterReferenceValue"),s=7,o=KA,f(p))}function f(p){if(p===59&&r){const m=n.exit("characterReferenceValue");return o===Ji&&!dC(i.sliceSerialize(m))?t(p):(n.enter("characterReferenceMarker"),n.consume(p),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(p)&&r++<s?(n.consume(p),f):t(p)}}const mR={partial:!0,tokenize:A8},gR={concrete:!0,name:"codeFenced",tokenize:T8};function T8(n,e,t){const i=this,r={partial:!0,tokenize:D};let s=0,o=0,a;return c;function c(C){return u(C)}function u(C){const k=i.events[i.events.length-1];return s=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,a=C,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),f(C)}function f(C){return C===a?(o++,n.consume(C),f):o<3?t(C):(n.exit("codeFencedFenceSequence"),Lt(C)?Gt(n,p,"whitespace")(C):p(C))}function p(C){return C===null||ht(C)?(n.exit("codeFencedFence"),i.interrupt?e(C):n.check(mR,w,R)(C)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===null||ht(C)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),p(C)):Lt(C)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Gt(n,g,"whitespace")(C)):C===96&&C===a?t(C):(n.consume(C),m)}function g(C){return C===null||ht(C)?p(C):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),v(C))}function v(C){return C===null||ht(C)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),p(C)):C===96&&C===a?t(C):(n.consume(C),v)}function w(C){return n.attempt(r,R,A)(C)}function A(C){return n.enter("lineEnding"),n.consume(C),n.exit("lineEnding"),E}function E(C){return s>0&&Lt(C)?Gt(n,M,"linePrefix",s+1)(C):M(C)}function M(C){return C===null||ht(C)?n.check(mR,w,R)(C):(n.enter("codeFlowValue"),I(C))}function I(C){return C===null||ht(C)?(n.exit("codeFlowValue"),M(C)):(n.consume(C),I)}function R(C){return n.exit("codeFenced"),e(C)}function D(C,k,j){let U=0;return F;function F(me){return C.enter("lineEnding"),C.consume(me),C.exit("lineEnding"),J}function J(me){return C.enter("codeFencedFence"),Lt(me)?Gt(C,G,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(me):G(me)}function G(me){return me===a?(C.enter("codeFencedFenceSequence"),ee(me)):j(me)}function ee(me){return me===a?(U++,C.consume(me),ee):U>=o?(C.exit("codeFencedFenceSequence"),Lt(me)?Gt(C,oe,"whitespace")(me):oe(me)):j(me)}function oe(me){return me===null||ht(me)?(C.exit("codeFencedFence"),k(me)):j(me)}}}function A8(n,e,t){const i=this;return r;function r(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?t(o):e(o)}}const sA={name:"codeIndented",tokenize:C8},E8={partial:!0,tokenize:I8};function C8(n,e,t){const i=this;return r;function r(u){return n.enter("codeIndented"),Gt(n,s,"linePrefix",5)(u)}function s(u){const f=i.events[i.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):t(u)}function o(u){return u===null?c(u):ht(u)?n.attempt(E8,o,c)(u):(n.enter("codeFlowValue"),a(u))}function a(u){return u===null||ht(u)?(n.exit("codeFlowValue"),o(u)):(n.consume(u),a)}function c(u){return n.exit("codeIndented"),e(u)}}function I8(n,e,t){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?t(o):ht(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),r):Gt(n,s,"linePrefix",5)(o)}function s(o){const a=i.events[i.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):ht(o)?r(o):t(o)}}const x8={name:"codeText",previous:D8,resolve:M8,tokenize:R8};function M8(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function D8(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function R8(n,e,t){let i=0,r,s;return o;function o(p){return n.enter("codeText"),n.enter("codeTextSequence"),a(p)}function a(p){return p===96?(n.consume(p),i++,a):(n.exit("codeTextSequence"),c(p))}function c(p){return p===null?t(p):p===32?(n.enter("space"),n.consume(p),n.exit("space"),c):p===96?(s=n.enter("codeTextSequence"),r=0,f(p)):ht(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),c):(n.enter("codeTextData"),u(p))}function u(p){return p===null||p===32||p===96||ht(p)?(n.exit("codeTextData"),c(p)):(n.consume(p),u)}function f(p){return p===96?(n.consume(p),r++,f):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(p)):(s.type="codeTextData",u(p))}}class k8{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&Im(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Im(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Im(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Im(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Im(this.left,t.reverse())}}}function Im(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function T2(n){const e={};let t=-1,i,r,s,o,a,c,u;const f=new k8(n);for(;++t<f.length;){for(;t in e;)t=e[t];if(i=f.get(t),t&&i[1].type==="chunkFlow"&&f.get(t-1)[1].type==="listItemPrefix"&&(c=i[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,N8(f,t)),t=e[t],u=!0);else if(i[1]._container){for(s=t,r=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(f.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...f.get(r)[1].start},a=f.slice(r,t),a.unshift(i),f.splice(r,t-r+1,a))}}return ns(n,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function N8(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const s=[];let o=t._tokenizer;o||(o=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,c=[],u={};let f,p,m=-1,g=t,v=0,w=0;const A=[w];for(;g;){for(;n.get(++r)[1]!==g;);s.push(r),g._tokenizer||(f=i.sliceStream(g),g.next||f.push(null),p&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),p=g,g=g.next}for(g=t;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(w=m+1,A.push(w),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):A.pop(),m=A.length;m--;){const E=a.slice(A[m],A[m+1]),M=s.pop();c.push([M,M+E.length-1]),n.splice(M,2,E)}for(c.reverse(),m=-1;++m<c.length;)u[v+c[m][0]]=v+c[m][1],v+=c[m][1]-c[m][0]-1;return u}const O8={resolve:F8,tokenize:P8},B8={partial:!0,tokenize:L8};function F8(n){return T2(n),n}function P8(n,e){let t;return i;function i(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(a)}function r(a){return a===null?s(a):ht(a)?n.check(B8,o,s)(a):(n.consume(a),r)}function s(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function o(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function L8(n,e,t){const i=this;return r;function r(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),Gt(n,s,"linePrefix")}function s(o){if(o===null||ht(o))return t(o);const a=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):n.interrupt(i.parser.constructs.flow,t,e)(o)}}function A2(n,e,t,i,r,s,o,a,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return p;function p(E){return E===60?(n.enter(i),n.enter(r),n.enter(s),n.consume(E),n.exit(s),m):E===null||E===32||E===41||D0(E)?t(E):(n.enter(i),n.enter(o),n.enter(a),n.enter("chunkString",{contentType:"string"}),w(E))}function m(E){return E===62?(n.enter(s),n.consume(E),n.exit(s),n.exit(r),n.exit(i),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),g(E))}function g(E){return E===62?(n.exit("chunkString"),n.exit(a),m(E)):E===null||E===60||ht(E)?t(E):(n.consume(E),E===92?v:g)}function v(E){return E===60||E===62||E===92?(n.consume(E),g):g(E)}function w(E){return!f&&(E===null||E===41||pn(E))?(n.exit("chunkString"),n.exit(a),n.exit(o),n.exit(i),e(E)):f<u&&E===40?(n.consume(E),f++,w):E===41?(n.consume(E),f--,w):E===null||E===32||E===40||D0(E)?t(E):(n.consume(E),E===92?A:w)}function A(E){return E===40||E===41||E===92?(n.consume(E),w):w(E)}}function E2(n,e,t,i,r,s){const o=this;let a=0,c;return u;function u(g){return n.enter(i),n.enter(r),n.consume(g),n.exit(r),n.enter(s),f}function f(g){return a>999||g===null||g===91||g===93&&!c||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?t(g):g===93?(n.exit(s),n.enter(r),n.consume(g),n.exit(r),n.exit(i),e):ht(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),f):(n.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===null||g===91||g===93||ht(g)||a++>999?(n.exit("chunkString"),f(g)):(n.consume(g),c||(c=!Lt(g)),g===92?m:p)}function m(g){return g===91||g===92||g===93?(n.consume(g),a++,p):p(g)}}function C2(n,e,t,i,r,s){let o;return a;function a(m){return m===34||m===39||m===40?(n.enter(i),n.enter(r),n.consume(m),n.exit(r),o=m===40?41:m,c):t(m)}function c(m){return m===o?(n.enter(r),n.consume(m),n.exit(r),n.exit(i),e):(n.enter(s),u(m))}function u(m){return m===o?(n.exit(s),c(o)):m===null?t(m):ht(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),Gt(n,u,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===o||m===null||ht(m)?(n.exit("chunkString"),u(m)):(n.consume(m),m===92?p:f)}function p(m){return m===o||m===92?(n.consume(m),f):f(m)}}function Cy(n,e){let t;return i;function i(r){return ht(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Lt(r)?Gt(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const U8={name:"definition",tokenize:V8},z8={partial:!0,tokenize:j8};function V8(n,e,t){const i=this;let r;return s;function s(g){return n.enter("definition"),o(g)}function o(g){return E2.call(i,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return r=so(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),g===58?(n.enter("definitionMarker"),n.consume(g),n.exit("definitionMarker"),c):t(g)}function c(g){return pn(g)?Cy(n,u)(g):u(g)}function u(g){return A2(n,f,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function f(g){return n.attempt(z8,p,p)(g)}function p(g){return Lt(g)?Gt(n,m,"whitespace")(g):m(g)}function m(g){return g===null||ht(g)?(n.exit("definition"),i.parser.defined.push(r),e(g)):t(g)}}function j8(n,e,t){return i;function i(a){return pn(a)?Cy(n,r)(a):t(a)}function r(a){return C2(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Lt(a)?Gt(n,o,"whitespace")(a):o(a)}function o(a){return a===null||ht(a)?e(a):t(a)}}const q8={name:"hardBreakEscape",tokenize:H8};function H8(n,e,t){return i;function i(s){return n.enter("hardBreakEscape"),n.consume(s),r}function r(s){return ht(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const G8={name:"headingAtx",resolve:$8,tokenize:Y8};function $8(n,e){let t=n.length-2,i=3,r,s;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},s={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},ns(n,i,t-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),n}function Y8(n,e,t){let i=0;return r;function r(f){return n.enter("atxHeading"),s(f)}function s(f){return n.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&i++<6?(n.consume(f),o):f===null||pn(f)?(n.exit("atxHeadingSequence"),a(f)):t(f)}function a(f){return f===35?(n.enter("atxHeadingSequence"),c(f)):f===null||ht(f)?(n.exit("atxHeading"),e(f)):Lt(f)?Gt(n,a,"whitespace")(f):(n.enter("atxHeadingText"),u(f))}function c(f){return f===35?(n.consume(f),c):(n.exit("atxHeadingSequence"),a(f))}function u(f){return f===null||f===35||pn(f)?(n.exit("atxHeadingText"),a(f)):(n.consume(f),u)}}const W8=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],yR=["pre","script","style","textarea"],K8={concrete:!0,name:"htmlFlow",resolveTo:Z8,tokenize:Q8},X8={partial:!0,tokenize:t5},J8={partial:!0,tokenize:e5};function Z8(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function Q8(n,e,t){const i=this;let r,s,o,a,c;return u;function u(q){return f(q)}function f(q){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(q),p}function p(q){return q===33?(n.consume(q),m):q===47?(n.consume(q),s=!0,w):q===63?(n.consume(q),r=3,i.interrupt?e:N):lr(q)?(n.consume(q),o=String.fromCharCode(q),A):t(q)}function m(q){return q===45?(n.consume(q),r=2,g):q===91?(n.consume(q),r=5,a=0,v):lr(q)?(n.consume(q),r=4,i.interrupt?e:N):t(q)}function g(q){return q===45?(n.consume(q),i.interrupt?e:N):t(q)}function v(q){const Re="CDATA[";return q===Re.charCodeAt(a++)?(n.consume(q),a===Re.length?i.interrupt?e:G:v):t(q)}function w(q){return lr(q)?(n.consume(q),o=String.fromCharCode(q),A):t(q)}function A(q){if(q===null||q===47||q===62||pn(q)){const Re=q===47,je=o.toLowerCase();return!Re&&!s&&yR.includes(je)?(r=1,i.interrupt?e(q):G(q)):W8.includes(o.toLowerCase())?(r=6,Re?(n.consume(q),E):i.interrupt?e(q):G(q)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(q):s?M(q):I(q))}return q===45||Ji(q)?(n.consume(q),o+=String.fromCharCode(q),A):t(q)}function E(q){return q===62?(n.consume(q),i.interrupt?e:G):t(q)}function M(q){return Lt(q)?(n.consume(q),M):F(q)}function I(q){return q===47?(n.consume(q),F):q===58||q===95||lr(q)?(n.consume(q),R):Lt(q)?(n.consume(q),I):F(q)}function R(q){return q===45||q===46||q===58||q===95||Ji(q)?(n.consume(q),R):D(q)}function D(q){return q===61?(n.consume(q),C):Lt(q)?(n.consume(q),D):I(q)}function C(q){return q===null||q===60||q===61||q===62||q===96?t(q):q===34||q===39?(n.consume(q),c=q,k):Lt(q)?(n.consume(q),C):j(q)}function k(q){return q===c?(n.consume(q),c=null,U):q===null||ht(q)?t(q):(n.consume(q),k)}function j(q){return q===null||q===34||q===39||q===47||q===60||q===61||q===62||q===96||pn(q)?D(q):(n.consume(q),j)}function U(q){return q===47||q===62||Lt(q)?I(q):t(q)}function F(q){return q===62?(n.consume(q),J):t(q)}function J(q){return q===null||ht(q)?G(q):Lt(q)?(n.consume(q),J):t(q)}function G(q){return q===45&&r===2?(n.consume(q),Q):q===60&&r===1?(n.consume(q),V):q===62&&r===4?(n.consume(q),ce):q===63&&r===3?(n.consume(q),N):q===93&&r===5?(n.consume(q),xe):ht(q)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(X8,Me,ee)(q)):q===null||ht(q)?(n.exit("htmlFlowData"),ee(q)):(n.consume(q),G)}function ee(q){return n.check(J8,oe,Me)(q)}function oe(q){return n.enter("lineEnding"),n.consume(q),n.exit("lineEnding"),me}function me(q){return q===null||ht(q)?ee(q):(n.enter("htmlFlowData"),G(q))}function Q(q){return q===45?(n.consume(q),N):G(q)}function V(q){return q===47?(n.consume(q),o="",te):G(q)}function te(q){if(q===62){const Re=o.toLowerCase();return yR.includes(Re)?(n.consume(q),ce):G(q)}return lr(q)&&o.length<8?(n.consume(q),o+=String.fromCharCode(q),te):G(q)}function xe(q){return q===93?(n.consume(q),N):G(q)}function N(q){return q===62?(n.consume(q),ce):q===45&&r===2?(n.consume(q),N):G(q)}function ce(q){return q===null||ht(q)?(n.exit("htmlFlowData"),Me(q)):(n.consume(q),ce)}function Me(q){return n.exit("htmlFlow"),e(q)}}function e5(n,e,t){const i=this;return r;function r(o){return ht(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s):t(o)}function s(o){return i.parser.lazy[i.now().line]?t(o):e(o)}}function t5(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(r_,e,t)}}const n5={name:"htmlText",tokenize:i5};function i5(n,e,t){const i=this;let r,s,o;return a;function a(N){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(N),c}function c(N){return N===33?(n.consume(N),u):N===47?(n.consume(N),D):N===63?(n.consume(N),I):lr(N)?(n.consume(N),j):t(N)}function u(N){return N===45?(n.consume(N),f):N===91?(n.consume(N),s=0,v):lr(N)?(n.consume(N),M):t(N)}function f(N){return N===45?(n.consume(N),g):t(N)}function p(N){return N===null?t(N):N===45?(n.consume(N),m):ht(N)?(o=p,V(N)):(n.consume(N),p)}function m(N){return N===45?(n.consume(N),g):p(N)}function g(N){return N===62?Q(N):N===45?m(N):p(N)}function v(N){const ce="CDATA[";return N===ce.charCodeAt(s++)?(n.consume(N),s===ce.length?w:v):t(N)}function w(N){return N===null?t(N):N===93?(n.consume(N),A):ht(N)?(o=w,V(N)):(n.consume(N),w)}function A(N){return N===93?(n.consume(N),E):w(N)}function E(N){return N===62?Q(N):N===93?(n.consume(N),E):w(N)}function M(N){return N===null||N===62?Q(N):ht(N)?(o=M,V(N)):(n.consume(N),M)}function I(N){return N===null?t(N):N===63?(n.consume(N),R):ht(N)?(o=I,V(N)):(n.consume(N),I)}function R(N){return N===62?Q(N):I(N)}function D(N){return lr(N)?(n.consume(N),C):t(N)}function C(N){return N===45||Ji(N)?(n.consume(N),C):k(N)}function k(N){return ht(N)?(o=k,V(N)):Lt(N)?(n.consume(N),k):Q(N)}function j(N){return N===45||Ji(N)?(n.consume(N),j):N===47||N===62||pn(N)?U(N):t(N)}function U(N){return N===47?(n.consume(N),Q):N===58||N===95||lr(N)?(n.consume(N),F):ht(N)?(o=U,V(N)):Lt(N)?(n.consume(N),U):Q(N)}function F(N){return N===45||N===46||N===58||N===95||Ji(N)?(n.consume(N),F):J(N)}function J(N){return N===61?(n.consume(N),G):ht(N)?(o=J,V(N)):Lt(N)?(n.consume(N),J):U(N)}function G(N){return N===null||N===60||N===61||N===62||N===96?t(N):N===34||N===39?(n.consume(N),r=N,ee):ht(N)?(o=G,V(N)):Lt(N)?(n.consume(N),G):(n.consume(N),oe)}function ee(N){return N===r?(n.consume(N),r=void 0,me):N===null?t(N):ht(N)?(o=ee,V(N)):(n.consume(N),ee)}function oe(N){return N===null||N===34||N===39||N===60||N===61||N===96?t(N):N===47||N===62||pn(N)?U(N):(n.consume(N),oe)}function me(N){return N===47||N===62||pn(N)?U(N):t(N)}function Q(N){return N===62?(n.consume(N),n.exit("htmlTextData"),n.exit("htmlText"),e):t(N)}function V(N){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(N),n.exit("lineEnding"),te}function te(N){return Lt(N)?Gt(n,xe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):xe(N)}function xe(N){return n.enter("htmlTextData"),o(N)}}const fC={name:"labelEnd",resolveAll:a5,resolveTo:l5,tokenize:u5},r5={tokenize:c5},s5={tokenize:d5},o5={tokenize:f5};function a5(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&ns(n,0,n.length,t),n}function l5(n,e){let t=n.length,i=0,r,s,o,a;for(;t--;)if(r=n[t][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=t);const c={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},u={type:"label",start:{...n[s][1].start},end:{...n[o][1].end}},f={type:"labelText",start:{...n[s+i+2][1].end},end:{...n[o-2][1].start}};return a=[["enter",c,e],["enter",u,e]],a=vs(a,n.slice(s+1,s+i+3)),a=vs(a,[["enter",f,e]]),a=vs(a,_S(e.parser.constructs.insideSpan.null,n.slice(s+i+4,o-3),e)),a=vs(a,[["exit",f,e],n[o-2],n[o-1],["exit",u,e]]),a=vs(a,n.slice(o+1)),a=vs(a,[["exit",c,e]]),ns(n,s,n.length,a),n}function u5(n,e,t){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return a;function a(m){return s?s._inactive?p(m):(o=i.parser.defined.includes(so(i.sliceSerialize({start:s.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(m),n.exit("labelMarker"),n.exit("labelEnd"),c):t(m)}function c(m){return m===40?n.attempt(r5,f,o?f:p)(m):m===91?n.attempt(s5,f,o?u:p)(m):o?f(m):p(m)}function u(m){return n.attempt(o5,f,p)(m)}function f(m){return e(m)}function p(m){return s._balanced=!0,t(m)}}function c5(n,e,t){return i;function i(p){return n.enter("resource"),n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),r}function r(p){return pn(p)?Cy(n,s)(p):s(p)}function s(p){return p===41?f(p):A2(n,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function o(p){return pn(p)?Cy(n,c)(p):f(p)}function a(p){return t(p)}function c(p){return p===34||p===39||p===40?C2(n,u,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):f(p)}function u(p){return pn(p)?Cy(n,f)(p):f(p)}function f(p){return p===41?(n.enter("resourceMarker"),n.consume(p),n.exit("resourceMarker"),n.exit("resource"),e):t(p)}}function d5(n,e,t){const i=this;return r;function r(a){return E2.call(i,n,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return i.parser.defined.includes(so(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function o(a){return t(a)}}function f5(n,e,t){return i;function i(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),r}function r(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const h5={name:"labelStartImage",resolveAll:fC.resolveAll,tokenize:p5};function p5(n,e,t){const i=this;return r;function r(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),s}function s(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),o):t(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const m5={name:"labelStartLink",resolveAll:fC.resolveAll,tokenize:g5};function g5(n,e,t){const i=this;return r;function r(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(o):e(o)}}const oA={name:"lineEnding",tokenize:y5};function y5(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),Gt(n,e,"linePrefix")}}const Wv={name:"thematicBreak",tokenize:b5};function b5(n,e,t){let i=0,r;return s;function s(u){return n.enter("thematicBreak"),o(u)}function o(u){return r=u,a(u)}function a(u){return u===r?(n.enter("thematicBreakSequence"),c(u)):i>=3&&(u===null||ht(u))?(n.exit("thematicBreak"),e(u)):t(u)}function c(u){return u===r?(n.consume(u),i++,c):(n.exit("thematicBreakSequence"),Lt(u)?Gt(n,a,"whitespace")(u):a(u))}}const _r={continuation:{tokenize:w5},exit:A5,name:"list",tokenize:S5},_5={partial:!0,tokenize:E5},v5={partial:!0,tokenize:T5};function S5(n,e,t){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return a;function a(g){const v=i.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(v==="listUnordered"?!i.containerState.marker||g===i.containerState.marker:KA(g)){if(i.containerState.type||(i.containerState.type=v,n.enter(v,{_container:!0})),v==="listUnordered")return n.enter("listItemPrefix"),g===42||g===45?n.check(Wv,t,u)(g):u(g);if(!i.interrupt||g===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(g)}return t(g)}function c(g){return KA(g)&&++o<10?(n.consume(g),c):(!i.interrupt||o<2)&&(i.containerState.marker?g===i.containerState.marker:g===41||g===46)?(n.exit("listItemValue"),u(g)):t(g)}function u(g){return n.enter("listItemMarker"),n.consume(g),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||g,n.check(r_,i.interrupt?t:f,n.attempt(_5,m,p))}function f(g){return i.containerState.initialBlankLine=!0,s++,m(g)}function p(g){return Lt(g)?(n.enter("listItemPrefixWhitespace"),n.consume(g),n.exit("listItemPrefixWhitespace"),m):t(g)}function m(g){return i.containerState.size=s+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(g)}}function w5(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(r_,r,s);function r(a){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Gt(n,e,"listItemIndent",i.containerState.size+1)(a)}function s(a){return i.containerState.furtherBlankLines||!Lt(a)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(a)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(v5,e,o)(a))}function o(a){return i.containerState._closeFlow=!0,i.interrupt=void 0,Gt(n,n.attempt(_r,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function T5(n,e,t){const i=this;return Gt(n,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(s):t(s)}}function A5(n){n.exit(this.containerState.type)}function E5(n,e,t){const i=this;return Gt(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=i.events[i.events.length-1];return!Lt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const bR={name:"setextUnderline",resolveTo:C5,tokenize:I5};function C5(n,e){let t=n.length,i,r,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const o={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",s?(n.splice(r,0,["enter",o,e]),n.splice(s+1,0,["exit",n[i][1],e]),n[i][1].end={...n[s][1].end}):n[i][1]=o,n.push(["exit",o,e]),n}function I5(n,e,t){const i=this;let r;return s;function s(u){let f=i.events.length,p;for(;f--;)if(i.events[f][1].type!=="lineEnding"&&i.events[f][1].type!=="linePrefix"&&i.events[f][1].type!=="content"){p=i.events[f][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||p)?(n.enter("setextHeadingLine"),r=u,o(u)):t(u)}function o(u){return n.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===r?(n.consume(u),a):(n.exit("setextHeadingLineSequence"),Lt(u)?Gt(n,c,"lineSuffix")(u):c(u))}function c(u){return u===null||ht(u)?(n.exit("setextHeadingLine"),e(u)):t(u)}}const x5={tokenize:M5};function M5(n){const e=this,t=n.attempt(r_,i,n.attempt(this.parser.constructs.flowInitial,r,Gt(n,n.attempt(this.parser.constructs.flow,r,n.attempt(O8,r)),"linePrefix")));return t;function i(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const D5={resolveAll:x2()},R5=I2("string"),k5=I2("text");function I2(n){return{resolveAll:x2(n==="text"?N5:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],s=t.attempt(r,o,a);return o;function o(f){return u(f)?s(f):a(f)}function a(f){if(f===null){t.consume(f);return}return t.enter("data"),t.consume(f),c}function c(f){return u(f)?(t.exit("data"),s(f)):(t.consume(f),c)}function u(f){if(f===null)return!0;const p=r[f];let m=-1;if(p)for(;++m<p.length;){const g=p[m];if(!g.previous||g.previous.call(i,i.previous))return!0}return!1}}}function x2(n){return e;function e(t,i){let r=-1,s;for(;++r<=t.length;)s===void 0?t[r]&&t[r][1].type==="data"&&(s=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),r=s+2),s=void 0);return n?n(t,i):t}}function N5(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let s=r.length,o=-1,a=0,c;for(;s--;){const u=r[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)c=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(a=0),a){const u={type:t===n.length||c||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-a,offset:i.end.offset-a},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(n.splice(t,0,["enter",u,e],["exit",u,e]),t+=2)}t++}return n}const O5={42:_r,43:_r,45:_r,48:_r,49:_r,50:_r,51:_r,52:_r,53:_r,54:_r,55:_r,56:_r,57:_r,62:v2},B5={91:U8},F5={[-2]:sA,[-1]:sA,32:sA},P5={35:G8,42:Wv,45:[bR,Wv],60:K8,61:bR,95:Wv,96:gR,126:gR},L5={38:w2,92:S2},U5={[-5]:oA,[-4]:oA,[-3]:oA,33:h5,38:w2,42:XA,60:[m8,n5],91:m5,92:[q8,S2],93:fC,95:XA,96:x8},z5={null:[XA,D5]},V5={null:[42,95]},j5={null:[]},q5=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:V5,contentInitial:B5,disable:j5,document:O5,flow:P5,flowInitial:F5,insideSpan:z5,string:L5,text:U5},Symbol.toStringTag,{value:"Module"}));function H5(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},s=[];let o=[],a=[];const c={attempt:k(D),check:k(C),consume:M,enter:I,exit:R,interrupt:k(C,{interrupt:!0})},u={code:null,containerState:{},defineSkip:w,events:[],now:v,parser:n,previous:null,sliceSerialize:m,sliceStream:g,write:p};let f=e.tokenize.call(u,c);return e.resolveAll&&s.push(e),u;function p(J){return o=vs(o,J),A(),o[o.length-1]!==null?[]:(j(e,0),u.events=_S(s,u.events,u),u.events)}function m(J,G){return $5(g(J),G)}function g(J){return G5(o,J)}function v(){const{_bufferIndex:J,_index:G,line:ee,column:oe,offset:me}=i;return{_bufferIndex:J,_index:G,line:ee,column:oe,offset:me}}function w(J){r[J.line]=J.column,F()}function A(){let J;for(;i._index<o.length;){const G=o[i._index];if(typeof G=="string")for(J=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===J&&i._bufferIndex<G.length;)E(G.charCodeAt(i._bufferIndex));else E(G)}}function E(J){f=f(J)}function M(J){ht(J)?(i.line++,i.column=1,i.offset+=J===-3?2:1,F()):J!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=J}function I(J,G){const ee=G||{};return ee.type=J,ee.start=v(),u.events.push(["enter",ee,u]),a.push(ee),ee}function R(J){const G=a.pop();return G.end=v(),u.events.push(["exit",G,u]),G}function D(J,G){j(J,G.from)}function C(J,G){G.restore()}function k(J,G){return ee;function ee(oe,me,Q){let V,te,xe,N;return Array.isArray(oe)?Me(oe):"tokenize"in oe?Me([oe]):ce(oe);function ce(re){return ae;function ae(de){const fe=de!==null&&re[de],Pe=de!==null&&re.null,Ue=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(Pe)?Pe:Pe?[Pe]:[]];return Me(Ue)(de)}}function Me(re){return V=re,te=0,re.length===0?Q:q(re[te])}function q(re){return ae;function ae(de){return N=U(),xe=re,re.partial||(u.currentConstruct=re),re.name&&u.parser.constructs.disable.null.includes(re.name)?je():re.tokenize.call(G?Object.assign(Object.create(u),G):u,c,Re,je)(de)}}function Re(re){return J(xe,N),me}function je(re){return N.restore(),++te<V.length?q(V[te]):Q}}}function j(J,G){J.resolveAll&&!s.includes(J)&&s.push(J),J.resolve&&ns(u.events,G,u.events.length-G,J.resolve(u.events.slice(G),u)),J.resolveTo&&(u.events=J.resolveTo(u.events,u))}function U(){const J=v(),G=u.previous,ee=u.currentConstruct,oe=u.events.length,me=Array.from(a);return{from:oe,restore:Q};function Q(){i=J,u.previous=G,u.currentConstruct=ee,u.events.length=oe,a=me,F()}}function F(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function G5(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(t===r)o=[n[t].slice(i,s)];else{if(o=n.slice(t,r),i>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(i):o.shift()}s>0&&o.push(n[r].slice(0,s))}return o}function $5(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const s=n[t];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function Y5(n){const i={constructs:b2([q5,...(n||{}).extensions||[]]),content:r(l8),defined:[],document:r(c8),flow:r(x5),lazy:{},string:r(R5),text:r(k5)};return i;function r(s){return o;function o(a){return H5(i,s,a)}}}function W5(n){for(;!T2(n););return n}const _R=/[\0\t\n\r]/g;function K5(){let n=1,e="",t=!0,i;return r;function r(s,o,a){const c=[];let u,f,p,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),p=0,e="",t&&(s.charCodeAt(0)===65279&&p++,t=void 0);p<s.length;){if(_R.lastIndex=p,u=_R.exec(s),m=u&&u.index!==void 0?u.index:s.length,g=s.charCodeAt(m),!u){e=s.slice(p);break}if(g===10&&p===m&&i)c.push(-3),i=void 0;else switch(i&&(c.push(-5),i=void 0),p<m&&(c.push(s.slice(p,m)),n+=m-p),g){case 0:{c.push(65533),n++;break}case 9:{for(f=Math.ceil(n/4)*4,c.push(-2);n++<f;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:i=!0,n=1}p=m+1}return a&&(i&&c.push(-5),e&&c.push(e),c.push(null)),c}}const X5=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function J5(n){return n.replace(X5,Z5)}function Z5(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),s=r===120||r===88;return _2(t.slice(s?2:1),s?16:10)}return dC(t)||n}const M2={}.hasOwnProperty;function Q5(n,e,t){return typeof e!="string"&&(t=e,e=void 0),eq(t)(W5(Y5(t).document().write(K5()(n,e,!0))))}function eq(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(we),autolinkProtocol:U,autolinkEmail:U,atxHeading:s(Ut),blockQuote:s(Pe),characterEscape:U,characterReference:U,codeFenced:s(Ue),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ue,o),codeText:s(Je,o),codeTextData:U,data:U,codeFlowValue:U,definition:s($e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(tt),hardBreakEscape:s(zt),hardBreakTrailing:s(zt),htmlFlow:s(Zt,o),htmlFlowData:U,htmlText:s(Zt,o),htmlTextData:U,image:s($t),label:o,link:s(we),listItem:s(Se),listItemValue:m,listOrdered:s(Ae,p),listUnordered:s(Ae),paragraph:s(Ze),reference:q,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ut),strong:s(ge),thematicBreak:s(Y)},exit:{atxHeading:c(),atxHeadingSequence:D,autolink:c(),autolinkEmail:fe,autolinkProtocol:de,blockQuote:c(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:je,characterReferenceMarkerNumeric:je,characterReferenceValue:re,characterReference:ae,codeFenced:c(A),codeFencedFence:w,codeFencedFenceInfo:g,codeFencedFenceMeta:v,codeFlowValue:F,codeIndented:c(E),codeText:c(me),codeTextData:F,data:F,definition:c(),definitionDestinationString:R,definitionLabelString:M,definitionTitleString:I,emphasis:c(),hardBreakEscape:c(G),hardBreakTrailing:c(G),htmlFlow:c(ee),htmlFlowData:F,htmlText:c(oe),htmlTextData:F,image:c(V),label:xe,labelText:te,lineEnding:J,link:c(Q),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Re,resourceDestinationString:N,resourceTitleString:ce,resource:Me,setextHeading:c(j),setextHeadingLineSequence:k,setextHeadingText:C,strong:c(),thematicBreak:c()}};D2(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(Z){let ue={type:"root",children:[]};const Oe={stack:[ue],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:f,data:t},Le=[];let st=-1;for(;++st<Z.length;)if(Z[st][1].type==="listOrdered"||Z[st][1].type==="listUnordered")if(Z[st][0]==="enter")Le.push(st);else{const Yt=Le.pop();st=r(Z,Yt,st)}for(st=-1;++st<Z.length;){const Yt=e[Z[st][0]];M2.call(Yt,Z[st][1].type)&&Yt[Z[st][1].type].call(Object.assign({sliceSerialize:Z[st][2].sliceSerialize},Oe),Z[st][1])}if(Oe.tokenStack.length>0){const Yt=Oe.tokenStack[Oe.tokenStack.length-1];(Yt[1]||vR).call(Oe,void 0,Yt[0])}for(ue.position={start:jl(Z.length>0?Z[0][1].start:{line:1,column:1,offset:0}),end:jl(Z.length>0?Z[Z.length-2][1].end:{line:1,column:1,offset:0})},st=-1;++st<e.transforms.length;)ue=e.transforms[st](ue)||ue;return ue}function r(Z,ue,Oe){let Le=ue-1,st=-1,Yt=!1,ei,Mn,Si,En;for(;++Le<=Oe;){const vn=Z[Le];switch(vn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{vn[0]==="enter"?st++:st--,En=void 0;break}case"lineEndingBlank":{vn[0]==="enter"&&(ei&&!En&&!st&&!Si&&(Si=Le),En=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:En=void 0}if(!st&&vn[0]==="enter"&&vn[1].type==="listItemPrefix"||st===-1&&vn[0]==="exit"&&(vn[1].type==="listUnordered"||vn[1].type==="listOrdered")){if(ei){let Ce=Le;for(Mn=void 0;Ce--;){const ve=Z[Ce];if(ve[1].type==="lineEnding"||ve[1].type==="lineEndingBlank"){if(ve[0]==="exit")continue;Mn&&(Z[Mn][1].type="lineEndingBlank",Yt=!0),ve[1].type="lineEnding",Mn=Ce}else if(!(ve[1].type==="linePrefix"||ve[1].type==="blockQuotePrefix"||ve[1].type==="blockQuotePrefixWhitespace"||ve[1].type==="blockQuoteMarker"||ve[1].type==="listItemIndent"))break}Si&&(!Mn||Si<Mn)&&(ei._spread=!0),ei.end=Object.assign({},Mn?Z[Mn][1].start:vn[1].end),Z.splice(Mn||Le,0,["exit",ei,vn[2]]),Le++,Oe++}if(vn[1].type==="listItemPrefix"){const Ce={type:"listItem",_spread:!1,start:Object.assign({},vn[1].start),end:void 0};ei=Ce,Z.splice(Le,0,["enter",Ce,vn[2]]),Le++,Oe++,Si=void 0,En=!0}}}return Z[ue][1]._spread=Yt,Oe}function s(Z,ue){return Oe;function Oe(Le){a.call(this,Z(Le),Le),ue&&ue.call(this,Le)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Z,ue,Oe){this.stack[this.stack.length-1].children.push(Z),this.stack.push(Z),this.tokenStack.push([ue,Oe||void 0]),Z.position={start:jl(ue.start),end:void 0}}function c(Z){return ue;function ue(Oe){Z&&Z.call(this,Oe),u.call(this,Oe)}}function u(Z,ue){const Oe=this.stack.pop(),Le=this.tokenStack.pop();if(Le)Le[0].type!==Z.type&&(ue?ue.call(this,Z,Le[0]):(Le[1]||vR).call(this,Z,Le[0]));else throw new Error("Cannot close `"+Z.type+"` ("+Ey({start:Z.start,end:Z.end})+"): it’s not open");Oe.position.end=jl(Z.end)}function f(){return cC(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function m(Z){if(this.data.expectingFirstListItemValue){const ue=this.stack[this.stack.length-2];ue.start=Number.parseInt(this.sliceSerialize(Z),10),this.data.expectingFirstListItemValue=void 0}}function g(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.lang=Z}function v(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.meta=Z}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function A(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Z.replace(/(\r?\n|\r)$/g,"")}function M(Z){const ue=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=ue,Oe.identifier=so(this.sliceSerialize(Z)).toLowerCase()}function I(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.title=Z}function R(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.url=Z}function D(Z){const ue=this.stack[this.stack.length-1];if(!ue.depth){const Oe=this.sliceSerialize(Z).length;ue.depth=Oe}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function k(Z){const ue=this.stack[this.stack.length-1];ue.depth=this.sliceSerialize(Z).codePointAt(0)===61?1:2}function j(){this.data.setextHeadingSlurpLineEnding=void 0}function U(Z){const Oe=this.stack[this.stack.length-1].children;let Le=Oe[Oe.length-1];(!Le||Le.type!=="text")&&(Le=X(),Le.position={start:jl(Z.start),end:void 0},Oe.push(Le)),this.stack.push(Le)}function F(Z){const ue=this.stack.pop();ue.value+=this.sliceSerialize(Z),ue.position.end=jl(Z.end)}function J(Z){const ue=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Oe=ue.children[ue.children.length-1];Oe.position.end=jl(Z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ue.type)&&(U.call(this,Z),F.call(this,Z))}function G(){this.data.atHardBreak=!0}function ee(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Z}function oe(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Z}function me(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.value=Z}function Q(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=ue,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function V(){const Z=this.stack[this.stack.length-1];if(this.data.inReference){const ue=this.data.referenceType||"shortcut";Z.type+="Reference",Z.referenceType=ue,delete Z.url,delete Z.title}else delete Z.identifier,delete Z.label;this.data.referenceType=void 0}function te(Z){const ue=this.sliceSerialize(Z),Oe=this.stack[this.stack.length-2];Oe.label=J5(ue),Oe.identifier=so(ue).toLowerCase()}function xe(){const Z=this.stack[this.stack.length-1],ue=this.resume(),Oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Oe.type==="link"){const Le=Z.children;Oe.children=Le}else Oe.alt=ue}function N(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.url=Z}function ce(){const Z=this.resume(),ue=this.stack[this.stack.length-1];ue.title=Z}function Me(){this.data.inReference=void 0}function q(){this.data.referenceType="collapsed"}function Re(Z){const ue=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=ue,Oe.identifier=so(this.sliceSerialize(Z)).toLowerCase(),this.data.referenceType="full"}function je(Z){this.data.characterReferenceType=Z.type}function re(Z){const ue=this.sliceSerialize(Z),Oe=this.data.characterReferenceType;let Le;Oe?(Le=_2(ue,Oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Le=dC(ue);const st=this.stack[this.stack.length-1];st.value+=Le}function ae(Z){const ue=this.stack.pop();ue.position.end=jl(Z.end)}function de(Z){F.call(this,Z);const ue=this.stack[this.stack.length-1];ue.url=this.sliceSerialize(Z)}function fe(Z){F.call(this,Z);const ue=this.stack[this.stack.length-1];ue.url="mailto:"+this.sliceSerialize(Z)}function Pe(){return{type:"blockquote",children:[]}}function Ue(){return{type:"code",lang:null,meta:null,value:""}}function Je(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function tt(){return{type:"emphasis",children:[]}}function Ut(){return{type:"heading",depth:0,children:[]}}function zt(){return{type:"break"}}function Zt(){return{type:"html",value:""}}function $t(){return{type:"image",title:null,url:"",alt:null}}function we(){return{type:"link",title:null,url:"",children:[]}}function Ae(Z){return{type:"list",ordered:Z.type==="listOrdered",start:null,spread:Z._spread,children:[]}}function Se(Z){return{type:"listItem",spread:Z._spread,checked:null,children:[]}}function Ze(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function X(){return{type:"text",value:""}}function Y(){return{type:"thematicBreak"}}}function jl(n){return{line:n.line,column:n.column,offset:n.offset}}function D2(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?D2(n,i):tq(n,i)}}function tq(n,e){let t;for(t in e)if(M2.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function vR(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Ey({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Ey({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ey({start:e.start,end:e.end})+") is still open")}function nq(n){const e=this;e.parser=t;function t(i){return Q5(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function iq(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function rq(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function sq(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function oq(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function aq(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function lq(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=dp(i.toLowerCase()),s=n.footnoteOrder.indexOf(i);let o,a=n.footnoteCounts.get(i);a===void 0?(a=0,n.footnoteOrder.push(i),o=n.footnoteOrder.length):o=s+1,a+=1,n.footnoteCounts.set(i,a);const c={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};n.patch(e,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return n.patch(e,u),n.applyData(e,u)}function uq(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function cq(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function R2(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=i:r.push({type:"text",value:i}),r}function dq(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return R2(n,e);const r={src:dp(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,s),n.applyData(e,s)}function fq(n,e){const t={src:dp(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function hq(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function pq(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return R2(n,e);const r={href:dp(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,s),n.applyData(e,s)}function mq(n,e){const t={href:dp(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function gq(n,e,t){const i=n.all(e),r=t?yq(t):k2(e),s={},o=[];if(typeof e.checked=="boolean"){const f=i[0];let p;f&&f.type==="element"&&f.tagName==="p"?p=f:(p={type:"element",tagName:"p",properties:{},children:[]},i.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const f=i[a];(r||a!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!r?o.push(...f.children):o.push(f)}const c=i[i.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return n.patch(e,u),n.applyData(e,u)}function yq(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=k2(t[i])}return e}function k2(n){const e=n.spread;return e??n.children.length>1}function bq(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const o=i[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,s),n.applyData(e,s)}function _q(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function vq(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function Sq(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function wq(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],o),r.push(o)}if(t.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=oC(e.children[1]),c=d2(e.children[e.children.length-1]);a&&c&&(o.position={start:a,end:c}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,s),n.applyData(e,s)}function Tq(n,e,t){const i=t?t.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",o=t&&t.type==="table"?t.align:void 0,a=o?o.length:e.children.length;let c=-1;const u=[];for(;++c<a;){const p=e.children[c],m={},g=o?o[c]:void 0;g&&(m.align=g);let v={type:"element",tagName:s,properties:m,children:[]};p&&(v.children=n.all(p),n.patch(p,v),v=n.applyData(p,v)),u.push(v)}const f={type:"element",tagName:"tr",properties:{},children:n.wrap(u,!0)};return n.patch(e,f),n.applyData(e,f)}function Aq(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const SR=9,wR=32;function Eq(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const s=[];for(;i;)s.push(TR(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return s.push(TR(e.slice(r),r>0,!1)),s.join("")}function TR(n,e,t){let i=0,r=n.length;if(e){let s=n.codePointAt(i);for(;s===SR||s===wR;)i++,s=n.codePointAt(i)}if(t){let s=n.codePointAt(r-1);for(;s===SR||s===wR;)r--,s=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function Cq(n,e){const t={type:"text",value:Eq(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function Iq(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const xq={blockquote:iq,break:rq,code:sq,delete:oq,emphasis:aq,footnoteReference:lq,heading:uq,html:cq,imageReference:dq,image:fq,inlineCode:hq,linkReference:pq,link:mq,listItem:gq,list:bq,paragraph:_q,root:vq,strong:Sq,table:wq,tableCell:Aq,tableRow:Tq,text:Cq,thematicBreak:Iq,toml:Dv,yaml:Dv,definition:Dv,footnoteDefinition:Dv};function Dv(){}const N2=-1,vS=0,Iy=1,R0=2,hC=3,pC=4,mC=5,gC=6,O2=7,B2=8,AR=typeof self=="object"?self:globalThis,Mq=(n,e)=>{const t=(r,s)=>(n.set(s,r),r),i=r=>{if(n.has(r))return n.get(r);const[s,o]=e[r];switch(s){case vS:case N2:return t(o,r);case Iy:{const a=t([],r);for(const c of o)a.push(i(c));return a}case R0:{const a=t({},r);for(const[c,u]of o)a[i(c)]=i(u);return a}case hC:return t(new Date(o),r);case pC:{const{source:a,flags:c}=o;return t(new RegExp(a,c),r)}case mC:{const a=t(new Map,r);for(const[c,u]of o)a.set(i(c),i(u));return a}case gC:{const a=t(new Set,r);for(const c of o)a.add(i(c));return a}case O2:{const{name:a,message:c}=o;return t(new AR[a](c),r)}case B2:return t(BigInt(o),r);case"BigInt":return t(Object(BigInt(o)),r);case"ArrayBuffer":return t(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return t(new DataView(a),o)}}return t(new AR[s](o),r)};return i},ER=n=>Mq(new Map,n)(0),Nf="",{toString:Dq}={},{keys:Rq}=Object,xm=n=>{const e=typeof n;if(e!=="object"||!n)return[vS,e];const t=Dq.call(n).slice(8,-1);switch(t){case"Array":return[Iy,Nf];case"Object":return[R0,Nf];case"Date":return[hC,Nf];case"RegExp":return[pC,Nf];case"Map":return[mC,Nf];case"Set":return[gC,Nf];case"DataView":return[Iy,t]}return t.includes("Array")?[Iy,t]:t.includes("Error")?[O2,t]:[R0,t]},Rv=([n,e])=>n===vS&&(e==="function"||e==="symbol"),kq=(n,e,t,i)=>{const r=(o,a)=>{const c=i.push(o)-1;return t.set(a,c),c},s=o=>{if(t.has(o))return t.get(o);let[a,c]=xm(o);switch(a){case vS:{let f=o;switch(c){case"bigint":a=B2,f=o.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return r([N2],o)}return r([a,f],o)}case Iy:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),r([c,[...m]],o)}const f=[],p=r([a,f],o);for(const m of o)f.push(s(m));return p}case R0:{if(c)switch(c){case"BigInt":return r([c,o.toString()],o);case"Boolean":case"Number":case"String":return r([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const f=[],p=r([a,f],o);for(const m of Rq(o))(n||!Rv(xm(o[m])))&&f.push([s(m),s(o[m])]);return p}case hC:return r([a,o.toISOString()],o);case pC:{const{source:f,flags:p}=o;return r([a,{source:f,flags:p}],o)}case mC:{const f=[],p=r([a,f],o);for(const[m,g]of o)(n||!(Rv(xm(m))||Rv(xm(g))))&&f.push([s(m),s(g)]);return p}case gC:{const f=[],p=r([a,f],o);for(const m of o)(n||!Rv(xm(m)))&&f.push(s(m));return p}}const{message:u}=o;return r([a,{name:c,message:u}],o)};return s},CR=(n,{json:e,lossy:t}={})=>{const i=[];return kq(!(e||t),!!e,new Map,i)(n),i},k0=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?ER(CR(n,e)):structuredClone(n):(n,e)=>ER(CR(n,e));function Nq(n,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function Oq(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function Bq(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||Nq,i=n.options.footnoteBackLabel||Oq,r=n.options.footnoteLabel||"Footnotes",s=n.options.footnoteLabelTagName||"h2",o=n.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let c=-1;for(;++c<n.footnoteOrder.length;){const u=n.footnoteById.get(n.footnoteOrder[c]);if(!u)continue;const f=n.all(u),p=String(u.identifier).toUpperCase(),m=dp(p.toLowerCase());let g=0;const v=[],w=n.footnoteCounts.get(p);for(;w!==void 0&&++g<=w;){v.length>0&&v.push({type:"text",value:" "});let M=typeof t=="string"?t:t(c,g);typeof M=="string"&&(M={type:"text",value:M}),v.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(c,g),className:["data-footnote-backref"]},children:Array.isArray(M)?M:[M]})}const A=f[f.length-1];if(A&&A.type==="element"&&A.tagName==="p"){const M=A.children[A.children.length-1];M&&M.type==="text"?M.value+=" ":A.children.push({type:"text",value:" "}),A.children.push(...v)}else f.push(...v);const E={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:n.wrap(f,!0)};n.patch(u,E),a.push(E)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...k0(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(a,!0)},{type:"text",value:`
`}]}}const SS=function(n){if(n==null)return Uq;if(typeof n=="function")return wS(n);if(typeof n=="object")return Array.isArray(n)?Fq(n):Pq(n);if(typeof n=="string")return Lq(n);throw new Error("Expected function, string, or object as test")};function Fq(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=SS(n[t]);return wS(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function Pq(n){const e=n;return wS(t);function t(i){const r=i;let s;for(s in n)if(r[s]!==e[s])return!1;return!0}}function Lq(n){return wS(e);function e(t){return t&&t.type===n}}function wS(n){return e;function e(t,i,r){return!!(zq(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function Uq(){return!0}function zq(n){return n!==null&&typeof n=="object"&&"type"in n}const F2=[],Vq=!0,JA=!1,jq="skip";function P2(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const s=SS(r),o=i?-1:1;a(n,void 0,[])();function a(c,u,f){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const g=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=F2,v,w,A;if((!e||s(c,u,f[f.length-1]||void 0))&&(g=qq(t(c,f)),g[0]===JA))return g;if("children"in c&&c.children){const E=c;if(E.children&&g[0]!==jq)for(w=(i?E.children.length:-1)+o,A=f.concat(E);w>-1&&w<E.children.length;){const M=E.children[w];if(v=a(M,w,A)(),v[0]===JA)return v;w=typeof v[1]=="number"?v[1]:w+o}}return g}}}function qq(n){return Array.isArray(n)?n:typeof n=="number"?[Vq,n]:n==null?F2:[n]}function yC(n,e,t,i){let r,s,o;typeof e=="function"?(s=void 0,o=e,r=t):(s=e,o=t,r=i),P2(n,s,a,r);function a(c,u){const f=u[u.length-1],p=f?f.children.indexOf(c):void 0;return o(c,p,f)}}const ZA={}.hasOwnProperty,Hq={};function Gq(n,e){const t=e||Hq,i=new Map,r=new Map,s=new Map,o={...xq,...t.handlers},a={all:u,applyData:Yq,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:t,patch:$q,wrap:Kq};return yC(n,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const p=f.type==="definition"?i:r,m=String(f.identifier).toUpperCase();p.has(m)||p.set(m,f)}}),a;function c(f,p){const m=f.type,g=a.handlers[m];if(ZA.call(a.handlers,m)&&g)return g(a,f,p);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in f){const{children:w,...A}=f,E=k0(A);return E.children=a.all(f),E}return k0(f)}return(a.options.unknownHandler||Wq)(a,f,p)}function u(f){const p=[];if("children"in f){const m=f.children;let g=-1;for(;++g<m.length;){const v=a.one(m[g],f);if(v){if(g&&m[g-1].type==="break"&&(!Array.isArray(v)&&v.type==="text"&&(v.value=IR(v.value)),!Array.isArray(v)&&v.type==="element")){const w=v.children[0];w&&w.type==="text"&&(w.value=IR(w.value))}Array.isArray(v)?p.push(...v):p.push(v)}}}return p}}function $q(n,e){n.position&&(e.position=Oj(n))}function Yq(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,s=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const o="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:o}}t.type==="element"&&s&&Object.assign(t.properties,k0(s)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function Wq(n,e){const t=e.data||{},i="value"in e&&!(ZA.call(t,"hProperties")||ZA.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function Kq(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function IR(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function xR(n,e){const t=Gq(n,e),i=t.one(n,void 0),r=Bq(t),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function Xq(n,e){return n&&"run"in n?async function(t,i){const r=xR(t,{file:i,...e});await n.run(r,i)}:function(t,i){return xR(t,{file:i,...n||e})}}function MR(n){if(n)throw n}var aA,DR;function Jq(){if(DR)return aA;DR=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,i=Object.getOwnPropertyDescriptor,r=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},s=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var f=n.call(u,"constructor"),p=u.constructor&&u.constructor.prototype&&n.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!f&&!p)return!1;var m;for(m in u);return typeof m>"u"||n.call(u,m)},o=function(u,f){t&&f.name==="__proto__"?t(u,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):u[f.name]=f.newValue},a=function(u,f){if(f==="__proto__")if(n.call(u,f)){if(i)return i(u,f).value}else return;return u[f]};return aA=function c(){var u,f,p,m,g,v,w=arguments[0],A=1,E=arguments.length,M=!1;for(typeof w=="boolean"&&(M=w,w=arguments[1]||{},A=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});A<E;++A)if(u=arguments[A],u!=null)for(f in u)p=a(w,f),m=a(u,f),w!==m&&(M&&m&&(s(m)||(g=r(m)))?(g?(g=!1,v=p&&r(p)?p:[]):v=p&&s(p)?p:{},o(w,{name:f,newValue:c(M,v,m)})):typeof m<"u"&&o(w,{name:f,newValue:m}));return w},aA}var Zq=Jq();const lA=mS(Zq);function QA(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Qq(){const n=[],e={run:t,use:i};return e;function t(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...r);function a(c,...u){const f=n[++s];let p=-1;if(c){o(c);return}for(;++p<r.length;)(u[p]===null||u[p]===void 0)&&(u[p]=r[p]);r=u,f?eH(f,a)(...u):o(null,...u)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function eH(n,e){let t;return i;function i(...o){const a=n.length>o.length;let c;a&&o.push(r);try{c=n.apply(this,o)}catch(u){const f=u;if(a&&t)throw f;return r(f)}a||(c&&c.then&&typeof c.then=="function"?c.then(s,r):c instanceof Error?r(c):s(c))}function r(o,...a){t||(t=!0,e(o,...a))}function s(o){r(null,o)}}const vo={basename:tH,dirname:nH,extname:iH,join:rH,sep:"/"};function tH(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');s_(n);let t=0,i=-1,r=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(s){t=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let o=-1,a=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(s){t=r+1;break}}else o<0&&(s=!0,o=r+1),a>-1&&(n.codePointAt(r)===e.codePointAt(a--)?a<0&&(i=r):(a=-1,i=o));return t===i?i=o:i<0&&(i=n.length),n.slice(t,i)}function nH(n){if(s_(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function iH(n){s_(n);let e=n.length,t=-1,i=0,r=-1,s=0,o;for(;e--;){const a=n.codePointAt(e);if(a===47){if(o){i=e+1;break}continue}t<0&&(o=!0,t=e+1),a===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||t<0||s===0||s===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function rH(...n){let e=-1,t;for(;++e<n.length;)s_(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":sH(t)}function sH(n){s_(n);const e=n.codePointAt(0)===47;let t=oH(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function oH(n,e){let t="",i=0,r=-1,s=0,o=-1,a,c;for(;++o<=n.length;){if(o<n.length)a=n.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(c=t.lastIndexOf("/"),c!==t.length-1){c<0?(t="",i=0):(t=t.slice(0,c),i=t.length-1-t.lastIndexOf("/")),r=o,s=0;continue}}else if(t.length>0){t="",i=0,r=o,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,o):t=n.slice(r+1,o),i=o-r-1;r=o,s=0}else a===46&&s>-1?s++:s=-1}return t}function s_(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const aH={cwd:lH};function lH(){return"/"}function e1(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function uH(n){if(typeof n=="string")n=new URL(n);else if(!e1(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return cH(n)}function cH(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const uA=["history","path","basename","stem","extname","dirname"];class L2{constructor(e){let t;e?e1(e)?t={path:e}:typeof e=="string"||dH(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":aH.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<uA.length;){const s=uA[i];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let r;for(r in t)uA.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?vo.basename(this.path):void 0}set basename(e){dA(e,"basename"),cA(e,"basename"),this.path=vo.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?vo.dirname(this.path):void 0}set dirname(e){RR(this.basename,"dirname"),this.path=vo.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?vo.extname(this.path):void 0}set extname(e){if(cA(e,"extname"),RR(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vo.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){e1(e)&&(e=uH(e)),dA(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?vo.basename(this.path,this.extname):void 0}set stem(e){dA(e,"stem"),cA(e,"stem"),this.path=vo.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new Qi(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function cA(n,e){if(n&&n.includes(vo.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+vo.sep+"`")}function dA(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function RR(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function dH(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const fH=function(n){const i=this.constructor.prototype,r=i[n],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},hH={}.hasOwnProperty;class bC extends fH{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Qq()}copy(){const e=new bC;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(lA(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(pA("data",this.frozen),this.namespace[e]=t,this):hH.call(this.namespace,e)&&this.namespace[e]||void 0:e?(pA("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=kv(e),i=this.parser||this.Parser;return fA("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),fA("process",this.parser||this.Parser),hA("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(s,o){const a=kv(e),c=i.parse(a);i.run(c,a,function(f,p,m){if(f||!p||!m)return u(f);const g=p,v=i.stringify(g,m);gH(v)?m.value=v:m.result=v,u(f,m)});function u(f,p){f||!p?o(f):s?s(p):t(void 0,p)}}}processSync(e){let t=!1,i;return this.freeze(),fA("processSync",this.parser||this.Parser),hA("processSync",this.compiler||this.Compiler),this.process(e,r),NR("processSync","process",t),i;function r(s,o){t=!0,MR(s),i=o}}run(e,t,i){kR(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?s(void 0,i):new Promise(s);function s(o,a){const c=kv(t);r.run(e,c,u);function u(f,p,m){const g=p||e;f?a(f):o?o(g):i(void 0,g,m)}}}runSync(e,t){let i=!1,r;return this.run(e,t,s),NR("runSync","run",i),r;function s(o,a){MR(o),r=a,i=!0}}stringify(e,t){this.freeze();const i=kv(t),r=this.compiler||this.Compiler;return hA("stringify",r),kR(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(pA("use",this.frozen),e!=null)if(typeof e=="function")c(e,t);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...p]=u;c(f,p)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(r.settings=lA(!0,r.settings,u.settings))}function a(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const p=u[f];s(p)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let p=-1,m=-1;for(;++p<i.length;)if(i[p][0]===u){m=p;break}if(m===-1)i.push([u,...f]);else if(f.length>0){let[g,...v]=f;const w=i[m][1];QA(w)&&QA(g)&&(g=lA(!0,w,g)),i[m]=[u,g,...v]}}}}const pH=new bC().freeze();function fA(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function hA(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function pA(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function kR(n){if(!QA(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function NR(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function kv(n){return mH(n)?n:new L2(n)}function mH(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function gH(n){return typeof n=="string"||yH(n)}function yH(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const bH="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",OR=[],BR={allowDangerousHtml:!0},_H=/^(https?|ircs?|mailto|xmpp)$/i,vH=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function SH(n){const e=wH(n),t=TH(n);return AH(e.runSync(e.parse(t),t),n)}function wH(n){const e=n.rehypePlugins||OR,t=n.remarkPlugins||OR,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...BR}:BR;return pH().use(nq).use(t).use(Xq,i).use(e)}function TH(n){const e=n.children||"",t=new L2;return typeof e=="string"&&(t.value=e),t}function AH(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,c=e.urlTransform||EH;for(const f of vH)Object.hasOwn(e,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+bH+f.id,void 0);return yC(n,u),Uj(n,{Fragment:ne.Fragment,components:r,ignoreInvalidStyle:!0,jsx:ne.jsx,jsxs:ne.jsxs,passKeys:!0,passNode:!0});function u(f,p,m){if(f.type==="raw"&&m&&typeof p=="number")return o?m.children.splice(p,1):m.children[p]={type:"text",value:f.value},p;if(f.type==="element"){let g;for(g in rA)if(Object.hasOwn(rA,g)&&Object.hasOwn(f.properties,g)){const v=f.properties[g],w=rA[g];(w===null||w.includes(f.tagName))&&(f.properties[g]=c(String(v||""),g,f))}}if(f.type==="element"){let g=t?!t.includes(f.tagName):s?s.includes(f.tagName):!1;if(!g&&i&&typeof p=="number"&&(g=!i(f,p,m)),g&&m&&typeof p=="number")return a&&f.children?m.children.splice(p,1,...f.children):m.children.splice(p,1),p}}}function EH(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||_H.test(n.slice(0,e))?n:""}function FR(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=t.indexOf(e);for(;r!==-1;)i++,r=t.indexOf(e,r+e.length);return i}function CH(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function IH(n,e,t){const r=SS((t||{}).ignore||[]),s=xH(e);let o=-1;for(;++o<s.length;)P2(n,"text",a);function a(u,f){let p=-1,m;for(;++p<f.length;){const g=f[p],v=m?m.children:void 0;if(r(g,v?v.indexOf(g):void 0,m))return;m=g}if(m)return c(u,f)}function c(u,f){const p=f[f.length-1],m=s[o][0],g=s[o][1];let v=0;const A=p.children.indexOf(u);let E=!1,M=[];m.lastIndex=0;let I=m.exec(u.value);for(;I;){const R=I.index,D={index:I.index,input:I.input,stack:[...f,u]};let C=g(...I,D);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?m.lastIndex=R+1:(v!==R&&M.push({type:"text",value:u.value.slice(v,R)}),Array.isArray(C)?M.push(...C):C&&M.push(C),v=R+I[0].length,E=!0),!m.global)break;I=m.exec(u.value)}return E?(v<u.value.length&&M.push({type:"text",value:u.value.slice(v)}),p.children.splice(A,1,...M)):M=[u],A+M.length}}function xH(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let i=-1;for(;++i<t.length;){const r=t[i];e.push([MH(r[0]),DH(r[1])])}return e}function MH(n){return typeof n=="string"?new RegExp(CH(n),"g"):n}function DH(n){return typeof n=="function"?n:function(){return n}}const mA="phrasing",gA=["autolink","link","image","label"];function RH(){return{transforms:[LH],enter:{literalAutolink:NH,literalAutolinkEmail:yA,literalAutolinkHttp:yA,literalAutolinkWww:yA},exit:{literalAutolink:PH,literalAutolinkEmail:FH,literalAutolinkHttp:OH,literalAutolinkWww:BH}}}function kH(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:mA,notInConstruct:gA},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:mA,notInConstruct:gA},{character:":",before:"[ps]",after:"\\/",inConstruct:mA,notInConstruct:gA}]}}function NH(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function yA(n){this.config.enter.autolinkProtocol.call(this,n)}function OH(n){this.config.exit.autolinkProtocol.call(this,n)}function BH(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function FH(n){this.config.exit.autolinkEmail.call(this,n)}function PH(n){this.exit(n)}function LH(n){IH(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,UH],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),zH]],{ignore:["link","linkReference"]})}function UH(n,e,t,i,r){let s="";if(!U2(r)||(/^w/i.test(e)&&(t=e+t,e="",s="http://"),!VH(t)))return!1;const o=jH(t+i);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function zH(n,e,t,i){return!U2(i,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function VH(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function jH(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],i=t.indexOf(")");const r=FR(n,"(");let s=FR(n,")");for(;i!==-1&&r>s;)n+=t.slice(0,i+1),t=t.slice(i+1),i=t.indexOf(")"),s++;return[n,t]}function U2(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||Td(t)||bS(t))&&(!e||t!==47)}z2.peek=JH;function qH(){this.buffer()}function HH(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function GH(){this.buffer()}function $H(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function YH(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=so(this.sliceSerialize(n)).toLowerCase(),t.label=e}function WH(n){this.exit(n)}function KH(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=so(this.sliceSerialize(n)).toLowerCase(),t.label=e}function XH(n){this.exit(n)}function JH(){return"["}function z2(n,e,t,i){const r=t.createTracker(i);let s=r.move("[^");const o=t.enter("footnoteReference"),a=t.enter("reference");return s+=r.move(t.safe(t.associationId(n),{after:"]",before:s})),a(),o(),s+=r.move("]"),s}function ZH(){return{enter:{gfmFootnoteCallString:qH,gfmFootnoteCall:HH,gfmFootnoteDefinitionLabelString:GH,gfmFootnoteDefinition:$H},exit:{gfmFootnoteCallString:YH,gfmFootnoteCall:WH,gfmFootnoteDefinitionLabelString:KH,gfmFootnoteDefinition:XH}}}function QH(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:z2},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(i,r,s,o){const a=s.createTracker(o);let c=a.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=a.move(s.safe(s.associationId(i),{before:c,after:"]"})),f(),c+=a.move("]:"),i.children&&i.children.length>0&&(a.shift(4),c+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,a.current()),e?V2:eG))),u(),c}}function eG(n,e,t){return e===0?n:V2(n,e,t)}function V2(n,e,t){return(t?"":"    ")+n}const tG=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];j2.peek=oG;function nG(){return{canContainEols:["delete"],enter:{strikethrough:rG},exit:{strikethrough:sG}}}function iG(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:tG}],handlers:{delete:j2}}}function rG(n){this.enter({type:"delete",children:[]},n)}function sG(n){this.exit(n)}function j2(n,e,t,i){const r=t.createTracker(i),s=t.enter("strikethrough");let o=r.move("~~");return o+=t.containerPhrasing(n,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),s(),o}function oG(){return"~"}function aG(n){return n.length}function lG(n,e){const t=e||{},i=(t.align||[]).concat(),r=t.stringLength||aG,s=[],o=[],a=[],c=[];let u=0,f=-1;for(;++f<n.length;){const w=[],A=[];let E=-1;for(n[f].length>u&&(u=n[f].length);++E<n[f].length;){const M=uG(n[f][E]);if(t.alignDelimiters!==!1){const I=r(M);A[E]=I,(c[E]===void 0||I>c[E])&&(c[E]=I)}w.push(M)}o[f]=w,a[f]=A}let p=-1;if(typeof i=="object"&&"length"in i)for(;++p<u;)s[p]=PR(i[p]);else{const w=PR(i);for(;++p<u;)s[p]=w}p=-1;const m=[],g=[];for(;++p<u;){const w=s[p];let A="",E="";w===99?(A=":",E=":"):w===108?A=":":w===114&&(E=":");let M=t.alignDelimiters===!1?1:Math.max(1,c[p]-A.length-E.length);const I=A+"-".repeat(M)+E;t.alignDelimiters!==!1&&(M=A.length+M+E.length,M>c[p]&&(c[p]=M),g[p]=M),m[p]=I}o.splice(1,0,m),a.splice(1,0,g),f=-1;const v=[];for(;++f<o.length;){const w=o[f],A=a[f];p=-1;const E=[];for(;++p<u;){const M=w[p]||"";let I="",R="";if(t.alignDelimiters!==!1){const D=c[p]-(A[p]||0),C=s[p];C===114?I=" ".repeat(D):C===99?D%2?(I=" ".repeat(D/2+.5),R=" ".repeat(D/2-.5)):(I=" ".repeat(D/2),R=I):R=" ".repeat(D)}t.delimiterStart!==!1&&!p&&E.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&M==="")&&(t.delimiterStart!==!1||p)&&E.push(" "),t.alignDelimiters!==!1&&E.push(I),E.push(M),t.alignDelimiters!==!1&&E.push(R),t.padding!==!1&&E.push(" "),(t.delimiterEnd!==!1||p!==u-1)&&E.push("|")}v.push(t.delimiterEnd===!1?E.join("").replace(/ +$/,""):E.join(""))}return v.join(`
`)}function uG(n){return n==null?"":String(n)}function PR(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function cG(n,e,t,i){const r=t.enter("blockquote"),s=t.createTracker(i);s.move("> "),s.shift(2);const o=t.indentLines(t.containerFlow(n,s.current()),dG);return r(),o}function dG(n,e,t){return">"+(t?"":" ")+n}function fG(n,e){return LR(n,e.inConstruct,!0)&&!LR(n,e.notInConstruct,!1)}function LR(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let i=-1;for(;++i<e.length;)if(n.includes(e[i]))return!0;return!1}function UR(n,e,t,i){let r=-1;for(;++r<t.unsafe.length;)if(t.unsafe[r].character===`
`&&fG(t.stack,t.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function hG(n,e){const t=String(n);let i=t.indexOf(e),r=i,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>o&&(o=s):s=1,r=i+e.length,i=t.indexOf(e,r);return o}function pG(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function mG(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function gG(n,e,t,i){const r=mG(t),s=n.value||"",o=r==="`"?"GraveAccent":"Tilde";if(pG(n,t)){const p=t.enter("codeIndented"),m=t.indentLines(s,yG);return p(),m}const a=t.createTracker(i),c=r.repeat(Math.max(hG(s,r)+1,3)),u=t.enter("codeFenced");let f=a.move(c);if(n.lang){const p=t.enter(`codeFencedLang${o}`);f+=a.move(t.safe(n.lang,{before:f,after:" ",encode:["`"],...a.current()})),p()}if(n.lang&&n.meta){const p=t.enter(`codeFencedMeta${o}`);f+=a.move(" "),f+=a.move(t.safe(n.meta,{before:f,after:`
`,encode:["`"],...a.current()})),p()}return f+=a.move(`
`),s&&(f+=a.move(s+`
`)),f+=a.move(c),u(),f}function yG(n,e,t){return(t?"":"    ")+n}function _C(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function bG(n,e,t,i){const r=_C(t),s=r==='"'?"Quote":"Apostrophe",o=t.enter("definition");let a=t.enter("label");const c=t.createTracker(i);let u=c.move("[");return u+=c.move(t.safe(t.associationId(n),{before:u,after:"]",...c.current()})),u+=c.move("]: "),a(),!n.url||/[\0- \u007F]/.test(n.url)?(a=t.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(t.safe(n.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(a=t.enter("destinationRaw"),u+=c.move(t.safe(n.url,{before:u,after:n.title?" ":`
`,...c.current()}))),a(),n.title&&(a=t.enter(`title${s}`),u+=c.move(" "+r),u+=c.move(t.safe(n.title,{before:u,after:r,...c.current()})),u+=c.move(r),a()),o(),u}function _G(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Oy(n){return"&#x"+n.toString(16).toUpperCase()+";"}function N0(n,e,t){const i=Qh(n),r=Qh(e);return i===void 0?r===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}q2.peek=vG;function q2(n,e,t,i){const r=_G(t),s=t.enter("emphasis"),o=t.createTracker(i),a=o.move(r);let c=o.move(t.containerPhrasing(n,{after:r,before:a,...o.current()}));const u=c.charCodeAt(0),f=N0(i.before.charCodeAt(i.before.length-1),u,r);f.inside&&(c=Oy(u)+c.slice(1));const p=c.charCodeAt(c.length-1),m=N0(i.after.charCodeAt(0),p,r);m.inside&&(c=c.slice(0,-1)+Oy(p));const g=o.move(r);return s(),t.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},a+c+g}function vG(n,e,t){return t.options.emphasis||"*"}function SG(n,e){let t=!1;return yC(n,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return t=!0,JA}),!!((!n.depth||n.depth<3)&&cC(n)&&(e.options.setext||t))}function wG(n,e,t,i){const r=Math.max(Math.min(6,n.depth||1),1),s=t.createTracker(i);if(SG(n,t)){const f=t.enter("headingSetext"),p=t.enter("phrasing"),m=t.containerPhrasing(n,{...s.current(),before:`
`,after:`
`});return p(),f(),m+`
`+(r===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(r),a=t.enter("headingAtx"),c=t.enter("phrasing");s.move(o+" ");let u=t.containerPhrasing(n,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Oy(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,t.options.closeAtx&&(u+=" "+o),c(),a(),u}H2.peek=TG;function H2(n){return n.value||""}function TG(){return"<"}G2.peek=AG;function G2(n,e,t,i){const r=_C(t),s=r==='"'?"Quote":"Apostrophe",o=t.enter("image");let a=t.enter("label");const c=t.createTracker(i);let u=c.move("![");return u+=c.move(t.safe(n.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),a(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(a=t.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(t.safe(n.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(a=t.enter("destinationRaw"),u+=c.move(t.safe(n.url,{before:u,after:n.title?" ":")",...c.current()}))),a(),n.title&&(a=t.enter(`title${s}`),u+=c.move(" "+r),u+=c.move(t.safe(n.title,{before:u,after:r,...c.current()})),u+=c.move(r),a()),u+=c.move(")"),o(),u}function AG(){return"!"}$2.peek=EG;function $2(n,e,t,i){const r=n.referenceType,s=t.enter("imageReference");let o=t.enter("label");const a=t.createTracker(i);let c=a.move("![");const u=t.safe(n.alt,{before:c,after:"]",...a.current()});c+=a.move(u+"]["),o();const f=t.stack;t.stack=[],o=t.enter("reference");const p=t.safe(t.associationId(n),{before:c,after:"]",...a.current()});return o(),t.stack=f,s(),r==="full"||!u||u!==p?c+=a.move(p+"]"):r==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function EG(){return"!"}Y2.peek=CG;function Y2(n,e,t){let i=n.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<t.unsafe.length;){const o=t.unsafe[s],a=t.compilePattern(o);let c;if(o.atBreak)for(;c=a.exec(i);){let u=c.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(c.index+1)}}return r+i+r}function CG(){return"`"}function W2(n,e){const t=cC(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}K2.peek=IG;function K2(n,e,t,i){const r=_C(t),s=r==='"'?"Quote":"Apostrophe",o=t.createTracker(i);let a,c;if(W2(n,t)){const f=t.stack;t.stack=[],a=t.enter("autolink");let p=o.move("<");return p+=o.move(t.containerPhrasing(n,{before:p,after:">",...o.current()})),p+=o.move(">"),a(),t.stack=f,p}a=t.enter("link"),c=t.enter("label");let u=o.move("[");return u+=o.move(t.containerPhrasing(n,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(c=t.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(t.safe(n.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=t.enter("destinationRaw"),u+=o.move(t.safe(n.url,{before:u,after:n.title?" ":")",...o.current()}))),c(),n.title&&(c=t.enter(`title${s}`),u+=o.move(" "+r),u+=o.move(t.safe(n.title,{before:u,after:r,...o.current()})),u+=o.move(r),c()),u+=o.move(")"),a(),u}function IG(n,e,t){return W2(n,t)?"<":"["}X2.peek=xG;function X2(n,e,t,i){const r=n.referenceType,s=t.enter("linkReference");let o=t.enter("label");const a=t.createTracker(i);let c=a.move("[");const u=t.containerPhrasing(n,{before:c,after:"]",...a.current()});c+=a.move(u+"]["),o();const f=t.stack;t.stack=[],o=t.enter("reference");const p=t.safe(t.associationId(n),{before:c,after:"]",...a.current()});return o(),t.stack=f,s(),r==="full"||!u||u!==p?c+=a.move(p+"]"):r==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function xG(){return"["}function vC(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function MG(n){const e=vC(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function DG(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function J2(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function RG(n,e,t,i){const r=t.enter("list"),s=t.bulletCurrent;let o=n.ordered?DG(t):vC(t);const a=n.ordered?o==="."?")":".":MG(t);let c=e&&t.bulletLastUsed?o===t.bulletLastUsed:!1;if(!n.ordered){const f=n.children?n.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(c=!0),J2(t)===o&&f){let p=-1;for(;++p<n.children.length;){const m=n.children[p];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=a),t.bulletCurrent=o;const u=t.containerFlow(n,i);return t.bulletLastUsed=o,t.bulletCurrent=s,r(),u}function kG(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function NG(n,e,t,i){const r=kG(t);let s=t.bulletCurrent||vC(t);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+s);let o=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(o=Math.ceil(o/4)*4);const a=t.createTracker(i);a.move(s+" ".repeat(o-s.length)),a.shift(o);const c=t.enter("listItem"),u=t.indentLines(t.containerFlow(n,a.current()),f);return c(),u;function f(p,m,g){return m?(g?"":" ".repeat(o))+p:(g?s:s+" ".repeat(o-s.length))+p}}function OG(n,e,t,i){const r=t.enter("paragraph"),s=t.enter("phrasing"),o=t.containerPhrasing(n,i);return s(),r(),o}const BG=SS(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function FG(n,e,t,i){return(n.children.some(function(o){return BG(o)})?t.containerPhrasing:t.containerFlow).call(t,n,i)}function PG(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}Z2.peek=LG;function Z2(n,e,t,i){const r=PG(t),s=t.enter("strong"),o=t.createTracker(i),a=o.move(r+r);let c=o.move(t.containerPhrasing(n,{after:r,before:a,...o.current()}));const u=c.charCodeAt(0),f=N0(i.before.charCodeAt(i.before.length-1),u,r);f.inside&&(c=Oy(u)+c.slice(1));const p=c.charCodeAt(c.length-1),m=N0(i.after.charCodeAt(0),p,r);m.inside&&(c=c.slice(0,-1)+Oy(p));const g=o.move(r+r);return s(),t.attentionEncodeSurroundingInfo={after:m.outside,before:f.outside},a+c+g}function LG(n,e,t){return t.options.strong||"*"}function UG(n,e,t,i){return t.safe(n.value,i)}function zG(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function VG(n,e,t){const i=(J2(t)+(t.options.ruleSpaces?" ":"")).repeat(zG(t));return t.options.ruleSpaces?i.slice(0,-1):i}const Q2={blockquote:cG,break:UR,code:gG,definition:bG,emphasis:q2,hardBreak:UR,heading:wG,html:H2,image:G2,imageReference:$2,inlineCode:Y2,link:K2,linkReference:X2,list:RG,listItem:NG,paragraph:OG,root:FG,strong:Z2,text:UG,thematicBreak:VG};function jG(){return{enter:{table:qG,tableData:zR,tableHeader:zR,tableRow:GG},exit:{codeText:$G,table:HG,tableData:bA,tableHeader:bA,tableRow:bA}}}function qG(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function HG(n){this.exit(n),this.data.inTable=void 0}function GG(n){this.enter({type:"tableRow",children:[]},n)}function bA(n){this.exit(n)}function zR(n){this.enter({type:"tableCell",children:[]},n)}function $G(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,YG));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function YG(n,e){return e==="|"?e:n}function WG(n){const e=n||{},t=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,s=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:c,tableRow:a}};function o(g,v,w,A){return u(f(g,w,A),g.align)}function a(g,v,w,A){const E=p(g,w,A),M=u([E]);return M.slice(0,M.indexOf(`
`))}function c(g,v,w,A){const E=w.enter("tableCell"),M=w.enter("phrasing"),I=w.containerPhrasing(g,{...A,before:s,after:s});return M(),E(),I}function u(g,v){return lG(g,{align:v,alignDelimiters:i,padding:t,stringLength:r})}function f(g,v,w){const A=g.children;let E=-1;const M=[],I=v.enter("table");for(;++E<A.length;)M[E]=p(A[E],v,w);return I(),M}function p(g,v,w){const A=g.children;let E=-1;const M=[],I=v.enter("tableRow");for(;++E<A.length;)M[E]=c(A[E],g,v,w);return I(),M}function m(g,v,w){let A=Q2.inlineCode(g,v,w);return w.stack.includes("tableCell")&&(A=A.replace(/\|/g,"\\$&")),A}}function KG(){return{exit:{taskListCheckValueChecked:VR,taskListCheckValueUnchecked:VR,paragraph:JG}}}function XG(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:ZG}}}function VR(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function JG(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const i=t.children[0];if(i&&i.type==="text"){const r=e.children;let s=-1,o;for(;++s<r.length;){const a=r[s];if(a.type==="paragraph"){o=a;break}}o===t&&(i.value=i.value.slice(1),i.value.length===0?t.children.shift():t.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,t.position.start=Object.assign({},i.position.start)))}}this.exit(n)}function ZG(n,e,t,i){const r=n.children[0],s=typeof n.checked=="boolean"&&r&&r.type==="paragraph",o="["+(n.checked?"x":" ")+"] ",a=t.createTracker(i);s&&a.move(o);let c=Q2.listItem(n,e,t,{...i,...a.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+o}}function QG(){return[RH(),ZH(),nG(),jG(),KG()]}function e$(n){return{extensions:[kH(),QH(n),iG(),WG(n),XG()]}}const t$={tokenize:a$,partial:!0},eP={tokenize:l$,partial:!0},tP={tokenize:u$,partial:!0},nP={tokenize:c$,partial:!0},n$={tokenize:d$,partial:!0},iP={name:"wwwAutolink",tokenize:s$,previous:sP},rP={name:"protocolAutolink",tokenize:o$,previous:oP},ll={name:"emailAutolink",tokenize:r$,previous:aP},Go={};function i$(){return{text:Go}}let ic=48;for(;ic<123;)Go[ic]=ll,ic++,ic===58?ic=65:ic===91&&(ic=97);Go[43]=ll;Go[45]=ll;Go[46]=ll;Go[95]=ll;Go[72]=[ll,rP];Go[104]=[ll,rP];Go[87]=[ll,iP];Go[119]=[ll,iP];function r$(n,e,t){const i=this;let r,s;return o;function o(p){return!t1(p)||!aP.call(i,i.previous)||SC(i.events)?t(p):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),a(p))}function a(p){return t1(p)?(n.consume(p),a):p===64?(n.consume(p),c):t(p)}function c(p){return p===46?n.check(n$,f,u)(p):p===45||p===95||Ji(p)?(s=!0,n.consume(p),c):f(p)}function u(p){return n.consume(p),r=!0,c}function f(p){return s&&r&&lr(i.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(p)):t(p)}}function s$(n,e,t){const i=this;return r;function r(o){return o!==87&&o!==119||!sP.call(i,i.previous)||SC(i.events)?t(o):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(t$,n.attempt(eP,n.attempt(tP,s),t),t)(o))}function s(o){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(o)}}function o$(n,e,t){const i=this;let r="",s=!1;return o;function o(p){return(p===72||p===104)&&oP.call(i,i.previous)&&!SC(i.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),r+=String.fromCodePoint(p),n.consume(p),a):t(p)}function a(p){if(lr(p)&&r.length<5)return r+=String.fromCodePoint(p),n.consume(p),a;if(p===58){const m=r.toLowerCase();if(m==="http"||m==="https")return n.consume(p),c}return t(p)}function c(p){return p===47?(n.consume(p),s?u:(s=!0,c)):t(p)}function u(p){return p===null||D0(p)||pn(p)||Td(p)||bS(p)?t(p):n.attempt(eP,n.attempt(tP,f),t)(p)}function f(p){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(p)}}function a$(n,e,t){let i=0;return r;function r(o){return(o===87||o===119)&&i<3?(i++,n.consume(o),r):o===46&&i===3?(n.consume(o),s):t(o)}function s(o){return o===null?t(o):e(o)}}function l$(n,e,t){let i,r,s;return o;function o(u){return u===46||u===95?n.check(nP,c,a)(u):u===null||pn(u)||Td(u)||u!==45&&bS(u)?c(u):(s=!0,n.consume(u),o)}function a(u){return u===95?i=!0:(r=i,i=void 0),n.consume(u),o}function c(u){return r||i||!s?t(u):e(u)}}function u$(n,e){let t=0,i=0;return r;function r(o){return o===40?(t++,n.consume(o),r):o===41&&i<t?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?n.check(nP,e,s)(o):o===null||pn(o)||Td(o)?e(o):(n.consume(o),r)}function s(o){return o===41&&i++,n.consume(o),r}}function c$(n,e,t){return i;function i(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(n.consume(a),i):a===38?(n.consume(a),s):a===93?(n.consume(a),r):a===60||a===null||pn(a)||Td(a)?e(a):t(a)}function r(a){return a===null||a===40||a===91||pn(a)||Td(a)?e(a):i(a)}function s(a){return lr(a)?o(a):t(a)}function o(a){return a===59?(n.consume(a),i):lr(a)?(n.consume(a),o):t(a)}}function d$(n,e,t){return i;function i(s){return n.consume(s),r}function r(s){return Ji(s)?t(s):e(s)}}function sP(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||pn(n)}function oP(n){return!lr(n)}function aP(n){return!(n===47||t1(n))}function t1(n){return n===43||n===45||n===46||n===95||Ji(n)}function SC(n){let e=n.length,t=!1;for(;e--;){const i=n[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){t=!0;break}if(i._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const f$={tokenize:v$,partial:!0};function h$(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:y$,continuation:{tokenize:b$},exit:_$}},text:{91:{name:"gfmFootnoteCall",tokenize:g$},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:p$,resolveTo:m$}}}}function p$(n,e,t){const i=this;let r=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;r--;){const c=i.events[r][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return a;function a(c){if(!o||!o._balanced)return t(c);const u=so(i.sliceSerialize({start:o.end,end:i.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?t(c):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(c),n.exit("gfmFootnoteCallLabelMarker"),e(c))}}function m$(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},n[n.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[n[t+1],n[t+2],["enter",i,e],n[t+3],n[t+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],n[n.length-2],n[n.length-1],["exit",i,e]];return n.splice(t,n.length-t+1,...a),n}function g$(n,e,t){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,o;return a;function a(p){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(p),n.exit("gfmFootnoteCallLabelMarker"),c}function c(p){return p!==94?t(p):(n.enter("gfmFootnoteCallMarker"),n.consume(p),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",u)}function u(p){if(s>999||p===93&&!o||p===null||p===91||pn(p))return t(p);if(p===93){n.exit("chunkString");const m=n.exit("gfmFootnoteCallString");return r.includes(so(i.sliceSerialize(m)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(p),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(p)}return pn(p)||(o=!0),s++,n.consume(p),p===92?f:u}function f(p){return p===91||p===92||p===93?(n.consume(p),s++,u):u(p)}}function y$(n,e,t){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,o=0,a;return c;function c(v){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(v),n.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(v){return v===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(v),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",f):t(v)}function f(v){if(o>999||v===93&&!a||v===null||v===91||pn(v))return t(v);if(v===93){n.exit("chunkString");const w=n.exit("gfmFootnoteDefinitionLabelString");return s=so(i.sliceSerialize(w)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(v),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),m}return pn(v)||(a=!0),o++,n.consume(v),v===92?p:f}function p(v){return v===91||v===92||v===93?(n.consume(v),o++,f):f(v)}function m(v){return v===58?(n.enter("definitionMarker"),n.consume(v),n.exit("definitionMarker"),r.includes(s)||r.push(s),Gt(n,g,"gfmFootnoteDefinitionWhitespace")):t(v)}function g(v){return e(v)}}function b$(n,e,t){return n.check(r_,e,n.attempt(f$,e,t))}function _$(n){n.exit("gfmFootnoteDefinition")}function v$(n,e,t){const i=this;return Gt(n,r,"gfmFootnoteDefinitionIndent",5);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):t(s)}}function S$(n){let t=(n||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:r};return t==null&&(t=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(o,a){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},p={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},m=[["enter",f,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",p,a]],g=a.parser.constructs.insideSpan.null;g&&ns(m,m.length,0,_S(g,o.slice(u+1,c),a)),ns(m,m.length,0,[["exit",p,a],["enter",o[c][1],a],["exit",o[c][1],a],["exit",f,a]]),ns(o,u-1,c-u+3,m),c=u+m.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,a,c){const u=this.previous,f=this.events;let p=0;return m;function m(v){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(v):(o.enter("strikethroughSequenceTemporary"),g(v))}function g(v){const w=Qh(u);if(v===126)return p>1?c(v):(o.consume(v),p++,g);if(p<2&&!t)return c(v);const A=o.exit("strikethroughSequenceTemporary"),E=Qh(v);return A._open=!E||E===2&&!!w,A._close=!w||w===2&&!!E,a(v)}}}class w${constructor(){this.map=[]}add(e,t,i){T$(this,e,t,i)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let t=this.map.length;const i=[];for(;t>0;)t-=1,i.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const s of r)e.push(s);r=i.pop()}this.map.length=0}}function T$(n,e,t,i){let r=0;if(!(t===0&&i.length===0)){for(;r<n.map.length;){if(n.map[r][0]===e){n.map[r][1]+=t,n.map[r][2].push(...i);return}r+=1}n.map.push([e,t,i])}}function A$(n,e){let t=!1;const i=[];for(;e<n.length;){const r=n[e];if(t){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return i}function E$(){return{flow:{null:{name:"table",tokenize:C$,resolveAll:I$}}}}function C$(n,e,t){const i=this;let r=0,s=0,o;return a;function a(F){let J=i.events.length-1;for(;J>-1;){const oe=i.events[J][1].type;if(oe==="lineEnding"||oe==="linePrefix")J--;else break}const G=J>-1?i.events[J][1].type:null,ee=G==="tableHead"||G==="tableRow"?C:c;return ee===C&&i.parser.lazy[i.now().line]?t(F):ee(F)}function c(F){return n.enter("tableHead"),n.enter("tableRow"),u(F)}function u(F){return F===124||(o=!0,s+=1),f(F)}function f(F){return F===null?t(F):ht(F)?s>1?(s=0,i.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(F),n.exit("lineEnding"),g):t(F):Lt(F)?Gt(n,f,"whitespace")(F):(s+=1,o&&(o=!1,r+=1),F===124?(n.enter("tableCellDivider"),n.consume(F),n.exit("tableCellDivider"),o=!0,f):(n.enter("data"),p(F)))}function p(F){return F===null||F===124||pn(F)?(n.exit("data"),f(F)):(n.consume(F),F===92?m:p)}function m(F){return F===92||F===124?(n.consume(F),p):p(F)}function g(F){return i.interrupt=!1,i.parser.lazy[i.now().line]?t(F):(n.enter("tableDelimiterRow"),o=!1,Lt(F)?Gt(n,v,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):v(F))}function v(F){return F===45||F===58?A(F):F===124?(o=!0,n.enter("tableCellDivider"),n.consume(F),n.exit("tableCellDivider"),w):D(F)}function w(F){return Lt(F)?Gt(n,A,"whitespace")(F):A(F)}function A(F){return F===58?(s+=1,o=!0,n.enter("tableDelimiterMarker"),n.consume(F),n.exit("tableDelimiterMarker"),E):F===45?(s+=1,E(F)):F===null||ht(F)?R(F):D(F)}function E(F){return F===45?(n.enter("tableDelimiterFiller"),M(F)):D(F)}function M(F){return F===45?(n.consume(F),M):F===58?(o=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(F),n.exit("tableDelimiterMarker"),I):(n.exit("tableDelimiterFiller"),I(F))}function I(F){return Lt(F)?Gt(n,R,"whitespace")(F):R(F)}function R(F){return F===124?v(F):F===null||ht(F)?!o||r!==s?D(F):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(F)):D(F)}function D(F){return t(F)}function C(F){return n.enter("tableRow"),k(F)}function k(F){return F===124?(n.enter("tableCellDivider"),n.consume(F),n.exit("tableCellDivider"),k):F===null||ht(F)?(n.exit("tableRow"),e(F)):Lt(F)?Gt(n,k,"whitespace")(F):(n.enter("data"),j(F))}function j(F){return F===null||F===124||pn(F)?(n.exit("data"),k(F)):(n.consume(F),F===92?U:j)}function U(F){return F===92||F===124?(n.consume(F),j):j(F)}}function I$(n,e){let t=-1,i=!0,r=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,c=0,u,f,p;const m=new w$;for(;++t<n.length;){const g=n[t],v=g[1];g[0]==="enter"?v.type==="tableHead"?(a=!1,c!==0&&(jR(m,e,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(t,0,[["enter",u,e]])):v.type==="tableRow"||v.type==="tableDelimiterRow"?(i=!0,p=void 0,s=[0,0,0,0],o=[0,t+1,0,0],a&&(a=!1,f={type:"tableBody",start:Object.assign({},v.start),end:Object.assign({},v.end)},m.add(t,0,[["enter",f,e]])),r=v.type==="tableDelimiterRow"?2:f?3:1):r&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],p=Nv(m,e,s,r,void 0,p),s=[0,0,0,0]),o[2]=t)):v.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(o[0]=o[1],p=Nv(m,e,s,r,void 0,p)),s=o,o=[s[1],t,0,0])):v.type==="tableHead"?(a=!0,c=t):v.type==="tableRow"||v.type==="tableDelimiterRow"?(c=t,s[1]!==0?(o[0]=o[1],p=Nv(m,e,s,r,t,p)):o[1]!==0&&(p=Nv(m,e,o,r,t,p)),r=0):r&&(v.type==="data"||v.type==="tableDelimiterMarker"||v.type==="tableDelimiterFiller")&&(o[3]=t)}for(c!==0&&jR(m,e,c,u,f),m.consume(e.events),t=-1;++t<e.events.length;){const g=e.events[t];g[0]==="enter"&&g[1].type==="table"&&(g[1]._align=A$(e.events,t))}return n}function Nv(n,e,t,i,r,s){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",a="tableContent";t[0]!==0&&(s.end=Object.assign({},Bf(e.events,t[0])),n.add(t[0],0,[["exit",s,e]]));const c=Bf(e.events,t[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},n.add(t[1],0,[["enter",s,e]]),t[2]!==0){const u=Bf(e.events,t[2]),f=Bf(e.events,t[3]),p={type:a,start:Object.assign({},u),end:Object.assign({},f)};if(n.add(t[2],0,[["enter",p,e]]),i!==2){const m=e.events[t[2]],g=e.events[t[3]];if(m[1].end=Object.assign({},g[1].end),m[1].type="chunkText",m[1].contentType="text",t[3]>t[2]+1){const v=t[2]+1,w=t[3]-t[2]-1;n.add(v,w,[])}}n.add(t[3]+1,0,[["exit",p,e]])}return r!==void 0&&(s.end=Object.assign({},Bf(e.events,r)),n.add(r,0,[["exit",s,e]]),s=void 0),s}function jR(n,e,t,i,r){const s=[],o=Bf(e.events,t);r&&(r.end=Object.assign({},o),s.push(["exit",r,e])),i.end=Object.assign({},o),s.push(["exit",i,e]),n.add(t+1,0,s)}function Bf(n,e){const t=n[e],i=t[0]==="enter"?"start":"end";return t[1][i]}const x$={name:"tasklistCheck",tokenize:D$};function M$(){return{text:{91:x$}}}function D$(n,e,t){const i=this;return r;function r(c){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?t(c):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(c),n.exit("taskListCheckMarker"),s)}function s(c){return pn(c)?(n.enter("taskListCheckValueUnchecked"),n.consume(c),n.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(n.enter("taskListCheckValueChecked"),n.consume(c),n.exit("taskListCheckValueChecked"),o):t(c)}function o(c){return c===93?(n.enter("taskListCheckMarker"),n.consume(c),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),a):t(c)}function a(c){return ht(c)?e(c):Lt(c)?n.check({tokenize:R$},e,t)(c):t(c)}}function R$(n,e,t){return Gt(n,i,"whitespace");function i(r){return r===null?t(r):e(r)}}function k$(n){return b2([i$(),h$(),S$(n),E$(),M$()])}const N$={};function O$(n){const e=this,t=n||N$,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(k$(t)),s.push(QG()),o.push(e$(t))}const B$=({message:n})=>{const e=n.sender===Ss.USER,t=e?ZD:n.sender===Ss.MODEL?q6:H6,i=e?"bg-indigo-600/70 self-end rounded-l-xl rounded-tr-xl":"bg-purple-800/60 self-start rounded-r-xl rounded-tl-xl glassmorphism",r=n.streaming&&n.text===""&&!n.toolCallInProgress?ne.jsx("span",{className:"italic text-gray-400",children:"Generating response..."}):ne.jsx("div",{className:"prose prose-sm prose-invert max-w-none break-words",children:ne.jsx(SH,{remarkPlugins:[O$],children:n.text})});return ne.jsx("div",{className:`flex items-end w-full ${e?"justify-end":"justify-start"}`,children:ne.jsxs("div",{className:`flex items-start max-w-xl lg:max-w-2xl p-1 ${e?"flex-row-reverse":""}`,children:[!e&&ne.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center mr-2 mt-1 ring-2 ring-purple-500/50",children:ne.jsx(t,{className:"w-5 h-5 text-white"})}),ne.jsxs("div",{className:`px-4 py-3 ${i} shadow-md`,children:[r,n.sources&&n.sources.length>0&&ne.jsxs("div",{className:"mt-3 pt-2 border-t border-purple-600/50",children:[ne.jsx("h4",{className:"text-xs font-semibold text-purple-300 mb-1",children:"Sources:"}),ne.jsx("ul",{className:"space-y-1",children:n.sources.map((s,o)=>ne.jsx("li",{className:"text-xs",children:ne.jsxs("a",{href:s.uri,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-purple-300 hover:text-purple-100 hover:underline break-all",title:s.uri,children:[ne.jsx(tj,{className:"w-3 h-3 mr-1.5 flex-shrink-0"}),s.title||s.uri]})},o))})]}),ne.jsx("p",{className:`text-xs mt-2 ${e?"text-indigo-300":"text-purple-300"} opacity-70`,children:new Date(n.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e&&ne.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center ml-2 mt-1 ring-2 ring-indigo-400/50",children:ne.jsx(ZD,{className:"w-5 h-5 text-white"})})]})})};var Kt;(function(n){n.assertEqual=r=>{};function e(r){}n.assertIs=e;function t(r){throw new Error}n.assertNever=t,n.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},n.getValidEnumValues=r=>{const s=n.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return n.objectValues(o)},n.objectValues=r=>n.objectKeys(r).map(function(s){return r[s]}),n.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},n.find=(r,s)=>{for(const o of r)if(s(o))return o},n.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}n.joinValues=i,n.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(Kt||(Kt={}));var qR;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(qR||(qR={}));const et=Kt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gl=n=>{switch(typeof n){case"undefined":return et.undefined;case"string":return et.string;case"number":return Number.isNaN(n)?et.nan:et.number;case"boolean":return et.boolean;case"function":return et.function;case"bigint":return et.bigint;case"symbol":return et.symbol;case"object":return Array.isArray(n)?et.array:n===null?et.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?et.promise:typeof Map<"u"&&n instanceof Map?et.map:typeof Set<"u"&&n instanceof Set?et.set:typeof Date<"u"&&n instanceof Date?et.date:et.object;default:return et.unknown}},Ve=Kt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class sl extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(t(o));else{let a=i,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return r(this),i}static assert(e){if(!(e instanceof sl))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},i=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:t}}get formErrors(){return this.flatten()}}sl.create=n=>new sl(n);const n1=(n,e)=>{let t;switch(n.code){case Ve.invalid_type:n.received===et.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case Ve.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Kt.jsonStringifyReplacer)}`;break;case Ve.unrecognized_keys:t=`Unrecognized key(s) in object: ${Kt.joinValues(n.keys,", ")}`;break;case Ve.invalid_union:t="Invalid input";break;case Ve.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Kt.joinValues(n.options)}`;break;case Ve.invalid_enum_value:t=`Invalid enum value. Expected ${Kt.joinValues(n.options)}, received '${n.received}'`;break;case Ve.invalid_arguments:t="Invalid function arguments";break;case Ve.invalid_return_type:t="Invalid function return type";break;case Ve.invalid_date:t="Invalid date";break;case Ve.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Kt.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case Ve.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case Ve.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case Ve.custom:t="Invalid input";break;case Ve.invalid_intersection_types:t="Intersection results could not be merged";break;case Ve.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case Ve.not_finite:t="Number must be finite";break;default:t=e.defaultError,Kt.assertNever(n)}return{message:t}};let F$=n1;function P$(){return F$}const L$=n=>{const{data:e,path:t,errorMaps:i,issueData:r}=n,s=[...t,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const c=i.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function Ke(n,e){const t=P$(),i=L$({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===n1?void 0:n1].filter(r=>!!r)});n.common.issues.push(i)}class hr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const i=[];for(const r of t){if(r.status==="aborted")return St;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const i=[];for(const r of t){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return hr.mergeObjectSync(e,i)}static mergeObjectSync(e,t){const i={};for(const r of t){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return St;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const St=Object.freeze({status:"aborted"}),oy=n=>({status:"dirty",value:n}),Is=n=>({status:"valid",value:n}),HR=n=>n.status==="aborted",GR=n=>n.status==="dirty",ep=n=>n.status==="valid",O0=n=>typeof Promise<"u"&&n instanceof Promise;var it;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(it||(it={}));class qo{constructor(e,t,i,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const $R=(n,e)=>{if(ep(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new sl(n.common.issues);return this._error=t,this._error}}};function Mt(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:i,description:r}=n;if(e&&(t||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:c}=n;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??t??a.defaultError}},description:r}}class qt{get description(){return this._def.description}_getType(e){return Gl(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Gl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new hr,ctx:{common:e.parent.common,data:e.data,parsedType:Gl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(O0(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const i=this.safeParse(e,t);if(i.success)return i.data;throw i.error}safeParse(e,t){const i={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gl(e)},r=this._parseSync({data:e,path:i.path,parent:i});return $R(i,r)}"~validate"(e){var i,r;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gl(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:t});return ep(s)?{value:s.value}:{issues:t.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(s=>ep(s)?{value:s.value}:{issues:t.common.issues})}async parseAsync(e,t){const i=await this.safeParseAsync(e,t);if(i.success)return i.data;throw i.error}async safeParseAsync(e,t){const i={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Gl(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(O0(r)?r:Promise.resolve(r));return $R(i,s)}refine(e,t){const i=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:Ve.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof t=="function"?t(i,r):t),!1))}_refinement(e){return new ip({schema:this,typeName:bt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return vu.create(this,this._def)}nullable(){return rp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vo.create(this)}promise(){return U0.create(this,this._def)}or(e){return F0.create([this,e],this._def)}and(e){return P0.create(this,e,this._def)}transform(e){return new ip({...Mt(this._def),schema:this,typeName:bt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new o1({...Mt(this._def),innerType:this,defaultValue:t,typeName:bt.ZodDefault})}brand(){return new a9({typeName:bt.ZodBranded,type:this,...Mt(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new a1({...Mt(this._def),innerType:this,catchValue:t,typeName:bt.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return wC.create(this,e)}readonly(){return l1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const U$=/^c[^\s-]{8,}$/i,z$=/^[0-9a-z]+$/,V$=/^[0-9A-HJKMNP-TV-Z]{26}$/i,j$=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,q$=/^[a-z0-9_-]{21}$/i,H$=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,G$=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$$=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Y$="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _A;const W$=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,K$=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,X$=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,J$=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Z$=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Q$=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,lP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",e9=new RegExp(`^${lP}$`);function uP(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function t9(n){return new RegExp(`^${uP(n)}$`)}function n9(n){let e=`${lP}T${uP(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function i9(n,e){return!!((e==="v4"||!e)&&W$.test(n)||(e==="v6"||!e)&&X$.test(n))}function r9(n,e){if(!H$.test(n))return!1;try{const[t]=n.split("."),i=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function s9(n,e){return!!((e==="v4"||!e)&&K$.test(n)||(e==="v6"||!e)&&J$.test(n))}class zo extends qt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==et.string){const s=this._getOrReturnCtx(e);return Ke(s,{code:Ve.invalid_type,expected:et.string,received:s.parsedType}),St}const i=new hr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?Ke(r,{code:Ve.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Ke(r,{code:Ve.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")$$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"email",code:Ve.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")_A||(_A=new RegExp(Y$,"u")),_A.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"emoji",code:Ve.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")j$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"uuid",code:Ve.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")q$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"nanoid",code:Ve.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")U$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"cuid",code:Ve.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")z$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"cuid2",code:Ve.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")V$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"ulid",code:Ve.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),Ke(r,{validation:"url",code:Ve.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"regex",code:Ve.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?n9(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?e9.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?t9(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?G$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"duration",code:Ve.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?i9(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"ip",code:Ve.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?r9(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"jwt",code:Ve.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?s9(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"cidr",code:Ve.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?Z$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"base64",code:Ve.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?Q$.test(e.data)||(r=this._getOrReturnCtx(e,r),Ke(r,{validation:"base64url",code:Ve.invalid_string,message:s.message}),i.dirty()):Kt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,t,i){return this.refinement(r=>e.test(r),{validation:t,code:Ve.invalid_string,...it.errToObj(i)})}_addCheck(e){return new zo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...it.errToObj(e)})}url(e){return this._addCheck({kind:"url",...it.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...it.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...it.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...it.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...it.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...it.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...it.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...it.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...it.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...it.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...it.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...it.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...it.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...it.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...it.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...it.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...it.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...it.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...it.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...it.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...it.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...it.errToObj(t)})}nonempty(e){return this.min(1,it.errToObj(e))}trim(){return new zo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new zo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new zo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}zo.create=n=>new zo({checks:[],typeName:bt.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Mt(n)});function o9(n,e){const t=(n.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=t>i?t:i,s=Number.parseInt(n.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class Ad extends qt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==et.number){const s=this._getOrReturnCtx(e);return Ke(s,{code:Ve.invalid_type,expected:et.number,received:s.parsedType}),St}let i;const r=new hr;for(const s of this._def.checks)s.kind==="int"?Kt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ve.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ve.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ve.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?o9(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ve.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ve.not_finite,message:s.message}),r.dirty()):Kt.assertNever(s);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,it.toString(t))}gt(e,t){return this.setLimit("min",e,!1,it.toString(t))}lte(e,t){return this.setLimit("max",e,!0,it.toString(t))}lt(e,t){return this.setLimit("max",e,!1,it.toString(t))}setLimit(e,t,i,r){return new Ad({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:it.toString(r)}]})}_addCheck(e){return new Ad({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:it.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:it.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:it.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:it.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:it.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:it.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:it.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:it.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:it.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Kt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(t===null||i.value>t)&&(t=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ad.create=n=>new Ad({checks:[],typeName:bt.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Mt(n)});class Ed extends qt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==et.bigint)return this._getInvalidInput(e);let i;const r=new hr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ve.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ve.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Ke(i,{code:Ve.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):Kt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Ke(t,{code:Ve.invalid_type,expected:et.bigint,received:t.parsedType}),St}gte(e,t){return this.setLimit("min",e,!0,it.toString(t))}gt(e,t){return this.setLimit("min",e,!1,it.toString(t))}lte(e,t){return this.setLimit("max",e,!0,it.toString(t))}lt(e,t){return this.setLimit("max",e,!1,it.toString(t))}setLimit(e,t,i,r){return new Ed({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:i,message:it.toString(r)}]})}_addCheck(e){return new Ed({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:it.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:it.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:it.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:it.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:it.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Ed.create=n=>new Ed({checks:[],typeName:bt.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Mt(n)});class B0 extends qt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==et.boolean){const i=this._getOrReturnCtx(e);return Ke(i,{code:Ve.invalid_type,expected:et.boolean,received:i.parsedType}),St}return Is(e.data)}}B0.create=n=>new B0({typeName:bt.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Mt(n)});class tp extends qt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==et.date){const s=this._getOrReturnCtx(e);return Ke(s,{code:Ve.invalid_type,expected:et.date,received:s.parsedType}),St}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Ke(s,{code:Ve.invalid_date}),St}const i=new hr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),Ke(r,{code:Ve.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):Kt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tp({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:it.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:it.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}tp.create=n=>new tp({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:bt.ZodDate,...Mt(n)});class YR extends qt{_parse(e){if(this._getType(e)!==et.symbol){const i=this._getOrReturnCtx(e);return Ke(i,{code:Ve.invalid_type,expected:et.symbol,received:i.parsedType}),St}return Is(e.data)}}YR.create=n=>new YR({typeName:bt.ZodSymbol,...Mt(n)});class WR extends qt{_parse(e){if(this._getType(e)!==et.undefined){const i=this._getOrReturnCtx(e);return Ke(i,{code:Ve.invalid_type,expected:et.undefined,received:i.parsedType}),St}return Is(e.data)}}WR.create=n=>new WR({typeName:bt.ZodUndefined,...Mt(n)});class KR extends qt{_parse(e){if(this._getType(e)!==et.null){const i=this._getOrReturnCtx(e);return Ke(i,{code:Ve.invalid_type,expected:et.null,received:i.parsedType}),St}return Is(e.data)}}KR.create=n=>new KR({typeName:bt.ZodNull,...Mt(n)});class XR extends qt{constructor(){super(...arguments),this._any=!0}_parse(e){return Is(e.data)}}XR.create=n=>new XR({typeName:bt.ZodAny,...Mt(n)});class i1 extends qt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Is(e.data)}}i1.create=n=>new i1({typeName:bt.ZodUnknown,...Mt(n)});class Su extends qt{_parse(e){const t=this._getOrReturnCtx(e);return Ke(t,{code:Ve.invalid_type,expected:et.never,received:t.parsedType}),St}}Su.create=n=>new Su({typeName:bt.ZodNever,...Mt(n)});class JR extends qt{_parse(e){if(this._getType(e)!==et.undefined){const i=this._getOrReturnCtx(e);return Ke(i,{code:Ve.invalid_type,expected:et.void,received:i.parsedType}),St}return Is(e.data)}}JR.create=n=>new JR({typeName:bt.ZodVoid,...Mt(n)});class Vo extends qt{_parse(e){const{ctx:t,status:i}=this._processInputParams(e),r=this._def;if(t.parsedType!==et.array)return Ke(t,{code:Ve.invalid_type,expected:et.array,received:t.parsedType}),St;if(r.exactLength!==null){const o=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(o||a)&&(Ke(t,{code:o?Ve.too_big:Ve.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(Ke(t,{code:Ve.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(Ke(t,{code:Ve.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>r.type._parseAsync(new qo(t,o,t.path,a)))).then(o=>hr.mergeArray(i,o));const s=[...t.data].map((o,a)=>r.type._parseSync(new qo(t,o,t.path,a)));return hr.mergeArray(i,s)}get element(){return this._def.type}min(e,t){return new Vo({...this._def,minLength:{value:e,message:it.toString(t)}})}max(e,t){return new Vo({...this._def,maxLength:{value:e,message:it.toString(t)}})}length(e,t){return new Vo({...this._def,exactLength:{value:e,message:it.toString(t)}})}nonempty(e){return this.min(1,e)}}Vo.create=(n,e)=>new Vo({type:n,minLength:null,maxLength:null,exactLength:null,typeName:bt.ZodArray,...Mt(e)});function Ff(n){if(n instanceof ui){const e={};for(const t in n.shape){const i=n.shape[t];e[t]=vu.create(Ff(i))}return new ui({...n._def,shape:()=>e})}else return n instanceof Vo?new Vo({...n._def,type:Ff(n.element)}):n instanceof vu?vu.create(Ff(n.unwrap())):n instanceof rp?rp.create(Ff(n.unwrap())):n instanceof Cd?Cd.create(n.items.map(e=>Ff(e))):n}class ui extends qt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Kt.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==et.object){const u=this._getOrReturnCtx(e);return Ke(u,{code:Ve.invalid_type,expected:et.object,received:u.parsedType}),St}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Su&&this._def.unknownKeys==="strip"))for(const u in r.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const f=s[u],p=r.data[u];c.push({key:{status:"valid",value:u},value:f._parse(new qo(r,p,r.path,u)),alwaysSet:u in r.data})}if(this._def.catchall instanceof Su){const u=this._def.unknownKeys;if(u==="passthrough")for(const f of a)c.push({key:{status:"valid",value:f},value:{status:"valid",value:r.data[f]}});else if(u==="strict")a.length>0&&(Ke(r,{code:Ve.unrecognized_keys,keys:a}),i.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const f of a){const p=r.data[f];c.push({key:{status:"valid",value:f},value:u._parse(new qo(r,p,r.path,f)),alwaysSet:f in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const u=[];for(const f of c){const p=await f.key,m=await f.value;u.push({key:p,value:m,alwaysSet:f.alwaysSet})}return u}).then(u=>hr.mergeObjectSync(i,u)):hr.mergeObjectSync(i,c)}get shape(){return this._def.shape()}strict(e){return it.errToObj,new ui({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,t,i).message)??i.defaultError;return t.code==="unrecognized_keys"?{message:it.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new ui({...this._def,unknownKeys:"strip"})}passthrough(){return new ui({...this._def,unknownKeys:"passthrough"})}extend(e){return new ui({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ui({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:bt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ui({...this._def,catchall:e})}pick(e){const t={};for(const i of Kt.objectKeys(e))e[i]&&this.shape[i]&&(t[i]=this.shape[i]);return new ui({...this._def,shape:()=>t})}omit(e){const t={};for(const i of Kt.objectKeys(this.shape))e[i]||(t[i]=this.shape[i]);return new ui({...this._def,shape:()=>t})}deepPartial(){return Ff(this)}partial(e){const t={};for(const i of Kt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?t[i]=r:t[i]=r.optional()}return new ui({...this._def,shape:()=>t})}required(e){const t={};for(const i of Kt.objectKeys(this.shape))if(e&&!e[i])t[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof vu;)s=s._def.innerType;t[i]=s}return new ui({...this._def,shape:()=>t})}keyof(){return cP(Kt.objectKeys(this.shape))}}ui.create=(n,e)=>new ui({shape:()=>n,unknownKeys:"strip",catchall:Su.create(),typeName:bt.ZodObject,...Mt(e)});ui.strictCreate=(n,e)=>new ui({shape:()=>n,unknownKeys:"strict",catchall:Su.create(),typeName:bt.ZodObject,...Mt(e)});ui.lazycreate=(n,e)=>new ui({shape:n,unknownKeys:"strip",catchall:Su.create(),typeName:bt.ZodObject,...Mt(e)});class F0 extends qt{_parse(e){const{ctx:t}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new sl(a.ctx.common.issues));return Ke(t,{code:Ve.invalid_union,unionErrors:o}),St}if(t.common.async)return Promise.all(i.map(async s=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const c of i){const u={...t,common:{...t.common,issues:[]},parent:null},f=c._parseSync({data:t.data,path:t.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!s&&(s={result:f,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(c=>new sl(c));return Ke(t,{code:Ve.invalid_union,unionErrors:a}),St}}get options(){return this._def.options}}F0.create=(n,e)=>new F0({options:n,typeName:bt.ZodUnion,...Mt(e)});function r1(n,e){const t=Gl(n),i=Gl(e);if(n===e)return{valid:!0,data:n};if(t===et.object&&i===et.object){const r=Kt.objectKeys(e),s=Kt.objectKeys(n).filter(a=>r.indexOf(a)!==-1),o={...n,...e};for(const a of s){const c=r1(n[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===et.array&&i===et.array){if(n.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<n.length;s++){const o=n[s],a=e[s],c=r1(o,a);if(!c.valid)return{valid:!1};r.push(c.data)}return{valid:!0,data:r}}else return t===et.date&&i===et.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class P0 extends qt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(HR(s)||HR(o))return St;const a=r1(s.value,o.value);return a.valid?((GR(s)||GR(o))&&t.dirty(),{status:t.value,value:a.data}):(Ke(i,{code:Ve.invalid_intersection_types}),St)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}P0.create=(n,e,t)=>new P0({left:n,right:e,typeName:bt.ZodIntersection,...Mt(t)});class Cd extends qt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==et.array)return Ke(i,{code:Ve.invalid_type,expected:et.array,received:i.parsedType}),St;if(i.data.length<this._def.items.length)return Ke(i,{code:Ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),St;!this._def.rest&&i.data.length>this._def.items.length&&(Ke(i,{code:Ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...i.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new qo(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>hr.mergeArray(t,o)):hr.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Cd({...this._def,rest:e})}}Cd.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Cd({items:n,typeName:bt.ZodTuple,rest:null,...Mt(e)})};class L0 extends qt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==et.object)return Ke(i,{code:Ve.invalid_type,expected:et.object,received:i.parsedType}),St;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new qo(i,a,i.path,a)),value:o._parse(new qo(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?hr.mergeObjectAsync(t,r):hr.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,i){return t instanceof qt?new L0({keyType:e,valueType:t,typeName:bt.ZodRecord,...Mt(i)}):new L0({keyType:zo.create(),valueType:e,typeName:bt.ZodRecord,...Mt(t)})}}class ZR extends qt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==et.map)return Ke(i,{code:Ve.invalid_type,expected:et.map,received:i.parsedType}),St;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,c],u)=>({key:r._parse(new qo(i,a,i.path,[u,"key"])),value:s._parse(new qo(i,c,i.path,[u,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,f=await c.value;if(u.status==="aborted"||f.status==="aborted")return St;(u.status==="dirty"||f.status==="dirty")&&t.dirty(),a.set(u.value,f.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,f=c.value;if(u.status==="aborted"||f.status==="aborted")return St;(u.status==="dirty"||f.status==="dirty")&&t.dirty(),a.set(u.value,f.value)}return{status:t.value,value:a}}}}ZR.create=(n,e,t)=>new ZR({valueType:e,keyType:n,typeName:bt.ZodMap,...Mt(t)});class By extends qt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.parsedType!==et.set)return Ke(i,{code:Ve.invalid_type,expected:et.set,received:i.parsedType}),St;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(Ke(i,{code:Ve.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(Ke(i,{code:Ve.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const s=this._def.valueType;function o(c){const u=new Set;for(const f of c){if(f.status==="aborted")return St;f.status==="dirty"&&t.dirty(),u.add(f.value)}return{status:t.value,value:u}}const a=[...i.data.values()].map((c,u)=>s._parse(new qo(i,c,i.path,u)));return i.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new By({...this._def,minSize:{value:e,message:it.toString(t)}})}max(e,t){return new By({...this._def,maxSize:{value:e,message:it.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}By.create=(n,e)=>new By({valueType:n,minSize:null,maxSize:null,typeName:bt.ZodSet,...Mt(e)});class s1 extends qt{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}s1.create=(n,e)=>new s1({getter:n,typeName:bt.ZodLazy,...Mt(e)});class QR extends qt{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Ke(t,{received:t.data,code:Ve.invalid_literal,expected:this._def.value}),St}return{status:"valid",value:e.data}}get value(){return this._def.value}}QR.create=(n,e)=>new QR({value:n,typeName:bt.ZodLiteral,...Mt(e)});function cP(n,e){return new np({values:n,typeName:bt.ZodEnum,...Mt(e)})}class np extends qt{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),i=this._def.values;return Ke(t,{expected:Kt.joinValues(i),received:t.parsedType,code:Ve.invalid_type}),St}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),i=this._def.values;return Ke(t,{received:t.data,code:Ve.invalid_enum_value,options:i}),St}return Is(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return np.create(e,{...this._def,...t})}exclude(e,t=this._def){return np.create(this.options.filter(i=>!e.includes(i)),{...this._def,...t})}}np.create=cP;class ek extends qt{_parse(e){const t=Kt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==et.string&&i.parsedType!==et.number){const r=Kt.objectValues(t);return Ke(i,{expected:Kt.joinValues(r),received:i.parsedType,code:Ve.invalid_type}),St}if(this._cache||(this._cache=new Set(Kt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=Kt.objectValues(t);return Ke(i,{received:i.data,code:Ve.invalid_enum_value,options:r}),St}return Is(e.data)}get enum(){return this._def.values}}ek.create=(n,e)=>new ek({values:n,typeName:bt.ZodNativeEnum,...Mt(e)});class U0 extends qt{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==et.promise&&t.common.async===!1)return Ke(t,{code:Ve.invalid_type,expected:et.promise,received:t.parsedType}),St;const i=t.parsedType===et.promise?t.data:Promise.resolve(t.data);return Is(i.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}U0.create=(n,e)=>new U0({type:n,typeName:bt.ZodPromise,...Mt(e)});class ip extends qt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===bt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{Ke(i,o),o.fatal?t.abort():t.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return St;const c=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return c.status==="aborted"?St:c.status==="dirty"||t.value==="dirty"?oy(c.value):c});{if(t.value==="aborted")return St;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?St:a.status==="dirty"||t.value==="dirty"?oy(a.value):a}}if(r.type==="refinement"){const o=a=>{const c=r.refinement(a,s);if(i.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?St:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?St:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!ep(o))return St;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>ep(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:t.value,value:a})):St);Kt.assertNever(r)}}ip.create=(n,e,t)=>new ip({schema:n,typeName:bt.ZodEffects,effect:e,...Mt(t)});ip.createWithPreprocess=(n,e,t)=>new ip({schema:e,effect:{type:"preprocess",transform:n},typeName:bt.ZodEffects,...Mt(t)});class vu extends qt{_parse(e){return this._getType(e)===et.undefined?Is(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vu.create=(n,e)=>new vu({innerType:n,typeName:bt.ZodOptional,...Mt(e)});class rp extends qt{_parse(e){return this._getType(e)===et.null?Is(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rp.create=(n,e)=>new rp({innerType:n,typeName:bt.ZodNullable,...Mt(e)});class o1 extends qt{_parse(e){const{ctx:t}=this._processInputParams(e);let i=t.data;return t.parsedType===et.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}o1.create=(n,e)=>new o1({innerType:n,typeName:bt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Mt(e)});class a1 extends qt{_parse(e){const{ctx:t}=this._processInputParams(e),i={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return O0(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new sl(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new sl(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}a1.create=(n,e)=>new a1({innerType:n,typeName:bt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Mt(e)});class tk extends qt{_parse(e){if(this._getType(e)!==et.nan){const i=this._getOrReturnCtx(e);return Ke(i,{code:Ve.invalid_type,expected:et.nan,received:i.parsedType}),St}return{status:"valid",value:e.data}}}tk.create=n=>new tk({typeName:bt.ZodNaN,...Mt(n)});class a9 extends qt{_parse(e){const{ctx:t}=this._processInputParams(e),i=t.data;return this._def.type._parse({data:i,path:t.path,parent:t})}unwrap(){return this._def.type}}class wC extends qt{_parse(e){const{status:t,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?St:s.status==="dirty"?(t.dirty(),oy(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?St:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,t){return new wC({in:e,out:t,typeName:bt.ZodPipeline})}}class l1 extends qt{_parse(e){const t=this._def.innerType._parse(e),i=r=>(ep(r)&&(r.value=Object.freeze(r.value)),r);return O0(t)?t.then(r=>i(r)):i(t)}unwrap(){return this._def.innerType}}l1.create=(n,e)=>new l1({innerType:n,typeName:bt.ZodReadonly,...Mt(e)});var bt;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(bt||(bt={}));const rc=zo.create,nk=Ad.create;Ed.create;const l9=B0.create;tp.create;const ik=i1.create;Su.create;const ay=Vo.create,u9=ui.create,c9=F0.create;P0.create;Cd.create;const d9=L0.create,f9=s1.create,h9=np.create;U0.create;vu.create;rp.create;const Of={string:n=>zo.create({...n,coerce:!0}),number:n=>Ad.create({...n,coerce:!0}),boolean:n=>B0.create({...n,coerce:!0}),bigint:n=>Ed.create({...n,coerce:!0}),date:n=>tp.create({...n,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let p9,m9;function g9(){return{geminiUrl:p9,vertexUrl:m9}}function y9(n,e,t){var i,r,s;if(!(!((i=n.httpOptions)===null||i===void 0)&&i.baseUrl)){const o=g9();return n.vertexai?(r=o.vertexUrl)!==null&&r!==void 0?r:e:(s=o.geminiUrl)!==null&&s!==void 0?s:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fp{}function yt(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const s=e[r];return s!=null?String(s):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function _(n,e,t){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[a])){const c=n[a];if(Array.isArray(t))for(let u=0;u<c.length;u++){const f=c[u];_(f,e.slice(s+1),t[u])}else for(const u of c)_(u,e.slice(s+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in n||(n[a]=[{}]);const c=n[a];_(c[0],e.slice(s+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function b(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in n){const s=n[r];return Array.isArray(s)?s.map(o=>b(o,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rk;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(rk||(rk={}));var sk;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(sk||(sk={}));var rt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(rt||(rt={}));var ok;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ok||(ok={}));var ak;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ak||(ak={}));var lk;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(lk||(lk={}));var uk;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(uk||(uk={}));var ck;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(ck||(ck={}));var dk;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(dk||(dk={}));var fk;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(fk||(fk={}));var hk;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(hk||(hk={}));var pk;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(pk||(pk={}));var mk;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(mk||(mk={}));var z0;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(z0||(z0={}));var gk;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gk||(gk={}));var u1;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(u1||(u1={}));var yk;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(yk||(yk={}));var bk;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(bk||(bk={}));var _k;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(_k||(_k={}));var vk;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(vk||(vk={}));var Sk;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Sk||(Sk={}));var wk;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(wk||(wk={}));var Tk;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Tk||(Tk={}));var Ak;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Ak||(Ak={}));var Ek;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Ek||(Ek={}));var Ck;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ck||(Ck={}));var Ik;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ik||(Ik={}));var xk;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xk||(xk={}));var Mk;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Mk||(Mk={}));var Dk;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Dk||(Dk={}));var Rk;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Rk||(Rk={}));var kk;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(kk||(kk={}));var Nk;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Nk||(Nk={}));var Ok;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ok||(Ok={}));var Bk;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Bk||(Bk={}));var Fk;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Fk||(Fk={}));var Pk;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Pk||(Pk={}));var Lk;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Lk||(Lk={}));var $f;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})($f||($f={}));class Mm{get text(){var e,t,i,r,s,o,a,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const m of(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[g,v]of Object.entries(m))g!=="text"&&g!=="thought"&&(v!==null||v!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,t,i,r,s,o,a,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,i,r,s,o,a,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,t,i,r,s,o,a,c,u;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,i,r,s,o,a,c,u;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class Uk{}class zk{}class b9{}class _9{}class Vk{}class jk{}class qk{}class v9{}class Hk{}class Gk{}class $k{}class S9{}class c1{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class w9{}class T9{}class A9{get text(){var e,t,i;let r="",s=!1;const o=[];for(const a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[c,u]of Object.entries(a))c!=="text"&&c!=="thought"&&u!==null&&o.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,r+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?r:void 0}get data(){var e,t,i;let r="";const s=[];for(const o of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[a,c]of Object.entries(o))a!=="inlineData"&&c!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(r+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class E9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _n(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function dP(n,e){const t=_n(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function fP(n,e){return Array.isArray(e)?e.map(t=>V0(n,t)):[V0(n,e)]}function V0(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function C9(n,e){const t=V0(n,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function I9(n,e){const t=V0(n,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Yk(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function hP(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Yk(n,t)):[Yk(n,e)]}function d1(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Wk(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Kk(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ur(n,e){if(e==null)throw new Error("ContentUnion is required");return d1(e)?e:{role:"user",parts:hP(n,e)}}function pP(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=ur(n,t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=ur(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ur(n,t)):[ur(n,e)]}function oo(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Wk(e)||Kk(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ur(n,e)]}const t=[],i=[],r=d1(e[0]);for(const s of e){const o=d1(s);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(s);else{if(Wk(s)||Kk(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(s)}}return r||t.push({role:"user",parts:hP(n,i)}),t}const x9=new Set(["type","format","title","description","default","items","minItems","maxItems","enum","properties","required","minProperties","maxProperties","minimum","maximum","minLength","maxLength","pattern","anyOf","propertyOrdering"]),Xk=h9(["string","number","integer","object","array","boolean","null"]),M9=c9([Xk,ay(Xk)]);function D9(n=!0){const e=f9(()=>{const t=u9({type:M9.optional(),format:rc().optional(),title:rc().optional(),description:rc().optional(),default:ik().optional(),items:e.optional(),minItems:Of.string().optional(),maxItems:Of.string().optional(),enum:ay(ik()).optional(),properties:d9(rc(),e).optional(),required:ay(rc()).optional(),minProperties:Of.string().optional(),maxProperties:Of.string().optional(),propertyOrdering:ay(rc()).optional(),minimum:nk().optional(),maximum:nk().optional(),minLength:Of.string().optional(),maxLength:Of.string().optional(),pattern:rc().optional(),anyOf:ay(e).optional(),additionalProperties:l9().optional()});return n?t.strict():t});return e}function R9(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.keys(rt).includes(t[0].toUpperCase())?rt[t[0].toUpperCase()]:rt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.keys(rt).includes(i.toUpperCase())?rt[i.toUpperCase()]:rt.TYPE_UNSPECIFIED})}}function Xf(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=n.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,n=s[1]):s[1].type==="null"&&(e.nullable=!0,n=s[0])),n.type instanceof Array&&R9(n.type,e);for(const[o,a]of Object.entries(n))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.keys(rt).includes(a.toUpperCase())?a.toUpperCase():rt.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=Xf(a);else if(i.includes(o)){const c=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}c.push(Xf(u))}e[o]=c}else if(r.includes(o)){const c={};for(const[u,f]of Object.entries(a))c[u]=Xf(f);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=a}return e}function j0(n,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=D9().parse(e);return Xf(t)}else return Xf(e)}function mP(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function TC(n,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function o_(n,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=j0(n,t.parameters)),t.response&&(t.response=j0(n,t.response));return e}function a_(n,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const i of e)t.push(i);return t}function k9(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function xu(n,e){if(typeof e!="string")throw new Error("name must be a string");return k9(n,e,"cachedContents")}function gP(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Mu(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function N9(n){return n!=null&&typeof n=="object"&&"name"in n}function O9(n){return n!=null&&typeof n=="object"&&"video"in n}function B9(n){return n!=null&&typeof n=="object"&&"uri"in n}function yP(n,e){var t;let i;if(N9(e)&&(i=e.name),!(B9(e)&&(i=e.uri,i===void 0))&&!(O9(e)&&(i=(t=e.video)===null||t===void 0?void 0:t.uri,i===void 0))){if(typeof e=="string"&&(i=e),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const s=i.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${i}`);i=s[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function bP(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function _P(n,e){for(const t of["models","tunedModels","publisherModels"])if(F9(e,t))return e[t];return[]}function F9(n,e){return n!==null&&typeof n=="object"&&e in n}function P9(n,e={}){const t=n,i={name:t.name,description:t.description,parameters:Xf(TS(t.inputSchema))};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function L9(n,e={}){const t=[],i=new Set;for(const r of n){const s=r.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const o=P9(r,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function U9(n){const e=[];for(const t of n)e.push(TS(t));return e}function z9(n){const e={};for(const[t,i]of Object.entries(n)){const r=i;e[t]=TS(r)}return e}function TS(n){const e=new Set(["items"]),t=new Set(["anyOf"]),i=new Set(["properties"]),r={};for(const[s,o]of Object.entries(n))if(e.has(s))r[s]=TS(o);else if(t.has(s))r[s]=U9(o);else if(i.has(s))r[s]=z9(o);else if(s==="type"){const a=o.toUpperCase();r[s]=Object.keys(rt).includes(a)?a:rt.TYPE_UNSPECIFIED}else x9.has(s)&&(r[s]=o);return r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V9(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function j9(n,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(e,["data"]);i!=null&&_(t,["data"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function q9(n,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(e,["fileUri"]);i!=null&&_(t,["fileUri"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function H9(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],V9(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],j9(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],q9(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function Jk(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>H9(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function G9(n,e){const t={},i=b(e,["behavior"]);i!=null&&_(t,["behavior"],i);const r=b(e,["description"]);r!=null&&_(t,["description"],r);const s=b(e,["name"]);s!=null&&_(t,["name"],s);const o=b(e,["parameters"]);o!=null&&_(t,["parameters"],o);const a=b(e,["response"]);return a!=null&&_(t,["response"],a),t}function $9(n,e){const t={},i=b(e,["startTime"]);i!=null&&_(t,["startTime"],i);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function Y9(n,e){const t={},i=b(e,["timeRangeFilter"]);return i!=null&&_(t,["timeRangeFilter"],$9(n,i)),t}function W9(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function K9(n,e){const t={},i=b(e,["dynamicRetrievalConfig"]);return i!=null&&_(t,["dynamicRetrievalConfig"],W9(n,i)),t}function X9(){return{}}function J9(n,e){const t={},i=b(e,["functionDeclarations"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>G9(n,u))),_(t,["functionDeclarations"],c)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearch"]);r!=null&&_(t,["googleSearch"],Y9(n,r));const s=b(e,["googleSearchRetrieval"]);if(s!=null&&_(t,["googleSearchRetrieval"],K9(n,s)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&_(t,["urlContext"],X9());const a=b(e,["codeExecution"]);return a!=null&&_(t,["codeExecution"],a),t}function Z9(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["allowedFunctionNames"]);return r!=null&&_(t,["allowedFunctionNames"],r),t}function Q9(n,e){const t={},i=b(e,["latitude"]);i!=null&&_(t,["latitude"],i);const r=b(e,["longitude"]);return r!=null&&_(t,["longitude"],r),t}function eY(n,e){const t={},i=b(e,["latLng"]);i!=null&&_(t,["latLng"],Q9(n,i));const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function tY(n,e){const t={},i=b(e,["functionCallingConfig"]);i!=null&&_(t,["functionCallingConfig"],Z9(n,i));const r=b(e,["retrievalConfig"]);return r!=null&&_(t,["retrievalConfig"],eY(n,r)),t}function nY(n,e,t){const i={},r=b(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const s=b(e,["expireTime"]);t!==void 0&&s!=null&&_(t,["expireTime"],s);const o=b(e,["displayName"]);t!==void 0&&o!=null&&_(t,["displayName"],o);const a=b(e,["contents"]);if(t!==void 0&&a!=null){let p=oo(n,a);Array.isArray(p)&&(p=p.map(m=>Jk(n,m))),_(t,["contents"],p)}const c=b(e,["systemInstruction"]);t!==void 0&&c!=null&&_(t,["systemInstruction"],Jk(n,ur(n,c)));const u=b(e,["tools"]);if(t!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>J9(n,m))),_(t,["tools"],p)}const f=b(e,["toolConfig"]);if(t!==void 0&&f!=null&&_(t,["toolConfig"],tY(n,f)),b(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function iY(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["model"],dP(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],nY(n,r,t)),t}function rY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","name"],xu(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function sY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","name"],xu(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function oY(n,e,t){const i={},r=b(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const s=b(e,["expireTime"]);return t!==void 0&&s!=null&&_(t,["expireTime"],s),i}function aY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","name"],xu(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],oY(n,r,t)),t}function lY(n,e,t){const i={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);return t!==void 0&&s!=null&&_(t,["_query","pageToken"],s),i}function uY(n,e){const t={},i=b(e,["config"]);return i!=null&&_(t,["config"],lY(n,i,t)),t}function cY(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function dY(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function fY(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function hY(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],cY(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],dY(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],fY(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function Zk(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>hY(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function pY(n,e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=b(e,["description"]);i!=null&&_(t,["description"],i);const r=b(e,["name"]);r!=null&&_(t,["name"],r);const s=b(e,["parameters"]);s!=null&&_(t,["parameters"],s);const o=b(e,["response"]);return o!=null&&_(t,["response"],o),t}function mY(n,e){const t={},i=b(e,["startTime"]);i!=null&&_(t,["startTime"],i);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function gY(n,e){const t={},i=b(e,["timeRangeFilter"]);return i!=null&&_(t,["timeRangeFilter"],mY(n,i)),t}function yY(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function bY(n,e){const t={},i=b(e,["dynamicRetrievalConfig"]);return i!=null&&_(t,["dynamicRetrievalConfig"],yY(n,i)),t}function _Y(){return{}}function vY(n,e){const t={},i=b(e,["apiKeyString"]);return i!=null&&_(t,["apiKeyString"],i),t}function SY(n,e){const t={},i=b(e,["apiKeyConfig"]);i!=null&&_(t,["apiKeyConfig"],vY(n,i));const r=b(e,["authType"]);r!=null&&_(t,["authType"],r);const s=b(e,["googleServiceAccountConfig"]);s!=null&&_(t,["googleServiceAccountConfig"],s);const o=b(e,["httpBasicAuthConfig"]);o!=null&&_(t,["httpBasicAuthConfig"],o);const a=b(e,["oauthConfig"]);a!=null&&_(t,["oauthConfig"],a);const c=b(e,["oidcConfig"]);return c!=null&&_(t,["oidcConfig"],c),t}function wY(n,e){const t={},i=b(e,["authConfig"]);return i!=null&&_(t,["authConfig"],SY(n,i)),t}function TY(n,e){const t={},i=b(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>pY(n,p))),_(t,["functionDeclarations"],f)}const r=b(e,["retrieval"]);r!=null&&_(t,["retrieval"],r);const s=b(e,["googleSearch"]);s!=null&&_(t,["googleSearch"],gY(n,s));const o=b(e,["googleSearchRetrieval"]);o!=null&&_(t,["googleSearchRetrieval"],bY(n,o)),b(e,["enterpriseWebSearch"])!=null&&_(t,["enterpriseWebSearch"],_Y());const c=b(e,["googleMaps"]);if(c!=null&&_(t,["googleMaps"],wY(n,c)),b(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(e,["codeExecution"]);return u!=null&&_(t,["codeExecution"],u),t}function AY(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["allowedFunctionNames"]);return r!=null&&_(t,["allowedFunctionNames"],r),t}function EY(n,e){const t={},i=b(e,["latitude"]);i!=null&&_(t,["latitude"],i);const r=b(e,["longitude"]);return r!=null&&_(t,["longitude"],r),t}function CY(n,e){const t={},i=b(e,["latLng"]);i!=null&&_(t,["latLng"],EY(n,i));const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function IY(n,e){const t={},i=b(e,["functionCallingConfig"]);i!=null&&_(t,["functionCallingConfig"],AY(n,i));const r=b(e,["retrievalConfig"]);return r!=null&&_(t,["retrievalConfig"],CY(n,r)),t}function xY(n,e,t){const i={},r=b(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const s=b(e,["expireTime"]);t!==void 0&&s!=null&&_(t,["expireTime"],s);const o=b(e,["displayName"]);t!==void 0&&o!=null&&_(t,["displayName"],o);const a=b(e,["contents"]);if(t!==void 0&&a!=null){let m=oo(n,a);Array.isArray(m)&&(m=m.map(g=>Zk(n,g))),_(t,["contents"],m)}const c=b(e,["systemInstruction"]);t!==void 0&&c!=null&&_(t,["systemInstruction"],Zk(n,ur(n,c)));const u=b(e,["tools"]);if(t!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>TY(n,g))),_(t,["tools"],m)}const f=b(e,["toolConfig"]);t!==void 0&&f!=null&&_(t,["toolConfig"],IY(n,f));const p=b(e,["kmsKeyName"]);return t!==void 0&&p!=null&&_(t,["encryption_spec","kmsKeyName"],p),i}function MY(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["model"],dP(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],xY(n,r,t)),t}function DY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","name"],xu(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function RY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","name"],xu(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function kY(n,e,t){const i={},r=b(e,["ttl"]);t!==void 0&&r!=null&&_(t,["ttl"],r);const s=b(e,["expireTime"]);return t!==void 0&&s!=null&&_(t,["expireTime"],s),i}function NY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","name"],xu(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],kY(n,r,t)),t}function OY(n,e,t){const i={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);return t!==void 0&&s!=null&&_(t,["_query","pageToken"],s),i}function BY(n,e){const t={},i=b(e,["config"]);return i!=null&&_(t,["config"],OY(n,i,t)),t}function Kv(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["model"]);s!=null&&_(t,["model"],s);const o=b(e,["createTime"]);o!=null&&_(t,["createTime"],o);const a=b(e,["updateTime"]);a!=null&&_(t,["updateTime"],a);const c=b(e,["expireTime"]);c!=null&&_(t,["expireTime"],c);const u=b(e,["usageMetadata"]);return u!=null&&_(t,["usageMetadata"],u),t}function FY(){return{}}function PY(n,e){const t={},i=b(e,["nextPageToken"]);i!=null&&_(t,["nextPageToken"],i);const r=b(e,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Kv(n,o))),_(t,["cachedContents"],s)}return t}function Xv(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["model"]);s!=null&&_(t,["model"],s);const o=b(e,["createTime"]);o!=null&&_(t,["createTime"],o);const a=b(e,["updateTime"]);a!=null&&_(t,["updateTime"],a);const c=b(e,["expireTime"]);c!=null&&_(t,["expireTime"],c);const u=b(e,["usageMetadata"]);return u!=null&&_(t,["usageMetadata"],u),t}function LY(){return{}}function UY(n,e){const t={},i=b(e,["nextPageToken"]);i!=null&&_(t,["nextPageToken"],i);const r=b(e,["cachedContents"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Xv(n,o))),_(t,["cachedContents"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sp;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(sp||(sp={}));class AS{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,s;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};i?typeof i=="object"?o=Object.assign({},i):o=i:o={config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(r=o.config)===null||r===void 0?void 0:r.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zY extends fp{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new AS(sp.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=MY(this.apiClient,e);return a=yt("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Xv(this.apiClient,f))}else{const u=iY(this.apiClient,e);return a=yt("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Kv(this.apiClient,f))}}async get(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=DY(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Xv(this.apiClient,f))}else{const u=rY(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Kv(this.apiClient,f))}}async delete(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=RY(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=LY(),p=new Gk;return Object.assign(p,f),p})}else{const u=sY(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=FY(),p=new Gk;return Object.assign(p,f),p})}}async update(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=NY(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>Xv(this.apiClient,f))}else{const u=aY(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>Kv(this.apiClient,f))}}async listInternal(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=BY(this.apiClient,e);return a=yt("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=UY(this.apiClient,f),m=new $k;return Object.assign(m,p),m})}else{const u=uY(this.apiClient,e);return a=yt("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=PY(this.apiClient,f),m=new $k;return Object.assign(m,p),m})}}}function Qk(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sn(n){return this instanceof Sn?(this.v=n,this):new Sn(n)}function Jf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(g){return function(v){return Promise.resolve(v).then(g,p)}}function a(g,v){i[g]&&(r[g]=function(w){return new Promise(function(A,E){s.push([g,w,A,E])>1||c(g,w)})},v&&(r[g]=v(r[g])))}function c(g,v){try{u(i[g](v))}catch(w){m(s[0][3],w)}}function u(g){g.value instanceof Sn?Promise.resolve(g.value.v).then(f,p):m(s[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function m(g,v){g(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function xy(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Qk=="function"?Qk(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VY(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:vP(t)}function vP(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function jY(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function eN(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let s=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),s&&!vP(n[i])&&(s=!1),i++;s?e.push(...r):e.pop()}return e}class qY{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new HY(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class HY{constructor(e,t,i,r={},s=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=s,this.sendPromise=Promise.resolve(),jY(s)}async sendMessage(e){var t;await this.sendPromise;const i=ur(this.apiClient,e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var s,o,a;const c=await r,u=(o=(s=c.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(a=f.slice(p))!==null&&a!==void 0?a:[]);const g=u?[u]:[];this.recordHistory(i,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=ur(this.apiClient,e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const s=await r;return this.processStreamResponse(s,i)}getHistory(e=!1){const t=e?eN(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return Jf(this,arguments,function*(){var o,a,c,u;const f=[];try{for(var p=!0,m=xy(e),g;g=yield Sn(m.next()),o=g.done,!o;p=!0){u=g.value,p=!1;const v=u;if(VY(v)){const w=(r=(i=v.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;w!==void 0&&f.push(w)}yield yield Sn(v)}}catch(v){a={error:v}}finally{try{!p&&!o&&(c=m.return)&&(yield Sn(c.call(m)))}finally{if(a)throw a.error}}this.recordHistory(t,f)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(s=>s.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...eN(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GY(n,e,t){const i={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);return t!==void 0&&s!=null&&_(t,["_query","pageToken"],s),i}function $Y(n,e){const t={},i=b(e,["config"]);return i!=null&&_(t,["config"],GY(n,i,t)),t}function YY(n,e){const t={},i=b(e,["details"]);i!=null&&_(t,["details"],i);const r=b(e,["message"]);r!=null&&_(t,["message"],r);const s=b(e,["code"]);return s!=null&&_(t,["code"],s),t}function WY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["mimeType"]);s!=null&&_(t,["mimeType"],s);const o=b(e,["sizeBytes"]);o!=null&&_(t,["sizeBytes"],o);const a=b(e,["createTime"]);a!=null&&_(t,["createTime"],a);const c=b(e,["expirationTime"]);c!=null&&_(t,["expirationTime"],c);const u=b(e,["updateTime"]);u!=null&&_(t,["updateTime"],u);const f=b(e,["sha256Hash"]);f!=null&&_(t,["sha256Hash"],f);const p=b(e,["uri"]);p!=null&&_(t,["uri"],p);const m=b(e,["downloadUri"]);m!=null&&_(t,["downloadUri"],m);const g=b(e,["state"]);g!=null&&_(t,["state"],g);const v=b(e,["source"]);v!=null&&_(t,["source"],v);const w=b(e,["videoMetadata"]);w!=null&&_(t,["videoMetadata"],w);const A=b(e,["error"]);return A!=null&&_(t,["error"],YY(n,A)),t}function KY(n,e){const t={},i=b(e,["file"]);i!=null&&_(t,["file"],WY(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function XY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","file"],yP(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function JY(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","file"],yP(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function ZY(n,e){const t={},i=b(e,["details"]);i!=null&&_(t,["details"],i);const r=b(e,["message"]);r!=null&&_(t,["message"],r);const s=b(e,["code"]);return s!=null&&_(t,["code"],s),t}function f1(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["mimeType"]);s!=null&&_(t,["mimeType"],s);const o=b(e,["sizeBytes"]);o!=null&&_(t,["sizeBytes"],o);const a=b(e,["createTime"]);a!=null&&_(t,["createTime"],a);const c=b(e,["expirationTime"]);c!=null&&_(t,["expirationTime"],c);const u=b(e,["updateTime"]);u!=null&&_(t,["updateTime"],u);const f=b(e,["sha256Hash"]);f!=null&&_(t,["sha256Hash"],f);const p=b(e,["uri"]);p!=null&&_(t,["uri"],p);const m=b(e,["downloadUri"]);m!=null&&_(t,["downloadUri"],m);const g=b(e,["state"]);g!=null&&_(t,["state"],g);const v=b(e,["source"]);v!=null&&_(t,["source"],v);const w=b(e,["videoMetadata"]);w!=null&&_(t,["videoMetadata"],w);const A=b(e,["error"]);return A!=null&&_(t,["error"],ZY(n,A)),t}function QY(n,e){const t={},i=b(e,["nextPageToken"]);i!=null&&_(t,["nextPageToken"],i);const r=b(e,["files"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>f1(n,o))),_(t,["files"],s)}return t}function e7(){return{}}function t7(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n7 extends fp{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new AS(sp.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>f1(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$Y(this.apiClient,e);return s=yt("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=QY(this.apiClient,c),f=new S9;return Object.assign(f,u),f})}}async createInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KY(this.apiClient,e);return s=yt("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(()=>{const c=e7(),u=new w9;return Object.assign(u,c),u})}}async get(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=XY(this.apiClient,e);return s=yt("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>f1(this.apiClient,c))}}async delete(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=JY(this.apiClient,e);return s=yt("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(()=>{const c=t7(),u=new T9;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i7(n,e){const t={},i=b(e,["voiceName"]);return i!=null&&_(t,["voiceName"],i),t}function r7(n,e){const t={},i=b(e,["voiceName"]);return i!=null&&_(t,["voiceName"],i),t}function SP(n,e){const t={},i=b(e,["prebuiltVoiceConfig"]);return i!=null&&_(t,["prebuiltVoiceConfig"],i7(n,i)),t}function s7(n,e){const t={},i=b(e,["prebuiltVoiceConfig"]);return i!=null&&_(t,["prebuiltVoiceConfig"],r7(n,i)),t}function o7(n,e){const t={},i=b(e,["speaker"]);i!=null&&_(t,["speaker"],i);const r=b(e,["voiceConfig"]);return r!=null&&_(t,["voiceConfig"],SP(n,r)),t}function a7(n,e){const t={},i=b(e,["speakerVoiceConfigs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>o7(n,s))),_(t,["speakerVoiceConfigs"],r)}return t}function l7(n,e){const t={},i=b(e,["voiceConfig"]);i!=null&&_(t,["voiceConfig"],SP(n,i));const r=b(e,["multiSpeakerVoiceConfig"]);r!=null&&_(t,["multiSpeakerVoiceConfig"],a7(n,r));const s=b(e,["languageCode"]);return s!=null&&_(t,["languageCode"],s),t}function u7(n,e){const t={},i=b(e,["voiceConfig"]);if(i!=null&&_(t,["voiceConfig"],s7(n,i)),b(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function c7(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function d7(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function f7(n,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(e,["data"]);i!=null&&_(t,["data"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function h7(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function p7(n,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(e,["fileUri"]);i!=null&&_(t,["fileUri"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function m7(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function g7(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],c7(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],f7(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],p7(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function y7(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],d7(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],h7(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],m7(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function b7(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>g7(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function _7(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>y7(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function v7(n,e){const t={},i=b(e,["behavior"]);i!=null&&_(t,["behavior"],i);const r=b(e,["description"]);r!=null&&_(t,["description"],r);const s=b(e,["name"]);s!=null&&_(t,["name"],s);const o=b(e,["parameters"]);o!=null&&_(t,["parameters"],o);const a=b(e,["response"]);return a!=null&&_(t,["response"],a),t}function S7(n,e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=b(e,["description"]);i!=null&&_(t,["description"],i);const r=b(e,["name"]);r!=null&&_(t,["name"],r);const s=b(e,["parameters"]);s!=null&&_(t,["parameters"],s);const o=b(e,["response"]);return o!=null&&_(t,["response"],o),t}function w7(n,e){const t={},i=b(e,["startTime"]);i!=null&&_(t,["startTime"],i);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function T7(n,e){const t={},i=b(e,["startTime"]);i!=null&&_(t,["startTime"],i);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function A7(n,e){const t={},i=b(e,["timeRangeFilter"]);return i!=null&&_(t,["timeRangeFilter"],w7(n,i)),t}function E7(n,e){const t={},i=b(e,["timeRangeFilter"]);return i!=null&&_(t,["timeRangeFilter"],T7(n,i)),t}function C7(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function I7(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function x7(n,e){const t={},i=b(e,["dynamicRetrievalConfig"]);return i!=null&&_(t,["dynamicRetrievalConfig"],C7(n,i)),t}function M7(n,e){const t={},i=b(e,["dynamicRetrievalConfig"]);return i!=null&&_(t,["dynamicRetrievalConfig"],I7(n,i)),t}function D7(){return{}}function R7(n,e){const t={},i=b(e,["apiKeyString"]);return i!=null&&_(t,["apiKeyString"],i),t}function k7(n,e){const t={},i=b(e,["apiKeyConfig"]);i!=null&&_(t,["apiKeyConfig"],R7(n,i));const r=b(e,["authType"]);r!=null&&_(t,["authType"],r);const s=b(e,["googleServiceAccountConfig"]);s!=null&&_(t,["googleServiceAccountConfig"],s);const o=b(e,["httpBasicAuthConfig"]);o!=null&&_(t,["httpBasicAuthConfig"],o);const a=b(e,["oauthConfig"]);a!=null&&_(t,["oauthConfig"],a);const c=b(e,["oidcConfig"]);return c!=null&&_(t,["oidcConfig"],c),t}function N7(n,e){const t={},i=b(e,["authConfig"]);return i!=null&&_(t,["authConfig"],k7(n,i)),t}function O7(){return{}}function B7(n,e){const t={},i=b(e,["functionDeclarations"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>v7(n,u))),_(t,["functionDeclarations"],c)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearch"]);r!=null&&_(t,["googleSearch"],A7(n,r));const s=b(e,["googleSearchRetrieval"]);if(s!=null&&_(t,["googleSearchRetrieval"],x7(n,s)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&_(t,["urlContext"],O7());const a=b(e,["codeExecution"]);return a!=null&&_(t,["codeExecution"],a),t}function F7(n,e){const t={},i=b(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>S7(n,p))),_(t,["functionDeclarations"],f)}const r=b(e,["retrieval"]);r!=null&&_(t,["retrieval"],r);const s=b(e,["googleSearch"]);s!=null&&_(t,["googleSearch"],E7(n,s));const o=b(e,["googleSearchRetrieval"]);o!=null&&_(t,["googleSearchRetrieval"],M7(n,o)),b(e,["enterpriseWebSearch"])!=null&&_(t,["enterpriseWebSearch"],D7());const c=b(e,["googleMaps"]);if(c!=null&&_(t,["googleMaps"],N7(n,c)),b(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(e,["codeExecution"]);return u!=null&&_(t,["codeExecution"],u),t}function P7(n,e){const t={},i=b(e,["handle"]);if(i!=null&&_(t,["handle"],i),b(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function L7(n,e){const t={},i=b(e,["handle"]);i!=null&&_(t,["handle"],i);const r=b(e,["transparent"]);return r!=null&&_(t,["transparent"],r),t}function tN(){return{}}function nN(){return{}}function U7(n,e){const t={},i=b(e,["disabled"]);i!=null&&_(t,["disabled"],i);const r=b(e,["startOfSpeechSensitivity"]);r!=null&&_(t,["startOfSpeechSensitivity"],r);const s=b(e,["endOfSpeechSensitivity"]);s!=null&&_(t,["endOfSpeechSensitivity"],s);const o=b(e,["prefixPaddingMs"]);o!=null&&_(t,["prefixPaddingMs"],o);const a=b(e,["silenceDurationMs"]);return a!=null&&_(t,["silenceDurationMs"],a),t}function z7(n,e){const t={},i=b(e,["disabled"]);i!=null&&_(t,["disabled"],i);const r=b(e,["startOfSpeechSensitivity"]);r!=null&&_(t,["startOfSpeechSensitivity"],r);const s=b(e,["endOfSpeechSensitivity"]);s!=null&&_(t,["endOfSpeechSensitivity"],s);const o=b(e,["prefixPaddingMs"]);o!=null&&_(t,["prefixPaddingMs"],o);const a=b(e,["silenceDurationMs"]);return a!=null&&_(t,["silenceDurationMs"],a),t}function V7(n,e){const t={},i=b(e,["automaticActivityDetection"]);i!=null&&_(t,["automaticActivityDetection"],U7(n,i));const r=b(e,["activityHandling"]);r!=null&&_(t,["activityHandling"],r);const s=b(e,["turnCoverage"]);return s!=null&&_(t,["turnCoverage"],s),t}function j7(n,e){const t={},i=b(e,["automaticActivityDetection"]);i!=null&&_(t,["automaticActivityDetection"],z7(n,i));const r=b(e,["activityHandling"]);r!=null&&_(t,["activityHandling"],r);const s=b(e,["turnCoverage"]);return s!=null&&_(t,["turnCoverage"],s),t}function q7(n,e){const t={},i=b(e,["targetTokens"]);return i!=null&&_(t,["targetTokens"],i),t}function H7(n,e){const t={},i=b(e,["targetTokens"]);return i!=null&&_(t,["targetTokens"],i),t}function G7(n,e){const t={},i=b(e,["triggerTokens"]);i!=null&&_(t,["triggerTokens"],i);const r=b(e,["slidingWindow"]);return r!=null&&_(t,["slidingWindow"],q7(n,r)),t}function $7(n,e){const t={},i=b(e,["triggerTokens"]);i!=null&&_(t,["triggerTokens"],i);const r=b(e,["slidingWindow"]);return r!=null&&_(t,["slidingWindow"],H7(n,r)),t}function Y7(n,e){const t={},i=b(e,["proactiveAudio"]);return i!=null&&_(t,["proactiveAudio"],i),t}function W7(n,e){const t={},i=b(e,["proactiveAudio"]);return i!=null&&_(t,["proactiveAudio"],i),t}function K7(n,e,t){const i={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],r);const s=b(e,["responseModalities"]);t!==void 0&&s!=null&&_(t,["setup","generationConfig","responseModalities"],s);const o=b(e,["temperature"]);t!==void 0&&o!=null&&_(t,["setup","generationConfig","temperature"],o);const a=b(e,["topP"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","topP"],a);const c=b(e,["topK"]);t!==void 0&&c!=null&&_(t,["setup","generationConfig","topK"],c);const u=b(e,["maxOutputTokens"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","maxOutputTokens"],u);const f=b(e,["mediaResolution"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","mediaResolution"],f);const p=b(e,["seed"]);t!==void 0&&p!=null&&_(t,["setup","generationConfig","seed"],p);const m=b(e,["speechConfig"]);t!==void 0&&m!=null&&_(t,["setup","generationConfig","speechConfig"],l7(n,TC(n,m)));const g=b(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=b(e,["systemInstruction"]);t!==void 0&&v!=null&&_(t,["setup","systemInstruction"],b7(n,ur(n,v)));const w=b(e,["tools"]);if(t!==void 0&&w!=null){let C=a_(n,w);Array.isArray(C)&&(C=C.map(k=>B7(n,o_(n,k)))),_(t,["setup","tools"],C)}const A=b(e,["sessionResumption"]);t!==void 0&&A!=null&&_(t,["setup","sessionResumption"],P7(n,A));const E=b(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&_(t,["setup","inputAudioTranscription"],tN());const M=b(e,["outputAudioTranscription"]);t!==void 0&&M!=null&&_(t,["setup","outputAudioTranscription"],tN());const I=b(e,["realtimeInputConfig"]);t!==void 0&&I!=null&&_(t,["setup","realtimeInputConfig"],V7(n,I));const R=b(e,["contextWindowCompression"]);t!==void 0&&R!=null&&_(t,["setup","contextWindowCompression"],G7(n,R));const D=b(e,["proactivity"]);return t!==void 0&&D!=null&&_(t,["setup","proactivity"],Y7(n,D)),i}function X7(n,e,t){const i={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],r);const s=b(e,["responseModalities"]);t!==void 0&&s!=null&&_(t,["setup","generationConfig","responseModalities"],s);const o=b(e,["temperature"]);t!==void 0&&o!=null&&_(t,["setup","generationConfig","temperature"],o);const a=b(e,["topP"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","topP"],a);const c=b(e,["topK"]);t!==void 0&&c!=null&&_(t,["setup","generationConfig","topK"],c);const u=b(e,["maxOutputTokens"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","maxOutputTokens"],u);const f=b(e,["mediaResolution"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","mediaResolution"],f);const p=b(e,["seed"]);t!==void 0&&p!=null&&_(t,["setup","generationConfig","seed"],p);const m=b(e,["speechConfig"]);t!==void 0&&m!=null&&_(t,["setup","generationConfig","speechConfig"],u7(n,TC(n,m)));const g=b(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=b(e,["systemInstruction"]);t!==void 0&&v!=null&&_(t,["setup","systemInstruction"],_7(n,ur(n,v)));const w=b(e,["tools"]);if(t!==void 0&&w!=null){let C=a_(n,w);Array.isArray(C)&&(C=C.map(k=>F7(n,o_(n,k)))),_(t,["setup","tools"],C)}const A=b(e,["sessionResumption"]);t!==void 0&&A!=null&&_(t,["setup","sessionResumption"],L7(n,A));const E=b(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&_(t,["setup","inputAudioTranscription"],nN());const M=b(e,["outputAudioTranscription"]);t!==void 0&&M!=null&&_(t,["setup","outputAudioTranscription"],nN());const I=b(e,["realtimeInputConfig"]);t!==void 0&&I!=null&&_(t,["setup","realtimeInputConfig"],j7(n,I));const R=b(e,["contextWindowCompression"]);t!==void 0&&R!=null&&_(t,["setup","contextWindowCompression"],$7(n,R));const D=b(e,["proactivity"]);return t!==void 0&&D!=null&&_(t,["setup","proactivity"],W7(n,D)),i}function J7(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["setup","model"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],K7(n,r,t)),t}function Z7(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["setup","model"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],X7(n,r,t)),t}function Q7(){return{}}function eW(){return{}}function tW(){return{}}function nW(){return{}}function iW(n,e){const t={},i=b(e,["media"]);i!=null&&_(t,["mediaChunks"],fP(n,i));const r=b(e,["audio"]);r!=null&&_(t,["audio"],I9(n,r));const s=b(e,["audioStreamEnd"]);s!=null&&_(t,["audioStreamEnd"],s);const o=b(e,["video"]);o!=null&&_(t,["video"],C9(n,o));const a=b(e,["text"]);return a!=null&&_(t,["text"],a),b(e,["activityStart"])!=null&&_(t,["activityStart"],Q7()),b(e,["activityEnd"])!=null&&_(t,["activityEnd"],tW()),t}function rW(n,e){const t={},i=b(e,["media"]);if(i!=null&&_(t,["mediaChunks"],fP(n,i)),b(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const r=b(e,["audioStreamEnd"]);if(r!=null&&_(t,["audioStreamEnd"],r),b(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(b(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return b(e,["activityStart"])!=null&&_(t,["activityStart"],eW()),b(e,["activityEnd"])!=null&&_(t,["activityEnd"],nW()),t}function wP(n,e){const t={},i=b(e,["text"]);i!=null&&_(t,["text"],i);const r=b(e,["weight"]);return r!=null&&_(t,["weight"],r),t}function sW(n,e){const t={},i=b(e,["weightedPrompts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>wP(n,s))),_(t,["weightedPrompts"],r)}return t}function TP(n,e){const t={},i=b(e,["temperature"]);i!=null&&_(t,["temperature"],i);const r=b(e,["topK"]);r!=null&&_(t,["topK"],r);const s=b(e,["seed"]);s!=null&&_(t,["seed"],s);const o=b(e,["guidance"]);o!=null&&_(t,["guidance"],o);const a=b(e,["bpm"]);a!=null&&_(t,["bpm"],a);const c=b(e,["density"]);c!=null&&_(t,["density"],c);const u=b(e,["brightness"]);u!=null&&_(t,["brightness"],u);const f=b(e,["scale"]);f!=null&&_(t,["scale"],f);const p=b(e,["muteBass"]);p!=null&&_(t,["muteBass"],p);const m=b(e,["muteDrums"]);m!=null&&_(t,["muteDrums"],m);const g=b(e,["onlyBassAndDrums"]);return g!=null&&_(t,["onlyBassAndDrums"],g),t}function oW(n,e){const t={},i=b(e,["musicGenerationConfig"]);return i!=null&&_(t,["musicGenerationConfig"],TP(n,i)),t}function AP(n,e){const t={},i=b(e,["model"]);return i!=null&&_(t,["model"],i),t}function EP(n,e){const t={},i=b(e,["weightedPrompts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>wP(n,s))),_(t,["weightedPrompts"],r)}return t}function h1(n,e){const t={},i=b(e,["setup"]);i!=null&&_(t,["setup"],AP(n,i));const r=b(e,["clientContent"]);r!=null&&_(t,["clientContent"],EP(n,r));const s=b(e,["musicGenerationConfig"]);s!=null&&_(t,["musicGenerationConfig"],TP(n,s));const o=b(e,["playbackControl"]);return o!=null&&_(t,["playbackControl"],o),t}function aW(){return{}}function lW(){return{}}function uW(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function cW(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function dW(n,e){const t={},i=b(e,["data"]);i!=null&&_(t,["data"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function fW(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function hW(n,e){const t={},i=b(e,["fileUri"]);i!=null&&_(t,["fileUri"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function pW(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function mW(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],uW(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],dW(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],hW(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function gW(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],cW(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],fW(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],pW(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function yW(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>mW(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function bW(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>gW(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function iN(n,e){const t={},i=b(e,["text"]);i!=null&&_(t,["text"],i);const r=b(e,["finished"]);return r!=null&&_(t,["finished"],r),t}function rN(n,e){const t={},i=b(e,["text"]);i!=null&&_(t,["text"],i);const r=b(e,["finished"]);return r!=null&&_(t,["finished"],r),t}function _W(n,e){const t={},i=b(e,["retrievedUrl"]);i!=null&&_(t,["retrievedUrl"],i);const r=b(e,["urlRetrievalStatus"]);return r!=null&&_(t,["urlRetrievalStatus"],r),t}function vW(n,e){const t={},i=b(e,["urlMetadata"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>_W(n,s))),_(t,["urlMetadata"],r)}return t}function SW(n,e){const t={},i=b(e,["modelTurn"]);i!=null&&_(t,["modelTurn"],yW(n,i));const r=b(e,["turnComplete"]);r!=null&&_(t,["turnComplete"],r);const s=b(e,["interrupted"]);s!=null&&_(t,["interrupted"],s);const o=b(e,["groundingMetadata"]);o!=null&&_(t,["groundingMetadata"],o);const a=b(e,["generationComplete"]);a!=null&&_(t,["generationComplete"],a);const c=b(e,["inputTranscription"]);c!=null&&_(t,["inputTranscription"],iN(n,c));const u=b(e,["outputTranscription"]);u!=null&&_(t,["outputTranscription"],iN(n,u));const f=b(e,["urlContextMetadata"]);return f!=null&&_(t,["urlContextMetadata"],vW(n,f)),t}function wW(n,e){const t={},i=b(e,["modelTurn"]);i!=null&&_(t,["modelTurn"],bW(n,i));const r=b(e,["turnComplete"]);r!=null&&_(t,["turnComplete"],r);const s=b(e,["interrupted"]);s!=null&&_(t,["interrupted"],s);const o=b(e,["groundingMetadata"]);o!=null&&_(t,["groundingMetadata"],o);const a=b(e,["generationComplete"]);a!=null&&_(t,["generationComplete"],a);const c=b(e,["inputTranscription"]);c!=null&&_(t,["inputTranscription"],rN(n,c));const u=b(e,["outputTranscription"]);return u!=null&&_(t,["outputTranscription"],rN(n,u)),t}function TW(n,e){const t={},i=b(e,["id"]);i!=null&&_(t,["id"],i);const r=b(e,["args"]);r!=null&&_(t,["args"],r);const s=b(e,["name"]);return s!=null&&_(t,["name"],s),t}function AW(n,e){const t={},i=b(e,["args"]);i!=null&&_(t,["args"],i);const r=b(e,["name"]);return r!=null&&_(t,["name"],r),t}function EW(n,e){const t={},i=b(e,["functionCalls"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>TW(n,s))),_(t,["functionCalls"],r)}return t}function CW(n,e){const t={},i=b(e,["functionCalls"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>AW(n,s))),_(t,["functionCalls"],r)}return t}function IW(n,e){const t={},i=b(e,["ids"]);return i!=null&&_(t,["ids"],i),t}function xW(n,e){const t={},i=b(e,["ids"]);return i!=null&&_(t,["ids"],i),t}function Ov(n,e){const t={},i=b(e,["modality"]);i!=null&&_(t,["modality"],i);const r=b(e,["tokenCount"]);return r!=null&&_(t,["tokenCount"],r),t}function Bv(n,e){const t={},i=b(e,["modality"]);i!=null&&_(t,["modality"],i);const r=b(e,["tokenCount"]);return r!=null&&_(t,["tokenCount"],r),t}function MW(n,e){const t={},i=b(e,["promptTokenCount"]);i!=null&&_(t,["promptTokenCount"],i);const r=b(e,["cachedContentTokenCount"]);r!=null&&_(t,["cachedContentTokenCount"],r);const s=b(e,["responseTokenCount"]);s!=null&&_(t,["responseTokenCount"],s);const o=b(e,["toolUsePromptTokenCount"]);o!=null&&_(t,["toolUsePromptTokenCount"],o);const a=b(e,["thoughtsTokenCount"]);a!=null&&_(t,["thoughtsTokenCount"],a);const c=b(e,["totalTokenCount"]);c!=null&&_(t,["totalTokenCount"],c);const u=b(e,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>Ov(n,v))),_(t,["promptTokensDetails"],g)}const f=b(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>Ov(n,v))),_(t,["cacheTokensDetails"],g)}const p=b(e,["responseTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>Ov(n,v))),_(t,["responseTokensDetails"],g)}const m=b(e,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>Ov(n,v))),_(t,["toolUsePromptTokensDetails"],g)}return t}function DW(n,e){const t={},i=b(e,["promptTokenCount"]);i!=null&&_(t,["promptTokenCount"],i);const r=b(e,["cachedContentTokenCount"]);r!=null&&_(t,["cachedContentTokenCount"],r);const s=b(e,["candidatesTokenCount"]);s!=null&&_(t,["responseTokenCount"],s);const o=b(e,["toolUsePromptTokenCount"]);o!=null&&_(t,["toolUsePromptTokenCount"],o);const a=b(e,["thoughtsTokenCount"]);a!=null&&_(t,["thoughtsTokenCount"],a);const c=b(e,["totalTokenCount"]);c!=null&&_(t,["totalTokenCount"],c);const u=b(e,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(w=>Bv(n,w))),_(t,["promptTokensDetails"],v)}const f=b(e,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(w=>Bv(n,w))),_(t,["cacheTokensDetails"],v)}const p=b(e,["candidatesTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(w=>Bv(n,w))),_(t,["responseTokensDetails"],v)}const m=b(e,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(w=>Bv(n,w))),_(t,["toolUsePromptTokensDetails"],v)}const g=b(e,["trafficType"]);return g!=null&&_(t,["trafficType"],g),t}function RW(n,e){const t={},i=b(e,["timeLeft"]);return i!=null&&_(t,["timeLeft"],i),t}function kW(n,e){const t={},i=b(e,["timeLeft"]);return i!=null&&_(t,["timeLeft"],i),t}function NW(n,e){const t={},i=b(e,["newHandle"]);i!=null&&_(t,["newHandle"],i);const r=b(e,["resumable"]);r!=null&&_(t,["resumable"],r);const s=b(e,["lastConsumedClientMessageIndex"]);return s!=null&&_(t,["lastConsumedClientMessageIndex"],s),t}function OW(n,e){const t={},i=b(e,["newHandle"]);i!=null&&_(t,["newHandle"],i);const r=b(e,["resumable"]);r!=null&&_(t,["resumable"],r);const s=b(e,["lastConsumedClientMessageIndex"]);return s!=null&&_(t,["lastConsumedClientMessageIndex"],s),t}function BW(n,e){const t={};b(e,["setupComplete"])!=null&&_(t,["setupComplete"],aW());const r=b(e,["serverContent"]);r!=null&&_(t,["serverContent"],SW(n,r));const s=b(e,["toolCall"]);s!=null&&_(t,["toolCall"],EW(n,s));const o=b(e,["toolCallCancellation"]);o!=null&&_(t,["toolCallCancellation"],IW(n,o));const a=b(e,["usageMetadata"]);a!=null&&_(t,["usageMetadata"],MW(n,a));const c=b(e,["goAway"]);c!=null&&_(t,["goAway"],RW(n,c));const u=b(e,["sessionResumptionUpdate"]);return u!=null&&_(t,["sessionResumptionUpdate"],NW(n,u)),t}function FW(n,e){const t={};b(e,["setupComplete"])!=null&&_(t,["setupComplete"],lW());const r=b(e,["serverContent"]);r!=null&&_(t,["serverContent"],wW(n,r));const s=b(e,["toolCall"]);s!=null&&_(t,["toolCall"],CW(n,s));const o=b(e,["toolCallCancellation"]);o!=null&&_(t,["toolCallCancellation"],xW(n,o));const a=b(e,["usageMetadata"]);a!=null&&_(t,["usageMetadata"],DW(n,a));const c=b(e,["goAway"]);c!=null&&_(t,["goAway"],kW(n,c));const u=b(e,["sessionResumptionUpdate"]);return u!=null&&_(t,["sessionResumptionUpdate"],OW(n,u)),t}function PW(){return{}}function LW(n,e){const t={},i=b(e,["text"]);i!=null&&_(t,["text"],i);const r=b(e,["weight"]);return r!=null&&_(t,["weight"],r),t}function UW(n,e){const t={},i=b(e,["weightedPrompts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>LW(n,s))),_(t,["weightedPrompts"],r)}return t}function zW(n,e){const t={},i=b(e,["temperature"]);i!=null&&_(t,["temperature"],i);const r=b(e,["topK"]);r!=null&&_(t,["topK"],r);const s=b(e,["seed"]);s!=null&&_(t,["seed"],s);const o=b(e,["guidance"]);o!=null&&_(t,["guidance"],o);const a=b(e,["bpm"]);a!=null&&_(t,["bpm"],a);const c=b(e,["density"]);c!=null&&_(t,["density"],c);const u=b(e,["brightness"]);u!=null&&_(t,["brightness"],u);const f=b(e,["scale"]);f!=null&&_(t,["scale"],f);const p=b(e,["muteBass"]);p!=null&&_(t,["muteBass"],p);const m=b(e,["muteDrums"]);m!=null&&_(t,["muteDrums"],m);const g=b(e,["onlyBassAndDrums"]);return g!=null&&_(t,["onlyBassAndDrums"],g),t}function VW(n,e){const t={},i=b(e,["clientContent"]);i!=null&&_(t,["clientContent"],UW(n,i));const r=b(e,["musicGenerationConfig"]);return r!=null&&_(t,["musicGenerationConfig"],zW(n,r)),t}function jW(n,e){const t={},i=b(e,["data"]);i!=null&&_(t,["data"],i);const r=b(e,["mimeType"]);r!=null&&_(t,["mimeType"],r);const s=b(e,["sourceMetadata"]);return s!=null&&_(t,["sourceMetadata"],VW(n,s)),t}function qW(n,e){const t={},i=b(e,["audioChunks"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>jW(n,s))),_(t,["audioChunks"],r)}return t}function HW(n,e){const t={},i=b(e,["text"]);i!=null&&_(t,["text"],i);const r=b(e,["filteredReason"]);return r!=null&&_(t,["filteredReason"],r),t}function GW(n,e){const t={};b(e,["setupComplete"])!=null&&_(t,["setupComplete"],PW());const r=b(e,["serverContent"]);r!=null&&_(t,["serverContent"],qW(n,r));const s=b(e,["filteredPrompt"]);return s!=null&&_(t,["filteredPrompt"],HW(n,s)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $W(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function YW(n,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(e,["data"]);i!=null&&_(t,["data"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function WW(n,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(e,["fileUri"]);i!=null&&_(t,["fileUri"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function KW(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],$W(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],YW(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],WW(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function ES(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>KW(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function XW(n,e){const t={},i=b(e,["anyOf"]);i!=null&&_(t,["anyOf"],i);const r=b(e,["default"]);r!=null&&_(t,["default"],r);const s=b(e,["description"]);s!=null&&_(t,["description"],s);const o=b(e,["enum"]);o!=null&&_(t,["enum"],o);const a=b(e,["example"]);a!=null&&_(t,["example"],a);const c=b(e,["format"]);c!=null&&_(t,["format"],c);const u=b(e,["items"]);u!=null&&_(t,["items"],u);const f=b(e,["maxItems"]);f!=null&&_(t,["maxItems"],f);const p=b(e,["maxLength"]);p!=null&&_(t,["maxLength"],p);const m=b(e,["maxProperties"]);m!=null&&_(t,["maxProperties"],m);const g=b(e,["maximum"]);g!=null&&_(t,["maximum"],g);const v=b(e,["minItems"]);v!=null&&_(t,["minItems"],v);const w=b(e,["minLength"]);w!=null&&_(t,["minLength"],w);const A=b(e,["minProperties"]);A!=null&&_(t,["minProperties"],A);const E=b(e,["minimum"]);E!=null&&_(t,["minimum"],E);const M=b(e,["nullable"]);M!=null&&_(t,["nullable"],M);const I=b(e,["pattern"]);I!=null&&_(t,["pattern"],I);const R=b(e,["properties"]);R!=null&&_(t,["properties"],R);const D=b(e,["propertyOrdering"]);D!=null&&_(t,["propertyOrdering"],D);const C=b(e,["required"]);C!=null&&_(t,["required"],C);const k=b(e,["title"]);k!=null&&_(t,["title"],k);const j=b(e,["type"]);return j!=null&&_(t,["type"],j),t}function JW(n,e){const t={};if(b(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=b(e,["category"]);i!=null&&_(t,["category"],i);const r=b(e,["threshold"]);return r!=null&&_(t,["threshold"],r),t}function ZW(n,e){const t={},i=b(e,["behavior"]);i!=null&&_(t,["behavior"],i);const r=b(e,["description"]);r!=null&&_(t,["description"],r);const s=b(e,["name"]);s!=null&&_(t,["name"],s);const o=b(e,["parameters"]);o!=null&&_(t,["parameters"],o);const a=b(e,["response"]);return a!=null&&_(t,["response"],a),t}function QW(n,e){const t={},i=b(e,["startTime"]);i!=null&&_(t,["startTime"],i);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function eK(n,e){const t={},i=b(e,["timeRangeFilter"]);return i!=null&&_(t,["timeRangeFilter"],QW(n,i)),t}function tK(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function nK(n,e){const t={},i=b(e,["dynamicRetrievalConfig"]);return i!=null&&_(t,["dynamicRetrievalConfig"],tK(n,i)),t}function iK(){return{}}function rK(n,e){const t={},i=b(e,["functionDeclarations"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>ZW(n,u))),_(t,["functionDeclarations"],c)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearch"]);r!=null&&_(t,["googleSearch"],eK(n,r));const s=b(e,["googleSearchRetrieval"]);if(s!=null&&_(t,["googleSearchRetrieval"],nK(n,s)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&_(t,["urlContext"],iK());const a=b(e,["codeExecution"]);return a!=null&&_(t,["codeExecution"],a),t}function sK(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["allowedFunctionNames"]);return r!=null&&_(t,["allowedFunctionNames"],r),t}function oK(n,e){const t={},i=b(e,["latitude"]);i!=null&&_(t,["latitude"],i);const r=b(e,["longitude"]);return r!=null&&_(t,["longitude"],r),t}function aK(n,e){const t={},i=b(e,["latLng"]);i!=null&&_(t,["latLng"],oK(n,i));const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function lK(n,e){const t={},i=b(e,["functionCallingConfig"]);i!=null&&_(t,["functionCallingConfig"],sK(n,i));const r=b(e,["retrievalConfig"]);return r!=null&&_(t,["retrievalConfig"],aK(n,r)),t}function uK(n,e){const t={},i=b(e,["voiceName"]);return i!=null&&_(t,["voiceName"],i),t}function CP(n,e){const t={},i=b(e,["prebuiltVoiceConfig"]);return i!=null&&_(t,["prebuiltVoiceConfig"],uK(n,i)),t}function cK(n,e){const t={},i=b(e,["speaker"]);i!=null&&_(t,["speaker"],i);const r=b(e,["voiceConfig"]);return r!=null&&_(t,["voiceConfig"],CP(n,r)),t}function dK(n,e){const t={},i=b(e,["speakerVoiceConfigs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>cK(n,s))),_(t,["speakerVoiceConfigs"],r)}return t}function fK(n,e){const t={},i=b(e,["voiceConfig"]);i!=null&&_(t,["voiceConfig"],CP(n,i));const r=b(e,["multiSpeakerVoiceConfig"]);r!=null&&_(t,["multiSpeakerVoiceConfig"],dK(n,r));const s=b(e,["languageCode"]);return s!=null&&_(t,["languageCode"],s),t}function hK(n,e){const t={},i=b(e,["includeThoughts"]);i!=null&&_(t,["includeThoughts"],i);const r=b(e,["thinkingBudget"]);return r!=null&&_(t,["thinkingBudget"],r),t}function pK(n,e,t){const i={},r=b(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],ES(n,ur(n,r)));const s=b(e,["temperature"]);s!=null&&_(i,["temperature"],s);const o=b(e,["topP"]);o!=null&&_(i,["topP"],o);const a=b(e,["topK"]);a!=null&&_(i,["topK"],a);const c=b(e,["candidateCount"]);c!=null&&_(i,["candidateCount"],c);const u=b(e,["maxOutputTokens"]);u!=null&&_(i,["maxOutputTokens"],u);const f=b(e,["stopSequences"]);f!=null&&_(i,["stopSequences"],f);const p=b(e,["responseLogprobs"]);p!=null&&_(i,["responseLogprobs"],p);const m=b(e,["logprobs"]);m!=null&&_(i,["logprobs"],m);const g=b(e,["presencePenalty"]);g!=null&&_(i,["presencePenalty"],g);const v=b(e,["frequencyPenalty"]);v!=null&&_(i,["frequencyPenalty"],v);const w=b(e,["seed"]);w!=null&&_(i,["seed"],w);const A=b(e,["responseMimeType"]);A!=null&&_(i,["responseMimeType"],A);const E=b(e,["responseSchema"]);if(E!=null&&_(i,["responseSchema"],XW(n,j0(n,E))),b(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=b(e,["safetySettings"]);if(t!==void 0&&M!=null){let F=M;Array.isArray(F)&&(F=F.map(J=>JW(n,J))),_(t,["safetySettings"],F)}const I=b(e,["tools"]);if(t!==void 0&&I!=null){let F=a_(n,I);Array.isArray(F)&&(F=F.map(J=>rK(n,o_(n,J)))),_(t,["tools"],F)}const R=b(e,["toolConfig"]);if(t!==void 0&&R!=null&&_(t,["toolConfig"],lK(n,R)),b(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=b(e,["cachedContent"]);t!==void 0&&D!=null&&_(t,["cachedContent"],xu(n,D));const C=b(e,["responseModalities"]);C!=null&&_(i,["responseModalities"],C);const k=b(e,["mediaResolution"]);k!=null&&_(i,["mediaResolution"],k);const j=b(e,["speechConfig"]);if(j!=null&&_(i,["speechConfig"],fK(n,mP(n,j))),b(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=b(e,["thinkingConfig"]);return U!=null&&_(i,["thinkingConfig"],hK(n,U)),i}function sN(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["contents"]);if(r!=null){let o=oo(n,r);Array.isArray(o)&&(o=o.map(a=>ES(n,a))),_(t,["contents"],o)}const s=b(e,["config"]);return s!=null&&_(t,["generationConfig"],pK(n,s,t)),t}function mK(n,e,t){const i={},r=b(e,["taskType"]);t!==void 0&&r!=null&&_(t,["requests[]","taskType"],r);const s=b(e,["title"]);t!==void 0&&s!=null&&_(t,["requests[]","title"],s);const o=b(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&_(t,["requests[]","outputDimensionality"],o),b(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function gK(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["contents"]);r!=null&&_(t,["requests[]","content"],pP(n,r));const s=b(e,["config"]);s!=null&&_(t,["config"],mK(n,s,t));const o=b(e,["model"]);return o!==void 0&&_(t,["requests[]","model"],_n(n,o)),t}function yK(n,e,t){const i={};if(b(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=b(e,["numberOfImages"]);t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r);const s=b(e,["aspectRatio"]);t!==void 0&&s!=null&&_(t,["parameters","aspectRatio"],s);const o=b(e,["guidanceScale"]);if(t!==void 0&&o!=null&&_(t,["parameters","guidanceScale"],o),b(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=b(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&_(t,["parameters","safetySetting"],a);const c=b(e,["personGeneration"]);t!==void 0&&c!=null&&_(t,["parameters","personGeneration"],c);const u=b(e,["includeSafetyAttributes"]);t!==void 0&&u!=null&&_(t,["parameters","includeSafetyAttributes"],u);const f=b(e,["includeRaiReason"]);t!==void 0&&f!=null&&_(t,["parameters","includeRaiReason"],f);const p=b(e,["language"]);t!==void 0&&p!=null&&_(t,["parameters","language"],p);const m=b(e,["outputMimeType"]);t!==void 0&&m!=null&&_(t,["parameters","outputOptions","mimeType"],m);const g=b(e,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&_(t,["parameters","outputOptions","compressionQuality"],g),b(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function bK(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["config"]);return s!=null&&_(t,["config"],yK(n,s,t)),t}function _K(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","name"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function vK(n,e,t){const i={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const o=b(e,["filter"]);t!==void 0&&o!=null&&_(t,["_query","filter"],o);const a=b(e,["queryBase"]);return t!==void 0&&a!=null&&_(t,["_url","models_url"],bP(n,a)),i}function SK(n,e){const t={},i=b(e,["config"]);return i!=null&&_(t,["config"],vK(n,i,t)),t}function wK(n,e,t){const i={},r=b(e,["displayName"]);t!==void 0&&r!=null&&_(t,["displayName"],r);const s=b(e,["description"]);t!==void 0&&s!=null&&_(t,["description"],s);const o=b(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&_(t,["defaultCheckpointId"],o),i}function TK(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","name"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],wK(n,r,t)),t}function AK(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","name"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function EK(n,e){const t={};if(b(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function CK(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["contents"]);if(r!=null){let o=oo(n,r);Array.isArray(o)&&(o=o.map(a=>ES(n,a))),_(t,["contents"],o)}const s=b(e,["config"]);return s!=null&&_(t,["config"],EK(n,s)),t}function IK(n,e){const t={};if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=b(e,["imageBytes"]);i!=null&&_(t,["bytesBase64Encoded"],Mu(n,i));const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function xK(n,e,t){const i={},r=b(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r),b(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=b(e,["durationSeconds"]);if(t!==void 0&&s!=null&&_(t,["parameters","durationSeconds"],s),b(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=b(e,["aspectRatio"]);if(t!==void 0&&o!=null&&_(t,["parameters","aspectRatio"],o),b(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=b(e,["personGeneration"]);if(t!==void 0&&a!=null&&_(t,["parameters","personGeneration"],a),b(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=b(e,["negativePrompt"]);if(t!==void 0&&c!=null&&_(t,["parameters","negativePrompt"],c),b(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");if(b(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");return i}function MK(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["image"]);s!=null&&_(t,["instances[0]","image"],IK(n,s));const o=b(e,["config"]);return o!=null&&_(t,["config"],xK(n,o,t)),t}function DK(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function RK(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function kK(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function NK(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],DK(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],RK(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],kK(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function hp(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>NK(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function OK(n,e){const t={},i=b(e,["anyOf"]);i!=null&&_(t,["anyOf"],i);const r=b(e,["default"]);r!=null&&_(t,["default"],r);const s=b(e,["description"]);s!=null&&_(t,["description"],s);const o=b(e,["enum"]);o!=null&&_(t,["enum"],o);const a=b(e,["example"]);a!=null&&_(t,["example"],a);const c=b(e,["format"]);c!=null&&_(t,["format"],c);const u=b(e,["items"]);u!=null&&_(t,["items"],u);const f=b(e,["maxItems"]);f!=null&&_(t,["maxItems"],f);const p=b(e,["maxLength"]);p!=null&&_(t,["maxLength"],p);const m=b(e,["maxProperties"]);m!=null&&_(t,["maxProperties"],m);const g=b(e,["maximum"]);g!=null&&_(t,["maximum"],g);const v=b(e,["minItems"]);v!=null&&_(t,["minItems"],v);const w=b(e,["minLength"]);w!=null&&_(t,["minLength"],w);const A=b(e,["minProperties"]);A!=null&&_(t,["minProperties"],A);const E=b(e,["minimum"]);E!=null&&_(t,["minimum"],E);const M=b(e,["nullable"]);M!=null&&_(t,["nullable"],M);const I=b(e,["pattern"]);I!=null&&_(t,["pattern"],I);const R=b(e,["properties"]);R!=null&&_(t,["properties"],R);const D=b(e,["propertyOrdering"]);D!=null&&_(t,["propertyOrdering"],D);const C=b(e,["required"]);C!=null&&_(t,["required"],C);const k=b(e,["title"]);k!=null&&_(t,["title"],k);const j=b(e,["type"]);return j!=null&&_(t,["type"],j),t}function BK(n,e){const t={},i=b(e,["featureSelectionPreference"]);return i!=null&&_(t,["featureSelectionPreference"],i),t}function FK(n,e){const t={},i=b(e,["method"]);i!=null&&_(t,["method"],i);const r=b(e,["category"]);r!=null&&_(t,["category"],r);const s=b(e,["threshold"]);return s!=null&&_(t,["threshold"],s),t}function PK(n,e){const t={};if(b(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=b(e,["description"]);i!=null&&_(t,["description"],i);const r=b(e,["name"]);r!=null&&_(t,["name"],r);const s=b(e,["parameters"]);s!=null&&_(t,["parameters"],s);const o=b(e,["response"]);return o!=null&&_(t,["response"],o),t}function LK(n,e){const t={},i=b(e,["startTime"]);i!=null&&_(t,["startTime"],i);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function UK(n,e){const t={},i=b(e,["timeRangeFilter"]);return i!=null&&_(t,["timeRangeFilter"],LK(n,i)),t}function zK(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function VK(n,e){const t={},i=b(e,["dynamicRetrievalConfig"]);return i!=null&&_(t,["dynamicRetrievalConfig"],zK(n,i)),t}function jK(){return{}}function qK(n,e){const t={},i=b(e,["apiKeyString"]);return i!=null&&_(t,["apiKeyString"],i),t}function HK(n,e){const t={},i=b(e,["apiKeyConfig"]);i!=null&&_(t,["apiKeyConfig"],qK(n,i));const r=b(e,["authType"]);r!=null&&_(t,["authType"],r);const s=b(e,["googleServiceAccountConfig"]);s!=null&&_(t,["googleServiceAccountConfig"],s);const o=b(e,["httpBasicAuthConfig"]);o!=null&&_(t,["httpBasicAuthConfig"],o);const a=b(e,["oauthConfig"]);a!=null&&_(t,["oauthConfig"],a);const c=b(e,["oidcConfig"]);return c!=null&&_(t,["oidcConfig"],c),t}function GK(n,e){const t={},i=b(e,["authConfig"]);return i!=null&&_(t,["authConfig"],HK(n,i)),t}function IP(n,e){const t={},i=b(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>PK(n,p))),_(t,["functionDeclarations"],f)}const r=b(e,["retrieval"]);r!=null&&_(t,["retrieval"],r);const s=b(e,["googleSearch"]);s!=null&&_(t,["googleSearch"],UK(n,s));const o=b(e,["googleSearchRetrieval"]);o!=null&&_(t,["googleSearchRetrieval"],VK(n,o)),b(e,["enterpriseWebSearch"])!=null&&_(t,["enterpriseWebSearch"],jK());const c=b(e,["googleMaps"]);if(c!=null&&_(t,["googleMaps"],GK(n,c)),b(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const u=b(e,["codeExecution"]);return u!=null&&_(t,["codeExecution"],u),t}function $K(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["allowedFunctionNames"]);return r!=null&&_(t,["allowedFunctionNames"],r),t}function YK(n,e){const t={},i=b(e,["latitude"]);i!=null&&_(t,["latitude"],i);const r=b(e,["longitude"]);return r!=null&&_(t,["longitude"],r),t}function WK(n,e){const t={},i=b(e,["latLng"]);i!=null&&_(t,["latLng"],YK(n,i));const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function KK(n,e){const t={},i=b(e,["functionCallingConfig"]);i!=null&&_(t,["functionCallingConfig"],$K(n,i));const r=b(e,["retrievalConfig"]);return r!=null&&_(t,["retrievalConfig"],WK(n,r)),t}function XK(n,e){const t={},i=b(e,["voiceName"]);return i!=null&&_(t,["voiceName"],i),t}function JK(n,e){const t={},i=b(e,["prebuiltVoiceConfig"]);return i!=null&&_(t,["prebuiltVoiceConfig"],XK(n,i)),t}function ZK(n,e){const t={},i=b(e,["voiceConfig"]);if(i!=null&&_(t,["voiceConfig"],JK(n,i)),b(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=b(e,["languageCode"]);return r!=null&&_(t,["languageCode"],r),t}function QK(n,e){const t={},i=b(e,["includeThoughts"]);i!=null&&_(t,["includeThoughts"],i);const r=b(e,["thinkingBudget"]);return r!=null&&_(t,["thinkingBudget"],r),t}function eX(n,e,t){const i={},r=b(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],hp(n,ur(n,r)));const s=b(e,["temperature"]);s!=null&&_(i,["temperature"],s);const o=b(e,["topP"]);o!=null&&_(i,["topP"],o);const a=b(e,["topK"]);a!=null&&_(i,["topK"],a);const c=b(e,["candidateCount"]);c!=null&&_(i,["candidateCount"],c);const u=b(e,["maxOutputTokens"]);u!=null&&_(i,["maxOutputTokens"],u);const f=b(e,["stopSequences"]);f!=null&&_(i,["stopSequences"],f);const p=b(e,["responseLogprobs"]);p!=null&&_(i,["responseLogprobs"],p);const m=b(e,["logprobs"]);m!=null&&_(i,["logprobs"],m);const g=b(e,["presencePenalty"]);g!=null&&_(i,["presencePenalty"],g);const v=b(e,["frequencyPenalty"]);v!=null&&_(i,["frequencyPenalty"],v);const w=b(e,["seed"]);w!=null&&_(i,["seed"],w);const A=b(e,["responseMimeType"]);A!=null&&_(i,["responseMimeType"],A);const E=b(e,["responseSchema"]);E!=null&&_(i,["responseSchema"],OK(n,j0(n,E)));const M=b(e,["routingConfig"]);M!=null&&_(i,["routingConfig"],M);const I=b(e,["modelSelectionConfig"]);I!=null&&_(i,["modelConfig"],BK(n,I));const R=b(e,["safetySettings"]);if(t!==void 0&&R!=null){let oe=R;Array.isArray(oe)&&(oe=oe.map(me=>FK(n,me))),_(t,["safetySettings"],oe)}const D=b(e,["tools"]);if(t!==void 0&&D!=null){let oe=a_(n,D);Array.isArray(oe)&&(oe=oe.map(me=>IP(n,o_(n,me)))),_(t,["tools"],oe)}const C=b(e,["toolConfig"]);t!==void 0&&C!=null&&_(t,["toolConfig"],KK(n,C));const k=b(e,["labels"]);t!==void 0&&k!=null&&_(t,["labels"],k);const j=b(e,["cachedContent"]);t!==void 0&&j!=null&&_(t,["cachedContent"],xu(n,j));const U=b(e,["responseModalities"]);U!=null&&_(i,["responseModalities"],U);const F=b(e,["mediaResolution"]);F!=null&&_(i,["mediaResolution"],F);const J=b(e,["speechConfig"]);J!=null&&_(i,["speechConfig"],ZK(n,mP(n,J)));const G=b(e,["audioTimestamp"]);G!=null&&_(i,["audioTimestamp"],G);const ee=b(e,["thinkingConfig"]);return ee!=null&&_(i,["thinkingConfig"],QK(n,ee)),i}function oN(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["contents"]);if(r!=null){let o=oo(n,r);Array.isArray(o)&&(o=o.map(a=>hp(n,a))),_(t,["contents"],o)}const s=b(e,["config"]);return s!=null&&_(t,["generationConfig"],eX(n,s,t)),t}function tX(n,e,t){const i={},r=b(e,["taskType"]);t!==void 0&&r!=null&&_(t,["instances[]","task_type"],r);const s=b(e,["title"]);t!==void 0&&s!=null&&_(t,["instances[]","title"],s);const o=b(e,["outputDimensionality"]);t!==void 0&&o!=null&&_(t,["parameters","outputDimensionality"],o);const a=b(e,["mimeType"]);t!==void 0&&a!=null&&_(t,["instances[]","mimeType"],a);const c=b(e,["autoTruncate"]);return t!==void 0&&c!=null&&_(t,["parameters","autoTruncate"],c),i}function nX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["contents"]);r!=null&&_(t,["instances[]","content"],pP(n,r));const s=b(e,["config"]);return s!=null&&_(t,["config"],tX(n,s,t)),t}function iX(n,e,t){const i={},r=b(e,["outputGcsUri"]);t!==void 0&&r!=null&&_(t,["parameters","storageUri"],r);const s=b(e,["negativePrompt"]);t!==void 0&&s!=null&&_(t,["parameters","negativePrompt"],s);const o=b(e,["numberOfImages"]);t!==void 0&&o!=null&&_(t,["parameters","sampleCount"],o);const a=b(e,["aspectRatio"]);t!==void 0&&a!=null&&_(t,["parameters","aspectRatio"],a);const c=b(e,["guidanceScale"]);t!==void 0&&c!=null&&_(t,["parameters","guidanceScale"],c);const u=b(e,["seed"]);t!==void 0&&u!=null&&_(t,["parameters","seed"],u);const f=b(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&_(t,["parameters","safetySetting"],f);const p=b(e,["personGeneration"]);t!==void 0&&p!=null&&_(t,["parameters","personGeneration"],p);const m=b(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&_(t,["parameters","includeSafetyAttributes"],m);const g=b(e,["includeRaiReason"]);t!==void 0&&g!=null&&_(t,["parameters","includeRaiReason"],g);const v=b(e,["language"]);t!==void 0&&v!=null&&_(t,["parameters","language"],v);const w=b(e,["outputMimeType"]);t!==void 0&&w!=null&&_(t,["parameters","outputOptions","mimeType"],w);const A=b(e,["outputCompressionQuality"]);t!==void 0&&A!=null&&_(t,["parameters","outputOptions","compressionQuality"],A);const E=b(e,["addWatermark"]);t!==void 0&&E!=null&&_(t,["parameters","addWatermark"],E);const M=b(e,["enhancePrompt"]);return t!==void 0&&M!=null&&_(t,["parameters","enhancePrompt"],M),i}function rX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["config"]);return s!=null&&_(t,["config"],iX(n,s,t)),t}function AC(n,e){const t={},i=b(e,["gcsUri"]);i!=null&&_(t,["gcsUri"],i);const r=b(e,["imageBytes"]);r!=null&&_(t,["bytesBase64Encoded"],Mu(n,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function sX(n,e){const t={},i=b(e,["maskMode"]);i!=null&&_(t,["maskMode"],i);const r=b(e,["segmentationClasses"]);r!=null&&_(t,["maskClasses"],r);const s=b(e,["maskDilation"]);return s!=null&&_(t,["dilation"],s),t}function oX(n,e){const t={},i=b(e,["controlType"]);i!=null&&_(t,["controlType"],i);const r=b(e,["enableControlImageComputation"]);return r!=null&&_(t,["computeControl"],r),t}function aX(n,e){const t={},i=b(e,["styleDescription"]);return i!=null&&_(t,["styleDescription"],i),t}function lX(n,e){const t={},i=b(e,["subjectType"]);i!=null&&_(t,["subjectType"],i);const r=b(e,["subjectDescription"]);return r!=null&&_(t,["subjectDescription"],r),t}function uX(n,e){const t={},i=b(e,["referenceImage"]);i!=null&&_(t,["referenceImage"],AC(n,i));const r=b(e,["referenceId"]);r!=null&&_(t,["referenceId"],r);const s=b(e,["referenceType"]);s!=null&&_(t,["referenceType"],s);const o=b(e,["maskImageConfig"]);o!=null&&_(t,["maskImageConfig"],sX(n,o));const a=b(e,["controlImageConfig"]);a!=null&&_(t,["controlImageConfig"],oX(n,a));const c=b(e,["styleImageConfig"]);c!=null&&_(t,["styleImageConfig"],aX(n,c));const u=b(e,["subjectImageConfig"]);return u!=null&&_(t,["subjectImageConfig"],lX(n,u)),t}function cX(n,e,t){const i={},r=b(e,["outputGcsUri"]);t!==void 0&&r!=null&&_(t,["parameters","storageUri"],r);const s=b(e,["negativePrompt"]);t!==void 0&&s!=null&&_(t,["parameters","negativePrompt"],s);const o=b(e,["numberOfImages"]);t!==void 0&&o!=null&&_(t,["parameters","sampleCount"],o);const a=b(e,["aspectRatio"]);t!==void 0&&a!=null&&_(t,["parameters","aspectRatio"],a);const c=b(e,["guidanceScale"]);t!==void 0&&c!=null&&_(t,["parameters","guidanceScale"],c);const u=b(e,["seed"]);t!==void 0&&u!=null&&_(t,["parameters","seed"],u);const f=b(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&_(t,["parameters","safetySetting"],f);const p=b(e,["personGeneration"]);t!==void 0&&p!=null&&_(t,["parameters","personGeneration"],p);const m=b(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&_(t,["parameters","includeSafetyAttributes"],m);const g=b(e,["includeRaiReason"]);t!==void 0&&g!=null&&_(t,["parameters","includeRaiReason"],g);const v=b(e,["language"]);t!==void 0&&v!=null&&_(t,["parameters","language"],v);const w=b(e,["outputMimeType"]);t!==void 0&&w!=null&&_(t,["parameters","outputOptions","mimeType"],w);const A=b(e,["outputCompressionQuality"]);t!==void 0&&A!=null&&_(t,["parameters","outputOptions","compressionQuality"],A);const E=b(e,["editMode"]);t!==void 0&&E!=null&&_(t,["parameters","editMode"],E);const M=b(e,["baseSteps"]);return t!==void 0&&M!=null&&_(t,["parameters","editConfig","baseSteps"],M),i}function dX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>uX(n,c))),_(t,["instances[0]","referenceImages"],a)}const o=b(e,["config"]);return o!=null&&_(t,["config"],cX(n,o,t)),t}function fX(n,e,t){const i={},r=b(e,["includeRaiReason"]);t!==void 0&&r!=null&&_(t,["parameters","includeRaiReason"],r);const s=b(e,["outputMimeType"]);t!==void 0&&s!=null&&_(t,["parameters","outputOptions","mimeType"],s);const o=b(e,["outputCompressionQuality"]);t!==void 0&&o!=null&&_(t,["parameters","outputOptions","compressionQuality"],o);const a=b(e,["numberOfImages"]);t!==void 0&&a!=null&&_(t,["parameters","sampleCount"],a);const c=b(e,["mode"]);return t!==void 0&&c!=null&&_(t,["parameters","mode"],c),i}function hX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["image"]);r!=null&&_(t,["instances[0]","image"],AC(n,r));const s=b(e,["upscaleFactor"]);s!=null&&_(t,["parameters","upscaleConfig","upscaleFactor"],s);const o=b(e,["config"]);return o!=null&&_(t,["config"],fX(n,o,t)),t}function pX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","name"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function mX(n,e,t){const i={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const o=b(e,["filter"]);t!==void 0&&o!=null&&_(t,["_query","filter"],o);const a=b(e,["queryBase"]);return t!==void 0&&a!=null&&_(t,["_url","models_url"],bP(n,a)),i}function gX(n,e){const t={},i=b(e,["config"]);return i!=null&&_(t,["config"],mX(n,i,t)),t}function yX(n,e,t){const i={},r=b(e,["displayName"]);t!==void 0&&r!=null&&_(t,["displayName"],r);const s=b(e,["description"]);t!==void 0&&s!=null&&_(t,["description"],s);const o=b(e,["defaultCheckpointId"]);return t!==void 0&&o!=null&&_(t,["defaultCheckpointId"],o),i}function bX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],yX(n,r,t)),t}function _X(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","name"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function vX(n,e,t){const i={},r=b(e,["systemInstruction"]);t!==void 0&&r!=null&&_(t,["systemInstruction"],hp(n,ur(n,r)));const s=b(e,["tools"]);if(t!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>IP(n,c))),_(t,["tools"],a)}const o=b(e,["generationConfig"]);return t!==void 0&&o!=null&&_(t,["generationConfig"],o),i}function SX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["contents"]);if(r!=null){let o=oo(n,r);Array.isArray(o)&&(o=o.map(a=>hp(n,a))),_(t,["contents"],o)}const s=b(e,["config"]);return s!=null&&_(t,["config"],vX(n,s,t)),t}function wX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["contents"]);if(r!=null){let o=oo(n,r);Array.isArray(o)&&(o=o.map(a=>hp(n,a))),_(t,["contents"],o)}const s=b(e,["config"]);return s!=null&&_(t,["config"],s),t}function TX(n,e,t){const i={},r=b(e,["numberOfVideos"]);t!==void 0&&r!=null&&_(t,["parameters","sampleCount"],r);const s=b(e,["outputGcsUri"]);t!==void 0&&s!=null&&_(t,["parameters","storageUri"],s);const o=b(e,["fps"]);t!==void 0&&o!=null&&_(t,["parameters","fps"],o);const a=b(e,["durationSeconds"]);t!==void 0&&a!=null&&_(t,["parameters","durationSeconds"],a);const c=b(e,["seed"]);t!==void 0&&c!=null&&_(t,["parameters","seed"],c);const u=b(e,["aspectRatio"]);t!==void 0&&u!=null&&_(t,["parameters","aspectRatio"],u);const f=b(e,["resolution"]);t!==void 0&&f!=null&&_(t,["parameters","resolution"],f);const p=b(e,["personGeneration"]);t!==void 0&&p!=null&&_(t,["parameters","personGeneration"],p);const m=b(e,["pubsubTopic"]);t!==void 0&&m!=null&&_(t,["parameters","pubsubTopic"],m);const g=b(e,["negativePrompt"]);t!==void 0&&g!=null&&_(t,["parameters","negativePrompt"],g);const v=b(e,["enhancePrompt"]);t!==void 0&&v!=null&&_(t,["parameters","enhancePrompt"],v);const w=b(e,["generateAudio"]);return t!==void 0&&w!=null&&_(t,["parameters","generateAudio"],w),i}function AX(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["_url","model"],_n(n,i));const r=b(e,["prompt"]);r!=null&&_(t,["instances[0]","prompt"],r);const s=b(e,["image"]);s!=null&&_(t,["instances[0]","image"],AC(n,s));const o=b(e,["config"]);return o!=null&&_(t,["config"],TX(n,o,t)),t}function EX(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function CX(n,e){const t={},i=b(e,["data"]);i!=null&&_(t,["data"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function IX(n,e){const t={},i=b(e,["fileUri"]);i!=null&&_(t,["fileUri"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function xX(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],EX(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],CX(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],IX(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function MX(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>xX(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function DX(n,e){const t={},i=b(e,["citationSources"]);return i!=null&&_(t,["citations"],i),t}function RX(n,e){const t={},i=b(e,["retrievedUrl"]);i!=null&&_(t,["retrievedUrl"],i);const r=b(e,["urlRetrievalStatus"]);return r!=null&&_(t,["urlRetrievalStatus"],r),t}function kX(n,e){const t={},i=b(e,["urlMetadata"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>RX(n,s))),_(t,["urlMetadata"],r)}return t}function NX(n,e){const t={},i=b(e,["content"]);i!=null&&_(t,["content"],MX(n,i));const r=b(e,["citationMetadata"]);r!=null&&_(t,["citationMetadata"],DX(n,r));const s=b(e,["tokenCount"]);s!=null&&_(t,["tokenCount"],s);const o=b(e,["finishReason"]);o!=null&&_(t,["finishReason"],o);const a=b(e,["urlContextMetadata"]);a!=null&&_(t,["urlContextMetadata"],kX(n,a));const c=b(e,["avgLogprobs"]);c!=null&&_(t,["avgLogprobs"],c);const u=b(e,["groundingMetadata"]);u!=null&&_(t,["groundingMetadata"],u);const f=b(e,["index"]);f!=null&&_(t,["index"],f);const p=b(e,["logprobsResult"]);p!=null&&_(t,["logprobsResult"],p);const m=b(e,["safetyRatings"]);return m!=null&&_(t,["safetyRatings"],m),t}function aN(n,e){const t={},i=b(e,["candidates"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(c=>NX(n,c))),_(t,["candidates"],a)}const r=b(e,["modelVersion"]);r!=null&&_(t,["modelVersion"],r);const s=b(e,["promptFeedback"]);s!=null&&_(t,["promptFeedback"],s);const o=b(e,["usageMetadata"]);return o!=null&&_(t,["usageMetadata"],o),t}function OX(n,e){const t={},i=b(e,["values"]);return i!=null&&_(t,["values"],i),t}function BX(){return{}}function FX(n,e){const t={},i=b(e,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>OX(n,o))),_(t,["embeddings"],s)}return b(e,["metadata"])!=null&&_(t,["metadata"],BX()),t}function PX(n,e){const t={},i=b(e,["bytesBase64Encoded"]);i!=null&&_(t,["imageBytes"],Mu(n,i));const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function xP(n,e){const t={},i=b(e,["safetyAttributes","categories"]);i!=null&&_(t,["categories"],i);const r=b(e,["safetyAttributes","scores"]);r!=null&&_(t,["scores"],r);const s=b(e,["contentType"]);return s!=null&&_(t,["contentType"],s),t}function LX(n,e){const t={},i=b(e,["_self"]);i!=null&&_(t,["image"],PX(n,i));const r=b(e,["raiFilteredReason"]);r!=null&&_(t,["raiFilteredReason"],r);const s=b(e,["_self"]);return s!=null&&_(t,["safetyAttributes"],xP(n,s)),t}function UX(n,e){const t={},i=b(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>LX(n,o))),_(t,["generatedImages"],s)}const r=b(e,["positivePromptSafetyAttributes"]);return r!=null&&_(t,["positivePromptSafetyAttributes"],xP(n,r)),t}function zX(n,e){const t={},i=b(e,["baseModel"]);i!=null&&_(t,["baseModel"],i);const r=b(e,["createTime"]);r!=null&&_(t,["createTime"],r);const s=b(e,["updateTime"]);return s!=null&&_(t,["updateTime"],s),t}function p1(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["description"]);s!=null&&_(t,["description"],s);const o=b(e,["version"]);o!=null&&_(t,["version"],o);const a=b(e,["_self"]);a!=null&&_(t,["tunedModelInfo"],zX(n,a));const c=b(e,["inputTokenLimit"]);c!=null&&_(t,["inputTokenLimit"],c);const u=b(e,["outputTokenLimit"]);u!=null&&_(t,["outputTokenLimit"],u);const f=b(e,["supportedGenerationMethods"]);return f!=null&&_(t,["supportedActions"],f),t}function VX(n,e){const t={},i=b(e,["nextPageToken"]);i!=null&&_(t,["nextPageToken"],i);const r=b(e,["_self"]);if(r!=null){let s=_P(n,r);Array.isArray(s)&&(s=s.map(o=>p1(n,o))),_(t,["models"],s)}return t}function jX(){return{}}function qX(n,e){const t={},i=b(e,["totalTokens"]);i!=null&&_(t,["totalTokens"],i);const r=b(e,["cachedContentTokenCount"]);return r!=null&&_(t,["cachedContentTokenCount"],r),t}function HX(n,e){const t={},i=b(e,["video","uri"]);i!=null&&_(t,["uri"],i);const r=b(e,["video","encodedVideo"]);r!=null&&_(t,["videoBytes"],Mu(n,r));const s=b(e,["encoding"]);return s!=null&&_(t,["mimeType"],s),t}function GX(n,e){const t={},i=b(e,["_self"]);return i!=null&&_(t,["video"],HX(n,i)),t}function $X(n,e){const t={},i=b(e,["generatedSamples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>GX(n,a))),_(t,["generatedVideos"],o)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const s=b(e,["raiMediaFilteredReasons"]);return s!=null&&_(t,["raiMediaFilteredReasons"],s),t}function YX(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const o=b(e,["error"]);o!=null&&_(t,["error"],o);const a=b(e,["response","generateVideoResponse"]);return a!=null&&_(t,["response"],$X(n,a)),t}function WX(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function KX(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["data"]);r!=null&&_(t,["data"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function XX(n,e){const t={},i=b(e,["displayName"]);i!=null&&_(t,["displayName"],i);const r=b(e,["fileUri"]);r!=null&&_(t,["fileUri"],r);const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function JX(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],WX(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],KX(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],XX(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function ZX(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>JX(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function QX(n,e){const t={},i=b(e,["citations"]);return i!=null&&_(t,["citations"],i),t}function eJ(n,e){const t={},i=b(e,["content"]);i!=null&&_(t,["content"],ZX(n,i));const r=b(e,["citationMetadata"]);r!=null&&_(t,["citationMetadata"],QX(n,r));const s=b(e,["finishMessage"]);s!=null&&_(t,["finishMessage"],s);const o=b(e,["finishReason"]);o!=null&&_(t,["finishReason"],o);const a=b(e,["avgLogprobs"]);a!=null&&_(t,["avgLogprobs"],a);const c=b(e,["groundingMetadata"]);c!=null&&_(t,["groundingMetadata"],c);const u=b(e,["index"]);u!=null&&_(t,["index"],u);const f=b(e,["logprobsResult"]);f!=null&&_(t,["logprobsResult"],f);const p=b(e,["safetyRatings"]);return p!=null&&_(t,["safetyRatings"],p),t}function lN(n,e){const t={},i=b(e,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>eJ(n,f))),_(t,["candidates"],u)}const r=b(e,["createTime"]);r!=null&&_(t,["createTime"],r);const s=b(e,["responseId"]);s!=null&&_(t,["responseId"],s);const o=b(e,["modelVersion"]);o!=null&&_(t,["modelVersion"],o);const a=b(e,["promptFeedback"]);a!=null&&_(t,["promptFeedback"],a);const c=b(e,["usageMetadata"]);return c!=null&&_(t,["usageMetadata"],c),t}function tJ(n,e){const t={},i=b(e,["truncated"]);i!=null&&_(t,["truncated"],i);const r=b(e,["token_count"]);return r!=null&&_(t,["tokenCount"],r),t}function nJ(n,e){const t={},i=b(e,["values"]);i!=null&&_(t,["values"],i);const r=b(e,["statistics"]);return r!=null&&_(t,["statistics"],tJ(n,r)),t}function iJ(n,e){const t={},i=b(e,["billableCharacterCount"]);return i!=null&&_(t,["billableCharacterCount"],i),t}function rJ(n,e){const t={},i=b(e,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>nJ(n,o))),_(t,["embeddings"],s)}const r=b(e,["metadata"]);return r!=null&&_(t,["metadata"],iJ(n,r)),t}function sJ(n,e){const t={},i=b(e,["gcsUri"]);i!=null&&_(t,["gcsUri"],i);const r=b(e,["bytesBase64Encoded"]);r!=null&&_(t,["imageBytes"],Mu(n,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function MP(n,e){const t={},i=b(e,["safetyAttributes","categories"]);i!=null&&_(t,["categories"],i);const r=b(e,["safetyAttributes","scores"]);r!=null&&_(t,["scores"],r);const s=b(e,["contentType"]);return s!=null&&_(t,["contentType"],s),t}function EC(n,e){const t={},i=b(e,["_self"]);i!=null&&_(t,["image"],sJ(n,i));const r=b(e,["raiFilteredReason"]);r!=null&&_(t,["raiFilteredReason"],r);const s=b(e,["_self"]);s!=null&&_(t,["safetyAttributes"],MP(n,s));const o=b(e,["prompt"]);return o!=null&&_(t,["enhancedPrompt"],o),t}function oJ(n,e){const t={},i=b(e,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>EC(n,o))),_(t,["generatedImages"],s)}const r=b(e,["positivePromptSafetyAttributes"]);return r!=null&&_(t,["positivePromptSafetyAttributes"],MP(n,r)),t}function aJ(n,e){const t={},i=b(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>EC(n,s))),_(t,["generatedImages"],r)}return t}function lJ(n,e){const t={},i=b(e,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>EC(n,s))),_(t,["generatedImages"],r)}return t}function uJ(n,e){const t={},i=b(e,["endpoint"]);i!=null&&_(t,["name"],i);const r=b(e,["deployedModelId"]);return r!=null&&_(t,["deployedModelId"],r),t}function cJ(n,e){const t={},i=b(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&_(t,["baseModel"],i);const r=b(e,["createTime"]);r!=null&&_(t,["createTime"],r);const s=b(e,["updateTime"]);return s!=null&&_(t,["updateTime"],s),t}function dJ(n,e){const t={},i=b(e,["checkpointId"]);i!=null&&_(t,["checkpointId"],i);const r=b(e,["epoch"]);r!=null&&_(t,["epoch"],r);const s=b(e,["step"]);return s!=null&&_(t,["step"],s),t}function m1(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["displayName"]);r!=null&&_(t,["displayName"],r);const s=b(e,["description"]);s!=null&&_(t,["description"],s);const o=b(e,["versionId"]);o!=null&&_(t,["version"],o);const a=b(e,["deployedModels"]);if(a!=null){let m=a;Array.isArray(m)&&(m=m.map(g=>uJ(n,g))),_(t,["endpoints"],m)}const c=b(e,["labels"]);c!=null&&_(t,["labels"],c);const u=b(e,["_self"]);u!=null&&_(t,["tunedModelInfo"],cJ(n,u));const f=b(e,["defaultCheckpointId"]);f!=null&&_(t,["defaultCheckpointId"],f);const p=b(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>dJ(n,g))),_(t,["checkpoints"],m)}return t}function fJ(n,e){const t={},i=b(e,["nextPageToken"]);i!=null&&_(t,["nextPageToken"],i);const r=b(e,["_self"]);if(r!=null){let s=_P(n,r);Array.isArray(s)&&(s=s.map(o=>m1(n,o))),_(t,["models"],s)}return t}function hJ(){return{}}function pJ(n,e){const t={},i=b(e,["totalTokens"]);return i!=null&&_(t,["totalTokens"],i),t}function mJ(n,e){const t={},i=b(e,["tokensInfo"]);return i!=null&&_(t,["tokensInfo"],i),t}function gJ(n,e){const t={},i=b(e,["gcsUri"]);i!=null&&_(t,["uri"],i);const r=b(e,["bytesBase64Encoded"]);r!=null&&_(t,["videoBytes"],Mu(n,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function yJ(n,e){const t={},i=b(e,["_self"]);return i!=null&&_(t,["video"],gJ(n,i)),t}function bJ(n,e){const t={},i=b(e,["videos"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>yJ(n,a))),_(t,["generatedVideos"],o)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const s=b(e,["raiMediaFilteredReasons"]);return s!=null&&_(t,["raiMediaFilteredReasons"],s),t}function _J(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const o=b(e,["error"]);o!=null&&_(t,["error"],o);const a=b(e,["response"]);return a!=null&&_(t,["response"],bJ(n,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vJ="Content-Type",SJ="X-Server-Timeout",wJ="User-Agent",g1="x-goog-api-client",TJ="1.3.0",AJ=`google-genai-sdk/${TJ}`,EJ="v1beta1",CJ="v1beta",uN=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class DP extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class y1 extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class IJ{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:EJ,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:CJ,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))r.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,t,e.abortSignal),this.unaryApiCall(r,s,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,s]of Object.entries(t))typeof s=="object"?i[r]=Object.assign(Object.assign({},i[r]),s):s!==void 0&&(i[r]=s);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,t,e.abortSignal),this.streamApiCall(r,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const r=new AbortController,s=r.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>r.abort(),t.timeout),i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=s}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await cN(r),new c1(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await cN(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Jf(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),s=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:c}=yield Sn(r.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=s.decode(c);try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,v=m.code,w=`got status: ${g}. ${JSON.stringify(p)}`;if(v>=400&&v<500)throw new DP(w);if(v>=500&&v<600)throw new y1(w)}}catch(p){const m=p;if(m.name==="ClientError"||m.name==="ServerError")throw p}o+=u;let f=o.match(uN);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Sn(new c1(m)),o=o.slice(f[0].length),f=o.match(uN)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=AJ+" "+this.clientOptions.userAgentExtra;return e[wJ]=t,e[g1]=t,e[vJ]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))t.append(i,r);e.timeout&&e.timeout>0&&t.append(SJ,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);r.sizeBytes=String(o.size);const a=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=a;const c=await this.fetchUploadUrl(r,t);return s.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const s={file:e},o=await this.request({path:yt("upload/v1beta/files",s._url),body:JSON.stringify(s),httpMethod:"POST",httpOptions:r});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function cN(n){var e;if(n===void 0)throw new y1("response is undefined");if(!n.ok){const t=n.status,i=n.statusText;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=`got status: ${t} ${i}. ${JSON.stringify(r)}`;throw t>=400&&t<500?new DP(s):t>=500&&t<600?new y1(s):new Error(s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xJ="mcp_used/unknown";function RP(n){for(const e of n)if(CC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function kP(n){var e;const t=(e=n[g1])!==null&&e!==void 0?e:"";n[g1]=(t+` ${xJ}`).trimStart()}function MJ(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>CC(r)))!==null&&i!==void 0?i:!1}function DJ(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!CC(r)))!==null&&i!==void 0?i:!1}function CC(n){return n!==null&&typeof n=="object"&&n instanceof IC}function RJ(n,e=100){return Jf(this,arguments,function*(){let i,r=0;for(;r<e;){const s=yield Sn(n.listTools({cursor:i}));for(const o of s.tools)yield yield Sn(o),r++;if(!s.nextCursor)break;i=s.nextCursor}})}class IC{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new IC(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const s={},o=[];for(const f of this.mcpClients)try{for(var a=!0,c=(t=void 0,xy(RJ(f))),u;u=await c.next(),e=u.done,!e;a=!0){r=u.value,a=!1;const p=r;o.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=f}}catch(p){t={error:p}}finally{try{!a&&!e&&(i=c.return)&&await i.call(c)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),L9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=await this.functionNameToMcpClient[i.name].callTool({name:i.name,arguments:i.args});t.push({functionResponse:{name:i.name,response:s.isError?{error:s}:s}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kJ(n,e,t){const i=new E9;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const s=GW(n,r);Object.assign(i,s),e(i)}class NJ{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=FJ(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const f=new Promise(I=>{u=I}),p=e.callbacks,m=function(){u({})},g=this.apiClient,v={onopen:m,onmessage:I=>{kJ(g,p.onmessage,I)},onerror:(t=p==null?void 0:p.onerror)!==null&&t!==void 0?t:function(I){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(I){}},w=this.webSocketFactory.create(c,BJ(o),v);w.connect(),await f;const A=_n(this.apiClient,e.model),E=AP(this.apiClient,{model:A}),M=h1(this.apiClient,{setup:E});return w.send(JSON.stringify(M)),new OJ(w,this.apiClient)}}class OJ{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=sW(this.apiClient,e),i=EP(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=oW(this.apiClient,e),i=h1(this.apiClient,t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=h1(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl($f.PLAY)}pause(){this.sendPlaybackControl($f.PAUSE)}stop(){this.sendPlaybackControl($f.STOP)}resetContext(){this.sendPlaybackControl($f.RESET_CONTEXT)}close(){this.conn.close()}}function BJ(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function FJ(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PJ="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function LJ(n,e,t){const i=new A9;let r;if(t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),n.isVertexAI()){const s=FW(n,r);Object.assign(i,s)}else{const s=BW(n,r);Object.assign(i,s)}e(i)}class UJ{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new NJ(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,s,o,a;const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const p=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&RP(e.config.tools)&&kP(p);const m=qJ(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const U=this.apiClient.getApiKey();let F="BidiGenerateContent",J="key";U!=null&&U.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),F="BidiGenerateContentConstrained",J="access_token"),f=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${F}?${J}=${U}`}let g=()=>{};const v=new Promise(U=>{g=U}),w=e.callbacks,A=function(){var U;(U=w==null?void 0:w.onopen)===null||U===void 0||U.call(w),g({})},E=this.apiClient,M={onopen:A,onmessage:U=>{LJ(E,w.onmessage,U)},onerror:(t=w==null?void 0:w.onerror)!==null&&t!==void 0?t:function(U){},onclose:(i=w==null?void 0:w.onclose)!==null&&i!==void 0?i:function(U){}},I=this.webSocketFactory.create(f,jJ(m),M);I.connect(),await v;let R=_n(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const U=this.apiClient.getProject(),F=this.apiClient.getLocation();R=`projects/${U}/locations/${F}/`+R}let D={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[z0.AUDIO]}:e.config.responseModalities=[z0.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],k=[];for(const U of C)if(this.isCallableTool(U)){const F=U;k.push(await F.tool())}else k.push(U);k.length>0&&(e.config.tools=k);const j={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?D=Z7(this.apiClient,j):D=J7(this.apiClient,j),delete D.config,I.send(JSON.stringify(D)),new VJ(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const zJ={turnComplete:!0};class VJ{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=oo(e,t.turns),e.isVertexAI()?i=i.map(r=>hp(e,r)):i=i.map(r=>ES(e,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(PJ)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},zJ),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:rW(this.apiClient,e)}:t={realtimeInput:iW(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function jJ(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function qJ(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dN=10;function fN(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const o of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Jv(o)){r=!0;break}if(!r)return!0;const s=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function Jv(n){return"callTool"in n&&typeof n.callTool=="function"}function hN(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HJ extends fp{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,s,o,a;const c=await this.processParamsForMcpUsage(t);if(!MJ(t)||fN(t.config))return await this.generateContentInternal(c);if(DJ(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,f;const p=oo(this.apiClient,c.contents),m=(s=(r=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:dN;let g=0;for(;g<m&&(u=await this.generateContentInternal(c),!(!u.functionCalls||u.functionCalls.length===0));){const v=u.candidates[0].content,w=[];for(const A of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Jv(A)){const M=await A.callTool(u.functionCalls);w.push(...M)}g++,f={role:"user",parts:w},c.contents=oo(this.apiClient,c.contents),c.contents.push(v),c.contents.push(f),hN(c.config)&&(p.push(v),p.push(f))}return hN(c.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async t=>{if(fN(t.config)){const i=await this.processParamsForMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let s;const o=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?s=c==null?void 0:c.safetyAttributes:o.push(c);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s}:a={generatedImages:o},a}),this.list=async t=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new AS(sp.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)}}async processParamsForMcpUsage(e){var t,i,r;const s=(t=e.config)===null||t===void 0?void 0:t.tools;if(!s)return e;const o=await Promise.all(s.map(async c=>Jv(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&RP(e.config.tools)){const c=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),kP(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var t,i,r;const s=new Map;for(const o of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Jv(o)){const a=o,c=await a.tool();for(const u of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var t,i,r;const s=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:dN;let o=!1,a=0;const c=await this.initAfcToolsMap(e);return function(u,f,p){var m,g;return Jf(this,arguments,function*(){for(var v,w,A,E;a<s;){o&&(a++,o=!1);const D=yield Sn(u.processParamsForMcpUsage(p)),C=yield Sn(u.generateContentStreamInternal(D)),k=[],j=[];try{for(var M=!0,I=(w=void 0,xy(C)),R;R=yield Sn(I.next()),v=R.done,!v;M=!0){E=R.value,M=!1;const U=E;if(yield yield Sn(U),U.candidates&&(!((m=U.candidates[0])===null||m===void 0)&&m.content)){j.push(U.candidates[0].content);for(const F of(g=U.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(a<s&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(F.functionCall.name)){const J=yield Sn(f.get(F.functionCall.name).callTool([F.functionCall]));k.push(...J)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(U){w={error:U}}finally{try{!M&&!v&&(A=I.return)&&(yield Sn(A.call(I)))}finally{if(w)throw w.error}}if(k.length>0){o=!0;const U=new Mm;U.candidates=[{content:{role:"user",parts:k}}],yield yield Sn(U);const F=[];F.push(...j),F.push({role:"user",parts:k});const J=oo(u.apiClient,p.contents).concat(F);p.contents=J}else break}})}(this,c,e)}async generateContentInternal(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=oN(this.apiClient,e);return a=yt("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=lN(this.apiClient,f),m=new Mm;return Object.assign(m,p),m})}else{const u=sN(this.apiClient,e);return a=yt("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=aN(this.apiClient,f),m=new Mm;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=oN(this.apiClient,e);a=yt("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return o=f.requestStream({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(p){return Jf(this,arguments,function*(){var m,g,v,w;try{for(var A=!0,E=xy(p),M;M=yield Sn(E.next()),m=M.done,!m;A=!0){w=M.value,A=!1;const R=lN(f,yield Sn(w.json())),D=new Mm;Object.assign(D,R),yield yield Sn(D)}}catch(I){g={error:I}}finally{try{!A&&!m&&(v=E.return)&&(yield Sn(v.call(E)))}finally{if(g)throw g.error}}})})}else{const u=sN(this.apiClient,e);a=yt("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return o=f.requestStream({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return Jf(this,arguments,function*(){var m,g,v,w;try{for(var A=!0,E=xy(p),M;M=yield Sn(E.next()),m=M.done,!m;A=!0){w=M.value,A=!1;const R=aN(f,yield Sn(w.json())),D=new Mm;Object.assign(D,R),yield yield Sn(D)}}catch(I){g={error:I}}finally{try{!A&&!m&&(v=E.return)&&(yield Sn(v.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=nX(this.apiClient,e);return a=yt("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=rJ(this.apiClient,f),m=new Uk;return Object.assign(m,p),m})}else{const u=gK(this.apiClient,e);return a=yt("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=FX(this.apiClient,f),m=new Uk;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=rX(this.apiClient,e);return a=yt("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=oJ(this.apiClient,f),m=new zk;return Object.assign(m,p),m})}else{const u=bK(this.apiClient,e);return a=yt("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=UX(this.apiClient,f),m=new zk;return Object.assign(m,p),m})}}async editImageInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=dX(this.apiClient,e);return s=yt("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=aJ(this.apiClient,c),f=new b9;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=hX(this.apiClient,e);return s=yt("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=lJ(this.apiClient,c),f=new _9;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=pX(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>m1(this.apiClient,f))}else{const u=_K(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>p1(this.apiClient,f))}}async listInternal(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=gX(this.apiClient,e);return a=yt("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=fJ(this.apiClient,f),m=new Vk;return Object.assign(m,p),m})}else{const u=SK(this.apiClient,e);return a=yt("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=VX(this.apiClient,f),m=new Vk;return Object.assign(m,p),m})}}async update(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=bX(this.apiClient,e);return a=yt("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>m1(this.apiClient,f))}else{const u=TK(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>p1(this.apiClient,f))}}async delete(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=_X(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(()=>{const f=hJ(),p=new jk;return Object.assign(p,f),p})}else{const u=AK(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(()=>{const f=jX(),p=new jk;return Object.assign(p,f),p})}}async countTokens(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=SX(this.apiClient,e);return a=yt("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=pJ(this.apiClient,f),m=new qk;return Object.assign(m,p),m})}else{const u=CK(this.apiClient,e);return a=yt("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=qX(this.apiClient,f),m=new qk;return Object.assign(m,p),m})}}async computeTokens(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=wX(this.apiClient,e);return s=yt("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=mJ(this.apiClient,c),f=new v9;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=AX(this.apiClient,e);return a=yt("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>_J(this.apiClient,f))}else{const u=MK(this.apiClient,e);return a=yt("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>YX(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GJ(n,e){const t={},i=b(e,["operationName"]);i!=null&&_(t,["_url","operationName"],i);const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function $J(n,e){const t={},i=b(e,["operationName"]);i!=null&&_(t,["_url","operationName"],i);const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function YJ(n,e){const t={},i=b(e,["operationName"]);i!=null&&_(t,["operationName"],i);const r=b(e,["resourceName"]);r!=null&&_(t,["_url","resourceName"],r);const s=b(e,["config"]);return s!=null&&_(t,["config"],s),t}function WJ(n,e){const t={},i=b(e,["video","uri"]);i!=null&&_(t,["uri"],i);const r=b(e,["video","encodedVideo"]);r!=null&&_(t,["videoBytes"],Mu(n,r));const s=b(e,["encoding"]);return s!=null&&_(t,["mimeType"],s),t}function KJ(n,e){const t={},i=b(e,["_self"]);return i!=null&&_(t,["video"],WJ(n,i)),t}function XJ(n,e){const t={},i=b(e,["generatedSamples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>KJ(n,a))),_(t,["generatedVideos"],o)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const s=b(e,["raiMediaFilteredReasons"]);return s!=null&&_(t,["raiMediaFilteredReasons"],s),t}function JJ(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const o=b(e,["error"]);o!=null&&_(t,["error"],o);const a=b(e,["response","generateVideoResponse"]);return a!=null&&_(t,["response"],XJ(n,a)),t}function ZJ(n,e){const t={},i=b(e,["gcsUri"]);i!=null&&_(t,["uri"],i);const r=b(e,["bytesBase64Encoded"]);r!=null&&_(t,["videoBytes"],Mu(n,r));const s=b(e,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function QJ(n,e){const t={},i=b(e,["_self"]);return i!=null&&_(t,["video"],ZJ(n,i)),t}function eZ(n,e){const t={},i=b(e,["videos"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>QJ(n,a))),_(t,["generatedVideos"],o)}const r=b(e,["raiMediaFilteredCount"]);r!=null&&_(t,["raiMediaFilteredCount"],r);const s=b(e,["raiMediaFilteredReasons"]);return s!=null&&_(t,["raiMediaFilteredReasons"],s),t}function pN(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const o=b(e,["error"]);o!=null&&_(t,["error"],o);const a=b(e,["response"]);return a!=null&&_(t,["response"],eZ(n,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tZ extends fp{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let s;return i&&"httpOptions"in i&&(s=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:s}})}else return this.getVideosOperationInternal({operationName:t.name,config:i})}async getVideosOperationInternal(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=$J(this.apiClient,e);return a=yt("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>pN(this.apiClient,f))}else{const u=GJ(this.apiClient,e);return a=yt("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>JJ(this.apiClient,f))}}async fetchPredictVideosOperationInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=YJ(this.apiClient,e);return s=yt("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>pN(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nZ(n,e){const t={},i=b(e,["voiceName"]);return i!=null&&_(t,["voiceName"],i),t}function NP(n,e){const t={},i=b(e,["prebuiltVoiceConfig"]);return i!=null&&_(t,["prebuiltVoiceConfig"],nZ(n,i)),t}function iZ(n,e){const t={},i=b(e,["speaker"]);i!=null&&_(t,["speaker"],i);const r=b(e,["voiceConfig"]);return r!=null&&_(t,["voiceConfig"],NP(n,r)),t}function rZ(n,e){const t={},i=b(e,["speakerVoiceConfigs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>iZ(n,s))),_(t,["speakerVoiceConfigs"],r)}return t}function sZ(n,e){const t={},i=b(e,["voiceConfig"]);i!=null&&_(t,["voiceConfig"],NP(n,i));const r=b(e,["multiSpeakerVoiceConfig"]);r!=null&&_(t,["multiSpeakerVoiceConfig"],rZ(n,r));const s=b(e,["languageCode"]);return s!=null&&_(t,["languageCode"],s),t}function oZ(n,e){const t={},i=b(e,["fps"]);i!=null&&_(t,["fps"],i);const r=b(e,["endOffset"]);r!=null&&_(t,["endOffset"],r);const s=b(e,["startOffset"]);return s!=null&&_(t,["startOffset"],s),t}function aZ(n,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(e,["data"]);i!=null&&_(t,["data"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function lZ(n,e){const t={};if(b(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=b(e,["fileUri"]);i!=null&&_(t,["fileUri"],i);const r=b(e,["mimeType"]);return r!=null&&_(t,["mimeType"],r),t}function uZ(n,e){const t={},i=b(e,["videoMetadata"]);i!=null&&_(t,["videoMetadata"],oZ(n,i));const r=b(e,["thought"]);r!=null&&_(t,["thought"],r);const s=b(e,["inlineData"]);s!=null&&_(t,["inlineData"],aZ(n,s));const o=b(e,["fileData"]);o!=null&&_(t,["fileData"],lZ(n,o));const a=b(e,["thoughtSignature"]);a!=null&&_(t,["thoughtSignature"],a);const c=b(e,["codeExecutionResult"]);c!=null&&_(t,["codeExecutionResult"],c);const u=b(e,["executableCode"]);u!=null&&_(t,["executableCode"],u);const f=b(e,["functionCall"]);f!=null&&_(t,["functionCall"],f);const p=b(e,["functionResponse"]);p!=null&&_(t,["functionResponse"],p);const m=b(e,["text"]);return m!=null&&_(t,["text"],m),t}function cZ(n,e){const t={},i=b(e,["parts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>uZ(n,o))),_(t,["parts"],s)}const r=b(e,["role"]);return r!=null&&_(t,["role"],r),t}function dZ(n,e){const t={},i=b(e,["behavior"]);i!=null&&_(t,["behavior"],i);const r=b(e,["description"]);r!=null&&_(t,["description"],r);const s=b(e,["name"]);s!=null&&_(t,["name"],s);const o=b(e,["parameters"]);o!=null&&_(t,["parameters"],o);const a=b(e,["response"]);return a!=null&&_(t,["response"],a),t}function fZ(n,e){const t={},i=b(e,["startTime"]);i!=null&&_(t,["startTime"],i);const r=b(e,["endTime"]);return r!=null&&_(t,["endTime"],r),t}function hZ(n,e){const t={},i=b(e,["timeRangeFilter"]);return i!=null&&_(t,["timeRangeFilter"],fZ(n,i)),t}function pZ(n,e){const t={},i=b(e,["mode"]);i!=null&&_(t,["mode"],i);const r=b(e,["dynamicThreshold"]);return r!=null&&_(t,["dynamicThreshold"],r),t}function mZ(n,e){const t={},i=b(e,["dynamicRetrievalConfig"]);return i!=null&&_(t,["dynamicRetrievalConfig"],pZ(n,i)),t}function gZ(){return{}}function yZ(n,e){const t={},i=b(e,["functionDeclarations"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>dZ(n,u))),_(t,["functionDeclarations"],c)}if(b(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(e,["googleSearch"]);r!=null&&_(t,["googleSearch"],hZ(n,r));const s=b(e,["googleSearchRetrieval"]);if(s!=null&&_(t,["googleSearchRetrieval"],mZ(n,s)),b(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(b(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");b(e,["urlContext"])!=null&&_(t,["urlContext"],gZ());const a=b(e,["codeExecution"]);return a!=null&&_(t,["codeExecution"],a),t}function bZ(n,e){const t={},i=b(e,["handle"]);if(i!=null&&_(t,["handle"],i),b(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function mN(){return{}}function _Z(n,e){const t={},i=b(e,["disabled"]);i!=null&&_(t,["disabled"],i);const r=b(e,["startOfSpeechSensitivity"]);r!=null&&_(t,["startOfSpeechSensitivity"],r);const s=b(e,["endOfSpeechSensitivity"]);s!=null&&_(t,["endOfSpeechSensitivity"],s);const o=b(e,["prefixPaddingMs"]);o!=null&&_(t,["prefixPaddingMs"],o);const a=b(e,["silenceDurationMs"]);return a!=null&&_(t,["silenceDurationMs"],a),t}function vZ(n,e){const t={},i=b(e,["automaticActivityDetection"]);i!=null&&_(t,["automaticActivityDetection"],_Z(n,i));const r=b(e,["activityHandling"]);r!=null&&_(t,["activityHandling"],r);const s=b(e,["turnCoverage"]);return s!=null&&_(t,["turnCoverage"],s),t}function SZ(n,e){const t={},i=b(e,["targetTokens"]);return i!=null&&_(t,["targetTokens"],i),t}function wZ(n,e){const t={},i=b(e,["triggerTokens"]);i!=null&&_(t,["triggerTokens"],i);const r=b(e,["slidingWindow"]);return r!=null&&_(t,["slidingWindow"],SZ(n,r)),t}function TZ(n,e){const t={},i=b(e,["proactiveAudio"]);return i!=null&&_(t,["proactiveAudio"],i),t}function AZ(n,e,t){const i={},r=b(e,["generationConfig"]);t!==void 0&&r!=null&&_(t,["setup","generationConfig"],r);const s=b(e,["responseModalities"]);t!==void 0&&s!=null&&_(t,["setup","generationConfig","responseModalities"],s);const o=b(e,["temperature"]);t!==void 0&&o!=null&&_(t,["setup","generationConfig","temperature"],o);const a=b(e,["topP"]);t!==void 0&&a!=null&&_(t,["setup","generationConfig","topP"],a);const c=b(e,["topK"]);t!==void 0&&c!=null&&_(t,["setup","generationConfig","topK"],c);const u=b(e,["maxOutputTokens"]);t!==void 0&&u!=null&&_(t,["setup","generationConfig","maxOutputTokens"],u);const f=b(e,["mediaResolution"]);t!==void 0&&f!=null&&_(t,["setup","generationConfig","mediaResolution"],f);const p=b(e,["seed"]);t!==void 0&&p!=null&&_(t,["setup","generationConfig","seed"],p);const m=b(e,["speechConfig"]);t!==void 0&&m!=null&&_(t,["setup","generationConfig","speechConfig"],sZ(n,TC(n,m)));const g=b(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&_(t,["setup","generationConfig","enableAffectiveDialog"],g);const v=b(e,["systemInstruction"]);t!==void 0&&v!=null&&_(t,["setup","systemInstruction"],cZ(n,ur(n,v)));const w=b(e,["tools"]);if(t!==void 0&&w!=null){let C=a_(n,w);Array.isArray(C)&&(C=C.map(k=>yZ(n,o_(n,k)))),_(t,["setup","tools"],C)}const A=b(e,["sessionResumption"]);t!==void 0&&A!=null&&_(t,["setup","sessionResumption"],bZ(n,A));const E=b(e,["inputAudioTranscription"]);t!==void 0&&E!=null&&_(t,["setup","inputAudioTranscription"],mN());const M=b(e,["outputAudioTranscription"]);t!==void 0&&M!=null&&_(t,["setup","outputAudioTranscription"],mN());const I=b(e,["realtimeInputConfig"]);t!==void 0&&I!=null&&_(t,["setup","realtimeInputConfig"],vZ(n,I));const R=b(e,["contextWindowCompression"]);t!==void 0&&R!=null&&_(t,["setup","contextWindowCompression"],wZ(n,R));const D=b(e,["proactivity"]);return t!==void 0&&D!=null&&_(t,["setup","proactivity"],TZ(n,D)),i}function EZ(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["setup","model"],_n(n,i));const r=b(e,["config"]);return r!=null&&_(t,["config"],AZ(n,r,t)),t}function CZ(n,e,t){const i={},r=b(e,["expireTime"]);t!==void 0&&r!=null&&_(t,["expireTime"],r);const s=b(e,["newSessionExpireTime"]);t!==void 0&&s!=null&&_(t,["newSessionExpireTime"],s);const o=b(e,["uses"]);t!==void 0&&o!=null&&_(t,["uses"],o);const a=b(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&_(t,["bidiGenerateContentSetup"],EZ(n,a));const c=b(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&_(t,["fieldMask"],c),i}function IZ(n,e){const t={},i=b(e,["config"]);return i!=null&&_(t,["config"],CZ(n,i,t)),t}function xZ(n,e){const t={},i=b(e,["name"]);return i!=null&&_(t,["name"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MZ(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(s=>`${t}.${s}`);e.push(...r)}else e.push(t)}return e.join(",")}function DZ(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(n.bidiGenerateContentSetup=s,t=s):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const s=MZ(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?n.fieldMask=s:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];r.length>0&&(a=r.map(u=>o.includes(u)?`generationConfig.${u}`:u));const c=[];s&&c.push(s),a.length>0&&c.push(...a),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class RZ extends fp{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=IZ(this.apiClient,e);s=yt("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const c=DZ(a,e.config);return r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>xZ(this.apiClient,u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kZ(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","name"],i);const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function NZ(n,e,t){const i={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const o=b(e,["filter"]);return t!==void 0&&o!=null&&_(t,["_query","filter"],o),i}function OZ(n,e){const t={},i=b(e,["config"]);return i!=null&&_(t,["config"],NZ(n,i,t)),t}function BZ(n,e){const t={},i=b(e,["textInput"]);i!=null&&_(t,["textInput"],i);const r=b(e,["output"]);return r!=null&&_(t,["output"],r),t}function FZ(n,e){const t={};if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=b(e,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>BZ(n,s))),_(t,["examples","examples"],r)}return t}function PZ(n,e,t){const i={};if(b(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=b(e,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&_(t,["displayName"],r),b(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=b(e,["epochCount"]);t!==void 0&&s!=null&&_(t,["tuningTask","hyperparameters","epochCount"],s);const o=b(e,["learningRateMultiplier"]);if(o!=null&&_(i,["tuningTask","hyperparameters","learningRateMultiplier"],o),b(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=b(e,["batchSize"]);t!==void 0&&a!=null&&_(t,["tuningTask","hyperparameters","batchSize"],a);const c=b(e,["learningRate"]);return t!==void 0&&c!=null&&_(t,["tuningTask","hyperparameters","learningRate"],c),i}function LZ(n,e){const t={},i=b(e,["baseModel"]);i!=null&&_(t,["baseModel"],i);const r=b(e,["trainingDataset"]);r!=null&&_(t,["tuningTask","trainingData"],FZ(n,r));const s=b(e,["config"]);return s!=null&&_(t,["config"],PZ(n,s,t)),t}function UZ(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["_url","name"],i);const r=b(e,["config"]);return r!=null&&_(t,["config"],r),t}function zZ(n,e,t){const i={},r=b(e,["pageSize"]);t!==void 0&&r!=null&&_(t,["_query","pageSize"],r);const s=b(e,["pageToken"]);t!==void 0&&s!=null&&_(t,["_query","pageToken"],s);const o=b(e,["filter"]);return t!==void 0&&o!=null&&_(t,["_query","filter"],o),i}function VZ(n,e){const t={},i=b(e,["config"]);return i!=null&&_(t,["config"],zZ(n,i,t)),t}function jZ(n,e,t){const i={},r=b(e,["gcsUri"]);if(t!==void 0&&r!=null&&_(t,["supervisedTuningSpec","trainingDatasetUri"],r),b(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function qZ(n,e){const t={},i=b(e,["gcsUri"]);return i!=null&&_(t,["validationDatasetUri"],i),t}function HZ(n,e,t){const i={},r=b(e,["validationDataset"]);t!==void 0&&r!=null&&_(t,["supervisedTuningSpec"],qZ(n,r));const s=b(e,["tunedModelDisplayName"]);t!==void 0&&s!=null&&_(t,["tunedModelDisplayName"],s);const o=b(e,["description"]);t!==void 0&&o!=null&&_(t,["description"],o);const a=b(e,["epochCount"]);t!==void 0&&a!=null&&_(t,["supervisedTuningSpec","hyperParameters","epochCount"],a);const c=b(e,["learningRateMultiplier"]);t!==void 0&&c!=null&&_(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=b(e,["exportLastCheckpointOnly"]);t!==void 0&&u!=null&&_(t,["supervisedTuningSpec","exportLastCheckpointOnly"],u);const f=b(e,["adapterSize"]);if(t!==void 0&&f!=null&&_(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),b(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return i}function GZ(n,e){const t={},i=b(e,["baseModel"]);i!=null&&_(t,["baseModel"],i);const r=b(e,["trainingDataset"]);r!=null&&_(t,["supervisedTuningSpec","trainingDatasetUri"],jZ(n,r,t));const s=b(e,["config"]);return s!=null&&_(t,["config"],HZ(n,s,t)),t}function $Z(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["model"],i);const r=b(e,["name"]);return r!=null&&_(t,["endpoint"],r),t}function OP(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["state"]);r!=null&&_(t,["state"],gP(n,r));const s=b(e,["createTime"]);s!=null&&_(t,["createTime"],s);const o=b(e,["tuningTask","startTime"]);o!=null&&_(t,["startTime"],o);const a=b(e,["tuningTask","completeTime"]);a!=null&&_(t,["endTime"],a);const c=b(e,["updateTime"]);c!=null&&_(t,["updateTime"],c);const u=b(e,["description"]);u!=null&&_(t,["description"],u);const f=b(e,["baseModel"]);f!=null&&_(t,["baseModel"],f);const p=b(e,["_self"]);p!=null&&_(t,["tunedModel"],$Z(n,p));const m=b(e,["distillationSpec"]);m!=null&&_(t,["distillationSpec"],m);const g=b(e,["experiment"]);g!=null&&_(t,["experiment"],g);const v=b(e,["labels"]);v!=null&&_(t,["labels"],v);const w=b(e,["pipelineJob"]);w!=null&&_(t,["pipelineJob"],w);const A=b(e,["serviceAccount"]);A!=null&&_(t,["serviceAccount"],A);const E=b(e,["tunedModelDisplayName"]);return E!=null&&_(t,["tunedModelDisplayName"],E),t}function YZ(n,e){const t={},i=b(e,["nextPageToken"]);i!=null&&_(t,["nextPageToken"],i);const r=b(e,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>OP(n,o))),_(t,["tuningJobs"],s)}return t}function WZ(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["metadata"]);r!=null&&_(t,["metadata"],r);const s=b(e,["done"]);s!=null&&_(t,["done"],s);const o=b(e,["error"]);return o!=null&&_(t,["error"],o),t}function KZ(n,e){const t={},i=b(e,["checkpointId"]);i!=null&&_(t,["checkpointId"],i);const r=b(e,["epoch"]);r!=null&&_(t,["epoch"],r);const s=b(e,["step"]);s!=null&&_(t,["step"],s);const o=b(e,["endpoint"]);return o!=null&&_(t,["endpoint"],o),t}function XZ(n,e){const t={},i=b(e,["model"]);i!=null&&_(t,["model"],i);const r=b(e,["endpoint"]);r!=null&&_(t,["endpoint"],r);const s=b(e,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>KZ(n,a))),_(t,["checkpoints"],o)}return t}function b1(n,e){const t={},i=b(e,["name"]);i!=null&&_(t,["name"],i);const r=b(e,["state"]);r!=null&&_(t,["state"],gP(n,r));const s=b(e,["createTime"]);s!=null&&_(t,["createTime"],s);const o=b(e,["startTime"]);o!=null&&_(t,["startTime"],o);const a=b(e,["endTime"]);a!=null&&_(t,["endTime"],a);const c=b(e,["updateTime"]);c!=null&&_(t,["updateTime"],c);const u=b(e,["error"]);u!=null&&_(t,["error"],u);const f=b(e,["description"]);f!=null&&_(t,["description"],f);const p=b(e,["baseModel"]);p!=null&&_(t,["baseModel"],p);const m=b(e,["tunedModel"]);m!=null&&_(t,["tunedModel"],XZ(n,m));const g=b(e,["supervisedTuningSpec"]);g!=null&&_(t,["supervisedTuningSpec"],g);const v=b(e,["tuningDataStats"]);v!=null&&_(t,["tuningDataStats"],v);const w=b(e,["encryptionSpec"]);w!=null&&_(t,["encryptionSpec"],w);const A=b(e,["partnerModelTuningSpec"]);A!=null&&_(t,["partnerModelTuningSpec"],A);const E=b(e,["distillationSpec"]);E!=null&&_(t,["distillationSpec"],E);const M=b(e,["experiment"]);M!=null&&_(t,["experiment"],M);const I=b(e,["labels"]);I!=null&&_(t,["labels"],I);const R=b(e,["pipelineJob"]);R!=null&&_(t,["pipelineJob"],R);const D=b(e,["serviceAccount"]);D!=null&&_(t,["serviceAccount"],D);const C=b(e,["tunedModelDisplayName"]);return C!=null&&_(t,["tunedModelDisplayName"],C),t}function JZ(n,e){const t={},i=b(e,["nextPageToken"]);i!=null&&_(t,["nextPageToken"],i);const r=b(e,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>b1(n,o))),_(t,["tuningJobs"],s)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZZ extends fp{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new AS(sp.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const i=await this.tuneMldevInternal(t);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:u1.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=UZ(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>b1(this.apiClient,f))}else{const u=kZ(this.apiClient,e);return a=yt("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>OP(this.apiClient,f))}}async listInternal(e){var t,i,r,s;let o,a="",c={};if(this.apiClient.isVertexAI()){const u=VZ(this.apiClient,e);return a=yt("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),o.then(f=>{const p=JZ(this.apiClient,f),m=new Hk;return Object.assign(m,p),m})}else{const u=OZ(this.apiClient,e);return a=yt("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=YZ(this.apiClient,f),m=new Hk;return Object.assign(m,p),m})}}async tuneInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI()){const a=GZ(this.apiClient,e);return s=yt("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>b1(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=LZ(this.apiClient,e);return s=yt("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,r=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>WZ(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QZ{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const eQ=1024*1024*8,tQ=3,nQ=1e3,iQ=2,vA="x-goog-upload-status";async function rQ(n,e,t){var i,r,s;let o=0,a=0,c=new c1(new Response),u="upload";for(o=n.size;a<o;){const p=Math.min(eQ,o-a),m=n.slice(a,a+p);a+p>=o&&(u+=", finalize");let g=0,v=nQ;for(;g<tQ&&(c=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[vA]));)g++,await oQ(v),v=v*iQ;if(a+=p,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[vA])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[vA])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function sQ(n){return{size:n.size,type:n.type}}function oQ(n){return new Promise(e=>setTimeout(e,n))}class aQ{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rQ(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sQ(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lQ{create(e,t,i){return new uQ(e,t,i)}}class uQ{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gN="x-goog-api-key";class cQ{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(gN)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(gN,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dQ="gl-node/";class BP{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=y9(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new cQ(this.apiKey);this.apiClient=new IJ({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:dQ+"web",uploader:new aQ,downloader:new QZ}),this.models=new HJ(this.apiClient),this.live=new UJ(this.apiClient,r,new lQ),this.chats=new qY(this.models,this.apiClient),this.caches=new zY(this.apiClient),this.files=new n7(this.apiClient),this.operations=new tZ(this.apiClient),this.authTokens=new RZ(this.apiClient),this.tunings=new ZZ(this.apiClient)}}const l_=pe.createContext(void 0),fQ=({children:n,defaultPersonas:e,initialGeminiKey:t,initialSelectedPersonaName:i,initialCustomSystemPrompt:r})=>{const[s,o]=pe.useState({[sn.GEMINI]:t,[sn.OPENAI]:"",[sn.GROQ]:"",[sn.HUGGINGFACE]:"",[sn.OPENROUTER]:""}),[a,c]=pe.useState(sn.GEMINI),[u]=pe.useState(e),[f,p]=pe.useState(i||(e.length>0?e[0].name:"Custom")),[m,g]=pe.useState(r||"You are a helpful AI. Behave as I instruct."),v=pe.useCallback((E,M)=>{o(I=>({...I,[E]:M}))},[]),w=pe.useCallback(E=>{p(E)},[]),A=pe.useCallback(E=>{g(E)},[]);return ne.jsx(l_.Provider,{value:{apiKeys:s,selectedProvider:a,personas:u,selectedPersonaName:f,customSystemPrompt:m,handleApiKeyChange:v,setSelectedProvider:c,handleSelectPersona:w,handleCustomSystemPromptChange:A},children:n})},hQ="https://www.googleapis.com/auth/calendar",pQ="https://www.googleapis.com/auth/tasks";let _1=null,Fv=null,Cc=null;const mQ=()=>new Promise((n,e)=>{typeof google>"u"||!google.accounts||!google.accounts.oauth2?setTimeout(()=>{if(typeof google>"u"||!google.accounts||!google.accounts.oauth2){console.error("Google Identity Services library not loaded."),e(new Error("Google Identity Services library not loaded."));return}n()},1e3):n()}),gQ=(n,e,t)=>mQ().then(()=>{if(Fv=n,!Fv||Fv==="YOUR_GOOGLE_CLIENT_ID"){const i="Google Client ID is not configured. Please set it in index.html.";return console.error(i),t(new Error(i)),Promise.reject(i)}try{return _1=google.accounts.oauth2.initTokenClient({client_id:Fv,scope:`${hQ} ${pQ}`,callback:i=>{i&&i.access_token?(Cc=i.access_token,e(i)):i&&i.error?(console.error("Google Sign-In Error:",i.error,i.error_description),t(new Error(i.error_description||i.error||"Unknown Google Sign-In error")),Cc=null):(t(new Error("Empty token response from Google.")),Cc=null)},error_callback:i=>{console.error("Google Sign-In Client Init Error:",i),t(new Error(i.type||"Google Sign-In client initialization failed")),Cc=null}}),Promise.resolve()}catch(i){return console.error("Error initializing Google token client:",i),t(i),Promise.reject(i)}}).catch(i=>(t(i),Promise.reject(i))),yQ=()=>{if(!_1){console.error("Google token client not initialized. Call initGoogleSignIn first."),alert("Google Sign-In is not ready. Please try again in a moment or check console for errors.");return}_1.requestAccessToken({prompt:"consent"})},bQ=()=>(Cc&&google.accounts.oauth2.revoke(Cc,()=>{console.log("Google access token revoked.")}),Cc=null,Promise.resolve()),_Q=async n=>{var e;if(!n)throw new Error("Access token is required to fetch user profile.");try{const t=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${n}`}});if(!t.ok){const r=await t.json().catch(()=>({}));throw new Error(`Failed to fetch user profile: ${t.status} ${t.statusText}. ${((e=r.error)==null?void 0:e.message)||""}`)}const i=await t.json();return{name:i.name,email:i.email,picture:i.picture}}catch(t){throw console.error("Error fetching user profile:",t),t}},CS=pe.createContext(void 0),vQ=({children:n,googleClientId:e})=>{const[t,i]=pe.useState(null),[r,s]=pe.useState(null),[o,a]=pe.useState(!1),[c,u]=pe.useState(!1),[f,p]=pe.useState(null),m=pe.useCallback(async A=>{u(!0),p(null),i(A.access_token);try{const E=await _Q(A.access_token);s(E),a(!0),p(null)}catch(E){console.error("Error fetching Google user profile or initial data:",E);const M=E instanceof Error?E.message:String(E);p(`Failed to fetch Google user profile: ${M}.`),i(null),a(!1)}finally{u(!1)}},[]),g=pe.useCallback(A=>{console.error("Google Sign-In Error Details:",A);let E="Google Sign-In failed. Please try again or check console for details.";if(typeof A=="object"&&A!==null&&"type"in A)switch(A.type){case"popup_closed_by_user":E="Google Sign-In popup was closed before completing. Please try again.";break;case"popup_failed_to_open":E="Google Sign-In popup failed to open. Please check your browser's popup blocker settings and try again.";break;case"idpiframe_initialization_failed":E="Google Sign-In initialization failed. This might be due to network issues or third-party cookie restrictions. Please check your browser settings and try again.";break;default:"details"in A&&typeof A.details=="string"?E=`Google Sign-In error: ${A.details}`:A.type&&(E=`Google Sign-In error: ${A.type}.`);break}else A instanceof Error&&A.message?(E=A.message,(A.message.toLowerCase().includes("popup_closed")||A.message.toLowerCase().includes("popup window closed")||A.message.toLowerCase().includes("client init error"))&&(E=`Google Sign-In: ${A.message}. This often means the popup was closed or blocked. Please check: 1) 'Authorized JavaScript Origins' in your Google Cloud Console OAuth settings. 2) Browser popup blockers. 3) Ensure you are a test user if your app is in 'Testing' mode on the OAuth consent screen.`)):typeof A=="string"&&(E=A);p(E),a(!1),i(null),s(null),u(!1)},[]);pe.useEffect(()=>{e&&e!=="YOUR_GOOGLE_CLIENT_ID"?gQ(e,m,g).then(()=>{console.log("Google Sign-In initialized via AuthContext.")}).catch(A=>{console.error("Google Sign-In initialization failed in AuthContext:",A),f||g(A||new Error("Google Sign-In could not be initialized. This might be due to an invalid Client ID, network issues, or third-party cookie restrictions. Please check console for details."))}):(console.warn("Google integration disabled: Client ID not configured. Google Sign-In will not function."),u(!1))},[e,m,g,f]);const v=()=>{p(null),e&&e!=="YOUR_GOOGLE_CLIENT_ID"?(u(!0),yQ()):p("Google Client ID not configured. Cannot sign in. Please check your application setup (index.html or environment variables).")},w=async()=>{p(null),u(!0),await bQ(),i(null),s(null),a(!1),p(null),u(!1)};return ne.jsx(CS.Provider,{value:{googleAccessToken:t,googleUserProfile:r,isGoogleLoggedIn:o,isLoading:c,error:f,handleGoogleLogin:v,handleGoogleLogout:w},children:n})},SQ="modulepreload",wQ=function(n){return"/"+n},yN={},Pv=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let o=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=o(t.map(u=>{if(u=wQ(u),u in yN)return;yN[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":SQ,f||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),f)return new Promise((g,v)=>{m.addEventListener("load",g),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var My={};My.d=(n,e)=>{for(var t in e)My.o(e,t)&&!My.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};My.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var wt=globalThis.pdfjsLib={};My.d(wt,{AbortException:()=>Bd,AnnotationEditorLayer:()=>DE,AnnotationEditorParamsType:()=>vt,AnnotationEditorType:()=>xt,AnnotationEditorUIManager:()=>xd,AnnotationLayer:()=>vte,AnnotationMode:()=>$l,ColorPicker:()=>$0,DOMSVGFactory:()=>UC,DrawLayer:()=>OE,FeatureTest:()=>cr,GlobalWorkerOptions:()=>Qa,ImageKind:()=>Zv,InvalidPDFException:()=>PP,MissingPDFException:()=>Od,OPS:()=>js,OutputScale:()=>A1,PDFDataRangeTransport:()=>NL,PDFDateString:()=>kC,PDFWorker:()=>Qf,PasswordResponses:()=>CQ,PermissionFlag:()=>EQ,PixelsPerInch:()=>wu,RenderingCancelledException:()=>DC,TextLayer:()=>Fy,UnexpectedResponseException:()=>DS,Util:()=>ot,VerbosityLevel:()=>IS,XfaLayer:()=>BL,build:()=>ete,createValidAbsoluteUrl:()=>DQ,fetchData:()=>kS,getDocument:()=>Gee,getFilenameFromUrl:()=>UQ,getPdfFilenameFromUrl:()=>zQ,getXfaPageViewport:()=>VQ,isDataScheme:()=>NS,isPdfFile:()=>RC,noContextMenu:()=>Cs,normalizeUnicode:()=>FQ,setLayerDimensions:()=>Id,shadow:()=>jt,version:()=>Qee});const Zi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FP=[1,0,0,1,0,0],v1=[.001,0,0,.001,0,0],TQ=1e7,SA=1.35,Qr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$l={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AQ="pdfjs_internal_editor_",xt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},vt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},EQ={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Gi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Zv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},pi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Dm={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},IS={ERRORS:0,WARNINGS:1,INFOS:5},js={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},CQ={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let xS=IS.WARNINGS;function IQ(n){Number.isInteger(n)&&(xS=n)}function xQ(){return xS}function MS(n){xS>=IS.INFOS&&console.log(`Info: ${n}`)}function Nt(n){xS>=IS.WARNINGS&&console.log(`Warning: ${n}`)}function wn(n){throw new Error(n)}function _i(n,e){n||wn(e)}function MQ(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function DQ(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=BQ(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(MQ(i))return i}catch{}return null}function jt(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Du=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class S1 extends Du{constructor(e,t){super(e,"PasswordException"),this.code=t}}class w1 extends Du{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class PP extends Du{constructor(e){super(e,"InvalidPDFException")}}class Od extends Du{constructor(e){super(e,"MissingPDFException")}}class DS extends Du{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class RQ extends Du{constructor(e){super(e,"FormatError")}}class Bd extends Du{constructor(e){super(e,"AbortException")}}function LP(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&wn("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),o=n.subarray(r,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function RS(n){typeof n!="string"&&wn("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function kQ(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function xC(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function NQ(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function OQ(){try{return new Function(""),!0}catch{return!1}}class cr{static get isLittleEndian(){return jt(this,"isLittleEndian",NQ())}static get isEvalSupported(){return jt(this,"isEvalSupported",OQ())}static get isOffscreenCanvasSupported(){return jt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?jt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):jt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return jt(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const wA=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var nl,Qv,T1;class ot{static makeHexColor(e,t,i){return`#${wA[e]}${wA[t]}${wA[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,s]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(i+o)/2,c=Math.sqrt((i+o)**2-4*(i*o-s*r))/2,u=a+c||1,f=a-c||1;return[Math.sqrt(u),Math.sqrt(f)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[i,s,r,o]}static bezierBoundingBox(e,t,i,r,s,o,a,c,u){return u?(u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,a),Math.min(t,c),Math.max(e,a),Math.max(t,c)],z(this,nl,T1).call(this,e,i,s,a,t,r,o,c,3*(-e+3*(i-s)+a),6*(e-2*i+s),3*(i-e),u),z(this,nl,T1).call(this,e,i,s,a,t,r,o,c,3*(-t+3*(r-o)+c),6*(t-2*r+o),3*(r-t),u),u}}nl=new WeakSet,Qv=function(e,t,i,r,s,o,a,c,u,f){if(u<=0||u>=1)return;const p=1-u,m=u*u,g=m*u,v=p*(p*(p*e+3*u*t)+3*m*i)+g*r,w=p*(p*(p*s+3*u*o)+3*m*a)+g*c;f[0]=Math.min(f[0],v),f[1]=Math.min(f[1],w),f[2]=Math.max(f[2],v),f[3]=Math.max(f[3],w)},T1=function(e,t,i,r,s,o,a,c,u,f,p,m){if(Math.abs(u)<1e-12){Math.abs(f)>=1e-12&&z(this,nl,Qv).call(this,e,t,i,r,s,o,a,c,-p/f,m);return}const g=f**2-4*p*u;if(g<0)return;const v=Math.sqrt(g),w=2*u;z(this,nl,Qv).call(this,e,t,i,r,s,o,a,c,(-f+v)/w,m),z(this,nl,Qv).call(this,e,t,i,r,s,o,a,c,(-f-v)/w,m)},$(ot,nl);function BQ(n){return decodeURIComponent(escape(n))}let TA=null,bN=null;function FQ(n){return TA||(TA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,bN=new Map([["ﬅ","ſt"]])),n.replaceAll(TA,(e,t,i)=>t?t.normalize("NFKC"):bN.get(i))}function PQ(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return LP(n)}const MC="pdfjs_internal_id_",da={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function LQ(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(LP(n))}const Ea="http://www.w3.org/2000/svg",Ac=class Ac{};_t(Ac,"CSS",96),_t(Ac,"PDF",72),_t(Ac,"PDF_TO_CSS_UNITS",Ac.CSS/Ac.PDF);let wu=Ac;async function kS(n,e="text"){if(ly(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class u_{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=s;const a=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,f,p,m;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,f=0,p=0,m=1;break;case 90:u=0,f=1,p=1,m=0;break;case 270:u=0,f=-1,p=-1,m=0;break;case 0:u=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let g,v,w,A;u===0?(g=Math.abs(c-e[1])*t+r,v=Math.abs(a-e[0])*t+s,w=(e[3]-e[1])*t,A=(e[2]-e[0])*t):(g=Math.abs(a-e[0])*t+r,v=Math.abs(c-e[1])*t+s,w=(e[2]-e[0])*t,A=(e[3]-e[1])*t),this.transform=[u*t,f*t,p*t,m*t,g-u*t*a-p*t*c,v-f*t*a-m*t*c],this.width=w,this.height=A}get rawDims(){const{viewBox:e}=this;return jt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new u_({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return ot.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ot.applyTransform([e[0],e[1]],this.transform),i=ot.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return ot.applyInverseTransform([e,t],this.transform)}}class DC extends Du{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function NS(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function RC(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function UQ(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function zQ(n,e="document.pdf"){if(typeof n!="string")return e;if(NS(n))return Nt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(n);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class _N{constructor(){_t(this,"started",Object.create(null));_t(this,"times",[])}time(e){e in this.started&&Nt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Nt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-r}ms
`);return e.join("")}}function ly(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function Cs(n){n.preventDefault()}function vN(n){console.log("Deprecated API usage: "+n)}var zy;class kC{static toDateObject(e){if(!e||typeof e!="string")return null;S(this,zy)||L(this,zy,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=S(this,zy).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,u==="-"?(o+=f,a+=p):u==="+"&&(o-=f,a-=p),new Date(Date.UTC(i,r,s,o,a,c))}}zy=new WeakMap,$(kC,zy);function VQ(n,{scale:e=1,rotation:t=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new u_({viewBox:s,scale:e,rotation:t})}function NC(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Nt(`Not a valid color format: "${n}"`),[0,0,0])}function jQ(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,NC(i))}e.remove()}function Pn(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n.getTransform();return[e,t,i,r,s,o]}function fa(n){const{a:e,b:t,c:i,d:r,e:s,f:o}=n.getTransform().invertSelf();return[e,t,i,r,s,o]}function Id(n,e,t=!1,i=!0){if(e instanceof u_){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:o}=n,a=cr.isCSSRoundSupported,c=`var(--scale-factor) * ${r}px`,u=`var(--scale-factor) * ${s}px`,f=a?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,p=a?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=f,o.height=p):(o.width=p,o.height=f)}i&&n.setAttribute("data-main-rotation",e.rotation)}class A1{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Yl,Ic,qs,xc,Vy,jy,Z0,UP,dr,zP,VP,e0,jP,C1;const Ca=class Ca{constructor(e){$(this,dr);$(this,Yl,null);$(this,Ic,null);$(this,qs);$(this,xc,null);$(this,Vy,null);L(this,qs,e),S(Ca,jy)||L(Ca,jy,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=L(this,Yl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=S(this,qs)._uiManager._signal;e.addEventListener("contextmenu",Cs,{signal:t}),e.addEventListener("pointerdown",z(Ca,Z0,UP),{signal:t});const i=L(this,xc,document.createElement("div"));i.className="buttons",e.append(i);const r=S(this,qs).toolbarPosition;if(r){const{style:s}=e,o=S(this,qs)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return z(this,dr,jP).call(this),e}get div(){return S(this,Yl)}hide(){var e;S(this,Yl).classList.add("hidden"),(e=S(this,Ic))==null||e.hideDropdown()}show(){var e;S(this,Yl).classList.remove("hidden"),(e=S(this,Vy))==null||e.shown()}async addAltText(e){const t=await e.render();z(this,dr,e0).call(this,t),S(this,xc).prepend(t,S(this,dr,C1)),L(this,Vy,e)}addColorPicker(e){L(this,Ic,e);const t=e.renderButton();z(this,dr,e0).call(this,t),S(this,xc).prepend(t,S(this,dr,C1))}remove(){var e;S(this,Yl).remove(),(e=S(this,Ic))==null||e.destroy(),L(this,Ic,null)}};Yl=new WeakMap,Ic=new WeakMap,qs=new WeakMap,xc=new WeakMap,Vy=new WeakMap,jy=new WeakMap,Z0=new WeakSet,UP=function(e){e.stopPropagation()},dr=new WeakSet,zP=function(e){S(this,qs)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},VP=function(e){S(this,qs)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},e0=function(e){const t=S(this,qs)._uiManager._signal;e.addEventListener("focusin",z(this,dr,zP).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",z(this,dr,VP).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Cs,{signal:t})},jP=function(){const{editorType:e,_uiManager:t}=S(this,qs),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",S(Ca,jy)[e]),z(this,dr,e0).call(this,i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),S(this,xc).append(i)},C1=function(){const e=document.createElement("div");return e.className="divider",e},$(Ca,Z0),$(Ca,jy,null);let E1=Ca;var qy,Mc,Dc,Au,qP,HP,GP;class qQ{constructor(e){$(this,Au);$(this,qy,null);$(this,Mc,null);$(this,Dc);L(this,Dc,e)}show(e,t,i){const[r,s]=z(this,Au,HP).call(this,t,i),{style:o}=S(this,Mc)||L(this,Mc,z(this,Au,qP).call(this));e.append(S(this,Mc)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){S(this,Mc).remove()}}qy=new WeakMap,Mc=new WeakMap,Dc=new WeakMap,Au=new WeakSet,qP=function(){const e=L(this,Mc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Cs,{signal:S(this,Dc)._signal});const t=L(this,qy,document.createElement("div"));return t.className="buttons",e.append(t),z(this,Au,GP).call(this),e},HP=function(e,t){let i=0,r=0;for(const s of e){const o=s.y+s.height;if(o<i)continue;const a=s.x+(t?s.width:0);if(o>i){r=a,i=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,i]},GP=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=S(this,Dc)._signal;e.addEventListener("contextmenu",Cs,{signal:i}),e.addEventListener("click",()=>{S(this,Dc).highlightSelection("floating_button")},{signal:i}),S(this,qy).append(e)};function q0(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}function HQ(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var Q0;class GQ{constructor(){$(this,Q0,0)}get id(){return`${AQ}${rr(this,Q0)._++}`}}Q0=new WeakMap;var th,Hy,Yi,nh,t0;const mI=class mI{constructor(){$(this,nh);$(this,th,PQ());$(this,Hy,0);$(this,Yi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return jt(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:s}=e;return z(this,nh,t0).call(this,`${t}_${i}_${r}_${s}`,e)}async getFromUrl(e){return z(this,nh,t0).call(this,e,e)}async getFromBlob(e,t){const i=await t;return z(this,nh,t0).call(this,e,i)}async getFromId(e){S(this,Yi)||L(this,Yi,new Map);const t=S(this,Yi).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){S(this,Yi)||L(this,Yi,new Map);let i=S(this,Yi).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${S(this,th)}_${rr(this,Hy)._++}`,refCounter:1,isSvg:!1},S(this,Yi).set(e,i),S(this,Yi).set(i.id,i),i}getSvgUrl(e){const t=S(this,Yi).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;S(this,Yi)||L(this,Yi,new Map);const t=S(this,Yi).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${S(this,th)}_`)}};th=new WeakMap,Hy=new WeakMap,Yi=new WeakMap,nh=new WeakSet,t0=async function(e,t){S(this,Yi)||L(this,Yi,new Map);let i=S(this,Yi).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${S(this,th)}_${rr(this,Hy)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await kS(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=mI._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,f)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},o.onload=async()=>{const p=i.svgUrl=o.result;a.src=await s?`${p}#svgView(preserveAspectRatio(none))`:p},a.onerror=o.onerror=f});o.readAsDataURL(r),await c}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return S(this,Yi).set(e,i),i&&S(this,Yi).set(i.id,i),i};let I1=mI;var Ci,Wl,Gy,Ii;class $Q{constructor(e=128){$(this,Ci,[]);$(this,Wl,!1);$(this,Gy);$(this,Ii,-1);L(this,Gy,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),S(this,Wl))return;const c={cmd:e,undo:t,post:i,type:s};if(S(this,Ii)===-1){S(this,Ci).length>0&&(S(this,Ci).length=0),L(this,Ii,0),S(this,Ci).push(c);return}if(o&&S(this,Ci)[S(this,Ii)].type===s){a&&(c.undo=S(this,Ci)[S(this,Ii)].undo),S(this,Ci)[S(this,Ii)]=c;return}const u=S(this,Ii)+1;u===S(this,Gy)?S(this,Ci).splice(0,1):(L(this,Ii,u),u<S(this,Ci).length&&S(this,Ci).splice(u)),S(this,Ci).push(c)}undo(){if(S(this,Ii)===-1)return;L(this,Wl,!0);const{undo:e,post:t}=S(this,Ci)[S(this,Ii)];e(),t==null||t(),L(this,Wl,!1),L(this,Ii,S(this,Ii)-1)}redo(){if(S(this,Ii)<S(this,Ci).length-1){L(this,Ii,S(this,Ii)+1),L(this,Wl,!0);const{cmd:e,post:t}=S(this,Ci)[S(this,Ii)];e(),t==null||t(),L(this,Wl,!1)}}hasSomethingToUndo(){return S(this,Ii)!==-1}hasSomethingToRedo(){return S(this,Ii)<S(this,Ci).length-1}destroy(){L(this,Ci,null)}}Ci=new WeakMap,Wl=new WeakMap,Gy=new WeakMap,Ii=new WeakMap;var eS,$P;class c_{constructor(e){$(this,eS);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=cr.platform;for(const[i,r,s={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(z(this,eS,$P).call(this,t));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(r.bind(e,...o,t)(),s||(t.stopPropagation(),t.preventDefault()))}}eS=new WeakSet,$P=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const tS=class tS{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return jQ(e),jt(this,"_colors",e)}convert(e){const t=NC(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((s,o)=>s===t[o]))return tS._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ot.makeHexColor(...t):e}};_t(tS,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let x1=tS;var ih,Gr,gi,Bi,rh,Ma,sh,Hs,Kl,oh,Rc,So,Gs,kc,$y,Yy,ah,Wy,wo,Xl,lh,Jl,To,nS,Zl,Ky,Ql,Nc,Xy,Jy,xi,nn,Da,Oc,Zy,Qy,eu,Ao,Ra,eb,ms,Ye,n0,M1,YP,WP,i0,KP,XP,JP,D1,ZP,R1,k1,QP,sr,ql,eL,tL,N1,nL,uy,O1;const Wf=class Wf{constructor(e,t,i,r,s,o,a,c,u,f,p){$(this,Ye);$(this,ih,new AbortController);$(this,Gr,null);$(this,gi,new Map);$(this,Bi,new Map);$(this,rh,null);$(this,Ma,null);$(this,sh,null);$(this,Hs,new $Q);$(this,Kl,null);$(this,oh,0);$(this,Rc,new Set);$(this,So,null);$(this,Gs,null);$(this,kc,new Set);$(this,$y,!1);$(this,Yy,!1);$(this,ah,!1);$(this,Wy,null);$(this,wo,null);$(this,Xl,null);$(this,lh,null);$(this,Jl,!1);$(this,To,null);$(this,nS,new GQ);$(this,Zl,!1);$(this,Ky,!1);$(this,Ql,null);$(this,Nc,null);$(this,Xy,null);$(this,Jy,null);$(this,xi,xt.NONE);$(this,nn,new Set);$(this,Da,null);$(this,Oc,null);$(this,Zy,null);$(this,Qy,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});$(this,eu,[0,0]);$(this,Ao,null);$(this,Ra,null);$(this,eb,null);$(this,ms,null);const m=this._signal=S(this,ih).signal;L(this,Ra,e),L(this,eb,t),L(this,rh,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:m}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),r._on("setpreference",this.onSetPreference.bind(this),{signal:m}),r._on("switchannotationeditorparams",g=>this.updateParams(g.type,g.value),{signal:m}),z(this,Ye,KP).call(this),z(this,Ye,QP).call(this),z(this,Ye,D1).call(this),L(this,Ma,s.annotationStorage),L(this,Wy,s.filterFactory),L(this,Oc,o),L(this,lh,a||null),L(this,$y,c),L(this,Yy,u),L(this,ah,f),L(this,Jy,p||null),this.viewParameters={realScale:wu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Wf.prototype,t=o=>S(o,Ra).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return jt(this,"_keyboardManager",new c_([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&S(o,Ra).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&S(o,Ra).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,i,r;(e=S(this,ms))==null||e.resolve(),L(this,ms,null),(t=S(this,ih))==null||t.abort(),L(this,ih,null),this._signal=null;for(const s of S(this,Bi).values())s.destroy();S(this,Bi).clear(),S(this,gi).clear(),S(this,kc).clear(),L(this,Gr,null),S(this,nn).clear(),S(this,Hs).destroy(),(i=S(this,rh))==null||i.destroy(),(r=S(this,To))==null||r.hide(),L(this,To,null),S(this,wo)&&(clearTimeout(S(this,wo)),L(this,wo,null)),S(this,Ao)&&(clearTimeout(S(this,Ao)),L(this,Ao,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return S(this,Jy)}get useNewAltTextFlow(){return S(this,Yy)}get useNewAltTextWhenAddingImage(){return S(this,ah)}get hcmFilter(){return jt(this,"hcmFilter",S(this,Oc)?S(this,Wy).addHCMFilter(S(this,Oc).foreground,S(this,Oc).background):"none")}get direction(){return jt(this,"direction",getComputedStyle(S(this,Ra)).direction)}get highlightColors(){return jt(this,"highlightColors",S(this,lh)?new Map(S(this,lh).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return jt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){L(this,Xy,e)}editAltText(e,t=!1){var i;(i=S(this,rh))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":L(this,ah,t);break}}onPageChanging({pageNumber:e}){L(this,oh,e-1)}focusMainContainer(){S(this,Ra).focus()}findParent(e,t){for(const i of S(this,Bi).values()){const{x:r,y:s,width:o,height:a}=i.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=s&&t<=s+a)return i}return null}disableUserSelect(e=!1){S(this,eb).classList.toggle("noUserSelect",e)}addShouldRescale(e){S(this,kc).add(e)}removeShouldRescale(e){S(this,kc).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*wu.PDF_TO_CSS_UNITS;for(const t of S(this,kc))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}=t,a=t.toString(),u=z(this,Ye,n0).call(this,t).closest(".textLayer"),f=this.getSelectionBoxes(u);if(!f)return;t.empty();const p=z(this,Ye,M1).call(this,u),m=S(this,xi)===xt.NONE,g=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o,text:a}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(xt.HIGHLIGHT,g);return}g()}addToAnnotationStorage(e){!e.isEmpty()&&S(this,Ma)&&!S(this,Ma).has(e.id)&&S(this,Ma).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,S(this,Jl)&&(L(this,Jl,!1),z(this,Ye,i0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of S(this,nn))if(t.div.contains(e)){L(this,Nc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!S(this,Nc))return;const[e,t]=S(this,Nc);L(this,Nc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){z(this,Ye,D1).call(this),z(this,Ye,R1).call(this)}removeEditListeners(){z(this,Ye,ZP).call(this),z(this,Ye,k1).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of S(this,Gs))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of S(this,Gs))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=S(this,Gr))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of S(this,nn)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of S(this,Gs))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){Nt(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const c of i){const u=await r.deserialize(c);if(!u)return;s.push(u)}const o=()=>{for(const c of s)z(this,Ye,N1).call(this,c);z(this,Ye,O1).call(this,s)},a=()=>{for(const c of s)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){Nt(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),S(this,xi)!==xt.NONE&&!this.isEditorHandlingKeyboard&&Wf._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,S(this,Jl)&&(L(this,Jl,!1),z(this,Ye,i0).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(z(this,Ye,XP).call(this),z(this,Ye,R1).call(this),z(this,Ye,sr).call(this,{isEditing:S(this,xi)!==xt.NONE,isEmpty:z(this,Ye,uy).call(this),hasSomethingToUndo:S(this,Hs).hasSomethingToUndo(),hasSomethingToRedo:S(this,Hs).hasSomethingToRedo(),hasSelectedEditor:!1})):(z(this,Ye,JP).call(this),z(this,Ye,k1).call(this),z(this,Ye,sr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!S(this,Gs)){L(this,Gs,e);for(const t of S(this,Gs))z(this,Ye,ql).call(this,t.defaultPropertiesToUpdate)}}getId(){return S(this,nS).id}get currentLayer(){return S(this,Bi).get(S(this,oh))}getLayer(e){return S(this,Bi).get(e)}get currentPageIndex(){return S(this,oh)}addLayer(e){S(this,Bi).set(e.pageIndex,e),S(this,Zl)?e.enable():e.disable()}removeLayer(e){S(this,Bi).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(S(this,xi)!==e&&!(S(this,ms)&&(await S(this,ms).promise,!S(this,ms)))){if(L(this,ms,Promise.withResolvers()),L(this,xi,e),e===xt.NONE){this.setEditingState(!1),z(this,Ye,tL).call(this),S(this,ms).resolve();return}this.setEditingState(!0),await z(this,Ye,eL).call(this),this.unselectAll();for(const r of S(this,Bi).values())r.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),S(this,ms).resolve();return}for(const r of S(this,gi).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();S(this,ms).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==S(this,xi)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(S(this,Gs)){switch(e){case vt.CREATE:this.currentLayer.addNewEditor();return;case vt.HIGHLIGHT_DEFAULT_COLOR:(i=S(this,Xy))==null||i.updateColor(t);break;case vt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(S(this,Zy)||L(this,Zy,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of S(this,nn))r.updateParams(e,t);for(const r of S(this,Gs))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var s;for(const o of S(this,gi).values())o.editorType===e&&o.show(t);(((s=S(this,Zy))==null?void 0:s.get(vt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&z(this,Ye,ql).call(this,[[vt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(S(this,Ky)!==e){L(this,Ky,e);for(const t of S(this,Bi).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of S(this,gi).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return S(this,gi).get(e)}addEditor(e){S(this,gi).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(S(this,wo)&&clearTimeout(S(this,wo)),L(this,wo,setTimeout(()=>{this.focusMainContainer(),L(this,wo,null)},0))),S(this,gi).delete(e.id),this.unselect(e),(!e.annotationElementId||!S(this,Rc).has(e.annotationElementId))&&((t=S(this,Ma))==null||t.remove(e.id))}addDeletedAnnotationElement(e){S(this,Rc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return S(this,Rc).has(e)}removeDeletedAnnotationElement(e){S(this,Rc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){S(this,Gr)!==e&&(L(this,Gr,e),e&&z(this,Ye,ql).call(this,e.propertiesToUpdate))}updateUI(e){S(this,Ye,nL)===e&&z(this,Ye,ql).call(this,e.propertiesToUpdate)}toggleSelected(e){if(S(this,nn).has(e)){S(this,nn).delete(e),e.unselect(),z(this,Ye,sr).call(this,{hasSelectedEditor:this.hasSelection});return}S(this,nn).add(e),e.select(),z(this,Ye,ql).call(this,e.propertiesToUpdate),z(this,Ye,sr).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of S(this,nn))t!==e&&t.unselect();S(this,nn).clear(),S(this,nn).add(e),e.select(),z(this,Ye,ql).call(this,e.propertiesToUpdate),z(this,Ye,sr).call(this,{hasSelectedEditor:!0})}isSelected(e){return S(this,nn).has(e)}get firstSelectedEditor(){return S(this,nn).values().next().value}unselect(e){e.unselect(),S(this,nn).delete(e),z(this,Ye,sr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return S(this,nn).size!==0}get isEnterHandled(){return S(this,nn).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){S(this,Hs).undo(),z(this,Ye,sr).call(this,{hasSomethingToUndo:S(this,Hs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:z(this,Ye,uy).call(this)})}redo(){S(this,Hs).redo(),z(this,Ye,sr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:S(this,Hs).hasSomethingToRedo(),isEmpty:z(this,Ye,uy).call(this)})}addCommands(e){S(this,Hs).add(e),z(this,Ye,sr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:z(this,Ye,uy).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...S(this,nn)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)z(this,Ye,N1).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=S(this,Gr))==null||e.commitOrRemove()}hasSomethingToControl(){return S(this,Gr)||this.hasSelection}selectAll(){for(const e of S(this,nn))e.commit();z(this,Ye,O1).call(this,S(this,gi).values())}unselectAll(){if(!(S(this,Gr)&&(S(this,Gr).commitOrRemove(),S(this,xi)!==xt.NONE))&&this.hasSelection){for(const e of S(this,nn))e.unselect();S(this,nn).clear(),z(this,Ye,sr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;S(this,eu)[0]+=e,S(this,eu)[1]+=t;const[r,s]=S(this,eu),o=[...S(this,nn)],a=1e3;S(this,Ao)&&clearTimeout(S(this,Ao)),L(this,Ao,setTimeout(()=>{L(this,Ao,null),S(this,eu)[0]=S(this,eu)[1]=0,this.addCommands({cmd:()=>{for(const c of o)S(this,gi).has(c.id)&&c.translateInPage(r,s)},undo:()=>{for(const c of o)S(this,gi).has(c.id)&&c.translateInPage(-r,-s)},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),L(this,So,new Map);for(const e of S(this,nn))S(this,So).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!S(this,So))return!1;this.disableUserSelect(!1);const e=S(this,So);L(this,So,null);let t=!1;for(const[{x:r,y:s,pageIndex:o},a]of e)a.newX=r,a.newY=s,a.newPageIndex=o,t||(t=r!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const i=(r,s,o,a)=>{if(S(this,gi).has(r.id)){const c=S(this,Bi).get(a);c?r._setParentAndPosition(c,s,o):(r.pageIndex=a,r.x=s,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:o,newPageIndex:a}]of e)i(r,s,o,a)},undo:()=>{for(const[r,{savedX:s,savedY:o,savedPageIndex:a}]of e)i(r,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(S(this,So))for(const i of S(this,So).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||S(this,nn).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return S(this,Gr)===e}getActive(){return S(this,Gr)}getMode(){return S(this,xi)}get imageManager(){return jt(this,"imageManager",new I1)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,f=t.rangeCount;u<f;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,f,p,m)=>({x:(f-r)/o,y:1-(u+p-i)/s,width:m/o,height:p/s});break;case"180":a=(u,f,p,m)=>({x:1-(u+p-i)/s,y:1-(f+m-r)/o,width:p/s,height:m/o});break;case"270":a=(u,f,p,m)=>({x:1-(f+m-r)/o,y:(u-i)/s,width:m/o,height:p/s});break;default:a=(u,f,p,m)=>({x:(u-i)/s,y:(f-r)/o,width:p/s,height:m/o});break}const c=[];for(let u=0,f=t.rangeCount;u<f;u++){const p=t.getRangeAt(u);if(!p.collapsed)for(const{x:m,y:g,width:v,height:w}of p.getClientRects())v===0||w===0||c.push(a(m,g,v,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(S(this,sh)||L(this,sh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=S(this,sh))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=S(this,sh))==null?void 0:r.get(e.data.id);if(!t)return;const i=S(this,Ma).getRawValue(t);i&&(S(this,xi)===xt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};ih=new WeakMap,Gr=new WeakMap,gi=new WeakMap,Bi=new WeakMap,rh=new WeakMap,Ma=new WeakMap,sh=new WeakMap,Hs=new WeakMap,Kl=new WeakMap,oh=new WeakMap,Rc=new WeakMap,So=new WeakMap,Gs=new WeakMap,kc=new WeakMap,$y=new WeakMap,Yy=new WeakMap,ah=new WeakMap,Wy=new WeakMap,wo=new WeakMap,Xl=new WeakMap,lh=new WeakMap,Jl=new WeakMap,To=new WeakMap,nS=new WeakMap,Zl=new WeakMap,Ky=new WeakMap,Ql=new WeakMap,Nc=new WeakMap,Xy=new WeakMap,Jy=new WeakMap,xi=new WeakMap,nn=new WeakMap,Da=new WeakMap,Oc=new WeakMap,Zy=new WeakMap,Qy=new WeakMap,eu=new WeakMap,Ao=new WeakMap,Ra=new WeakMap,eb=new WeakMap,ms=new WeakMap,Ye=new WeakSet,n0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},M1=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of S(this,Bi).values())if(i.hasTextLayer(e))return i;return null},YP=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=z(this,Ye,n0).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(S(this,To)||L(this,To,new qQ(this)),S(this,To).show(i,r,this.direction==="ltr"))},WP=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){S(this,Da)&&((s=S(this,To))==null||s.hide(),L(this,Da,null),z(this,Ye,sr).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===S(this,Da))return;const r=z(this,Ye,n0).call(this,e).closest(".textLayer");if(!r){S(this,Da)&&((o=S(this,To))==null||o.hide(),L(this,Da,null),z(this,Ye,sr).call(this,{hasSelectedText:!1}));return}if((a=S(this,To))==null||a.hide(),L(this,Da,t),z(this,Ye,sr).call(this,{hasSelectedText:!0}),!(S(this,xi)!==xt.HIGHLIGHT&&S(this,xi)!==xt.NONE)&&(S(this,xi)===xt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),L(this,Jl,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=S(this,xi)===xt.HIGHLIGHT?z(this,Ye,M1).call(this,r):null;c==null||c.toggleDrawing();const u=new AbortController,f=this.combinedSignal(u),p=m=>{m.type==="pointerup"&&m.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),m.type==="pointerup"&&z(this,Ye,i0).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("blur",p,{signal:f})}},i0=function(e=""){S(this,xi)===xt.HIGHLIGHT?this.highlightSelection(e):S(this,$y)&&z(this,Ye,YP).call(this)},KP=function(){document.addEventListener("selectionchange",z(this,Ye,WP).bind(this),{signal:this._signal})},XP=function(){if(S(this,Xl))return;L(this,Xl,new AbortController);const e=this.combinedSignal(S(this,Xl));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},JP=function(){var e;(e=S(this,Xl))==null||e.abort(),L(this,Xl,null)},D1=function(){if(S(this,Ql))return;L(this,Ql,new AbortController);const e=this.combinedSignal(S(this,Ql));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},ZP=function(){var e;(e=S(this,Ql))==null||e.abort(),L(this,Ql,null)},R1=function(){if(S(this,Kl))return;L(this,Kl,new AbortController);const e=this.combinedSignal(S(this,Kl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},k1=function(){var e;(e=S(this,Kl))==null||e.abort(),L(this,Kl,null)},QP=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},sr=function(e){Object.entries(e).some(([i,r])=>S(this,Qy)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(S(this,Qy),e)}),S(this,xi)===xt.HIGHLIGHT&&e.hasSelectedEditor===!1&&z(this,Ye,ql).call(this,[[vt.HIGHLIGHT_FREE,!0]]))},ql=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},eL=async function(){if(!S(this,Zl)){L(this,Zl,!0);const e=[];for(const t of S(this,Bi).values())e.push(t.enable());await Promise.all(e);for(const t of S(this,gi).values())t.enable()}},tL=function(){if(this.unselectAll(),S(this,Zl)){L(this,Zl,!1);for(const e of S(this,Bi).values())e.disable();for(const e of S(this,gi).values())e.disable()}},N1=function(e){const t=S(this,Bi).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},nL=function(){let e=null;for(e of S(this,nn));return e},uy=function(){if(S(this,gi).size===0)return!0;if(S(this,gi).size===1)for(const e of S(this,gi).values())return e.isEmpty();return!1},O1=function(e){for(const t of S(this,nn))t.unselect();S(this,nn).clear();for(const t of e)t.isEmpty()||(S(this,nn).add(t),t.select());z(this,Ye,sr).call(this,{hasSelectedEditor:this.hasSelection})},_t(Wf,"TRANSLATE_SMALL",1),_t(Wf,"TRANSLATE_BIG",10);let xd=Wf;var Mi,Eo,$s,uh,Co,$r,ch,Io,Sr,ka,Bc,xo,tu,ro,cy,r0;const or=class or{constructor(e){$(this,ro);$(this,Mi,null);$(this,Eo,!1);$(this,$s,null);$(this,uh,null);$(this,Co,null);$(this,$r,null);$(this,ch,!1);$(this,Io,null);$(this,Sr,null);$(this,ka,null);$(this,Bc,null);$(this,xo,!1);L(this,Sr,e),L(this,xo,e._uiManager.useNewAltTextFlow),S(or,tu)||L(or,tu,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){or._l10n??(or._l10n=e)}async render(){const e=L(this,$s,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=L(this,uh,document.createElement("span"));e.append(t),S(this,xo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",S(or,tu).missing),t.setAttribute("data-l10n-id",S(or,tu)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=S(this,Sr)._uiManager._signal;e.addEventListener("contextmenu",Cs,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),S(this,Sr)._uiManager.editAltText(S(this,Sr)),S(this,xo)&&S(this,Sr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:S(this,ro,cy)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(L(this,ch,!0),r(s))},{signal:i}),await z(this,ro,r0).call(this),e}finish(){S(this,$s)&&(S(this,$s).focus({focusVisible:S(this,ch)}),L(this,ch,!1))}isEmpty(){return S(this,xo)?S(this,Mi)===null:!S(this,Mi)&&!S(this,Eo)}hasData(){return S(this,xo)?S(this,Mi)!==null||!!S(this,ka):this.isEmpty()}get guessedText(){return S(this,ka)}async setGuessedText(e){S(this,Mi)===null&&(L(this,ka,e),L(this,Bc,await or._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),z(this,ro,r0).call(this))}toggleAltTextBadge(e=!1){var t;if(!S(this,xo)||S(this,Mi)){(t=S(this,Io))==null||t.remove(),L(this,Io,null);return}if(!S(this,Io)){const i=L(this,Io,document.createElement("div"));i.className="noAltTextBadge",S(this,Sr).div.append(i)}S(this,Io).classList.toggle("hidden",!e)}serialize(e){let t=S(this,Mi);return!e&&S(this,ka)===t&&(t=S(this,Bc)),{altText:t,decorative:S(this,Eo),guessedText:S(this,ka),textWithDisclaimer:S(this,Bc)}}get data(){return{altText:S(this,Mi),decorative:S(this,Eo)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(L(this,ka,i),L(this,Bc,r)),!(S(this,Mi)===e&&S(this,Eo)===t)&&(s||(L(this,Mi,e),L(this,Eo,t)),z(this,ro,r0).call(this))}toggle(e=!1){S(this,$s)&&(!e&&S(this,$r)&&(clearTimeout(S(this,$r)),L(this,$r,null)),S(this,$s).disabled=!e)}shown(){S(this,Sr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:S(this,ro,cy)}})}destroy(){var e,t;(e=S(this,$s))==null||e.remove(),L(this,$s,null),L(this,uh,null),L(this,Co,null),(t=S(this,Io))==null||t.remove(),L(this,Io,null)}};Mi=new WeakMap,Eo=new WeakMap,$s=new WeakMap,uh=new WeakMap,Co=new WeakMap,$r=new WeakMap,ch=new WeakMap,Io=new WeakMap,Sr=new WeakMap,ka=new WeakMap,Bc=new WeakMap,xo=new WeakMap,tu=new WeakMap,ro=new WeakSet,cy=function(){return S(this,Mi)&&"added"||S(this,Mi)===null&&this.guessedText&&"review"||"missing"},r0=async function(){var r,s,o;const e=S(this,$s);if(!e)return;if(S(this,xo)){if(e.classList.toggle("done",!!S(this,Mi)),e.setAttribute("data-l10n-id",S(or,tu)[S(this,ro,cy)]),(r=S(this,uh))==null||r.setAttribute("data-l10n-id",S(or,tu)[`${S(this,ro,cy)}-label`]),!S(this,Mi)){(s=S(this,Co))==null||s.remove();return}}else{if(!S(this,Mi)&&!S(this,Eo)){e.classList.remove("done"),(o=S(this,Co))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=S(this,Co);if(!t){L(this,Co,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${S(this,Sr).id}`;const a=100,c=S(this,Sr)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(S(this,$r)),L(this,$r,null)},{once:!0}),e.addEventListener("mouseenter",()=>{L(this,$r,setTimeout(()=>{L(this,$r,null),S(this,Co).classList.add("show"),S(this,Sr)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;S(this,$r)&&(clearTimeout(S(this,$r)),L(this,$r,null)),(u=S(this,Co))==null||u.classList.remove("show")},{signal:c})}S(this,Eo)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=S(this,Mi)),t.parentNode||e.append(t);const i=S(this,Sr).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},$(or,tu,null),_t(or,"_l10n",null);let H0=or;var Fc,Ys,Bn,dh,Pc,Fi,Lc,nu,tb,Uc,iu,nb,zc,Na,Mo,fh,hh,gs,ib,iS,Dt,B1,rb,F1,P1,iL,rL,L1,U1,z1,sL,V1,oL,aL,lL,j1,dy;const Qt=class Qt{constructor(e){$(this,Dt);$(this,Fc,null);$(this,Ys,null);$(this,Bn,null);$(this,dh,!1);$(this,Pc,!1);$(this,Fi,null);$(this,Lc,null);$(this,nu,null);$(this,tb,"");$(this,Uc,!1);$(this,iu,null);$(this,nb,!1);$(this,zc,!1);$(this,Na,!1);$(this,Mo,null);$(this,fh,0);$(this,hh,0);$(this,gs,null);_t(this,"_editToolbar",null);_t(this,"_initialOptions",Object.create(null));_t(this,"_initialData",null);_t(this,"_isVisible",!0);_t(this,"_uiManager",null);_t(this,"_focusEventsAllowed",!0);$(this,ib,!1);$(this,iS,Qt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Qt.prototype._resizeWithKeyboard,t=xd.TRANSLATE_SMALL,i=xd.TRANSLATE_BIG;return jt(this,"_resizerKeyboardManager",new c_([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Qt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return jt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new YQ({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Qt._l10n??(Qt._l10n=e),Qt._l10nResizer||(Qt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Qt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Qt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){wn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return S(this,ib)}set _isDraggable(e){var t;L(this,ib,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=S(this,iS)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):z(this,Dt,dy).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(S(this,Uc)?L(this,Uc,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[s,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(t+r)/o,this.fixAndSetPosition()}translate(e,t){z(this,Dt,B1).call(this,this.parentDimensions,e,t)}translateInPage(e,t){S(this,iu)||L(this,iu,[this.x,this.y]),z(this,Dt,B1).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){S(this,iu)||L(this,iu,[this.x,this.y]);const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[a,c]=this.getBaseTranslation();s+=a,o+=c,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!S(this,iu)&&(S(this,iu)[0]!==this.x||S(this,iu)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Qt,r=i/e,s=i/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:s,width:o,height:a}=this;if(o*=t,a*=i,r*=t,s*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-o,r)),s=Math.max(0,Math.min(i-a,s));break;case 90:r=Math.max(0,Math.min(t-a,r)),s=Math.min(i,Math.max(o,s));break;case 180:r=Math.min(t,Math.max(o,r)),s=Math.min(i,Math.max(a,s));break;case 270:r=Math.min(t,Math.max(a,r)),s=Math.max(0,Math.min(i-o,s));break}this.x=r/=t,this.y=s/=i;const[c,u]=this.getBaseTranslation();r+=c,s+=u;const{style:f}=this.div;f.left=`${(100*r).toFixed(2)}%`,f.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return z(i=Qt,rb,F1).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return z(i=Qt,rb,F1).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,S(this,Pc)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),s=!S(this,Pc)&&t.endsWith("%");if(r&&s)return;const[o,a]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!S(this,Pc)&&!s&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=S(this,Bn))==null||e.finish()}async addEditToolbar(){return this._editToolbar||S(this,zc)?this._editToolbar:(this._editToolbar=new E1(this),this.div.append(this._editToolbar.render()),S(this,Bn)&&await this._editToolbar.addAltText(S(this,Bn)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=S(this,Bn))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){S(this,Bn)||(H0.initialize(Qt._l10n),L(this,Bn,new H0(this)),S(this,Fc)&&(S(this,Bn).data=S(this,Fc),L(this,Fc,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=S(this,Bn))==null?void 0:e.data}set altTextData(e){S(this,Bn)&&(S(this,Bn).data=e)}get guessedAltText(){var e;return(e=S(this,Bn))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=S(this,Bn))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=S(this,Bn))==null?void 0:t.serialize(e)}hasAltText(){return!!S(this,Bn)&&!S(this,Bn).isEmpty()}hasAltTextData(){var e;return((e=S(this,Bn))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=S(this,dh)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),z(this,Dt,V1).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),q0(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=cr.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(L(this,Uc,!0),this._isDraggable){z(this,Dt,sL).call(this,e);return}z(this,Dt,z1).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){S(this,Mo)&&clearTimeout(S(this,Mo)),L(this,Mo,setTimeout(()=>{var e;L(this,Mo,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[s,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/r,f=t/r,p=this.x*s,m=this.y*o,g=this.width*s,v=this.height*o;switch(i){case 0:return[p+u+a,o-m-f-v+c,p+u+g+a,o-m-f+c];case 90:return[p+f+a,o-m+u+c,p+f+v+a,o-m+u+g+c];case 180:return[p-u-g+a,o-m+f+c,p-u+a,o-m+f+v+c];case 270:return[p-f-v+a,o-m-u-g+c,p-f+a,o-m-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,s,o]=e,a=s-i,c=o-r;switch(this.rotation){case 0:return[i,t-o,a,c];case 90:return[i,t-r,c,a];case 180:return[s,t-r,a,c];case 270:return[s,t-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){L(this,zc,!0)}disableEditMode(){L(this,zc,!1)}isInEditMode(){return S(this,zc)}shouldGetKeyboardEvents(){return S(this,Na)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){z(this,Dt,V1).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){wn("An editor must be serializable")}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,L(r,Fc,e.accessibilityData);const[s,o]=r.pageDimensions,[a,c,u,f]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/s,r.y=c/o,r.width=u/s,r.height=f/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=S(this,nu))==null||e.abort(),L(this,nu,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),S(this,Mo)&&(clearTimeout(S(this,Mo)),L(this,Mo,null)),z(this,Dt,dy).call(this),this.removeEditToolbar(),S(this,gs)){for(const t of S(this,gs).values())clearTimeout(t);L(this,gs,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(z(this,Dt,iL).call(this),S(this,Fi).classList.remove("hidden"),q0(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),L(this,Lc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=S(this,Fi).children;if(!S(this,Ys)){L(this,Ys,Array.from(t));const o=z(this,Dt,oL).bind(this),a=z(this,Dt,aL).bind(this),c=this._uiManager._signal;for(const u of S(this,Ys)){const f=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",z(this,Dt,lL).bind(this,f),{signal:c}),u.setAttribute("data-l10n-id",Qt._l10nResizer[f])}}const i=S(this,Ys)[0];let r=0;for(const o of t){if(o===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(S(this,Ys).length/4);if(s!==r){if(s<r)for(let a=0;a<r-s;a++)S(this,Fi).append(S(this,Fi).firstChild);else if(s>r)for(let a=0;a<s-r;a++)S(this,Fi).firstChild.before(S(this,Fi).lastChild);let o=0;for(const a of t){const u=S(this,Ys)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Qt._l10nResizer[u])}}z(this,Dt,j1).call(this,0),L(this,Na,!0),S(this,Fi).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){S(this,Na)&&z(this,Dt,U1).call(this,S(this,tb),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){z(this,Dt,dy).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(i=S(this,Bn))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,r,s;(e=S(this,Fi))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=S(this,Bn))==null||s.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return S(this,nb)}set isEditing(e){L(this,nb,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){L(this,Pc,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){S(this,gs)||L(this,gs,new Map);const{action:i}=e;let r=S(this,gs).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),S(this,gs).delete(i),S(this,gs).size===0&&L(this,gs,null)},Qt._telemetryTimeout),S(this,gs).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),L(this,dh,!1)}disable(){this.div&&(this.div.tabIndex=-1),L(this,dh,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Fc=new WeakMap,Ys=new WeakMap,Bn=new WeakMap,dh=new WeakMap,Pc=new WeakMap,Fi=new WeakMap,Lc=new WeakMap,nu=new WeakMap,tb=new WeakMap,Uc=new WeakMap,iu=new WeakMap,nb=new WeakMap,zc=new WeakMap,Na=new WeakMap,Mo=new WeakMap,fh=new WeakMap,hh=new WeakMap,gs=new WeakMap,ib=new WeakMap,iS=new WeakMap,Dt=new WeakSet,B1=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},rb=new WeakSet,F1=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},P1=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},iL=function(){if(S(this,Fi))return;L(this,Fi,document.createElement("div")),S(this,Fi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");S(this,Fi).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",z(this,Dt,rL).bind(this,i),{signal:t}),r.addEventListener("contextmenu",Cs,{signal:t}),r.tabIndex=-1}this.div.prepend(S(this,Fi))},rL=function(e,t){var v;t.preventDefault();const{isMac:i}=cr.platform;if(t.button!==0||t.ctrlKey&&i)return;(v=S(this,Bn))==null||v.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",z(this,Dt,U1).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("contextmenu",Cs,{signal:o});const a=this.x,c=this.y,u=this.width,f=this.height,p=this.parent.div.style.cursor,m=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const g=()=>{var w;s.abort(),this.parent.togglePointerEvents(!0),(w=S(this,Bn))==null||w.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=p,this.div.style.cursor=m,z(this,Dt,L1).call(this,a,c,u,f)};window.addEventListener("pointerup",g,{signal:o}),window.addEventListener("blur",g,{signal:o})},L1=function(e,t,i,r){const s=this.x,o=this.y,a=this.width,c=this.height;s===e&&o===t&&a===i&&c===r||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=s,this.y=o;const[u,f]=this.parentDimensions;this.setDims(u*a,f*c),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[u,f]=this.parentDimensions;this.setDims(u*i,f*r),this.fixAndSetPosition()},mustExec:!0})},U1=function(e,t){const[i,r]=this.parentDimensions,s=this.x,o=this.y,a=this.width,c=this.height,u=Qt.MIN_SIZE/i,f=Qt.MIN_SIZE/r,p=V=>Math.round(V*1e4)/1e4,m=z(this,Dt,P1).call(this,this.rotation),g=(V,te)=>[m[0]*V+m[2]*te,m[1]*V+m[3]*te],v=z(this,Dt,P1).call(this,360-this.rotation),w=(V,te)=>[v[0]*V+v[2]*te,v[1]*V+v[3]*te];let A,E,M=!1,I=!1;switch(e){case"topLeft":M=!0,A=(V,te)=>[0,0],E=(V,te)=>[V,te];break;case"topMiddle":A=(V,te)=>[V/2,0],E=(V,te)=>[V/2,te];break;case"topRight":M=!0,A=(V,te)=>[V,0],E=(V,te)=>[0,te];break;case"middleRight":I=!0,A=(V,te)=>[V,te/2],E=(V,te)=>[0,te/2];break;case"bottomRight":M=!0,A=(V,te)=>[V,te],E=(V,te)=>[0,0];break;case"bottomMiddle":A=(V,te)=>[V/2,te],E=(V,te)=>[V/2,0];break;case"bottomLeft":M=!0,A=(V,te)=>[0,te],E=(V,te)=>[V,0];break;case"middleLeft":I=!0,A=(V,te)=>[0,te/2],E=(V,te)=>[V,te/2];break}const R=A(a,c),D=E(a,c);let C=g(...D);const k=p(s+C[0]),j=p(o+C[1]);let U=1,F=1,[J,G]=this.screenToPageTranslation(t.movementX,t.movementY);if([J,G]=w(J/i,G/r),M){const V=Math.hypot(a,c);U=F=Math.max(Math.min(Math.hypot(D[0]-R[0]-J,D[1]-R[1]-G)/V,1/a,1/c),u/a,f/c)}else I?U=Math.max(u,Math.min(1,Math.abs(D[0]-R[0]-J)))/a:F=Math.max(f,Math.min(1,Math.abs(D[1]-R[1]-G)))/c;const ee=p(a*U),oe=p(c*F);C=g(...E(ee,oe));const me=k-C[0],Q=j-C[1];this.width=ee,this.height=oe,this.x=me,this.y=Q,this.setDims(i*ee,r*oe),this.fixAndSetPosition()},z1=function(e){const{isMac:t}=cr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},sL=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),L(this,fh,e.clientX),L(this,hh,e.clientY);const o=a=>{const{clientX:c,clientY:u}=a,[f,p]=this.screenToPageTranslation(c-S(this,fh),u-S(this,hh));L(this,fh,c),L(this,hh,u),this._uiManager.dragSelectedEditors(f,p)};window.addEventListener("pointermove",o,{passive:!0,capture:!0,signal:r})}const s=()=>{i.abort(),t&&this.div.classList.remove("moving"),L(this,Uc,!1),this._uiManager.endDragSession()||z(this,Dt,z1).call(this,e)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})},V1=function(){if(S(this,nu)||!this.div)return;L(this,nu,new AbortController);const e=this._uiManager.combinedSignal(S(this,nu));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},oL=function(e){Qt._resizerKeyboardManager.exec(this,e)},aL=function(e){var t;S(this,Na)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==S(this,Fi)&&z(this,Dt,dy).call(this)},lL=function(e){L(this,tb,S(this,Na)?e:"")},j1=function(e){if(S(this,Ys))for(const t of S(this,Ys))t.tabIndex=e},dy=function(){if(L(this,Na,!1),z(this,Dt,j1).call(this,-1),S(this,Lc)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=S(this,Lc);z(this,Dt,L1).call(this,e,t,i,r),L(this,Lc,null)}},$(Qt,rb),_t(Qt,"_l10n",null),_t(Qt,"_l10nResizer",null),_t(Qt,"_borderLineWidth",-1),_t(Qt,"_colorManager",new x1),_t(Qt,"_zIndex",1),_t(Qt,"_telemetryTimeout",1e3);let on=Qt;class YQ extends on{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SN=3285377520,ps=4294901760,_o=65535;class uL{constructor(e){this.h1=e?e&4294967295:SN,this.h2=e?e&4294967295:SN}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,A=e.length;w<A;w++){const E=e.charCodeAt(w);E<=255?t[i++]=E:(t[i++]=E>>>8,t[i++]=E&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,c=0,u=this.h1,f=this.h2;const p=3432918353,m=461845907,g=p&_o,v=m&_o;for(let w=0;w<r;w++)w&1?(a=o[w],a=a*p&ps|a*g&_o,a=a<<15|a>>>17,a=a*m&ps|a*v&_o,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[w],c=c*p&ps|c*g&_o,c=c<<15|c>>>17,c=c*m&ps|c*v&_o,f^=c,f=f<<13|f>>>19,f=f*5+3864292196);switch(a=0,s){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*p&ps|a*g&_o,a=a<<15|a>>>17,a=a*m&ps|a*v&_o,r&1?u^=a:f^=a}this.h1=u,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ps|e*36045&_o,t=t*4283543511&ps|((t<<16|e>>>16)*2950163797&ps)>>>16,e^=t>>>1,e=e*444984403&ps|e*60499&_o,t=t*3301882366&ps|((t<<16|e>>>16)*3120437893&ps)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const q1=Object.freeze({map:null,hash:"",transfer:void 0});var Vc,jc,Di,rS,cL;class OC{constructor(){$(this,rS);$(this,Vc,!1);$(this,jc,null);$(this,Di,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=S(this,Di).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return S(this,Di).get(e)}remove(e){if(S(this,Di).delete(e),S(this,Di).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of S(this,Di).values())if(t instanceof on)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=S(this,Di).get(e);let r=!1;if(i!==void 0)for(const[s,o]of Object.entries(t))i[s]!==o&&(r=!0,i[s]=o);else r=!0,S(this,Di).set(e,t);r&&z(this,rS,cL).call(this),t instanceof on&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return S(this,Di).has(e)}getAll(){return S(this,Di).size>0?xC(S(this,Di)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return S(this,Di).size}resetModified(){S(this,Vc)&&(L(this,Vc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new dL(this)}get serializable(){if(S(this,Di).size===0)return q1;const e=new Map,t=new uL,i=[],r=Object.create(null);let s=!1;for(const[o,a]of S(this,Di)){const c=a instanceof on?a.serialize(!1,r):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),s||(s=!!c.bitmap))}if(s)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:q1}get editorStats(){let e=null;const t=new Map;for(const i of S(this,Di).values()){if(!(i instanceof on))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const o=e[s]||(e[s]=new Map);for(const[a,c]of Object.entries(r)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const f=u.get(c)??0;u.set(c,f+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){L(this,jc,null)}get modifiedIds(){if(S(this,jc))return S(this,jc);const e=[];for(const t of S(this,Di).values())!(t instanceof on)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return L(this,jc,{ids:new Set(e),hash:e.join(",")})}}Vc=new WeakMap,jc=new WeakMap,Di=new WeakMap,rS=new WeakSet,cL=function(){S(this,Vc)||(L(this,Vc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var sb;class dL extends OC{constructor(t){super();$(this,sb);const{map:i,hash:r,transfer:s}=t.serializable,o=structuredClone(i,s?{transfer:s}:null);L(this,sb,{map:o,hash:r,transfer:s})}get print(){wn("Should not call PrintAnnotationStorage.print")}get serializable(){return S(this,sb)}get modifiedIds(){return jt(this,"modifiedIds",{ids:new Set,hash:""})}}sb=new WeakMap;var ph;class WQ{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){$(this,ph,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),S(this,ph).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||S(this,ph).has(e.loadedName))){if(_i(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:s}=e,o=new FontFace(i,r,s);this.addNativeFontFace(o);try{await o.load(),S(this,ph).add(i),t==null||t(e)}catch{Nt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}wn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Nt(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return jt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Zi||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),jt(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(_i(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return jt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(R,D){return R.charCodeAt(D)<<24|R.charCodeAt(D+1)<<16|R.charCodeAt(D+2)<<8|R.charCodeAt(D+3)&255}function r(R,D,C,k){const j=R.substring(0,D),U=R.substring(D+C);return j+k+U}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function f(R,D){if(++u>30){Nt("Load test font never loaded."),D();return}if(c.font="30px "+R,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(f.bind(null,R,D))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=r(m,976,p.length,p);const v=16,w=1482184792;let A=i(m,v);for(s=0,o=p.length-3;s<o;s+=4)A=A-w+i(p,s)|0;s<p.length&&(A=A-w+i(p+"XXX",s)|0),m=r(m,v,4,kQ(A));const E=`url(data:font/opentype;base64,${btoa(m)});`,M=`@font-face {font-family:"${p}";src:${E}}`;this.insertRule(M);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const R of[e.loadedName,p]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=R,I.append(D)}this._document.body.append(I),f(p,()=>{I.remove(),t.complete()})}}ph=new WeakMap;class KQ{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${LQ(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(s){Nt(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(s,o){};const r=[];for(let s=0,o=i.length;s<o;)switch(i[s++]){case da.BEZIER_CURVE_TO:{const[a,c,u,f,p,m]=i.slice(s,s+6);r.push(g=>g.bezierCurveTo(a,c,u,f,p,m)),s+=6}break;case da.MOVE_TO:{const[a,c]=i.slice(s,s+2);r.push(u=>u.moveTo(a,c)),s+=2}break;case da.LINE_TO:{const[a,c]=i.slice(s,s+2);r.push(u=>u.lineTo(a,c)),s+=2}break;case da.QUADRATIC_CURVE_TO:{const[a,c,u,f]=i.slice(s,s+4);r.push(p=>p.quadraticCurveTo(a,c,u,f)),s+=4}break;case da.RESTORE:r.push(a=>a.restore());break;case da.SAVE:r.push(a=>a.save());break;case da.SCALE:_i(r.length===2,"Scale command is only valid at the third position.");break;case da.TRANSFORM:{const[a,c,u,f,p,m]=i.slice(s,s+6);r.push(g=>g.transform(a,c,u,f,p,m)),s+=6}break;case da.TRANSLATE:{const[a,c]=i.slice(s,s+2);r.push(u=>u.translate(a,c)),s+=2}break}return this.compiledGlyphs[t]=function(o,a){r[0](o),r[1](o),o.scale(a,-a);for(let c=2,u=r.length;c<u;c++)r[c](o)}}}var ob;class fL{constructor({enableHWA:e=!1}){$(this,ob,!1);L(this,ob,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!S(this,ob)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){wn("Abstract method `_createCanvas` called.")}}ob=new WeakMap;class XQ extends fL{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class hL{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){wn("Abstract method `_fetch` called.")}}class pL extends hL{async _fetch(e){const t=await kS(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):RS(t)}}class mL{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,s){return"none"}destroy(e=!1){}}var qc,Hc,Do,Oa,Wi,sS,Gc,Xe,$i,Pf,Lf,s0,Uf,gL,H1,zf,fy,hy,G1,py;class JQ extends mL{constructor({docId:t,ownerDocument:i=globalThis.document}){super();$(this,Xe);$(this,qc);$(this,Hc);$(this,Do);$(this,Oa);$(this,Wi);$(this,sS);$(this,Gc,0);L(this,Oa,t),L(this,Wi,i)}addFilter(t){if(!t)return"none";let i=S(this,Xe,$i).get(t);if(i)return i;const[r,s,o]=z(this,Xe,s0).call(this,t),a=t.length===1?r:`${r}${s}${o}`;if(i=S(this,Xe,$i).get(a),i)return S(this,Xe,$i).set(t,i),i;const c=`g_${S(this,Oa)}_transfer_map_${rr(this,Gc)._++}`,u=z(this,Xe,Uf).call(this,c);S(this,Xe,$i).set(t,u),S(this,Xe,$i).set(a,u);const f=z(this,Xe,zf).call(this,c);return z(this,Xe,hy).call(this,r,s,o,f),u}addHCMFilter(t,i){var v;const r=`${t}-${i}`,s="base";let o=S(this,Xe,Pf).get(s);if((o==null?void 0:o.key)===r||(o?((v=o.filter)==null||v.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},S(this,Xe,Pf).set(s,o)),!t||!i))return o.url;const a=z(this,Xe,py).call(this,t);t=ot.makeHexColor(...a);const c=z(this,Xe,py).call(this,i);if(i=ot.makeHexColor(...c),S(this,Xe,Lf).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const u=new Array(256);for(let w=0;w<=255;w++){const A=w/255;u[w]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const f=u.join(","),p=`g_${S(this,Oa)}_hcm_filter`,m=o.filter=z(this,Xe,zf).call(this,p);z(this,Xe,hy).call(this,f,f,f,m),z(this,Xe,H1).call(this,m);const g=(w,A)=>{const E=a[w]/255,M=c[w]/255,I=new Array(A+1);for(let R=0;R<=A;R++)I[R]=E+R/A*(M-E);return I.join(",")};return z(this,Xe,hy).call(this,g(0,5),g(1,5),g(2,5),m),o.url=z(this,Xe,Uf).call(this,p),o.url}addAlphaFilter(t){let i=S(this,Xe,$i).get(t);if(i)return i;const[r]=z(this,Xe,s0).call(this,[t]),s=`alpha_${r}`;if(i=S(this,Xe,$i).get(s),i)return S(this,Xe,$i).set(t,i),i;const o=`g_${S(this,Oa)}_alpha_map_${rr(this,Gc)._++}`,a=z(this,Xe,Uf).call(this,o);S(this,Xe,$i).set(t,a),S(this,Xe,$i).set(s,a);const c=z(this,Xe,zf).call(this,o);return z(this,Xe,G1).call(this,r,c),a}addLuminosityFilter(t){let i=S(this,Xe,$i).get(t||"luminosity");if(i)return i;let r,s;if(t?([r]=z(this,Xe,s0).call(this,[t]),s=`luminosity_${r}`):s="luminosity",i=S(this,Xe,$i).get(s),i)return S(this,Xe,$i).set(t,i),i;const o=`g_${S(this,Oa)}_luminosity_map_${rr(this,Gc)._++}`,a=z(this,Xe,Uf).call(this,o);S(this,Xe,$i).set(t,a),S(this,Xe,$i).set(s,a);const c=z(this,Xe,zf).call(this,o);return z(this,Xe,gL).call(this,c),t&&z(this,Xe,G1).call(this,r,c),a}addHighlightHCMFilter(t,i,r,s,o){var M;const a=`${i}-${r}-${s}-${o}`;let c=S(this,Xe,Pf).get(t);if((c==null?void 0:c.key)===a||(c?((M=c.filter)==null||M.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},S(this,Xe,Pf).set(t,c)),!i||!r))return c.url;const[u,f]=[i,r].map(z(this,Xe,py).bind(this));let p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[g,v]=[s,o].map(z(this,Xe,py).bind(this));m<p&&([p,m,g,v]=[m,p,v,g]),S(this,Xe,Lf).style.color="";const w=(I,R,D)=>{const C=new Array(256),k=(m-p)/D,j=I/255,U=(R-I)/(255*D);let F=0;for(let J=0;J<=D;J++){const G=Math.round(p+J*k),ee=j+J*U;for(let oe=F;oe<=G;oe++)C[oe]=ee;F=G+1}for(let J=F;J<256;J++)C[J]=C[F-1];return C.join(",")},A=`g_${S(this,Oa)}_hcm_${t}_filter`,E=c.filter=z(this,Xe,zf).call(this,A);return z(this,Xe,H1).call(this,E),z(this,Xe,hy).call(this,w(g[0],v[0],5),w(g[1],v[1],5),w(g[2],v[2],5),E),c.url=z(this,Xe,Uf).call(this,A),c.url}destroy(t=!1){t&&S(this,Xe,Pf).size!==0||(S(this,Do)&&(S(this,Do).parentNode.parentNode.remove(),L(this,Do,null)),S(this,Hc)&&(S(this,Hc).clear(),L(this,Hc,null)),L(this,Gc,0))}}qc=new WeakMap,Hc=new WeakMap,Do=new WeakMap,Oa=new WeakMap,Wi=new WeakMap,sS=new WeakMap,Gc=new WeakMap,Xe=new WeakSet,$i=function(){return S(this,Hc)||L(this,Hc,new Map)},Pf=function(){return S(this,sS)||L(this,sS,new Map)},Lf=function(){if(!S(this,Do)){const t=S(this,Wi).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=S(this,Wi).createElementNS(Ea,"svg");r.setAttribute("width",0),r.setAttribute("height",0),L(this,Do,S(this,Wi).createElementNS(Ea,"defs")),t.append(r),r.append(S(this,Do)),S(this,Wi).body.append(t)}return S(this,Do)},s0=function(t){if(t.length===1){const u=t[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=u[m]/255;const p=f.join(",");return[p,p,p]}const[i,r,s]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,a[u]=r[u]/255,c[u]=s[u]/255;return[o.join(","),a.join(","),c.join(",")]},Uf=function(t){if(S(this,qc)===void 0){L(this,qc,"");const i=S(this,Wi).URL;i!==S(this,Wi).baseURI&&(NS(i)?Nt('#createUrl: ignore "data:"-URL for performance reasons.'):L(this,qc,i.split("#",1)[0]))}return`url(${S(this,qc)}#${t})`},gL=function(t){const i=S(this,Wi).createElementNS(Ea,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},H1=function(t){const i=S(this,Wi).createElementNS(Ea,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},zf=function(t){const i=S(this,Wi).createElementNS(Ea,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),S(this,Xe,Lf).append(i),i},fy=function(t,i,r){const s=S(this,Wi).createElementNS(Ea,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},hy=function(t,i,r,s){const o=S(this,Wi).createElementNS(Ea,"feComponentTransfer");s.append(o),z(this,Xe,fy).call(this,o,"feFuncR",t),z(this,Xe,fy).call(this,o,"feFuncG",i),z(this,Xe,fy).call(this,o,"feFuncB",r)},G1=function(t,i){const r=S(this,Wi).createElementNS(Ea,"feComponentTransfer");i.append(r),z(this,Xe,fy).call(this,r,"feFuncA",t)},py=function(t){return S(this,Xe,Lf).style.color=t,NC(getComputedStyle(S(this,Xe,Lf)).getPropertyValue("color"))};class yL{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){wn("Abstract method `_fetch` called.")}}class bL extends yL{async _fetch(e){const t=await kS(e,"arraybuffer");return new Uint8Array(t)}}if(Zi){var $1=Promise.withResolvers(),Dy=null;(async()=>{const e=await Pv(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Pv(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Pv(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Pv(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,o;return new Map(Object.entries({fs:e,http:t,https:i,url:r,canvas:s,path2d:o}))})().then(e=>{Dy=e,$1.resolve()},e=>{Nt(`loadPackages: ${e}`),Dy=new Map,$1.resolve()})}class Tu{static get promise(){return $1.promise}static get(e){return Dy==null?void 0:Dy.get(e)}}async function _L(n){const t=await Tu.get("fs").promises.readFile(n);return new Uint8Array(t)}class ZQ extends mL{}class QQ extends fL{_createCanvas(e,t){return Tu.get("canvas").createCanvas(e,t)}}class eee extends hL{async _fetch(e){return _L(e)}}class tee extends yL{async _fetch(e){return _L(e)}}const ar={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Y1(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}class BC{getPattern(){wn("Abstract method `getPattern` called.")}}class nee extends BC{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let s;if(r===ar.STROKE||r===ar.FILL){const o=t.current.getClippedPathBoundingBox(r,Pn(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),f=u.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),i=ot.transform(i,[1,0,0,1,o[0],o[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Y1(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),s=e.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(i);s.setTransform(p)}else Y1(e,this._bbox),s=this._createGradient(e);return s}}function AA(n,e,t,i,r,s,o,a){const c=e.coords,u=e.colors,f=n.data,p=n.width*4;let m;c[t+1]>c[i+1]&&(m=t,t=i,i=m,m=s,s=o,o=m),c[i+1]>c[r+1]&&(m=i,i=r,r=m,m=o,o=a,a=m),c[t+1]>c[i+1]&&(m=t,t=i,i=m,m=s,s=o,o=m);const g=(c[t]+e.offsetX)*e.scaleX,v=(c[t+1]+e.offsetY)*e.scaleY,w=(c[i]+e.offsetX)*e.scaleX,A=(c[i+1]+e.offsetY)*e.scaleY,E=(c[r]+e.offsetX)*e.scaleX,M=(c[r+1]+e.offsetY)*e.scaleY;if(v>=M)return;const I=u[s],R=u[s+1],D=u[s+2],C=u[o],k=u[o+1],j=u[o+2],U=u[a],F=u[a+1],J=u[a+2],G=Math.round(v),ee=Math.round(M);let oe,me,Q,V,te,xe,N,ce;for(let Me=G;Me<=ee;Me++){if(Me<A){const ae=Me<v?0:(v-Me)/(v-A);oe=g-(g-w)*ae,me=I-(I-C)*ae,Q=R-(R-k)*ae,V=D-(D-j)*ae}else{let ae;Me>M?ae=1:A===M?ae=0:ae=(A-Me)/(A-M),oe=w-(w-E)*ae,me=C-(C-U)*ae,Q=k-(k-F)*ae,V=j-(j-J)*ae}let q;Me<v?q=0:Me>M?q=1:q=(v-Me)/(v-M),te=g-(g-E)*q,xe=I-(I-U)*q,N=R-(R-F)*q,ce=D-(D-J)*q;const Re=Math.round(Math.min(oe,te)),je=Math.round(Math.max(oe,te));let re=p*Me+Re*4;for(let ae=Re;ae<=je;ae++)q=(oe-ae)/(oe-te),q<0?q=0:q>1&&(q=1),f[re++]=me-(me-xe)*q|0,f[re++]=Q-(Q-N)*q|0,f[re++]=V-(V-ce)*q|0,f[re++]=255}}function iee(n,e,t){const i=e.coords,r=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(i.length/a)-1,u=a-1;for(s=0;s<c;s++){let f=s*a;for(let p=0;p<u;p++,f++)AA(n,t,i[f],i[f+1],i[f+a],r[f],r[f+1],r[f+a]),AA(n,t,i[f+a+1],i[f+1],i[f+a],r[f+a+1],r[f+1],r[f+a])}break;case"triangles":for(s=0,o=i.length;s<o;s+=3)AA(n,t,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class ree extends BC{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,f=Math.ceil(this._bounds[3])-c,p=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),g=u/p,v=f/m,w={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/g,scaleY:1/v},A=p+2*2,E=m+2*2,M=i.getCanvas("mesh",A,E),I=M.context,R=I.createImageData(p,m);if(t){const C=R.data;for(let k=0,j=C.length;k<j;k+=4)C[k]=t[0],C[k+1]=t[1],C[k+2]=t[2],C[k+3]=255}for(const C of this._figures)iee(R,C,w);return I.putImageData(R,2,2),{canvas:M.canvas,offsetX:a-2*g,offsetY:c-2*v,scaleX:g,scaleY:v}}getPattern(e,t,i,r){Y1(e,this._bbox);let s;if(r===ar.SHADING)s=ot.singularValueDecompose2dScale(Pn(e));else if(s=ot.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=ot.singularValueDecompose2dScale(this.matrix);s=[s[0]*a[0],s[1]*a[1]]}const o=this._createMeshCanvas(s,r===ar.SHADING?null:this._background,t.cachedCanvases);return r!==ar.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class see extends BC{getPattern(){return"hotpink"}}function oee(n){switch(n[0]){case"RadialAxial":return new nee(n);case"Mesh":return new ree(n);case"Dummy":return new see}throw new Error(`Unknown IR type: ${n[0]}`)}const wN={COLORED:1,UNCOLORED:2},oS=class oS{constructor(e,t,i,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:r,tilingType:s,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),MS("TilingType: "+s);const f=t[0],p=t[1],m=t[2],g=t[3],v=m-f,w=g-p,A=ot.singularValueDecompose2dScale(this.matrix),E=ot.singularValueDecompose2dScale(this.baseTransform),M=A[0]*E[0],I=A[1]*E[1];let R=v,D=w,C=!1,k=!1;const j=Math.ceil(c*M),U=Math.ceil(u*I),F=Math.ceil(v*M),J=Math.ceil(w*I);j>=F?R=c:C=!0,U>=J?D=u:k=!0;const G=this.getSizeAndScale(R,this.ctx.canvas.width,M),ee=this.getSizeAndScale(D,this.ctx.canvas.height,I),oe=e.cachedCanvases.getCanvas("pattern",G.size,ee.size),me=oe.context,Q=a.createCanvasGraphics(me);if(Q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Q,r,o),me.translate(-G.scale*f,-ee.scale*p),Q.transform(G.scale,0,0,ee.scale,0,0),me.save(),this.clipBbox(Q,f,p,m,g),Q.baseTransform=Pn(Q.ctx),Q.executeOperatorList(i),Q.endDrawing(),me.restore(),C||k){const V=oe.canvas;C&&(R=c),k&&(D=u);const te=this.getSizeAndScale(R,this.ctx.canvas.width,M),xe=this.getSizeAndScale(D,this.ctx.canvas.height,I),N=te.size,ce=xe.size,Me=e.cachedCanvases.getCanvas("pattern-workaround",N,ce),q=Me.context,Re=C?Math.floor(v/c):0,je=k?Math.floor(w/u):0;for(let re=0;re<=Re;re++)for(let ae=0;ae<=je;ae++)q.drawImage(V,N*re,ce*ae,N,ce,0,0,N,ce);return{canvas:Me.canvas,scaleX:te.scale,scaleY:xe.scale,offsetX:f,offsetY:p}}return{canvas:oe.canvas,scaleX:G.scale,scaleY:ee.scale,offsetX:f,offsetY:p}}getSizeAndScale(e,t,i){const r=Math.max(oS.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,t,i,r,s){const o=r-t,a=s-i;e.ctx.rect(t,i,o,a),e.current.updateRectMinMax(Pn(e.ctx),[t,i,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,s=e.current;switch(t){case wN.COLORED:const o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case wN.UNCOLORED:const a=ot.makeHexColor(i[0],i[1],i[2]);r.fillStyle=a,r.strokeStyle=a,s.fillColor=a,s.strokeColor=a;break;default:throw new RQ(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let s=i;r!==ar.SHADING&&(s=ot.transform(s,t.baseTransform),this.matrix&&(s=ot.transform(s,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(s);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};_t(oS,"MAX_PATTERN_SIZE",3e3);let W1=oS;function aee({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=cr.isLittleEndian?4278190080:255,[c,u]=o?[s,a]:[a,s],f=i>>3,p=i&7,m=n.length;t=new Uint32Array(t.buffer);let g=0;for(let v=0;v<r;v++){for(const A=e+f;e<A;e++){const E=e<m?n[e]:255;t[g++]=E&128?u:c,t[g++]=E&64?u:c,t[g++]=E&32?u:c,t[g++]=E&16?u:c,t[g++]=E&8?u:c,t[g++]=E&4?u:c,t[g++]=E&2?u:c,t[g++]=E&1?u:c}if(p===0)continue;const w=e<m?n[e++]:255;for(let A=0;A<p;A++)t[g++]=w&1<<7-A?u:c}return{srcPos:e,destPos:g}}const TN=16,AN=100,lee=15,EN=10,CN=1e3,Ar=16;function uee(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,s,o,a,c){e.transform(i,r,s,o,a,c),this.__originalTransform(i,r,s,o,a,c)},n.setTransform=function(i,r,s,o,a,c){e.setTransform(i,r,s,o,a,c),this.__originalSetTransform(i,r,s,o,a,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,s,o,a){e.bezierCurveTo(t,i,r,s,o,a),this.__originalBezierCurveTo(t,i,r,s,o,a)},n.rect=function(t,i,r,s){e.rect(t,i,r,s),this.__originalRect(t,i,r,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class cee{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Lv(n,e,t,i,r,s,o,a,c,u){const[f,p,m,g,v,w]=Pn(n);if(p===0&&m===0){const M=o*f+v,I=Math.round(M),R=a*g+w,D=Math.round(R),C=(o+c)*f+v,k=Math.abs(Math.round(C)-I)||1,j=(a+u)*g+w,U=Math.abs(Math.round(j)-D)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(g),I,D),n.drawImage(e,t,i,r,s,0,0,k,U),n.setTransform(f,p,m,g,v,w),[k,U]}if(f===0&&g===0){const M=a*m+v,I=Math.round(M),R=o*p+w,D=Math.round(R),C=(a+u)*m+v,k=Math.abs(Math.round(C)-I)||1,j=(o+c)*p+w,U=Math.abs(Math.round(j)-D)||1;return n.setTransform(0,Math.sign(p),Math.sign(m),0,I,D),n.drawImage(e,t,i,r,s,0,0,U,k),n.setTransform(f,p,m,g,v,w),[U,k]}n.drawImage(e,t,i,r,s,o,a,c,u);const A=Math.hypot(f,p),E=Math.hypot(m,g);return[A*c,E*u]}function dee(n){const{width:e,height:t}=n;if(e>CN||t>CN)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let o=new Uint8Array(s*(t+1)),a,c,u;const f=e+7&-8;let p=new Uint8Array(f*t),m=0;for(const E of n.data){let M=128;for(;M>0;)p[m++]=E&M?0:255,M>>=1}let g=0;for(m=0,p[m]!==0&&(o[0]=1,++g),c=1;c<e;c++)p[m]!==p[m+1]&&(o[c]=p[m]?2:1,++g),m++;for(p[m]!==0&&(o[c]=2,++g),a=1;a<t;a++){m=a*f,u=a*s,p[m-f]!==p[m]&&(o[u]=p[m]?1:8,++g);let E=(p[m]?4:0)+(p[m-f]?8:0);for(c=1;c<e;c++)E=(E>>2)+(p[m+1]?4:0)+(p[m-f+1]?8:0),r[E]&&(o[u+c]=r[E],++g),m++;if(p[m-f]!==p[m]&&(o[u+c]=p[m]?2:4,++g),g>i)return null}for(m=f*(t-1),u=a*s,p[m]!==0&&(o[u]=8,++g),c=1;c<e;c++)p[m]!==p[m+1]&&(o[u+c]=p[m]?4:8,++g),m++;if(p[m]!==0&&(o[u+c]=4,++g),g>i)return null;const v=new Int32Array([0,s,-1,0,-s,0,0,0,1]),w=new Path2D;for(a=0;g&&a<=t;a++){let E=a*s;const M=E+e;for(;E<M&&!o[E];)E++;if(E===M)continue;w.moveTo(E%s,a);const I=E;let R=o[E];do{const D=v[R];do E+=D;while(!o[E]);const C=o[E];C!==5&&C!==10?(R=C,o[E]=0):(R=C&51*R>>4,o[E]&=R>>2|R<<2),w.lineTo(E%s,E/s|0),o[E]||--g}while(I!==E);--a}return p=null,o=null,function(E){E.save(),E.scale(1/e,-1/t),E.translate(0,-t),E.fill(w),E.beginPath(),E.restore()}}class IN{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=FP,this.textMatrixScale=1,this.fontMatrix=v1,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Gi.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=ot.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=ot.applyTransform(t,e),r=ot.applyTransform(t.slice(2),e),s=ot.applyTransform([t[0],t[3]],e),o=ot.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],s[0],o[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],o[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],o[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],o[1])}updateScalingPathMinMax(e,t){ot.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,s,o,a,c,u,f){const p=ot.bezierBoundingBox(t,i,r,s,o,a,c,u,f);f||this.updateRectMinMax(e,p)}getPathBoundingBox(e=ar.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===ar.STROKE){t||wn("Stroke bounding box must include transform.");const r=ot.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,o=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=o,i[2]+=s,i[3]+=o}return i}updateClipFromPath(){const e=ot.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=ar.FILL,t=null){return ot.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function xN(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%Ar,s=(t-r)/Ar,o=r===0?s:s+1,a=n.createImageData(i,Ar);let c=0,u;const f=e.data,p=a.data;let m,g,v,w;if(e.kind===Zv.GRAYSCALE_1BPP){const A=f.byteLength,E=new Uint32Array(p.buffer,0,p.byteLength>>2),M=E.length,I=i+7>>3,R=4294967295,D=cr.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(v=m<s?Ar:r,u=0,g=0;g<v;g++){const C=A-c;let k=0;const j=C>I?i:C*8-7,U=j&-8;let F=0,J=0;for(;k<U;k+=8)J=f[c++],E[u++]=J&128?R:D,E[u++]=J&64?R:D,E[u++]=J&32?R:D,E[u++]=J&16?R:D,E[u++]=J&8?R:D,E[u++]=J&4?R:D,E[u++]=J&2?R:D,E[u++]=J&1?R:D;for(;k<j;k++)F===0&&(J=f[c++],F=128),E[u++]=J&F?R:D,F>>=1}for(;u<M;)E[u++]=0;n.putImageData(a,0,m*Ar)}}else if(e.kind===Zv.RGBA_32BPP){for(g=0,w=i*Ar*4,m=0;m<s;m++)p.set(f.subarray(c,c+w)),c+=w,n.putImageData(a,0,g),g+=Ar;m<o&&(w=i*r*4,p.set(f.subarray(c,c+w)),n.putImageData(a,0,g))}else if(e.kind===Zv.RGB_24BPP)for(v=Ar,w=i*v,m=0;m<o;m++){for(m>=s&&(v=r,w=i*v),u=0,g=w;g--;)p[u++]=f[c++],p[u++]=f[c++],p[u++]=f[c++],p[u++]=255;n.putImageData(a,0,m*Ar)}else throw new Error(`bad image kind: ${e.kind}`)}function MN(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%Ar,s=(t-r)/Ar,o=r===0?s:s+1,a=n.createImageData(i,Ar);let c=0;const u=e.data,f=a.data;for(let p=0;p<o;p++){const m=p<s?Ar:r;({srcPos:c}=aee({src:u,srcPos:c,dest:f,width:i,height:m,nonBlackColor:0})),n.putImageData(a,0,p*Ar)}}function Rm(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Uv(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Zi){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function DN(n,e){if(e)return!0;const t=ot.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*wu.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const fee=["butt","round","square"],hee=["miter","round","bevel"],pee={},RN={};var Eu,K1,X1;const gI=class gI{constructor(e,t,i,r,s,{optionalContentConfig:o,markedContentStack:a=null},c,u){$(this,Eu);this.ctx=e,this.current=new IN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new cee(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,i){const c=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Pn(this.compositeCtx))}this.ctx.save(),Uv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Pn(this.ctx)}executeOperatorList(e,t,i,r){const s=e.argsArray,o=e.fnArray;let a=t||0;const c=s.length;if(c===a)return a;const u=c-a>EN&&typeof i=="function",f=u?Date.now()+lee:0;let p=0;const m=this.commonObjs,g=this.objs;let v;for(;;){if(r!==void 0&&a===r.nextBreakPoint)return r.breakIt(a,i),a;if(v=o[a],v!==js.dependency)this[v].apply(this,s[a]);else for(const w of s[a]){const A=w.startsWith("g_")?m:g;if(!A.has(w))return A.get(w,i),a}if(a++,a===c)return a;if(u&&++p>EN){if(Date.now()>f)return i(),a;p=0}}}endDrawing(){z(this,Eu,K1).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),z(this,Eu,X1).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,c=r,u="prescale1",f,p;for(;s>2&&a>1||o>2&&c>1;){let m=a,g=c;s>2&&a>1&&(m=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/m),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),f=this.cachedCanvases.getCanvas(u,m,g),p=f.context,p.clearRect(0,0,m,g),p.drawImage(e,0,0,a,c,0,0,m,g),e=f.canvas,a=m,c=g,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,s=this.current.fillColor,o=this.current.patternFill,a=Pn(t);let c,u,f,p;if((e.bitmap||e.data)&&e.count>1){const j=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),s]),c=this._cachedBitmapsMap.get(j),c||(c=new Map,this._cachedBitmapsMap.set(j,c));const U=c.get(u);if(U&&!o){const F=Math.round(Math.min(a[0],a[2])+a[4]),J=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:U,offsetX:F,offsetY:J}}f=U}f||(p=this.cachedCanvases.getCanvas("maskCanvas",i,r),MN(p.context,e));let m=ot.transform(a,[1/i,0,0,-1/r,0,0]);m=ot.transform(m,[1,0,0,1,0,-r]);const[g,v,w,A]=ot.getAxialAlignedBoundingBox([0,0,i,r],m),E=Math.round(w-g)||1,M=Math.round(A-v)||1,I=this.cachedCanvases.getCanvas("fillCanvas",E,M),R=I.context,D=g,C=v;R.translate(-D,-C),R.transform(...m),f||(f=this._scaleImage(p.canvas,fa(R)),f=f.img,c&&o&&c.set(u,f)),R.imageSmoothingEnabled=DN(Pn(R),e.interpolate),Lv(R,f,0,0,f.width,f.height,0,0,i,r),R.globalCompositeOperation="source-in";const k=ot.transform(fa(R),[1,0,0,1,-D,-C]);return R.fillStyle=o?s.getPattern(t,this,k,ar.FILL):s,R.fillRect(0,0,i,r),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,I.canvas)),{canvas:I.canvas,offsetX:Math.round(D),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=fee[e]}setLineJoin(e){this.ctx.lineJoin=hee[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...Pn(this.suspendedCtx)),Rm(this.suspendedCtx,s),uee(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Rm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const s=r[0],o=r[1],a=r[2]-s,c=r[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,i,a,c,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,s,o,a,c,u,f,p){let m=e.canvas,g=c-f,v=u-p;if(o){const A=ot.makeHexColor(...o);if(g<0||v<0||g+i>m.width||v+r>m.height){const E=this.cachedCanvases.getCanvas("maskExtension",i,r),M=E.context;M.drawImage(m,-g,-v),M.globalCompositeOperation="destination-atop",M.fillStyle=A,M.fillRect(0,0,i,r),M.globalCompositeOperation="source-over",m=E.canvas,g=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(g,v,i,r),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=A,e.fillRect(g,v,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const w=new Path2D;w.rect(c,u,i,r),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(m,g,v,i,r,c,u,i,r),t.restore()}save(){this.inSMaskMode?(Rm(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Rm(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,s,o){this.ctx.transform(e,t,i,r,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,s=this.current;let o=s.x,a=s.y,c,u;const f=Pn(r),p=f[0]===0&&f[3]===0||f[1]===0&&f[2]===0,m=p?i.slice(0):null;for(let g=0,v=0,w=e.length;g<w;g++)switch(e[g]|0){case js.rectangle:o=t[v++],a=t[v++];const A=t[v++],E=t[v++],M=o+A,I=a+E;r.moveTo(o,a),A===0||E===0?r.lineTo(M,I):(r.lineTo(M,a),r.lineTo(M,I),r.lineTo(o,I)),p||s.updateRectMinMax(f,[o,a,M,I]),r.closePath();break;case js.moveTo:o=t[v++],a=t[v++],r.moveTo(o,a),p||s.updatePathMinMax(f,o,a);break;case js.lineTo:o=t[v++],a=t[v++],r.lineTo(o,a),p||s.updatePathMinMax(f,o,a);break;case js.curveTo:c=o,u=a,o=t[v+4],a=t[v+5],r.bezierCurveTo(t[v],t[v+1],t[v+2],t[v+3],o,a),s.updateCurvePathMinMax(f,c,u,t[v],t[v+1],t[v+2],t[v+3],o,a,m),v+=6;break;case js.curveTo2:c=o,u=a,r.bezierCurveTo(o,a,t[v],t[v+1],t[v+2],t[v+3]),s.updateCurvePathMinMax(f,c,u,o,a,t[v],t[v+1],t[v+2],t[v+3],m),o=t[v+2],a=t[v+3],v+=4;break;case js.curveTo3:c=o,u=a,o=t[v+2],a=t[v+3],r.bezierCurveTo(t[v],t[v+1],o,a,o,a),s.updateCurvePathMinMax(f,c,u,t[v],t[v+1],o,a,o,a,m),v+=4;break;case js.closePath:r.closePath();break}p&&s.updateScalingPathMinMax(f,m),s.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,fa(t),ar.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,fa(t),ar.FILL),s=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=pee}eoClip(){this.pendingClip=RN}beginText(){this.current.textMatrix=FP,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var f;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||v1,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Nt("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=((f=i.systemFontInfo)==null?void 0:f.css)||`"${s}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const c=i.italic?"italic":"normal";let u=t;t<TN?u=TN:t>AN&&(u=AN),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,s,o){this.current.textMatrix=[e,t,i,r,s,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const s=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,f=c&Gi.FILL_STROKE_MASK,p=!!(c&Gi.ADD_TO_PATH_FLAG),m=o.patternFill&&!a.missingFile;let g;(a.disableFontFace||p||m)&&(g=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||m?(s.save(),s.translate(t,i),s.beginPath(),g(s,u),r&&s.setTransform(...r),(f===Gi.FILL||f===Gi.FILL_STROKE)&&s.fill(),(f===Gi.STROKE||f===Gi.FILL_STROKE)&&s.stroke(),s.restore()):((f===Gi.FILL||f===Gi.FILL_STROKE)&&s.fillText(e,t,i),(f===Gi.STROKE||f===Gi.FILL_STROKE)&&s.strokeText(e,t,i)),p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pn(s),x:t,y:i,fontSize:u,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return jt(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const s=this.ctx,o=t.fontSizeScale,a=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,f=t.textHScale*u,p=e.length,m=i.vertical,g=m?1:-1,v=i.defaultVMetrics,w=r*t.fontMatrix[0],A=t.textRenderingMode===Gi.FILL&&!i.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),u>0?s.scale(f,-1):s.scale(f,1);let E;if(t.patternFill){s.save();const C=t.fillColor.getPattern(s,this,fa(s),ar.FILL);E=Pn(s),s.restore(),s.fillStyle=C}let M=t.lineWidth;const I=t.textMatrixScale;if(I===0||M===0){const C=t.textRenderingMode&Gi.FILL_STROKE_MASK;(C===Gi.STROKE||C===Gi.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=I;if(o!==1&&(s.scale(o,o),M/=o),s.lineWidth=M,i.isInvalidPDFjsFont){const C=[];let k=0;for(const j of e)C.push(j.unicode),k+=j.width;s.fillText(C.join(""),0,0),t.x+=k*w*f,s.restore(),this.compose();return}let R=0,D;for(D=0;D<p;++D){const C=e[D];if(typeof C=="number"){R+=g*C*r/1e3;continue}let k=!1;const j=(C.isSpace?c:0)+a,U=C.fontChar,F=C.accent;let J,G,ee=C.width;if(m){const me=C.vmetric||v,Q=-(C.vmetric?me[1]:ee*.5)*w,V=me[2]*w;ee=me?-me[0]:ee,J=Q/o,G=(R+V)/o}else J=R/o,G=0;if(i.remeasure&&ee>0){const me=s.measureText(U).width*1e3/r*o;if(ee<me&&this.isFontSubpixelAAEnabled){const Q=ee/me;k=!0,s.save(),s.scale(Q,1),J/=Q}else ee!==me&&(J+=(ee-me)/2e3*r/o)}if(this.contentVisible&&(C.isInFont||i.missingFile)){if(A&&!F)s.fillText(U,J,G);else if(this.paintChar(U,J,G,E),F){const me=J+r*F.offset.x/o,Q=G-r*F.offset.y/o;this.paintChar(F.fontChar,me,Q,E)}}const oe=m?ee*w-j*u:ee*w+j*u;R+=oe,k&&s.restore()}m?t.y-=R:t.x+=R*f,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,s=i.fontSize,o=i.fontDirection,a=r.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,f=i.textHScale*o,p=i.fontMatrix||v1,m=e.length,g=i.textRenderingMode===Gi.INVISIBLE;let v,w,A,E;if(!(g||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(f,o),v=0;v<m;++v){if(w=e[v],typeof w=="number"){E=a*w*s/1e3,this.ctx.translate(E,0),i.x+=E*f;continue}const M=(w.isSpace?u:0)+c,I=r.charProcOperatorList[w.operatorListId];if(!I){Nt(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),t.scale(s,s),t.transform(...p),this.executeOperatorList(I),this.restore()),A=ot.applyTransform([w.width,0],p)[0]*s+M,t.translate(A,0),i.x+=A*f}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,s,o){this.ctx.rect(i,r,s-i,o-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||Pn(this.ctx),s={createCanvasGraphics:o=>new gI(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new W1(e,i,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=ot.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=ot.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=oee(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,fa(t),ar.SHADING);const r=fa(t);if(r){const{width:s,height:o}=t.canvas,[a,c,u,f]=ot.getAxialAlignedBoundingBox([0,0,s,o],r);this.ctx.fillRect(a,c,u-a,f-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){wn("Should not call beginInlineImage")}beginImageData(){wn("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Pn(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(Pn(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||MS("TODO: Support non-isolated groups."),e.knockout&&Nt("Knockout groups not supported.");const i=Pn(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ot.getAxialAlignedBoundingBox(e.bbox,Pn(t));const s=[0,0,t.canvas.width,t.canvas.height];r=ot.intersect(r,s)||[0,0,0,0];const o=Math.floor(r[0]),a=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-o,1),u=Math.max(Math.ceil(r[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,u]);let f="groupAt"+this.groupLevel;e.smask&&(f+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(f,c,u),m=p.context;m.translate(-o,-a),m.transform(...i),e.smask?this.smaskStack.push({canvas:p.canvas,context:m,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Rm(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Pn(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=ot.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,r,s){if(z(this,Eu,K1).call(this),Uv(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[c,u]=ot.singularValueDecompose2dScale(Pn(this.ctx)),{viewportScale:f}=this,p=Math.ceil(o*this.outputScaleX*f),m=Math.ceil(a*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:g,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,a*u),Uv(this.ctx)}else Uv(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new IN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),z(this,Eu,X1).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=dee(e)),r.compiled)){r.compiled(i);return}const s=this._createMaskCanvas(e),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,s,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const c=Pn(a);a.transform(t,i,r,s,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let f=0,p=o.length;f<p;f+=2){const m=ot.transform(c,[t,i,r,s,o[f],o[f+1]]),[g,v]=ot.applyTransform([0,0],m);a.drawImage(u.canvas,g,v)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:o,width:a,height:c,transform:u}=s,f=this.cachedCanvases.getCanvas("maskCanvas",a,c),p=f.context;p.save();const m=this.getObject(o,s);MN(p,m),p.globalCompositeOperation="source-in",p.fillStyle=r?i.getPattern(p,this,fa(t),ar.FILL):i,p.fillRect(0,0,a,c),p.restore(),t.save(),t.transform(...u),t.scale(1,-1),Lv(t,f.canvas,0,0,a,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Nt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){Nt("Dependent image isn't ready yet");return}const o=s.width,a=s.height,c=[];for(let u=0,f=r.length;u<f;u+=2)c.push({transform:[t,0,0,i,r[u],r[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(s,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!Zi){const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none")}r.scale(1/t,-1/i);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,i).context;xN(c,e),s=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(s,fa(r));r.imageSmoothingEnabled=DN(Pn(r),e.interpolate),Lv(r,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",s,o).context;xN(c,e),r=this.applyTransferMapsToCanvas(c)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),Lv(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===RN?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:s}=this.ctx.getTransform();let o,a;if(i===0&&r===0){const c=Math.abs(t),u=Math.abs(s);if(c===u)if(e===0)o=a=1/c;else{const f=c*e;o=a=f<1?1/f:1}else if(e===0)o=1/c,a=1/u;else{const f=c*e,p=u*e;o=f<1?1/f:1,a=p<1?1/p:1}}else{const c=Math.abs(t*s-i*r),u=Math.hypot(t,i),f=Math.hypot(r,s);if(e===0)o=f/c,a=u/c;else{const p=e*c;o=f>p?f/p:1,a=u>p?u/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&s===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(r,s),o.length>0){const a=Math.max(r,s);t.setLineDash(o.map(c=>c/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Eu=new WeakSet,K1=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},X1=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Zf=gI;for(const n in js)Zf.prototype[n]!==void 0&&(Zf.prototype[js[n]]=Zf.prototype[n]);var ab,lb;class Qa{static get workerPort(){return S(this,ab)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");L(this,ab,e)}static get workerSrc(){return S(this,lb)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");L(this,lb,e)}}ab=new WeakMap,lb=new WeakMap,$(Qa,ab,null),$(Qa,lb,"");const zv={DATA:1,ERROR:2},oi={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Pr(n){switch(n instanceof Error||typeof n=="object"&&n!==null||wn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Bd(n.message);case"MissingPDFException":return new Od(n.message);case"PasswordException":return new S1(n.message,n.code);case"UnexpectedResponseException":return new DS(n.message,n.status);case"UnknownErrorException":return new w1(n.message,n.details);default:return new w1(n.message,n.toString())}}var mh,As,vL,SL,wL,o0;class my{constructor(e,t,i){$(this,As);$(this,mh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",z(this,As,vL).bind(this),{signal:S(this,mh).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const f=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:u.desiredSize},r),f.promise},pull:u=>{const f=Promise.withResolvers();return this.streamControllers[s].pullCall=f,c.postMessage({sourceName:o,targetName:a,stream:oi.PULL,streamId:s,desiredSize:u.desiredSize}),f.promise},cancel:u=>{_i(u instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[s].cancelCall=f,this.streamControllers[s].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:oi.CANCEL,streamId:s,reason:Pr(u)}),f.promise}},i)}destroy(){var e;(e=S(this,mh))==null||e.abort(),L(this,mh,null)}}mh=new WeakMap,As=new WeakSet,vL=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){z(this,As,wL).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===zv.DATA)r.resolve(e.data);else if(e.callback===zv.ERROR)r.reject(Pr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;new Promise(function(o){o(t(e.data))}).then(function(o){s.postMessage({sourceName:i,targetName:r,callback:zv.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:i,targetName:r,callback:zv.ERROR,callbackId:e.callbackId,reason:Pr(o)})});return}if(e.streamId){z(this,As,SL).call(this,e);return}t(e.data)},SL=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,f=1,p){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=f,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:oi.ENQUEUE,streamId:t,chunk:u},p)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:oi.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){_i(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:oi.ERROR,streamId:t,reason:Pr(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(u){u(a(e.data,c))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:oi.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:oi.START_COMPLETE,streamId:t,reason:Pr(u)})})},wL=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case oi.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Pr(e.reason));break;case oi.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Pr(e.reason));break;case oi.PULL:if(!a){s.postMessage({sourceName:i,targetName:r,stream:oi.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(c){var u;c((u=a.onPull)==null?void 0:u.call(a))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:oi.PULL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:r,stream:oi.PULL_COMPLETE,streamId:t,reason:Pr(c)})});break;case oi.ENQUEUE:if(_i(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case oi.CLOSE:if(_i(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),z(this,As,o0).call(this,o,t);break;case oi.ERROR:_i(o,"error should have stream controller"),o.controller.error(Pr(e.reason)),z(this,As,o0).call(this,o,t);break;case oi.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Pr(e.reason)),z(this,As,o0).call(this,o,t);break;case oi.CANCEL:if(!a)break;new Promise(function(c){var u;c((u=a.onCancel)==null?void 0:u.call(a,Pr(e.reason)))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:oi.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:i,targetName:r,stream:oi.CANCEL_COMPLETE,streamId:t,reason:Pr(c)})}),a.sinkCapability.reject(Pr(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},o0=async function(e,t){var i,r,s;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var $c,ub;class mee{constructor({parsedData:e,rawData:t}){$(this,$c);$(this,ub);L(this,$c,e),L(this,ub,t)}getRaw(){return S(this,ub)}get(e){return S(this,$c).get(e)??null}getAll(){return xC(S(this,$c))}has(e){return S(this,$c).has(e)}}$c=new WeakMap,ub=new WeakMap;const Vf=Symbol("INTERNAL");var cb,db,fb,gh;class gee{constructor(e,{name:t,intent:i,usage:r,rbGroups:s}){$(this,cb,!1);$(this,db,!1);$(this,fb,!1);$(this,gh,!0);L(this,cb,!!(e&Qr.DISPLAY)),L(this,db,!!(e&Qr.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(S(this,fb))return S(this,gh);if(!S(this,gh))return!1;const{print:e,view:t}=this.usage;return S(this,cb)?(t==null?void 0:t.viewState)!=="OFF":S(this,db)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==Vf&&wn("Internal method `_setVisible` called."),L(this,fb,i),L(this,gh,t)}}cb=new WeakMap,db=new WeakMap,fb=new WeakMap,gh=new WeakMap;var ru,rn,yh,bh,hb,J1;class yee{constructor(e,t=Qr.DISPLAY){$(this,hb);$(this,ru,null);$(this,rn,new Map);$(this,yh,null);$(this,bh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,L(this,bh,e.order);for(const i of e.groups)S(this,rn).set(i.id,new gee(t,i));if(e.baseState==="OFF")for(const i of S(this,rn).values())i._setVisible(Vf,!1);for(const i of e.on)S(this,rn).get(i)._setVisible(Vf,!0);for(const i of e.off)S(this,rn).get(i)._setVisible(Vf,!1);L(this,yh,this.getHash())}}isVisible(e){if(S(this,rn).size===0)return!0;if(!e)return MS("Optional content group not defined."),!0;if(e.type==="OCG")return S(this,rn).has(e.id)?S(this,rn).get(e.id).visible:(Nt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return z(this,hb,J1).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!S(this,rn).has(t))return Nt(`Optional content group not found: ${t}`),!0;if(S(this,rn).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!S(this,rn).has(t))return Nt(`Optional content group not found: ${t}`),!0;if(!S(this,rn).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!S(this,rn).has(t))return Nt(`Optional content group not found: ${t}`),!0;if(!S(this,rn).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!S(this,rn).has(t))return Nt(`Optional content group not found: ${t}`),!0;if(S(this,rn).get(t).visible)return!1}return!0}return Nt(`Unknown optional content policy ${e.policy}.`),!0}return Nt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var s;const r=S(this,rn).get(e);if(!r){Nt(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((s=S(this,rn).get(a))==null||s._setVisible(Vf,!1,!0));r._setVisible(Vf,!!t,!0),L(this,ru,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=S(this,rn).get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}L(this,ru,null)}get hasInitialVisibility(){return S(this,yh)===null||this.getHash()===S(this,yh)}getOrder(){return S(this,rn).size?S(this,bh)?S(this,bh).slice():[...S(this,rn).keys()]:null}getGroups(){return S(this,rn).size>0?xC(S(this,rn)):null}getGroup(e){return S(this,rn).get(e)||null}getHash(){if(S(this,ru)!==null)return S(this,ru);const e=new uL;for(const[t,i]of S(this,rn))e.update(`${t}:${i.visible}`);return L(this,ru,e.hexdigest())}}ru=new WeakMap,rn=new WeakMap,yh=new WeakMap,bh=new WeakMap,hb=new WeakSet,J1=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const s=e[r];let o;if(Array.isArray(s))o=z(this,hb,J1).call(this,s);else if(S(this,rn).has(s))o=S(this,rn).get(s).visible;else return Nt(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class bee{constructor(e,{disableRange:t=!1,disableStream:i=!1}){_i(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const c=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});_i(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,s;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){_i(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new _ee(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new vee(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class _ee{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=RC(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class vee{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function See(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let f=a(t);return f=unescape(f),f=c(f),f=u(f),s(f)}if(t=o(n),t){const f=u(t);return s(f)}if(t=i("filename","i").exec(n),t){t=t[1];let f=a(t);return f=u(f),s(f)}function i(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const m=new TextDecoder(f,{fatal:!0}),g=RS(p);p=m.decode(g),e=!1}catch{}}return p}function s(f){return e&&/[\x80-\xff]/.test(f)&&(f=r("utf-8",f),e&&(f=r("iso-8859-1",f))),f}function o(f){const p=[];let m;const g=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=g.exec(f))!==null;){let[,w,A,E]=m;if(w=parseInt(w,10),w in p){if(w===0)break;continue}p[w]=[A,E]}const v=[];for(let w=0;w<p.length&&w in p;++w){let[A,E]=p[w];E=a(E),A&&(E=unescape(E),w===0&&(E=c(E))),v.push(E)}return v.join("")}function a(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let m=0;m<p.length;++m){const g=p[m].indexOf('"');g!==-1&&(p[m]=p[m].slice(0,g),p.length=m+1),p[m]=p[m].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function c(f){const p=f.indexOf("'");if(p===-1)return f;const m=f.slice(0,p),v=f.slice(p+1).replace(/^[^']*'/,"");return r(m,v)}function u(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,m,g,v){if(g==="q"||g==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,A){return String.fromCharCode(parseInt(A,16))}),r(m,v);try{v=atob(v)}catch{}return r(m,v)})}return""}function FC(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function PC({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function LC(n){const e=n.get("Content-Disposition");if(e){let t=See(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(RC(t))return t}return null}function OS(n,e){return n===404||n===0&&e.startsWith("file:")?new Od('Missing PDF "'+e+'".'):new DS(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function TL(n){return n===200||n===206}function AL(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function EL(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Nt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class kN{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=FC(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return _i(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new wee(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new Tee(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class wee{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,AL(i,this._withCredentials,this._abortController)).then(s=>{if(!TL(s.status))throw OS(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:c}=PC({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=LC(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Bd("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:EL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Tee{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${i-1}`);const o=r.url;fetch(o,AL(s,this._withCredentials,this._abortController)).then(a=>{if(!TL(a.status))throw OS(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:EL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const EA=200,CA=206;function Aee(n){const e=n.response;return typeof e!="string"?e:RS(e).buffer}class Eee{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=FC(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const s in i)r[s]=i[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=CA):r.expectedStatus=EA,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var c,u,f;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(c=i.onError)==null||c.call(i,r.status);return}const s=r.status||EA;if(!(s===EA&&i.expectedStatus===CA)&&s!==i.expectedStatus){(u=i.onError)==null||u.call(i,r.status);return}const a=Aee(r);if(s===CA){const p=r.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(p);i.onDone({begin:parseInt(m[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):(f=i.onError)==null||f.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Cee{constructor(e){this._source=e,this._manager=new Eee(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return _i(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Iee(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new xee(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Iee{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(o=>{const[a,...c]=o.split(": ");return[a,c.join(": ")]})),{allowRangeRequests:r,suggestedLength:s}=PC({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=LC(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=OS(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class xee{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=OS(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Mee=/^[a-z][a-z0-9\-+.]+:/i;function Dee(n){if(Mee.test(n))return new URL(n);const e=Tu.get("url");return new URL(e.pathToFileURL(n))}function CL(n,e,t){return n.protocol==="http:"?Tu.get("http").request(n,{headers:e},t):Tu.get("https").request(n,{headers:e},t)}class Ree{constructor(e){this.source=e,this.url=Dee(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=FC(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return _i(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Oee(this):new kee(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new Bee(this,e,t):new Nee(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class IL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Bd("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class xL{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class kee extends IL{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=r=>{if(r.statusCode===404){const c=new Od(`Missing PDF "${this._url}".`);this._storedError=c,this._headersCapability.reject(c);return}this._headersCapability.resolve(),this._setReadableStream(r);const s=new Headers(this._readableStream.headers),{allowRangeRequests:o,suggestedLength:a}=PC({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=LC(s)};this._request=CL(this._url,t,i),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class Nee extends xL{constructor(e,t,i){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${i-1}`;const s=o=>{if(o.statusCode===404){const a=new Od(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(o)};this._request=CL(this._url,r,s),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class Oee extends IL{constructor(e){super(e);const t=Tu.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Od(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class Bee extends xL{constructor(e,t,i){super(e);const r=Tu.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}const Fee=1e5,br=30,Pee=.8;var LF,su,wr,pb,mb,Yc,Ba,gb,yb,Wc,_h,vh,ou,Sh,bb,wh,Kc,_b,vb,Xc,Jc,Sb,au,Th,ol,ML,DL,Z1,is,a0,Q1,RL,kL;const mi=class mi{constructor({textContentSource:e,container:t,viewport:i}){$(this,ol);$(this,su,Promise.withResolvers());$(this,wr,null);$(this,pb,!1);$(this,mb,!!((LF=globalThis.FontInspector)!=null&&LF.enabled));$(this,Yc,null);$(this,Ba,null);$(this,gb,0);$(this,yb,0);$(this,Wc,null);$(this,_h,null);$(this,vh,0);$(this,ou,0);$(this,Sh,Object.create(null));$(this,bb,[]);$(this,wh,null);$(this,Kc,[]);$(this,_b,new WeakMap);$(this,vb,null);var c;if(e instanceof ReadableStream)L(this,wh,e);else if(typeof e=="object")L(this,wh,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');L(this,wr,L(this,_h,t)),L(this,ou,i.scale*(globalThis.devicePixelRatio||1)),L(this,vh,i.rotation),L(this,Ba,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:o,pageY:a}=i.rawDims;L(this,vb,[1,0,0,-1,-o,a+s]),L(this,yb,r),L(this,gb,s),z(c=mi,is,RL).call(c),Id(t,i),S(this,su).promise.finally(()=>{S(mi,Th).delete(this),L(this,Ba,null),L(this,Sh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=cr.platform;return jt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{S(this,Wc).read().then(({value:t,done:i})=>{if(i){S(this,su).resolve();return}S(this,Yc)??L(this,Yc,t.lang),Object.assign(S(this,Sh),t.styles),z(this,ol,ML).call(this,t.items),e()},S(this,su).reject)};return L(this,Wc,S(this,wh).getReader()),S(mi,Th).add(this),e(),S(this,su).promise}update({viewport:e,onBefore:t=null}){var s;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==S(this,vh)&&(t==null||t(),L(this,vh,r),Id(S(this,_h),{rotation:r})),i!==S(this,ou)){t==null||t(),L(this,ou,i);const o={div:null,properties:null,ctx:z(s=mi,is,a0).call(s,S(this,Yc))};for(const a of S(this,Kc))o.properties=S(this,_b).get(a),o.div=a,z(this,ol,Z1).call(this,o)}}cancel(){var t;const e=new Bd("TextLayer task cancelled.");(t=S(this,Wc))==null||t.cancel(e).catch(()=>{}),L(this,Wc,null),S(this,su).reject(e)}get textDivs(){return S(this,Kc)}get textContentItemsStr(){return S(this,bb)}static cleanup(){if(!(S(this,Th).size>0)){S(this,Xc).clear();for(const{canvas:e}of S(this,Jc).values())e.remove();S(this,Jc).clear()}}};su=new WeakMap,wr=new WeakMap,pb=new WeakMap,mb=new WeakMap,Yc=new WeakMap,Ba=new WeakMap,gb=new WeakMap,yb=new WeakMap,Wc=new WeakMap,_h=new WeakMap,vh=new WeakMap,ou=new WeakMap,Sh=new WeakMap,bb=new WeakMap,wh=new WeakMap,Kc=new WeakMap,_b=new WeakMap,vb=new WeakMap,Xc=new WeakMap,Jc=new WeakMap,Sb=new WeakMap,au=new WeakMap,Th=new WeakMap,ol=new WeakSet,ML=function(e){var r,s;if(S(this,pb))return;(s=S(this,Ba)).ctx??(s.ctx=z(r=mi,is,a0).call(r,S(this,Yc)));const t=S(this,Kc),i=S(this,bb);for(const o of e){if(t.length>Fee){Nt("Ignoring additional textDivs for performance reasons."),L(this,pb,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=S(this,wr);L(this,wr,document.createElement("span")),S(this,wr).classList.add("markedContent"),o.id!==null&&S(this,wr).setAttribute("id",`${o.id}`),a.append(S(this,wr))}else o.type==="endMarkedContent"&&L(this,wr,S(this,wr).parentNode);continue}i.push(o.str),z(this,ol,DL).call(this,o)}},DL=function(e){var w;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};S(this,Kc).push(t);const r=ot.transform(S(this,vb),e.transform);let s=Math.atan2(r[1],r[0]);const o=S(this,Sh)[e.fontName];o.vertical&&(s+=Math.PI/2);let a=S(this,mb)&&o.fontSubstitution||o.fontFamily;a=mi.fontFamilyMap.get(a)||a;const c=Math.hypot(r[2],r[3]),u=c*z(w=mi,is,kL).call(w,a,S(this,Yc));let f,p;s===0?(f=r[4],p=r[5]-u):(f=r[4]+u*Math.sin(s),p=r[5]-u*Math.cos(s));const m="calc(var(--scale-factor)*",g=t.style;S(this,wr)===S(this,_h)?(g.left=`${(100*f/S(this,yb)).toFixed(2)}%`,g.top=`${(100*p/S(this,gb)).toFixed(2)}%`):(g.left=`${m}${f.toFixed(2)}px)`,g.top=`${m}${p.toFixed(2)}px)`),g.fontSize=`${m}${(S(mi,au)*c).toFixed(2)}px)`,g.fontFamily=a,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,S(this,mb)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);A!==E&&Math.max(A,E)/Math.min(A,E)>1.5&&(v=!0)}if(v&&(i.canvasWidth=o.vertical?e.height:e.width),S(this,_b).set(t,i),S(this,Ba).div=t,S(this,Ba).properties=i,z(this,ol,Z1).call(this,S(this,Ba)),i.hasText&&S(this,wr).append(t),i.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),S(this,wr).append(A)}},Z1=function(e){var a;const{div:t,properties:i,ctx:r}=e,{style:s}=t;let o="";if(S(mi,au)>1&&(o=`scale(${1/S(mi,au)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=s,{canvasWidth:u,fontSize:f}=i;z(a=mi,is,Q1).call(a,r,f*S(this,ou),c);const{width:p}=r.measureText(t.textContent);p>0&&(o=`scaleX(${u*S(this,ou)/p}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(s.transform=o)},is=new WeakSet,a0=function(e=null){let t=S(this,Jc).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),S(this,Jc).set(e,t),S(this,Sb).set(t,{size:0,family:""})}return t},Q1=function(e,t,i){const r=S(this,Sb).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},RL=function(){if(S(this,au)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),L(this,au,e.getBoundingClientRect().height),e.remove()},kL=function(e,t){const i=S(this,Xc).get(e);if(i)return i;const r=z(this,is,a0).call(this,t);r.canvas.width=r.canvas.height=br,z(this,is,Q1).call(this,r,br,e);const s=r.measureText("");let o=s.fontBoundingBoxAscent,a=Math.abs(s.fontBoundingBoxDescent);if(o){const f=o/(o+a);return S(this,Xc).set(e,f),r.canvas.width=r.canvas.height=0,f}r.strokeStyle="red",r.clearRect(0,0,br,br),r.strokeText("g",0,0);let c=r.getImageData(0,0,br,br).data;a=0;for(let f=c.length-1-3;f>=0;f-=4)if(c[f]>0){a=Math.ceil(f/4/br);break}r.clearRect(0,0,br,br),r.strokeText("A",0,br),c=r.getImageData(0,0,br,br).data,o=0;for(let f=0,p=c.length;f<p;f+=4)if(c[f]>0){o=br-Math.floor(f/4/br);break}r.canvas.width=r.canvas.height=0;const u=o?o/(o+a):Pee;return S(this,Xc).set(e,u),u},$(mi,is),$(mi,Xc,new Map),$(mi,Jc,new Map),$(mi,Sb,new WeakMap),$(mi,au,null),$(mi,Th,new Set);let Fy=mi;class Py{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(s){var c;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(Py.shouldBuildText(a))(c=s==null?void 0:s.attributes)!=null&&c.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const u of s.children)r(u)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Lee=65536,Uee=100,zee=5e3,Vee=Zi?QQ:XQ,jee=Zi?eee:pL,qee=Zi?ZQ:JQ,Hee=Zi?tee:bL;function Gee(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new eE,{docId:t}=e,i=n.url?$ee(n.url):null,r=n.data?Yee(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof NL?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Lee;let f=n.worker instanceof Qf?n.worker:null;const p=n.verbosity,m=typeof n.docBaseUrl=="string"&&!NS(n.docBaseUrl)?n.docBaseUrl:null,g=typeof n.cMapUrl=="string"?n.cMapUrl:null,v=n.cMapPacked!==!1,w=n.CMapReaderFactory||jee,A=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,E=n.StandardFontDataFactory||Hee,M=n.stopAtErrors!==!0,I=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,R=n.isEvalSupported!==!1,D=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Zi,C=typeof n.isChrome=="boolean"?n.isChrome:!cr.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),k=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,j=typeof n.disableFontFace=="boolean"?n.disableFontFace:Zi,U=n.fontExtraProperties===!0,F=n.enableXfa===!0,J=n.ownerDocument||globalThis.document,G=n.disableRange===!0,ee=n.disableStream===!0,oe=n.disableAutoFetch===!0,me=n.pdfBug===!0,Q=n.CanvasFactory||Vee,V=n.FilterFactory||qee,te=n.enableHWA===!0,xe=c?c.length:n.length??NaN,N=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Zi&&!j,ce=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:w===pL&&E===bL&&g&&A&&ly(g,document.baseURI)&&ly(A,document.baseURI);n.canvasFactory&&vN("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&vN("`filterFactory`-instance option, please use `FilterFactory` instead.");const Me=null;IQ(p);const q={canvasFactory:new Q({ownerDocument:J,enableHWA:te}),filterFactory:new V({docId:t,ownerDocument:J}),cMapReaderFactory:ce?null:new w({baseUrl:g,isCompressed:v}),standardFontDataFactory:ce?null:new E({baseUrl:A})};if(!f){const re={verbosity:p,port:Qa.workerPort};f=re.port?Qf.fromPort(re):new Qf(re),e._worker=f}const Re={docId:t,apiVersion:"4.8.69",data:r,password:a,disableAutoFetch:oe,rangeChunkSize:u,length:xe,docBaseUrl:m,enableXfa:F,evaluatorOptions:{maxImageSize:I,disableFontFace:j,ignoreErrors:M,isEvalSupported:R,isOffscreenCanvasSupported:D,isChrome:C,canvasMaxAreaInBytes:k,fontExtraProperties:U,useSystemFonts:N,cMapUrl:ce?g:null,standardFontDataUrl:ce?A:null}},je={disableFontFace:j,fontExtraProperties:U,ownerDocument:J,pdfBug:me,styleElement:Me,loadingParams:{disableAutoFetch:oe,enableXfa:F}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const re=f.messageHandler.sendWithPromise("GetDocRequest",Re,r?[r.buffer]:null);let ae;if(c)ae=new bee(c,{disableRange:G,disableStream:ee});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let de;Zi?de=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&ly(i)?kN:Ree:de=ly(i)?kN:Cee,ae=new de({url:i,length:xe,httpHeaders:s,withCredentials:o,rangeChunkSize:u,disableRange:G,disableStream:ee})}return re.then(de=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const fe=new my(t,de,f.port),Pe=new Jee(fe,e,ae,je,q);e._transport=Pe,fe.send("Ready",null)})}).catch(e._capability.reject),e}function $ee(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Zi&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Yee(n){if(Zi&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return RS(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function NN(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var aS;const lS=class lS{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${rr(lS,aS)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};aS=new WeakMap,$(lS,aS,0);let eE=lS;class NL{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){wn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Wee{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var lu,Fa,ws,jf,l0;class Kee{constructor(e,t,i,r=!1){$(this,ws);$(this,lu,null);$(this,Fa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new _N:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new OL,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new u_({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=$l.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:f=null,isEditing:p=!1}){var R,D;(R=this._stats)==null||R.time("Overall");const m=this._transport.getRenderingIntent(i,r,f,p),{renderingIntent:g,cacheKey:v}=m;L(this,Fa,!1),z(this,ws,l0).call(this),a||(a=this._transport.getOptionalContentConfig(g));let w=this._intentStates.get(v);w||(w=Object.create(null),this._intentStates.set(v,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const A=!!(g&Qr.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(m));const E=C=>{var k;w.renderTasks.delete(M),(this._maybeCleanupAfterRender||A)&&L(this,Fa,!0),z(this,ws,jf).call(this,!A),C?(M.capability.reject(C),this._abortOperatorList({intentState:w,reason:C instanceof Error?C:new Error(C)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new nE({callback:E,params:{canvasContext:e,viewport:t,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:u});(w.renderTasks||(w.renderTasks=new Set)).add(M);const I=M.task;return Promise.all([w.displayReadyCapability.promise,a]).then(([C,k])=>{var j;if(this.destroyed){E();return}if((j=this._stats)==null||j.time("Rendering"),!(k.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:C,optionalContentConfig:k}),M.operatorListChanged()}).catch(E),I}getOperatorList({intent:e="display",annotationMode:t=$l.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var u;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,i,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Py.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function s(){o.read().then(function({value:c,done:u}){if(u){i(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),s()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),L(this,Fa,!1),z(this,ws,l0).call(this),Promise.all(e)}cleanup(e=!1){L(this,Fa,!0);const t=z(this,ws,jf).call(this,!1);return e&&t&&this._stats&&(this._stats=new _N),t}_startRenderPage(e,t){var r,s;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&z(this,ws,jf).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:o}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const f=()=>{c.read().then(({value:p,done:m})=>{if(m){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,u),f())},p=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const m of u.renderTasks)m.operatorListChanged();z(this,ws,jf).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(p);else if(u.opListReadCapability)u.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof DC){let r=Uee;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Bd(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}lu=new WeakMap,Fa=new WeakMap,ws=new WeakSet,jf=function(e=!1){if(z(this,ws,l0).call(this),!S(this,Fa)||this.destroyed)return!1;if(e)return L(this,lu,setTimeout(()=>{L(this,lu,null),z(this,ws,jf).call(this,!1)},zee)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),L(this,Fa,!1),!0},l0=function(){S(this,lu)&&(clearTimeout(S(this,lu)),L(this,lu,null))};var Pa,uS;class Xee{constructor(){$(this,Pa,new Map);$(this,uS,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};S(this,uS).then(()=>{for(const[r]of S(this,Pa))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){Nt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}S(this,Pa).set(t,r)}removeEventListener(e,t){const i=S(this,Pa).get(t);i==null||i(),S(this,Pa).delete(t)}terminate(){for(const[,e]of S(this,Pa))e==null||e();S(this,Pa).clear()}}Pa=new WeakMap,uS=new WeakMap;var cS,Zc,Qc,Ah,u0,Eh,c0;const In=class In{constructor({name:e=null,port:t=null,verbosity:i=xQ()}={}){$(this,Ah);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=S(In,Qc))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(S(In,Qc)||L(In,Qc,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Zi?Promise.all([Tu.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new my("main","worker",e),this._messageHandler.on("ready",function(){}),z(this,Ah,u0).call(this)}_initialize(){if(S(In,Zc)||S(In,Eh,c0)){this._setupFakeWorker();return}let{workerSrc:e}=In;try{In._isSameOrigin(window.location.href,e)||(e=In._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new my("main","worker",t),r=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",a=>{if(s.abort(),this.destroyed||!a){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,z(this,Ah,u0).call(this)}),i.on("ready",a=>{if(s.abort(),this.destroyed){r();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{MS("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){S(In,Zc)||(Nt("Setting up fake worker."),L(In,Zc,!0)),In._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new Xee;this._port=t;const i=`fake${rr(In,cS)._++}`,r=new my(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new my(i,i+"_worker",t),z(this,Ah,u0).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=S(In,Qc))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=S(this,Qc))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new In(e)}static get workerSrc(){if(Qa.workerSrc)return Qa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return jt(this,"_setupFakeWorkerGlobal",(async()=>S(this,Eh,c0)?S(this,Eh,c0):(await import(this.workerSrc)).WorkerMessageHandler)())}};cS=new WeakMap,Zc=new WeakMap,Qc=new WeakMap,Ah=new WeakSet,u0=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Eh=new WeakSet,c0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},$(In,Eh),$(In,cS,0),$(In,Zc,!1),$(In,Qc),Zi&&(L(In,Zc,!0),Qa.workerSrc||(Qa.workerSrc="./pdf.worker.mjs")),In._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},In._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let Qf=In;var La,Ro,Ch,Ih,ko,ed,gy;class Jee{constructor(e,t,i,r,s){$(this,ed);$(this,La,new Map);$(this,Ro,new Map);$(this,Ch,new Map);$(this,Ih,new Map);$(this,ko,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new OL,this.fontLoader=new WQ({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return jt(this,"annotationStorage",new OC)}getRenderingIntent(e,t=$l.ENABLE,i=null,r=!1,s=!1){let o=Qr.DISPLAY,a=q1;switch(e){case"any":o=Qr.ANY;break;case"display":break;case"print":o=Qr.PRINT;break;default:Nt(`getRenderingIntent - invalid intent: ${e}`)}const c=o&Qr.PRINT&&i instanceof dL?i:this.annotationStorage;switch(t){case $l.DISABLE:o+=Qr.ANNOTATIONS_DISABLE;break;case $l.ENABLE:break;case $l.ENABLE_FORMS:o+=Qr.ANNOTATIONS_FORMS;break;case $l.ENABLE_STORAGE:o+=Qr.ANNOTATIONS_STORAGE,a=c.serializable;break;default:Nt(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=Qr.IS_EDITING),s&&(o+=Qr.OPLIST);const{ids:u,hash:f}=c.modifiedIds,p=[o,a.hash,f];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=S(this,ko))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of S(this,Ro).values())e.push(r._destroy());S(this,Ro).clear(),S(this,Ch).clear(),S(this,Ih).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),S(this,La).clear(),this.filterFactory.destroy(),Fy.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Bd("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{_i(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){r.close();return}_i(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:o}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(i,r)=>{_i(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){r.close();return}_i(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{s.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new Wee(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new S1(i.message,i.code);break;case"InvalidPDFException":r=new PP(i.message);break;case"MissingPDFException":r=new Od(i.message);break;case"UnexpectedResponseException":r=new DS(i.message,i.status);break;case"UnknownErrorException":r=new w1(i.message,i.details);break;default:wn("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(L(this,ko,Promise.withResolvers()),t.onPassword){const r=s=>{s instanceof Error?S(this,ko).reject(s):S(this,ko).resolve({password:s})};try{t.onPassword(r,i.code)}catch(s){S(this,ko).reject(s)}}else S(this,ko).reject(new S1(i.message,i.code));return S(this,ko).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;S(this,Ro).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in s){const g=s.error;Nt(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}const f=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(g,v)=>globalThis.FontInspector.fontAdded(g,v):null,p=new KQ(s,{disableFontFace:a,inspectFont:f});this.fontLoader.bind(p).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!c&&p.data&&(p.data=null),this.commonObjs.resolve(i,p)});break;case"CopyLocalImage":const{imageRef:m}=s;_i(m,"The imageRef must be defined.");for(const g of S(this,Ro).values())for(const[,v]of g.objs)if((v==null?void 0:v.ref)===m)return v.dataLen?(this.commonObjs.resolve(i,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,o])=>{var c;if(this.destroyed)return;const a=S(this,Ro).get(r);if(!a.objs.has(i)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(s){case"Image":a.objs.resolve(i,o),(o==null?void 0:o.dataLen)>TQ&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Nt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=S(this,Ch).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&S(this,Ih).set(s.refStr,e);const o=new Kee(t,s,this,this._params.pdfBug);return S(this,Ro).set(t,o),o});return S(this,Ch).set(t,r),r}getPageIndex(e){return NN(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return z(this,ed,gy).call(this,"GetFieldObjects")}hasJSActions(){return z(this,ed,gy).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return z(this,ed,gy).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return z(this,ed,gy).call(this,"GetOptionalContentConfig").then(t=>new yee(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=S(this,La).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,o;return{info:r[0],metadata:r[1]?new mee(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return S(this,La).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of S(this,Ro).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),S(this,La).clear(),this.filterFactory.destroy(!0),Fy.cleanup()}}cachedPageNumber(e){if(!NN(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return S(this,Ih).get(t)??null}}La=new WeakMap,Ro=new WeakMap,Ch=new WeakMap,Ih=new WeakMap,ko=new WeakMap,ed=new WeakSet,gy=function(e,t=null){const i=S(this,La).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return S(this,La).set(e,r),r};const Vv=Symbol("INITIAL_DATA");var Ws,wb,tE;class OL{constructor(){$(this,wb);$(this,Ws,Object.create(null))}get(e,t=null){if(t){const r=z(this,wb,tE).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=S(this,Ws)[e];if(!i||i.data===Vv)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=S(this,Ws)[e];return!!t&&t.data!==Vv}resolve(e,t=null){const i=z(this,wb,tE).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in S(this,Ws)){const{data:i}=S(this,Ws)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}L(this,Ws,Object.create(null))}*[Symbol.iterator](){for(const e in S(this,Ws)){const{data:t}=S(this,Ws)[e];t!==Vv&&(yield[e,t])}}}Ws=new WeakMap,wb=new WeakSet,tE=function(e){var t;return(t=S(this,Ws))[e]||(t[e]={...Promise.withResolvers(),data:Vv})};var uu;class Zee{constructor(e){$(this,uu,null);L(this,uu,e),this.onContinue=null}get promise(){return S(this,uu).capability.promise}cancel(e=0){S(this,uu).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=S(this,uu).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=S(this,uu);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}uu=new WeakMap;var cu,td;const Ec=class Ec{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:m=null}){$(this,cu,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=p,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Zee(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,c;if(this.cancelled)return;if(this._canvas){if(S(Ec,td).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");S(Ec,td).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:o}=this.params;this.gfx=new Zf(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),S(this,cu)&&(window.cancelAnimationFrame(S(this,cu)),L(this,cu,null)),S(Ec,td).delete(this._canvas),this.callback(e||new DC(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?L(this,cu,window.requestAnimationFrame(()=>{L(this,cu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),S(Ec,td).delete(this._canvas),this.callback())))}};cu=new WeakMap,td=new WeakMap,$(Ec,td,new WeakSet);let nE=Ec;const Qee="4.8.69",ete="3634dab10";function ON(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function km(n){return Math.max(0,Math.min(255,255*n))}class BN{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=km(e),[e,e,e]}static G_HTML([e]){const t=ON(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(km)}static RGB_HTML(e){return`#${e.map(ON).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[km(1-Math.min(1,e+r)),km(1-Math.min(1,i+r)),km(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,s=1-t,o=1-i,a=Math.min(r,s,o);return["CMYK",r,s,o,a]}}class tte{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){wn("Abstract method `_createSVG` called.")}}class UC extends tte{_createSVG(e){return document.createElementNS(Ea,e)}}class BL{static setupStorage(e,t,i,r,s){const o=r.getValue(t,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&s.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){var p,m;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:s,linkService:i});const a=s!=="richText",c=e.div;if(c.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=g}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);o.append(g),a&&Py.shouldBuildText(r.name)&&u.push(g)}return{textDivs:u}}const f=[[r,-1,o]];for(;f.length>0;){const[g,v,w]=f.at(-1);if(v+1===g.children.length){f.pop();continue}const A=g.children[++f.at(-1)[1]];if(A===null)continue;const{name:E}=A;if(E==="#text"){const I=document.createTextNode(A.value);u.push(I),w.append(I);continue}const M=(p=A==null?void 0:A.attributes)!=null&&p.xmlns?document.createElementNS(A.attributes.xmlns,E):document.createElement(E);if(w.append(M),A.attributes&&this.setAttributes({html:M,element:A,storage:t,intent:s,linkService:i}),((m=A.children)==null?void 0:m.length)>0)f.push([A,-1,M]);else if(A.value){const I=document.createTextNode(A.value);a&&Py.shouldBuildText(E)&&u.push(I),M.append(I)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const d_=1e3,nte=9,Md=new WeakSet;function tl(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class ite{static create(e){switch(e.data.annotationType){case pi.LINK:return new FL(e);case pi.TEXT:return new rte(e);case pi.WIDGET:switch(e.data.fieldType){case"Tx":return new ste(e);case"Btn":return e.data.radioButton?new UL(e):e.data.checkBox?new ate(e):new lte(e);case"Ch":return new ute(e);case"Sig":return new ote(e)}return new Fd(e);case pi.POPUP:return new rE(e);case pi.FREETEXT:return new HL(e);case pi.LINE:return new dte(e);case pi.SQUARE:return new fte(e);case pi.CIRCLE:return new hte(e);case pi.POLYLINE:return new GL(e);case pi.CARET:return new mte(e);case pi.INK:return new zC(e);case pi.POLYGON:return new pte(e);case pi.HIGHLIGHT:return new $L(e);case pi.UNDERLINE:return new gte(e);case pi.SQUIGGLY:return new yte(e);case pi.STRIKEOUT:return new bte(e);case pi.STAMP:return new YL(e);case pi.FILEATTACHMENT:return new _te(e);default:return new Zn(e)}}}var nd,xh,Mh,Tb,iE;const yI=class yI{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){$(this,Tb);$(this,nd,null);$(this,xh,!1);$(this,Mh,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return yI._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;S(this,nd)||L(this,nd,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&z(this,Tb,iE).call(this,t),(i=S(this,Mh))==null||i.popup.updateEdited(e)}resetEdited(){var e;S(this,nd)&&(z(this,Tb,iE).call(this,S(this,nd).rect),(e=S(this,Mh))==null||e.popup.resetEdited(),L(this,nd,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Fd||(s.tabIndex=d_);const{style:o}=s;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof rE){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,s),s}const{width:a,height:c}=tl(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(w>0||A>0){const M=`calc(${w}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;o.borderRadius=M}else if(this instanceof UL){const M=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=M}switch(t.borderStyle.style){case Dm.SOLID:o.borderStyle="solid";break;case Dm.DASHED:o.borderStyle="dashed";break;case Dm.BEVELED:Nt("Unimplemented border style: beveled");break;case Dm.INSET:Nt("Unimplemented border style: inset");break;case Dm.UNDERLINE:o.borderBottomStyle="solid";break}const E=t.borderColor||null;E?(L(this,xh,!0),o.borderColor=ot.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):o.borderWidth=0}const u=ot.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:f,pageHeight:p,pageX:m,pageY:g}=r.rawDims;o.left=`${100*(u[0]-m)/f}%`,o.top=`${100*(u[1]-g)/p}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(o.width=`${100*a/f}%`,o.height=`${100*c/p}%`):this.setRotation(v,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:o}=tl(this.data.rect);let a,c;e%180===0?(a=100*s/i,c=100*o/r):(a=100*o/i,c=100*s/r),t.style.width=`${a}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const s=r.detail[t],o=s[0],a=s.slice(1);r.target.style[i]=BN[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:BN[`${o}_rgb`](a)})};return jt(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||i[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,s]of Object.entries(t)){const o=i[r];if(o){const a={detail:{[r]:s},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,s]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,A,E,M]=e.subarray(2,6);if(r===w&&s===A&&t===E&&i===M)return}const{style:o}=this.container;let a;if(S(this,xh)){const{borderColor:w,borderWidth:A}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const c=r-t,u=s-i,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0);const m=f.createElement("defs");p.append(m);const g=f.createElement("clipPath"),v=`clippath_${this.data.id}`;g.setAttribute("id",v),g.setAttribute("clipPathUnits","objectBoundingBox"),m.append(g);for(let w=2,A=e.length;w<A;w+=8){const E=e[w],M=e[w+1],I=e[w+2],R=e[w+3],D=f.createElement("rect"),C=(I-t)/c,k=(s-M)/u,j=(E-I)/c,U=(M-R)/u;D.setAttribute("x",C),D.setAttribute("y",k),D.setAttribute("width",j),D.setAttribute("height",U),g.append(D),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${k}" width="${j}" height="${U}"/>`)}S(this,xh)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(p),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:e}=this,t=L(this,Mh,new rE({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){wn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:o,exportValues:a}of r){if(s===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Md.has(u)){Nt(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,o=r.getAttribute("data-element-id");o!==t&&Md.has(r)&&i.push({id:o,exportValue:s,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};nd=new WeakMap,xh=new WeakMap,Mh=new WeakMap,Tb=new WeakSet,iE=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:c}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:f}=tl(e);t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+c)/o}%`,r===0?(t.width=`${100*u/s}%`,t.height=`${100*f/o}%`):this.setRotation(r)};let Zn=yI;var ts,vc,PL,LL;class FL extends Zn{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});$(this,ts);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action),s=!0):t.attachment?(z(this,ts,PL).call(this,r,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(z(this,ts,LL).call(this,r,t.setOCGState),s=!0):t.dest?(this._bindLink(r,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&z(this,ts,vc).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),z(this,ts,vc).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const o=r.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),z(this,ts,vc).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),z(this,ts,vc).call(this),!this._fieldObjects){Nt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var p;r==null||r();const{fields:s,refs:o,include:a}=i,c=[];if(s.length!==0||o.length!==0){const m=new Set(o);for(const g of s){const v=this._fieldObjects[g]||[];for(const{id:w}of v)m.add(w)}for(const g of Object.values(this._fieldObjects))for(const v of g)m.has(v.id)===a&&c.push(v)}else for(const m of Object.values(this._fieldObjects))c.push(...m);const u=this.annotationStorage,f=[];for(const m of c){const{id:g}=m;switch(f.push(g),m.type){case"text":{const w=m.defaultValue||"";u.setValue(g,{value:w});break}case"checkbox":case"radiobutton":{const w=m.defaultValue===m.exportValues;u.setValue(g,{value:w});break}case"combobox":case"listbox":{const w=m.defaultValue||"";u.setValue(g,{value:w});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!Md.has(v)){Nt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}ts=new WeakSet,vc=function(){this.container.setAttribute("data-internal-link","")},PL=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(i.content,i.filename,r),!1},z(this,ts,vc).call(this)},LL=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),z(this,ts,vc).call(this)};class rte extends Zn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Fd extends Zn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return cr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,s){i.includes("mouse")?e.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{var a;if(i==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(o)}}))})}_setEventListeners(e,t,i,r){var s,o,a;for(const[c,u]of i)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ot.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||nte,s=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),f=Math.round(u/(SA*r))||1,p=u/f;o=Math.min(r,c(p/SA))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,c(u/SA))}s.fontSize=`calc(${o}px * var(--scale-factor))`,s.color=ot.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class ste extends Fd{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),s.setValue(o.id,{[r]:i})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const f={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Md.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=d_,this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",m=>{e.setValue(t,{value:m.target.value}),this.setPropertyOnSiblings(i,"value",m.target.value,"value"),f.formattedValue=null}),i.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue??"";i.value=f.userValue=g,f.formattedValue=null});let p=m=>{const{formattedValue:g}=f;g!=null&&(m.target.value=g),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",g=>{var w;if(f.focused)return;const{target:v}=g;f.userValue&&(v.value=f.userValue),f.lastCommittedValue=v.value,f.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(f.focused=!0)}),i.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(w){f.userValue=w.detail.value??"",e.setValue(t,{value:f.userValue.toString()}),w.target.value=f.userValue},formattedValue(w){const{formattedValue:A}=w.detail;f.formattedValue=A,A!=null&&w.target!==document.activeElement&&(w.target.value=A),e.setValue(t,{formattedValue:A})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var I;const{charLimit:A}=w.detail,{target:E}=w;if(A===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",A);let M=f.userValue;!M||M.length<=A||(M=M.slice(0,A),E.value=f.userValue=M,e.setValue(t,{value:M}),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),i.addEventListener("keydown",g=>{var A;f.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(f.commitKey=3),v===-1)return;const{value:w}=g.target;f.lastCommittedValue!==w&&(f.lastCommittedValue=w,f.userValue=w,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const m=p;p=null,i.addEventListener("blur",g=>{var w,A;if(!f.focused||!g.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(f.focused=!1);const{value:v}=g.target;f.userValue=v,f.lastCommittedValue!==v&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:f.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),m(g)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",g=>{var D;f.lastCommittedValue=null;const{data:v,target:w}=g,{value:A,selectionStart:E,selectionEnd:M}=w;let I=E,R=M;switch(g.inputType){case"deleteWordBackward":{const C=A.substring(0,E).match(/\w*[^\w]*$/);C&&(I-=C[0].length);break}case"deleteWordForward":{const C=A.substring(E).match(/^[^\w]*\w*/);C&&(R+=C[0].length);break}case"deleteContentBackward":E===M&&(I-=1);break;case"deleteContentForward":E===M&&(R+=1);break}g.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:v||"",willCommit:!1,selStart:I,selEnd:R}})}),this._setEventListeners(i,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(p&&i.addEventListener("blur",p),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ote extends Fd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class ate extends Fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Md.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=d_,s.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,i)){const f=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=f),e.setValue(u.id,{value:f})}e.setValue(i,{value:c})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class UL extends Fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(Md.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=d_,s.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:c})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const f=o===u.detail.value;for(const p of this._getElementsByName(u.target.name)){const m=f&&p.id===i;p.domElement&&(p.domElement.checked=m),e.setValue(p.id,{value:m})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class lte extends FL{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class ute extends Fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Md.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=d_;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const m of r.options)m.selected=m.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,i.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),s=!1),r.append(p)}let o=null;if(s){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),r.prepend(f),o=()=>{f.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=f=>{const p=f?"value":"textContent",{options:m,multiple:g}=r;return g?Array.prototype.filter.call(m,v=>v.selected).map(v=>v[p]):m.selectedIndex===-1?null:m[m.selectedIndex][p]};let c=a(!1);const u=f=>{const p=f.target.options;return Array.prototype.map.call(p,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",f=>{const p={value(m){o==null||o();const g=m.detail.value,v=new Set(Array.isArray(g)?g:[g]);for(const w of r.options)w.selected=v.has(w.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(m){r.multiple=!0},remove(m){const g=r.options,v=m.detail.remove;g[v].selected=!1,r.remove(v),g.length>0&&Array.prototype.findIndex.call(g,A=>A.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:a(!0),items:u(m)}),c=a(!1)},clear(m){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(m){const{index:g,displayValue:v,exportValue:w}=m.detail.insert,A=r.children[g],E=document.createElement("option");E.textContent=v,E.value=w,A?A.before(E):r.append(E),e.setValue(t,{value:a(!0),items:u(m)}),c=a(!1)},items(m){const{items:g}=m.detail;for(;r.length!==0;)r.remove(0);for(const v of g){const{displayValue:w,exportValue:A}=v,E=document.createElement("option");E.textContent=w,E.value=A,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(m)}),c=a(!1)},indices(m){const g=new Set(m.detail.indices);for(const v of m.target.options)v.selected=g.has(v.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(p,f)}),r.addEventListener("input",f=>{var g;const p=a(!0),m=a(!1);e.setValue(t,{value:p}),f.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:m,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):r.addEventListener("input",function(f){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class rE extends Zn{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:Zn._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new cte({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${MC}${i}`).join(",")),this.container}}var Dh,dS,fS,Rh,id,jn,Ua,kh,Ab,Eb,Nh,za,Ks,Va,Cb,ja,Ib,rd,sd,fn,d0,sE,zL,VL,jL,qL,f0,h0,oE;class cte{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:s,contentsObj:o,richText:a,parent:c,rect:u,parentRect:f,open:p}){$(this,fn);$(this,Dh,z(this,fn,jL).bind(this));$(this,dS,z(this,fn,oE).bind(this));$(this,fS,z(this,fn,h0).bind(this));$(this,Rh,z(this,fn,f0).bind(this));$(this,id,null);$(this,jn,null);$(this,Ua,null);$(this,kh,null);$(this,Ab,null);$(this,Eb,null);$(this,Nh,null);$(this,za,!1);$(this,Ks,null);$(this,Va,null);$(this,Cb,null);$(this,ja,null);$(this,Ib,null);$(this,rd,null);$(this,sd,!1);var m;L(this,jn,e),L(this,Ib,r),L(this,Ua,o),L(this,ja,a),L(this,Eb,c),L(this,id,t),L(this,Cb,u),L(this,Nh,f),L(this,Ab,i),L(this,kh,kC.toDateObject(s)),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",S(this,Rh)),g.addEventListener("mouseenter",S(this,fS)),g.addEventListener("mouseleave",S(this,dS)),g.classList.add("popupTriggerArea");for(const g of i)(m=g.container)==null||m.addEventListener("keydown",S(this,Dh));S(this,jn).hidden=!0,p&&z(this,fn,f0).call(this)}render(){if(S(this,Ks))return;const e=L(this,Ks,document.createElement("div"));if(e.className="popup",S(this,id)){const s=e.style.outlineColor=ot.makeHexColor(...S(this,id));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=ot.makeHexColor(...S(this,id).map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=S(this,Ib),e.append(t),S(this,kh)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:S(this,kh).valueOf()})),t.append(s)}const r=S(this,fn,d0);if(r)BL.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(S(this,Ua));e.append(s)}S(this,jn).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,o=r.length;s<o;++s){const a=r[s];i.append(document.createTextNode(a)),s<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;S(this,rd)||L(this,rd,{contentsObj:S(this,Ua),richText:S(this,ja)}),e&&L(this,Va,null),t&&(L(this,ja,z(this,fn,VL).call(this,t)),L(this,Ua,null)),(i=S(this,Ks))==null||i.remove(),L(this,Ks,null)}resetEdited(){var e;S(this,rd)&&({contentsObj:rr(this,Ua)._,richText:rr(this,ja)._}=S(this,rd),L(this,rd,null),(e=S(this,Ks))==null||e.remove(),L(this,Ks,null),L(this,Va,null))}forceHide(){L(this,sd,this.isVisible),S(this,sd)&&(S(this,jn).hidden=!0)}maybeShow(){S(this,sd)&&(S(this,Ks)||z(this,fn,h0).call(this),L(this,sd,!1),S(this,jn).hidden=!1)}get isVisible(){return S(this,jn).hidden===!1}}Dh=new WeakMap,dS=new WeakMap,fS=new WeakMap,Rh=new WeakMap,id=new WeakMap,jn=new WeakMap,Ua=new WeakMap,kh=new WeakMap,Ab=new WeakMap,Eb=new WeakMap,Nh=new WeakMap,za=new WeakMap,Ks=new WeakMap,Va=new WeakMap,Cb=new WeakMap,ja=new WeakMap,Ib=new WeakMap,rd=new WeakMap,sd=new WeakMap,fn=new WeakSet,d0=function(){const e=S(this,ja),t=S(this,Ua);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&S(this,ja).html||null},sE=function(){var e,t,i;return((i=(t=(e=S(this,fn,d0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},zL=function(){var e,t,i;return((i=(t=(e=S(this,fn,d0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},VL=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:S(this,fn,zL),fontSize:S(this,fn,sE)?`calc(${S(this,fn,sE)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return i},jL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&S(this,za))&&z(this,fn,f0).call(this)},qL=function(){if(S(this,Va)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:s}}}=S(this,Eb);let o=!!S(this,Nh),a=o?S(this,Nh):S(this,Cb);for(const v of S(this,Ab))if(!a||ot.intersect(v.data.rect,a)!==null){a=v.data.rect,o=!0;break}const c=ot.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),f=o?a[2]-a[0]+5:0,p=c[0]+f,m=c[1];L(this,Va,[100*(p-r)/t,100*(m-s)/i]);const{style:g}=S(this,jn);g.left=`${S(this,Va)[0]}%`,g.top=`${S(this,Va)[1]}%`},f0=function(){L(this,za,!S(this,za)),S(this,za)?(z(this,fn,h0).call(this),S(this,jn).addEventListener("click",S(this,Rh)),S(this,jn).addEventListener("keydown",S(this,Dh))):(z(this,fn,oE).call(this),S(this,jn).removeEventListener("click",S(this,Rh)),S(this,jn).removeEventListener("keydown",S(this,Dh)))},h0=function(){S(this,Ks)||this.render(),this.isVisible?S(this,za)&&S(this,jn).classList.add("focused"):(z(this,fn,qL).call(this),S(this,jn).hidden=!1,S(this,jn).style.zIndex=parseInt(S(this,jn).style.zIndex)+1e3)},oE=function(){S(this,jn).classList.remove("focused"),!(S(this,za)||!this.isVisible)&&(S(this,jn).hidden=!0,S(this,jn).style.zIndex=parseInt(S(this,jn).style.zIndex)-1e3)};class HL extends Zn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=xt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var xb;class dte extends Zn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,xb,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=tl(t.rect),s=this.svgFactory.create(i,r,!0),o=L(this,xb,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,xb)}addHighlightArea(){this.container.classList.add("highlightArea")}}xb=new WeakMap;var Mb;class fte extends Zn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,Mb,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=tl(t.rect),s=this.svgFactory.create(i,r,!0),o=t.borderStyle.width,a=L(this,Mb,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,Mb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mb=new WeakMap;var Db;class hte extends Zn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,Db,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=tl(t.rect),s=this.svgFactory.create(i,r,!0),o=t.borderStyle.width,a=L(this,Db,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",r/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,Db)}addHighlightArea(){this.container.classList.add("highlightArea")}}Db=new WeakMap;var Rb;class GL extends Zn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,Rb,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:s}}=this;if(!i)return this.container;const{width:o,height:a}=tl(t),c=this.svgFactory.create(o,a,!0);let u=[];for(let p=0,m=i.length;p<m;p+=2){const g=i[p]-t[0],v=t[3]-i[p+1];u.push(`${g},${v}`)}u=u.join(" ");const f=L(this,Rb,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",u),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),c.append(f),this.container.append(c),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return S(this,Rb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rb=new WeakMap;class pte extends GL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mte extends Zn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var kb;class zC extends Zn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,kb,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?xt.HIGHLIGHT:xt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:r,popupRef:s}}=this,{width:o,height:a}=tl(t),c=this.svgFactory.create(o,a,!0);for(const u of i){let f=[];for(let m=0,g=u.length;m<g;m+=2){const v=u[m]-t[0],w=t[3]-u[m+1];f.push(`${v},${w}`)}f=f.join(" ");const p=this.svgFactory.createElement(this.svgElementName);S(this,kb).push(p),p.setAttribute("points",f),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),c.append(p)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return S(this,kb)}addHighlightArea(){this.container.classList.add("highlightArea")}}kb=new WeakMap;class $L extends Zn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class gte extends Zn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class yte extends Zn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class bte extends Zn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class YL extends Zn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Nb,Ob,aE;class _te extends Zn{constructor(t){var r;super(t,{isRenderable:!0});$(this,Ob);$(this,Nb,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",z(this,Ob,aE).bind(this)),L(this,Nb,r);const{isMac:s}=cr.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&z(this,Ob,aE).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return S(this,Nb)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nb=new WeakMap,Ob=new WeakSet,aE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Bb,od,ad,Fb,Dd,WL,lE;class vte{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:o,structTreeLayer:a}){$(this,Dd);$(this,Bb,null);$(this,od,null);$(this,ad,new Map);$(this,Fb,null);this.div=e,L(this,Bb,t),L(this,od,i),L(this,Fb,a||null),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return S(this,ad).size>0}async render(e){var o;const{annotations:t}=e,i=this.div;Id(i,this.viewport);const r=new Map,s={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new UC,annotationStorage:e.annotationStorage||new OC,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const c=a.annotationType===pi.POPUP;if(c){const p=r.get(a.id);if(!p)continue;s.elements=p}else{const{width:p,height:m}=tl(a.rect);if(p<=0||m<=0)continue}s.data=a;const u=ite.create(s);if(!u.isRenderable)continue;if(!c&&a.popupRef){const p=r.get(a.popupRef);p?p.push(u):r.set(a.popupRef,[u])}const f=u.render();a.hidden&&(f.style.visibility="hidden"),await z(this,Dd,WL).call(this,f,a.id),u._isEditable&&(S(this,ad).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}z(this,Dd,lE).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Id(t,{rotation:e.rotation}),z(this,Dd,lE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(S(this,ad).values())}getEditableAnnotation(e){return S(this,ad).get(e)}}Bb=new WeakMap,od=new WeakMap,ad=new WeakMap,Fb=new WeakMap,Dd=new WeakSet,WL=async function(e,t){var o,a;const i=e.firstChild||e,r=i.id=`${MC}${t}`,s=await((o=S(this,Fb))==null?void 0:o.getAriaAttributes(r));if(s)for(const[c,u]of s)i.setAttribute(c,u);this.div.append(e),(a=S(this,Bb))==null||a.moveElementInDOM(this.div,e,i,!1)},lE=function(){if(!S(this,od))return;const e=this.div;for(const[t,i]of S(this,od)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}S(this,od).clear()};const jv=/\r\n?|\n/g;var Xs,Yr,Pb,ld,Wr,ci,KL,XL,JL,p0,il,m0,g0,ZL,cE,QL;const yn=class yn extends on{constructor(t){super({...t,name:"freeTextEditor"});$(this,ci);$(this,Xs);$(this,Yr,"");$(this,Pb,`${this.id}-editor`);$(this,ld,null);$(this,Wr);L(this,Xs,t.color||yn._defaultColor||on._defaultLineColor),L(this,Wr,t.fontSize||yn._defaultFontSize)}static get _keyboardManager(){const t=yn.prototype,i=o=>o.isEmpty(),r=xd.TRANSLATE_SMALL,s=xd.TRANSLATE_BIG;return jt(this,"_keyboardManager",new c_([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(t,i){on.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case vt.FREETEXT_SIZE:yn._defaultFontSize=i;break;case vt.FREETEXT_COLOR:yn._defaultColor=i;break}}updateParams(t,i){switch(t){case vt.FREETEXT_SIZE:z(this,ci,KL).call(this,i);break;case vt.FREETEXT_COLOR:z(this,ci,XL).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[vt.FREETEXT_SIZE,yn._defaultFontSize],[vt.FREETEXT_COLOR,yn._defaultColor||on._defaultLineColor]]}get propertiesToUpdate(){return[[vt.FREETEXT_SIZE,S(this,Wr)],[vt.FREETEXT_COLOR,S(this,Xs)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-yn._internalPadding*t,-(yn._internalPadding+S(this,Wr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(xt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),L(this,ld,new AbortController);const t=this._uiManager.combinedSignal(S(this,ld));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",S(this,Pb)),this._isDraggable=!0,(t=S(this,ld))==null||t.abort(),L(this,ld,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=S(this,Yr),i=L(this,Yr,z(this,ci,JL).call(this).trimEnd());if(t===i)return;const r=s=>{if(L(this,Yr,s),!s){this.remove();return}z(this,ci,g0).call(this),this._uiManager.rebuild(this),z(this,ci,p0).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),z(this,ci,p0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){yn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",S(this,Pb)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${S(this,Wr)}px * var(--scale-factor))`,r.color=S(this,Xs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),q0(this,this.div,["dblclick","keydown"]),this.width){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[f,p]=this.pageDimensions,[m,g]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(a[0]-m)/f,w=i+this.height-(a[1]-g)/p;break;case 90:v=t+(a[0]-m)/f,w=i-(a[1]-g)/p,[c,u]=[u,-c];break;case 180:v=t-this.width+(a[0]-m)/f,w=i-(a[1]-g)/p,[c,u]=[-c,-u];break;case 270:v=t+(a[0]-m-this.height*p)/f,w=i+(a[1]-g-this.width*f)/p,[c,u]=[-u,c];break}this.setAt(v*s,w*o,c,u)}else this.setAt(t*s,i*o,this.width*s,this.height*o);z(this,ci,g0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var v,w,A;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=z(v=yn,il,cE).call(v,i.getData("text")||"").replaceAll(jv,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,f=[],p=[];if(c.nodeType===Node.TEXT_NODE){const E=c.parentElement;if(p.push(c.nodeValue.slice(u).replaceAll(jv,"")),E!==this.editorDiv){let M=f;for(const I of this.editorDiv.childNodes){if(I===E){M=p;continue}M.push(z(w=yn,il,m0).call(w,I))}}f.push(c.nodeValue.slice(0,u).replaceAll(jv,""))}else if(c===this.editorDiv){let E=f,M=0;for(const I of this.editorDiv.childNodes)M++===u&&(E=p),E.push(z(A=yn,il,m0).call(A,I))}L(this,Yr,`${f.join(`
`)}${s}${p.join(`
`)}`),z(this,ci,g0).call(this);const m=new Range;let g=f.reduce((E,M)=>E+M.length,0);for(const{firstChild:E}of this.editorDiv.childNodes)if(E.nodeType===Node.TEXT_NODE){const M=E.nodeValue.length;if(g<=M){m.setStart(E,g),m.setEnd(E,g);break}g-=M}o.removeAllRanges(),o.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,r){var a;let s=null;if(t instanceof HL){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:f,rotation:p,id:m,popupRef:g},textContent:v,textPosition:w,parent:{page:{pageNumber:A}}}=t;if(!v||v.length===0)return null;s=t={annotationType:xt.FREETEXT,color:Array.from(u),fontSize:c,value:v.join(`
`),position:w,pageIndex:A-1,rect:f.slice(0),rotation:p,id:m,deleted:!1,popupRef:g}}const o=await super.deserialize(t,i,r);return L(o,Wr,t.fontSize),L(o,Xs,ot.makeHexColor(...t.color)),L(o,Yr,z(a=yn,il,cE).call(a,t.value)),o.annotationElementId=t.id||null,o._initialData=s,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=yn._internalPadding*this.parentScale,r=this.getRect(i,i),s=on._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:S(this,Xs)),o={annotationType:xt.FREETEXT,color:s,fontSize:S(this,Wr),value:z(this,ci,ZL).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!z(this,ci,QL).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${S(this,Wr)}px * var(--scale-factor))`,r.color=S(this,Xs),i.replaceChildren();for(const o of S(this,Yr).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),i.append(a)}const s=yn._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:S(this,Yr)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Xs=new WeakMap,Yr=new WeakMap,Pb=new WeakMap,ld=new WeakMap,Wr=new WeakMap,ci=new WeakSet,KL=function(t){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-S(this,Wr))*this.parentScale),L(this,Wr,s),z(this,ci,p0).call(this)},r=S(this,Wr);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},XL=function(t){const i=s=>{L(this,Xs,this.editorDiv.style.color=s)},r=S(this,Xs);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},JL=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(z(r=yn,il,m0).call(r,s)),i=s);return t.join(`
`)},p0=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},il=new WeakSet,m0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(jv,"")},g0=function(){if(this.editorDiv.replaceChildren(),!!S(this,Yr))for(const t of S(this,Yr).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},ZL=function(){return S(this,Yr).replaceAll(" "," ")},cE=function(t){return t.replaceAll(" "," ")},QL=function(t){const{value:i,fontSize:r,color:s,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((a,c)=>a!==s[c])||t.pageIndex!==o},$(yn,il),_t(yn,"_freeTextDefaultContent",""),_t(yn,"_internalPadding",0),_t(yn,"_defaultColor",null),_t(yn,"_defaultFontSize",10),_t(yn,"_type","freetext"),_t(yn,"_editorType",xt.FREETEXT);let uE=yn;class eU{toSVGPath(){wn("Abstract method `toSVGPath` must be implemented.")}get box(){wn("Abstract getter `box` must be implemented.")}serialize(e,t){wn("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){wn("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){wn("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Kr,Js,Oh,Bh,No,Bt,ud,cd,Lb,Ub,Fh,Ph,du,zb,hS,pS,vi,yy,tU,nU,iU,rU,sU,oU;const Ia=class Ia{constructor({x:e,y:t},i,r,s,o,a=0){$(this,vi);$(this,Kr);$(this,Js,[]);$(this,Oh);$(this,Bh);$(this,No,[]);$(this,Bt,new Float64Array(18));$(this,ud);$(this,cd);$(this,Lb);$(this,Ub);$(this,Fh);$(this,Ph);$(this,du,[]);L(this,Kr,i),L(this,Ph,s*r),L(this,Bh,o),S(this,Bt).set([NaN,NaN,NaN,NaN,e,t],6),L(this,Oh,a),L(this,Ub,S(Ia,zb)*r),L(this,Lb,S(Ia,pS)*r),L(this,Fh,r),S(this,du).push(e,t)}isEmpty(){return isNaN(S(this,Bt)[8])}add({x:e,y:t}){var U;L(this,ud,e),L(this,cd,t);const[i,r,s,o]=S(this,Kr);let[a,c,u,f]=S(this,Bt).subarray(8,12);const p=e-u,m=t-f,g=Math.hypot(p,m);if(g<S(this,Lb))return!1;const v=g-S(this,Ub),w=v/g,A=w*p,E=w*m;let M=a,I=c;a=u,c=f,u+=A,f+=E,(U=S(this,du))==null||U.push(e,t);const R=-E/v,D=A/v,C=R*S(this,Ph),k=D*S(this,Ph);return S(this,Bt).set(S(this,Bt).subarray(2,8),0),S(this,Bt).set([u+C,f+k],4),S(this,Bt).set(S(this,Bt).subarray(14,18),12),S(this,Bt).set([u-C,f-k],16),isNaN(S(this,Bt)[6])?(S(this,No).length===0&&(S(this,Bt).set([a+C,c+k],2),S(this,No).push(NaN,NaN,NaN,NaN,(a+C-i)/s,(c+k-r)/o),S(this,Bt).set([a-C,c-k],14),S(this,Js).push(NaN,NaN,NaN,NaN,(a-C-i)/s,(c-k-r)/o)),S(this,Bt).set([M,I,a,c,u,f],6),!this.isEmpty()):(S(this,Bt).set([M,I,a,c,u,f],6),Math.abs(Math.atan2(I-c,M-a)-Math.atan2(E,A))<Math.PI/2?([a,c,u,f]=S(this,Bt).subarray(2,6),S(this,No).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/s,((c+f)/2-r)/o),[a,c,M,I]=S(this,Bt).subarray(14,18),S(this,Js).push(NaN,NaN,NaN,NaN,((M+a)/2-i)/s,((I+c)/2-r)/o),!0):([M,I,a,c,u,f]=S(this,Bt).subarray(0,6),S(this,No).push(((M+5*a)/6-i)/s,((I+5*c)/6-r)/o,((5*a+u)/6-i)/s,((5*c+f)/6-r)/o,((a+u)/2-i)/s,((c+f)/2-r)/o),[u,f,a,c,M,I]=S(this,Bt).subarray(12,18),S(this,Js).push(((M+5*a)/6-i)/s,((I+5*c)/6-r)/o,((5*a+u)/6-i)/s,((5*c+f)/6-r)/o,((a+u)/2-i)/s,((c+f)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=S(this,No),t=S(this,Js);if(isNaN(S(this,Bt)[6])&&!this.isEmpty())return z(this,vi,tU).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);z(this,vi,iU).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return z(this,vi,nU).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,s,o){return new aU(e,t,i,r,s,o)}getOutlines(){var p;const e=S(this,No),t=S(this,Js),i=S(this,Bt),[r,s,o,a]=S(this,Kr),c=new Float64Array((((p=S(this,du))==null?void 0:p.length)??0)+2);for(let m=0,g=c.length-2;m<g;m+=2)c[m]=(S(this,du)[m]-r)/o,c[m+1]=(S(this,du)[m+1]-s)/a;if(c[c.length-2]=(S(this,ud)-r)/o,c[c.length-1]=(S(this,cd)-s)/a,isNaN(i[6])&&!this.isEmpty())return z(this,vi,rU).call(this,c);const u=new Float64Array(S(this,No).length+24+S(this,Js).length);let f=e.length;for(let m=0;m<f;m+=2){if(isNaN(e[m])){u[m]=u[m+1]=NaN;continue}u[m]=e[m],u[m+1]=e[m+1]}f=z(this,vi,oU).call(this,u,f);for(let m=t.length-6;m>=6;m-=6)for(let g=0;g<6;g+=2){if(isNaN(t[m+g])){u[f]=u[f+1]=NaN,f+=2;continue}u[f]=t[m+g],u[f+1]=t[m+g+1],f+=2}return z(this,vi,sU).call(this,u,f),this.newFreeDrawOutline(u,c,S(this,Kr),S(this,Fh),S(this,Oh),S(this,Bh))}};Kr=new WeakMap,Js=new WeakMap,Oh=new WeakMap,Bh=new WeakMap,No=new WeakMap,Bt=new WeakMap,ud=new WeakMap,cd=new WeakMap,Lb=new WeakMap,Ub=new WeakMap,Fh=new WeakMap,Ph=new WeakMap,du=new WeakMap,zb=new WeakMap,hS=new WeakMap,pS=new WeakMap,vi=new WeakSet,yy=function(){const e=S(this,Bt).subarray(4,6),t=S(this,Bt).subarray(16,18),[i,r,s,o]=S(this,Kr);return[(S(this,ud)+(e[0]-t[0])/2-i)/s,(S(this,cd)+(e[1]-t[1])/2-r)/o,(S(this,ud)+(t[0]-e[0])/2-i)/s,(S(this,cd)+(t[1]-e[1])/2-r)/o]},tU=function(){const[e,t,i,r]=S(this,Kr),[s,o,a,c]=z(this,vi,yy).call(this);return`M${(S(this,Bt)[2]-e)/i} ${(S(this,Bt)[3]-t)/r} L${(S(this,Bt)[4]-e)/i} ${(S(this,Bt)[5]-t)/r} L${s} ${o} L${a} ${c} L${(S(this,Bt)[16]-e)/i} ${(S(this,Bt)[17]-t)/r} L${(S(this,Bt)[14]-e)/i} ${(S(this,Bt)[15]-t)/r} Z`},nU=function(e){const t=S(this,Js);e.push(`L${t[4]} ${t[5]} Z`)},iU=function(e){const[t,i,r,s]=S(this,Kr),o=S(this,Bt).subarray(4,6),a=S(this,Bt).subarray(16,18),[c,u,f,p]=z(this,vi,yy).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-i)/s} L${c} ${u} L${f} ${p} L${(a[0]-t)/r} ${(a[1]-i)/s}`)},rU=function(e){const t=S(this,Bt),[i,r,s,o]=S(this,Kr),[a,c,u,f]=z(this,vi,yy).call(this),p=new Float64Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-i)/s,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-i)/s,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,(t[16]-i)/s,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-i)/s,(t[15]-r)/o],0),this.newFreeDrawOutline(p,e,S(this,Kr),S(this,Fh),S(this,Oh),S(this,Bh))},sU=function(e,t){const i=S(this,Js);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},oU=function(e,t){const i=S(this,Bt).subarray(4,6),r=S(this,Bt).subarray(16,18),[s,o,a,c]=S(this,Kr),[u,f,p,m]=z(this,vi,yy).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/c,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/c],t),t+=24},$(Ia,zb,8),$(Ia,hS,2),$(Ia,pS,S(Ia,zb)+S(Ia,hS));let G0=Ia;var Lh,dd,qa,Vb,Xr,jb,Jn,Er,by,_y,lU;class aU extends eU{constructor(t,i,r,s,o,a){super();$(this,Er);$(this,Lh);$(this,dd,null);$(this,qa);$(this,Vb);$(this,Xr);$(this,jb);$(this,Jn);L(this,Jn,t),L(this,Xr,i),L(this,Lh,r),L(this,jb,s),L(this,qa,o),L(this,Vb,a),z(this,Er,lU).call(this,a);const{x:c,y:u,width:f,height:p}=S(this,dd);for(let m=0,g=t.length;m<g;m+=2)t[m]=(t[m]-c)/f,t[m+1]=(t[m+1]-u)/p;for(let m=0,g=i.length;m<g;m+=2)i[m]=(i[m]-c)/f,i[m+1]=(i[m+1]-u)/p}toSVGPath(){const t=[`M${S(this,Jn)[4]} ${S(this,Jn)[5]}`];for(let i=6,r=S(this,Jn).length;i<r;i+=6){if(isNaN(S(this,Jn)[i])){t.push(`L${S(this,Jn)[i+4]} ${S(this,Jn)[i+5]}`);continue}t.push(`C${S(this,Jn)[i]} ${S(this,Jn)[i+1]} ${S(this,Jn)[i+2]} ${S(this,Jn)[i+3]} ${S(this,Jn)[i+4]} ${S(this,Jn)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,s],o){const a=r-t,c=s-i;let u,f;switch(o){case 0:u=z(this,Er,by).call(this,S(this,Jn),t,s,a,-c),f=z(this,Er,by).call(this,S(this,Xr),t,s,a,-c);break;case 90:u=z(this,Er,_y).call(this,S(this,Jn),t,i,a,c),f=z(this,Er,_y).call(this,S(this,Xr),t,i,a,c);break;case 180:u=z(this,Er,by).call(this,S(this,Jn),r,i,-a,c),f=z(this,Er,by).call(this,S(this,Xr),r,i,-a,c);break;case 270:u=z(this,Er,_y).call(this,S(this,Jn),r,s,-a,-c),f=z(this,Er,_y).call(this,S(this,Xr),r,s,-a,-c);break}return{outline:Array.from(u),points:[Array.from(f)]}}get box(){return S(this,dd)}newOutliner(t,i,r,s,o,a=0){return new G0(t,i,r,s,o,a)}getNewOutline(t,i){const{x:r,y:s,width:o,height:a}=S(this,dd),[c,u,f,p]=S(this,Lh),m=o*f,g=a*p,v=r*f+c,w=s*p+u,A=this.newOutliner({x:S(this,Xr)[0]*m+v,y:S(this,Xr)[1]*g+w},S(this,Lh),S(this,jb),t,S(this,Vb),i??S(this,qa));for(let E=2;E<S(this,Xr).length;E+=2)A.add({x:S(this,Xr)[E]*m+v,y:S(this,Xr)[E+1]*g+w});return A.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Lh=new WeakMap,dd=new WeakMap,qa=new WeakMap,Vb=new WeakMap,Xr=new WeakMap,jb=new WeakMap,Jn=new WeakMap,Er=new WeakSet,by=function(t,i,r,s,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=i+t[c]*s,a[c+1]=r+t[c+1]*o;return a},_y=function(t,i,r,s,o){const a=new Float64Array(t.length);for(let c=0,u=t.length;c<u;c+=2)a[c]=i+t[c+1]*s,a[c+1]=r+t[c]*o;return a},lU=function(t){const i=S(this,Jn);let r=i[4],s=i[5],o=r,a=s,c=r,u=s,f=r,p=s;const m=t?Math.max:Math.min;for(let E=6,M=i.length;E<M;E+=6){if(isNaN(i[E]))o=Math.min(o,i[E+4]),a=Math.min(a,i[E+5]),c=Math.max(c,i[E+4]),u=Math.max(u,i[E+5]),p<i[E+5]?(f=i[E+4],p=i[E+5]):p===i[E+5]&&(f=m(f,i[E+4]));else{const I=ot.bezierBoundingBox(r,s,...i.slice(E,E+6));o=Math.min(o,I[0]),a=Math.min(a,I[1]),c=Math.max(c,I[2]),u=Math.max(u,I[3]),p<I[3]?(f=I[2],p=I[3]):p===I[3]&&(f=m(f,I[2]))}r=i[E+4],s=i[E+5]}const g=o-S(this,qa),v=a-S(this,qa),w=c-o+2*S(this,qa),A=u-a+2*S(this,qa);L(this,dd,{x:g,y:v,width:w,height:A,lastPoint:[f,p]})};var qb,fu,Zs,fr,uU,y0,cU,dU,dE;class FN{constructor(e,t=0,i=0,r=!0){$(this,fr);$(this,qb);$(this,fu,[]);$(this,Zs,[]);let s=1/0,o=-1/0,a=1/0,c=-1/0;const u=10**-4;for(const{x:A,y:E,width:M,height:I}of e){const R=Math.floor((A-t)/u)*u,D=Math.ceil((A+M+t)/u)*u,C=Math.floor((E-t)/u)*u,k=Math.ceil((E+I+t)/u)*u,j=[R,C,k,!0],U=[D,C,k,!1];S(this,fu).push(j,U),s=Math.min(s,R),o=Math.max(o,D),a=Math.min(a,C),c=Math.max(c,k)}const f=o-s+2*i,p=c-a+2*i,m=s-i,g=a-i,v=S(this,fu).at(r?-1:-2),w=[v[0],v[2]];for(const A of S(this,fu)){const[E,M,I]=A;A[0]=(E-m)/f,A[1]=(M-g)/p,A[2]=(I-g)/p}L(this,qb,{x:m,y:g,width:f,height:p,lastPoint:w})}getOutlines(){S(this,fu).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of S(this,fu))t[3]?(e.push(...z(this,fr,dE).call(this,t)),z(this,fr,cU).call(this,t)):(z(this,fr,dU).call(this,t),e.push(...z(this,fr,dE).call(this,t)));return z(this,fr,uU).call(this,e)}}qb=new WeakMap,fu=new WeakMap,Zs=new WeakMap,fr=new WeakSet,uU=function(e){const t=[],i=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const r=[];let s;for(;i.size>0;){const o=i.values().next().value;let[a,c,u,f,p]=o;i.delete(o);let m=a,g=c;for(s=[a,u],r.push(s);;){let v;if(i.has(f))v=f;else if(i.has(p))v=p;else break;i.delete(v),[a,c,u,f,p]=v,m!==a&&(s.push(m,g,a,g===c?c:u),m=a),g=g===c?u:c}s.push(m,g)}return new Ste(r,S(this,qb))},y0=function(e){const t=S(this,Zs);let i=0,r=t.length-1;for(;i<=r;){const s=i+r>>1,o=t[s][0];if(o===e)return s;o<e?i=s+1:r=s-1}return r+1},cU=function([,e,t]){const i=z(this,fr,y0).call(this,e);S(this,Zs).splice(i,0,[e,t])},dU=function([,e,t]){const i=z(this,fr,y0).call(this,e);for(let r=i;r<S(this,Zs).length;r++){const[s,o]=S(this,Zs)[r];if(s!==e)break;if(s===e&&o===t){S(this,Zs).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,o]=S(this,Zs)[r];if(s!==e)break;if(s===e&&o===t){S(this,Zs).splice(r,1);return}}},dE=function(e){const[t,i,r]=e,s=[[t,i,r]],o=z(this,fr,y0).call(this,r);for(let a=0;a<o;a++){const[c,u]=S(this,Zs)[a];for(let f=0,p=s.length;f<p;f++){const[,m,g]=s[f];if(!(u<=m||g<=c)){if(m>=c){if(g>u)s[f][1]=u;else{if(p===1)return[];s.splice(f,1),f--,p--}continue}s[f][2]=c,g>u&&s.push([t,u,g])}}}return s};var Hb,Uh;class Ste extends eU{constructor(t,i){super();$(this,Hb);$(this,Uh);L(this,Uh,t),L(this,Hb,i)}toSVGPath(){const t=[];for(const i of S(this,Uh)){let[r,s]=i;t.push(`M${r} ${s}`);for(let o=2;o<i.length;o+=2){const a=i[o],c=i[o+1];a===r?(t.push(`V${c}`),s=c):c===s&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,i,r,s],o){const a=[],c=r-t,u=s-i;for(const f of S(this,Uh)){const p=new Array(f.length);for(let m=0;m<f.length;m+=2)p[m]=t+f[m]*c,p[m+1]=s-f[m+1]*u;a.push(p)}return a}get box(){return S(this,Hb)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}Hb=new WeakMap,Uh=new WeakMap;class fE extends G0{newFreeDrawOutline(e,t,i,r,s,o){return new wte(e,t,i,r,s,o)}get classNamesForDrawing(){return["highlight","free"]}}class wte extends aU{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,r,s,o=0){return new fE(e,t,i,r,s,o)}}var Qs,fd,zh,yi,Gb,Vh,$b,Yb,hu,eo,jh,Wb,dn,hE,pE,mE,Sc,fU,Hl;const vr=class vr{constructor({editor:e=null,uiManager:t=null}){$(this,dn);$(this,Qs,null);$(this,fd,null);$(this,zh);$(this,yi,null);$(this,Gb,!1);$(this,Vh,!1);$(this,$b,null);$(this,Yb);$(this,hu,null);$(this,eo,null);$(this,jh);var i;e?(L(this,Vh,!1),L(this,jh,vt.HIGHLIGHT_COLOR),L(this,$b,e)):(L(this,Vh,!0),L(this,jh,vt.HIGHLIGHT_DEFAULT_COLOR)),L(this,eo,(e==null?void 0:e._uiManager)||t),L(this,Yb,S(this,eo)._eventBus),L(this,zh,(e==null?void 0:e.color)||((i=S(this,eo))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),S(vr,Wb)||L(vr,Wb,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return jt(this,"_keyboardManager",new c_([[["Escape","mac+Escape"],vr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],vr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],vr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],vr.prototype._moveToPrevious],[["Home","mac+Home"],vr.prototype._moveToBeginning],[["End","mac+End"],vr.prototype._moveToEnd]]))}renderButton(){const e=L(this,Qs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=S(this,eo)._signal;e.addEventListener("click",z(this,dn,Sc).bind(this),{signal:t}),e.addEventListener("keydown",z(this,dn,mE).bind(this),{signal:t});const i=L(this,fd,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=S(this,zh),e.append(i),e}renderMainDropdown(){const e=L(this,yi,z(this,dn,hE).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===S(this,Qs)){z(this,dn,Sc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&z(this,dn,pE).call(this,t,e)}_moveToNext(e){var t,i;if(!S(this,dn,Hl)){z(this,dn,Sc).call(this,e);return}if(e.target===S(this,Qs)){(t=S(this,yi).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=S(this,yi))==null?void 0:t.firstChild)||e.target===S(this,Qs)){S(this,dn,Hl)&&this._hideDropdownFromKeyboard();return}S(this,dn,Hl)||z(this,dn,Sc).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!S(this,dn,Hl)){z(this,dn,Sc).call(this,e);return}(t=S(this,yi).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!S(this,dn,Hl)){z(this,dn,Sc).call(this,e);return}(t=S(this,yi).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=S(this,yi))==null||e.classList.add("hidden"),(t=S(this,hu))==null||t.abort(),L(this,hu,null)}_hideDropdownFromKeyboard(){var e;if(!S(this,Vh)){if(!S(this,dn,Hl)){(e=S(this,$b))==null||e.unselect();return}this.hideDropdown(),S(this,Qs).focus({preventScroll:!0,focusVisible:S(this,Gb)})}}updateColor(e){if(S(this,fd)&&(S(this,fd).style.backgroundColor=e),!S(this,yi))return;const t=S(this,eo).highlightColors.values();for(const i of S(this,yi).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=S(this,Qs))==null||e.remove(),L(this,Qs,null),L(this,fd,null),(t=S(this,yi))==null||t.remove(),L(this,yi,null)}};Qs=new WeakMap,fd=new WeakMap,zh=new WeakMap,yi=new WeakMap,Gb=new WeakMap,Vh=new WeakMap,$b=new WeakMap,Yb=new WeakMap,hu=new WeakMap,eo=new WeakMap,jh=new WeakMap,Wb=new WeakMap,dn=new WeakSet,hE=function(){const e=document.createElement("div"),t=S(this,eo)._signal;e.addEventListener("contextmenu",Cs,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of S(this,eo).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",S(vr,Wb)[i]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=r,s.setAttribute("aria-selected",r===S(this,zh)),s.addEventListener("click",z(this,dn,pE).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",z(this,dn,mE).bind(this),{signal:t}),e},pE=function(e,t){t.stopPropagation(),S(this,Yb).dispatch("switchannotationeditorparams",{source:this,type:S(this,jh),value:e})},mE=function(e){vr._keyboardManager.exec(this,e)},Sc=function(e){if(S(this,dn,Hl)){this.hideDropdown();return}if(L(this,Gb,e.detail===0),S(this,hu)||(L(this,hu,new AbortController),window.addEventListener("pointerdown",z(this,dn,fU).bind(this),{signal:S(this,eo).combinedSignal(S(this,hu))})),S(this,yi)){S(this,yi).classList.remove("hidden");return}const t=L(this,yi,z(this,dn,hE).call(this));S(this,Qs).append(t)},fU=function(e){var t;(t=S(this,yi))!=null&&t.contains(e.target)||this.hideDropdown()},Hl=function(){return S(this,yi)&&!S(this,yi).classList.contains("hidden")},$(vr,Wb,null);let $0=vr;var qh,Kb,Ha,hd,Hh,ys,Xb,Jb,pd,to,Ki,Tr,Gh,Ga,bi,$h,bs,Zb,At,gE,b0,hU,pU,mU,yE,wc,Ts,qf,gU,_0,vy,yU,bU,_U,vU,SU;const Jt=class Jt extends on{constructor(t){super({...t,name:"highlightEditor"});$(this,At);$(this,qh,null);$(this,Kb,0);$(this,Ha);$(this,hd,null);$(this,Hh,null);$(this,ys,null);$(this,Xb,null);$(this,Jb,0);$(this,pd,null);$(this,to,null);$(this,Ki,null);$(this,Tr,!1);$(this,Gh,null);$(this,Ga);$(this,bi,null);$(this,$h,"");$(this,bs);$(this,Zb,"");this.color=t.color||Jt._defaultColor,L(this,bs,t.thickness||Jt._defaultThickness),L(this,Ga,t.opacity||Jt._defaultOpacity),L(this,Ha,t.boxes||null),L(this,Zb,t.methodOfCreation||""),L(this,$h,t.text||""),this._isDraggable=!1,t.highlightId>-1?(L(this,Tr,!0),z(this,At,b0).call(this,t),z(this,At,wc).call(this)):S(this,Ha)&&(L(this,qh,t.anchorNode),L(this,Kb,t.anchorOffset),L(this,Xb,t.focusNode),L(this,Jb,t.focusOffset),z(this,At,gE).call(this),z(this,At,wc).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Jt.prototype;return jt(this,"_keyboardManager",new c_([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:S(this,Tr)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:S(this,bs),methodOfCreation:S(this,Zb)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;on.initialize(t,i),Jt._defaultColor||(Jt._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case vt.HIGHLIGHT_DEFAULT_COLOR:Jt._defaultColor=i;break;case vt.HIGHLIGHT_THICKNESS:Jt._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return S(this,Gh)}updateParams(t,i){switch(t){case vt.HIGHLIGHT_COLOR:z(this,At,hU).call(this,i);break;case vt.HIGHLIGHT_THICKNESS:z(this,At,pU).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[vt.HIGHLIGHT_DEFAULT_COLOR,Jt._defaultColor],[vt.HIGHLIGHT_THICKNESS,Jt._defaultThickness]]}get propertiesToUpdate(){return[[vt.HIGHLIGHT_COLOR,this.color||Jt._defaultColor],[vt.HIGHLIGHT_THICKNESS,S(this,bs)||Jt._defaultThickness],[vt.HIGHLIGHT_FREE,S(this,Tr)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(L(this,Hh,new $0({editor:this})),t.addColorPicker(S(this,Hh))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(z(this,At,vy).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,z(this,At,vy).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){z(this,At,yE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(z(this,At,wc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?z(this,At,yE).call(this):t&&(z(this,At,wc).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var s,o,a;const{drawLayer:i}=this.parent;let r;S(this,Tr)?(t=(t-this.rotation+360)%360,r=z(s=Jt,Ts,qf).call(s,S(this,to).box,t)):r=z(o=Jt,Ts,qf).call(o,this,t),i.rotate(S(this,Ki),t),i.rotate(S(this,bi),t),i.updateBox(S(this,Ki),r),i.updateBox(S(this,bi),z(a=Jt,Ts,qf).call(a,S(this,ys).box,t))}render(){if(this.div)return this.div;const t=super.render();S(this,$h)&&(t.setAttribute("aria-label",S(this,$h)),t.setAttribute("role","mark")),S(this,Tr)?t.classList.add("free"):this.div.addEventListener("keydown",z(this,At,gU).bind(this),{signal:this._uiManager._signal});const i=L(this,pd,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=S(this,hd);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),q0(this,S(this,pd),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(S(this,bi),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(S(this,bi),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:z(this,At,_0).call(this,!0);break;case 1:case 3:z(this,At,_0).call(this,!1);break}}select(){var t,i;super.select(),S(this,bi)&&((t=this.parent)==null||t.drawLayer.removeClass(S(this,bi),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(S(this,bi),"selected"))}unselect(){var t;super.unselect(),S(this,bi)&&((t=this.parent)==null||t.drawLayer.removeClass(S(this,bi),"selected"),S(this,Tr)||z(this,At,_0).call(this,!1))}get _mustFixPosition(){return!S(this,Tr)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(S(this,Ki),t),this.parent.drawLayer.show(S(this,bi),t))}static startHighlighting(t,i,{target:r,x:s,y:o}){const{x:a,y:c,width:u,height:f}=r.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),g=w=>{w.preventDefault(),w.stopPropagation()},v=w=>{p.abort(),z(this,Ts,vU).call(this,t,w)};window.addEventListener("blur",v,{signal:m}),window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("pointerdown",g,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Cs,{signal:m}),r.addEventListener("pointermove",z(this,Ts,_U).bind(this,t),{signal:m}),this._freeHighlight=new fE({x:s,y:o},[a,c,u,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,r){var w,A,E,M;let s=null;if(t instanceof $L){const{data:{quadPoints:I,rect:R,rotation:D,id:C,color:k,opacity:j,popupRef:U},parent:{page:{pageNumber:F}}}=t;s=t={annotationType:xt.HIGHLIGHT,color:Array.from(k),opacity:j,quadPoints:I,boxes:null,pageIndex:F-1,rect:R.slice(0),rotation:D,id:C,deleted:!1,popupRef:U}}else if(t instanceof zC){const{data:{inkLists:I,rect:R,rotation:D,id:C,color:k,borderStyle:{rawWidth:j},popupRef:U},parent:{page:{pageNumber:F}}}=t;s=t={annotationType:xt.HIGHLIGHT,color:Array.from(k),thickness:j,inkLists:I,boxes:null,pageIndex:F-1,rect:R.slice(0),rotation:D,id:C,deleted:!1,popupRef:U}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,f=await super.deserialize(t,i,r);f.color=ot.makeHexColor(...o),L(f,Ga,u||1),c&&L(f,bs,t.thickness),f.annotationElementId=t.id||null,f._initialData=s;const[p,m]=f.pageDimensions,[g,v]=f.pageTranslation;if(a){const I=L(f,Ha,[]);for(let R=0;R<a.length;R+=8)I.push({x:(a[R]-g)/p,y:1-(a[R+1]-v)/m,width:(a[R+2]-a[R])/p,height:(a[R+1]-a[R+5])/m});z(w=f,At,gE).call(w),z(A=f,At,wc).call(A),f.rotate(f.rotation)}else if(c){L(f,Tr,!0);const I=c[0],R={x:I[0]-g,y:m-(I[1]-v)},D=new fE(R,[0,0,p,m],1,S(f,bs)/2,!0,.001);for(let j=0,U=I.length;j<U;j+=2)R.x=I[j]-g,R.y=m-(I[j+1]-v),D.add(R);const{id:C,clipPathId:k}=i.drawLayer.draw(D,f.color,f._defaultOpacity,!0);z(E=f,At,b0).call(E,{highlightOutlines:D.getOutlines(),highlightId:C,clipPathId:k}),z(M=f,At,wc).call(M)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=on._colorManager.convert(this.color),s={annotationType:xt.HIGHLIGHT,color:r,opacity:S(this,Ga),thickness:S(this,bs),quadPoints:z(this,At,yU).call(this),outlines:z(this,At,bU).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:z(this,At,vy).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!z(this,At,SU).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};qh=new WeakMap,Kb=new WeakMap,Ha=new WeakMap,hd=new WeakMap,Hh=new WeakMap,ys=new WeakMap,Xb=new WeakMap,Jb=new WeakMap,pd=new WeakMap,to=new WeakMap,Ki=new WeakMap,Tr=new WeakMap,Gh=new WeakMap,Ga=new WeakMap,bi=new WeakMap,$h=new WeakMap,bs=new WeakMap,Zb=new WeakMap,At=new WeakSet,gE=function(){const t=new FN(S(this,Ha),.001);L(this,to,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=S(this,to).box;const i=new FN(S(this,Ha),.0025,.001,this._uiManager.direction==="ltr");L(this,ys,i.getOutlines());const{lastPoint:r}=S(this,ys).box;L(this,Gh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},b0=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var p,m;if(L(this,to,t),L(this,ys,t.getNewOutline(S(this,bs)/2+1.5,.0025)),i>=0)L(this,Ki,i),L(this,hd,r),this.parent.drawLayer.finalizeLine(i,t),L(this,bi,this.parent.drawLayer.drawOutline(S(this,ys)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(S(this,Ki),t),this.parent.drawLayer.updateBox(S(this,Ki),z(p=Jt,Ts,qf).call(p,S(this,to).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(S(this,bi),S(this,ys)),this.parent.drawLayer.updateBox(S(this,bi),z(m=Jt,Ts,qf).call(m,S(this,ys).box,g))}const{x:o,y:a,width:c,height:u}=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[g,v]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*v/g,this.height=u*g/v;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*v/g,this.height=u*g/v;break}}const{lastPoint:f}=S(this,ys).box;L(this,Gh,[(f[0]-o)/c,(f[1]-a)/u])},hU=function(t){const i=(o,a)=>{var c,u,f;this.color=o,(c=this.parent)==null||c.drawLayer.changeColor(S(this,Ki),o),(u=S(this,Hh))==null||u.updateColor(o),L(this,Ga,a),(f=this.parent)==null||f.drawLayer.changeOpacity(S(this,Ki),a)},r=this.color,s=S(this,Ga);this.addCommands({cmd:i.bind(this,t,Jt._defaultOpacity),undo:i.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},pU=function(t){const i=S(this,bs),r=s=>{L(this,bs,s),z(this,At,mU).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},mU=function(t){if(!S(this,Tr))return;z(this,At,b0).call(this,{highlightOutlines:S(this,to).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},yE=function(){S(this,Ki)===null||!this.parent||(this.parent.drawLayer.remove(S(this,Ki)),L(this,Ki,null),this.parent.drawLayer.remove(S(this,bi)),L(this,bi,null))},wc=function(t=this.parent){S(this,Ki)===null&&({id:rr(this,Ki)._,clipPathId:rr(this,hd)._}=t.drawLayer.draw(S(this,to),this.color,S(this,Ga)),L(this,bi,t.drawLayer.drawOutline(S(this,ys))),S(this,pd)&&(S(this,pd).style.clipPath=S(this,hd)))},Ts=new WeakSet,qf=function({x:t,y:i,width:r,height:s},o){switch(o){case 90:return{x:1-i-s,y:t,width:s,height:r};case 180:return{x:1-t-r,y:1-i-s,width:r,height:s};case 270:return{x:i,y:1-t-r,width:s,height:r}}return{x:t,y:i,width:r,height:s}},gU=function(t){Jt._keyboardManager.exec(this,t)},_0=function(t){if(!S(this,qh))return;const i=window.getSelection();t?i.setPosition(S(this,qh),S(this,Kb)):i.setPosition(S(this,Xb),S(this,Jb))},vy=function(){return S(this,Tr)?this.rotation:0},yU=function(){if(S(this,Tr))return null;const[t,i]=this.pageDimensions,[r,s]=this.pageTranslation,o=S(this,Ha),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:f,width:p,height:m}of o){const g=u*t+r,v=(1-f-m)*i+s;a[c]=a[c+4]=g,a[c+1]=a[c+3]=v,a[c+2]=a[c+6]=g+p*t,a[c+5]=a[c+7]=v+m*i,c+=8}return a},bU=function(t){return S(this,to).serialize(t,z(this,At,vy).call(this))},_U=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},vU=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},SU=function(t){const{color:i}=this._initialData;return t.color.some((r,s)=>r!==i[s])},$(Jt,Ts),_t(Jt,"_defaultColor",null),_t(Jt,"_defaultOpacity",1),_t(Jt,"_defaultThickness",12),_t(Jt,"_type","highlight"),_t(Jt,"_editorType",xt.HIGHLIGHT),_t(Jt,"_freeHighlightId",-1),_t(Jt,"_freeHighlight",null),_t(Jt,"_freeHighlightClipId","");let Y0=Jt;var md,gd,Oo,$a,_s,yd,bd,_d,Ya,Yh,vd,Sd,pu,Ge,wU,TU,AU,EU,_E,CU,vE,IU,xU,MU,DU,RU,Tc,SE,wE,TE,v0,S0,Hf,AE,w0,al,kU,EE,NU,OU,CE,T0,Sy;const On=class On extends on{constructor(t){super({...t,name:"inkEditor"});$(this,Ge);$(this,md,0);$(this,gd,0);$(this,Oo,null);$(this,$a,new Path2D);$(this,_s,!1);$(this,yd,null);$(this,bd,!1);$(this,_d,!1);$(this,Ya,null);$(this,Yh,null);$(this,vd,0);$(this,Sd,0);$(this,pu,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){on.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case vt.INK_THICKNESS:On._defaultThickness=i;break;case vt.INK_COLOR:On._defaultColor=i;break;case vt.INK_OPACITY:On._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case vt.INK_THICKNESS:z(this,Ge,wU).call(this,i);break;case vt.INK_COLOR:z(this,Ge,TU).call(this,i);break;case vt.INK_OPACITY:z(this,Ge,AU).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[vt.INK_THICKNESS,On._defaultThickness],[vt.INK_COLOR,On._defaultColor||on._defaultLineColor],[vt.INK_OPACITY,Math.round(On._defaultOpacity*100)]]}get propertiesToUpdate(){return[[vt.INK_THICKNESS,this.thickness||On._defaultThickness],[vt.INK_COLOR,this.color||On._defaultColor||on._defaultLineColor],[vt.INK_OPACITY,Math.round(100*(this.opacity??On._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(z(this,Ge,v0).call(this),z(this,Ge,S0).call(this)),this.isAttachedToDOM||(this.parent.add(this),z(this,Ge,Hf).call(this)),z(this,Ge,Sy).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,S(this,Oo)&&(clearTimeout(S(this,Oo)),L(this,Oo,null)),(t=S(this,Ya))==null||t.disconnect(),L(this,Ya,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,s=this.height*i;this.setDimensions(r,s)}enableEditMode(){S(this,_s)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,z(this,Ge,SE).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),z(this,Ge,wE).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){S(this,_s)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),L(this,_s,!0),this.div.classList.add("disabled"),z(this,Ge,Sy).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||S(this,_s)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),z(this,Ge,CU).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),z(this,Ge,vE).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),z(this,Ge,TE).call(this,t)}canvasPointerleave(t){z(this,Ge,TE).call(this,t)}get isResizable(){return!this.isEmpty()&&S(this,_s)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,s,o,a]=z(this,Ge,EU).call(this);if(this.setAt(r,s,0,0),this.setDims(o,a),z(this,Ge,v0).call(this),this.width){const[c,u]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*u),this.setAt(t*c,i*u,this.width*c,this.height*u),L(this,_d,!0),z(this,Ge,Hf).call(this),this.setDims(this.width*c,this.height*u),z(this,Ge,Tc).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return z(this,Ge,S0).call(this),this.div}setDimensions(t,i){const r=Math.round(t),s=Math.round(i);if(S(this,vd)===r&&S(this,Sd)===s)return;L(this,vd,r),L(this,Sd,s),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=t/o,this.height=i/a,this.fixAndSetPosition(),S(this,_s)&&z(this,Ge,AE).call(this,t,i),z(this,Ge,Hf).call(this),z(this,Ge,Tc).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,r){var A,E,M;if(t instanceof zC)return null;const s=await super.deserialize(t,i,r);s.thickness=t.thickness,s.color=ot.makeHexColor(...t.color),s.opacity=t.opacity;const[o,a]=s.pageDimensions,c=s.width*o,u=s.height*a,f=s.parentScale,p=t.thickness/2;L(s,_s,!0),L(s,vd,Math.round(c)),L(s,Sd,Math.round(u));const{paths:m,rect:g,rotation:v}=t;for(let{bezier:I}of m){I=z(A=On,al,NU).call(A,I,g,v);const R=[];s.paths.push(R);let D=f*(I[0]-p),C=f*(I[1]-p);for(let j=2,U=I.length;j<U;j+=6){const F=f*(I[j]-p),J=f*(I[j+1]-p),G=f*(I[j+2]-p),ee=f*(I[j+3]-p),oe=f*(I[j+4]-p),me=f*(I[j+5]-p);R.push([[D,C],[F,J],[G,ee],[oe,me]]),D=oe,C=me}const k=z(this,al,kU).call(this,R);s.bezierPath2D.push(k)}const w=z(E=s,Ge,CE).call(E);return L(s,gd,Math.max(on.MIN_SIZE,w[2]-w[0])),L(s,md,Math.max(on.MIN_SIZE,w[3]-w[1])),z(M=s,Ge,AE).call(M,c,u),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=on._colorManager.convert(this.ctx.strokeStyle);return{annotationType:xt.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:z(this,Ge,OU).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};md=new WeakMap,gd=new WeakMap,Oo=new WeakMap,$a=new WeakMap,_s=new WeakMap,yd=new WeakMap,bd=new WeakMap,_d=new WeakMap,Ya=new WeakMap,Yh=new WeakMap,vd=new WeakMap,Sd=new WeakMap,pu=new WeakMap,Ge=new WeakSet,wU=function(t){const i=s=>{this.thickness=s,z(this,Ge,Sy).call(this)},r=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},TU=function(t){const i=s=>{this.color=s,z(this,Ge,Tc).call(this)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},AU=function(t){const i=s=>{this.opacity=s,z(this,Ge,Tc).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vt.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},EU=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},_E=function(){const{ctx:t,color:i,opacity:r,thickness:s,parentScale:o,scaleFactor:a}=this;t.lineWidth=s*o/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${HQ(r)}`},CU=function(t,i){this.canvas.addEventListener("contextmenu",Cs,{signal:this._uiManager._signal}),z(this,Ge,wE).call(this),L(this,yd,new AbortController);const r=this._uiManager.combinedSignal(S(this,yd));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,S(this,_d)||(L(this,_d,!0),z(this,Ge,Hf).call(this),this.thickness||(this.thickness=On._defaultThickness),this.color||(this.color=On._defaultColor||on._defaultLineColor),this.opacity??(this.opacity=On._defaultOpacity)),this.currentPath.push([t,i]),L(this,bd,!1),z(this,Ge,_E).call(this),L(this,pu,()=>{z(this,Ge,MU).call(this),S(this,pu)&&window.requestAnimationFrame(S(this,pu))}),window.requestAnimationFrame(S(this,pu))},vE=function(t,i){const[r,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===s)return;const o=this.currentPath;let a=S(this,$a);if(o.push([t,i]),L(this,bd,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(t,i);return}o.length===3&&(L(this,$a,a=new Path2D),a.moveTo(...o[0])),z(this,Ge,DU).call(this,a,...o.at(-3),...o.at(-2),t,i)},IU=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);S(this,$a).lineTo(...t)},xU=function(t,i){L(this,pu,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),z(this,Ge,vE).call(this,t,i),z(this,Ge,IU).call(this);let r;if(this.currentPath.length!==1)r=z(this,Ge,RU).call(this);else{const u=[t,i];r=[[u,u.slice(),u.slice(),u]]}const s=S(this,$a),o=this.currentPath;this.currentPath=[],L(this,$a,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(r),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(z(this,Ge,v0).call(this),z(this,Ge,S0).call(this)),z(this,Ge,Sy).call(this))};this.addCommands({cmd:a,undo:c,mustExec:!0})},MU=function(){if(!S(this,bd))return;L(this,bd,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(a=>a[0]),s=i.map(a=>a[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...s)-t,Math.max(...s)+t;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(S(this,$a)),o.restore()},DU=function(t,i,r,s,o,a,c){const u=(i+s)/2,f=(r+o)/2,p=(s+a)/2,m=(o+c)/2;t.bezierCurveTo(u+2*(s-u)/3,f+2*(o-f)/3,p+2*(s-p)/3,m+2*(o-m)/3,p,m)},RU=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[s,o]=t[0];for(r=1;r<t.length-2;r++){const[g,v]=t[r],[w,A]=t[r+1],E=(g+w)/2,M=(v+A)/2,I=[s+2*(g-s)/3,o+2*(v-o)/3],R=[E+2*(g-E)/3,M+2*(v-M)/3];i.push([[s,o],I,R,[E,M]]),[s,o]=[E,M]}const[a,c]=t[r],[u,f]=t[r+1],p=[s+2*(a-s)/3,o+2*(c-o)/3],m=[u+2*(a-u)/3,f+2*(c-f)/3];return i.push([[s,o],p,m,[u,f]]),i},Tc=function(){if(this.isEmpty()){z(this,Ge,w0).call(this);return}z(this,Ge,_E).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),z(this,Ge,w0).call(this);for(const r of this.bezierPath2D)i.stroke(r)},SE=function(){if(S(this,Yh))return;L(this,Yh,new AbortController);const t=this._uiManager.combinedSignal(S(this,Yh));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},wE=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},TE=function(t){var i;(i=S(this,yd))==null||i.abort(),L(this,yd,null),z(this,Ge,SE).call(this),S(this,Oo)&&clearTimeout(S(this,Oo)),L(this,Oo,setTimeout(()=>{L(this,Oo,null),this.canvas.removeEventListener("contextmenu",Cs)},10)),z(this,Ge,xU).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},v0=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},S0=function(){L(this,Ya,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),S(this,Ya).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=S(this,Ya))==null||t.disconnect(),L(this,Ya,null)},{once:!0})},Hf=function(){if(!S(this,_d))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),z(this,Ge,w0).call(this)},AE=function(t,i){const r=z(this,Ge,T0).call(this),s=(t-r)/S(this,gd),o=(i-r)/S(this,md);this.scaleFactor=Math.min(s,o)},w0=function(){const t=z(this,Ge,T0).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},al=new WeakSet,kU=function(t){const i=new Path2D;for(let r=0,s=t.length;r<s;r++){const[o,a,c,u]=t[r];r===0&&i.moveTo(...o),i.bezierCurveTo(a[0],a[1],c[0],c[1],u[0],u[1])}return i},EE=function(t,i,r){const[s,o,a,c]=i;switch(r){case 0:for(let u=0,f=t.length;u<f;u+=2)t[u]+=s,t[u+1]=c-t[u+1];break;case 90:for(let u=0,f=t.length;u<f;u+=2){const p=t[u];t[u]=t[u+1]+s,t[u+1]=p+o}break;case 180:for(let u=0,f=t.length;u<f;u+=2)t[u]=a-t[u],t[u+1]+=o;break;case 270:for(let u=0,f=t.length;u<f;u+=2){const p=t[u];t[u]=a-t[u+1],t[u+1]=c-p}break;default:throw new Error("Invalid rotation")}return t},NU=function(t,i,r){const[s,o,a,c]=i;switch(r){case 0:for(let u=0,f=t.length;u<f;u+=2)t[u]-=s,t[u+1]=c-t[u+1];break;case 90:for(let u=0,f=t.length;u<f;u+=2){const p=t[u];t[u]=t[u+1]-o,t[u+1]=p-s}break;case 180:for(let u=0,f=t.length;u<f;u+=2)t[u]=a-t[u],t[u+1]-=o;break;case 270:for(let u=0,f=t.length;u<f;u+=2){const p=t[u];t[u]=c-t[u+1],t[u+1]=a-p}break;default:throw new Error("Invalid rotation")}return t},OU=function(t,i,r,s){var f,p;const o=[],a=this.thickness/2,c=t*i+a,u=t*r+a;for(const m of this.paths){const g=[],v=[];for(let w=0,A=m.length;w<A;w++){const[E,M,I,R]=m[w];if(E[0]===R[0]&&E[1]===R[1]&&A===1){const ee=t*E[0]+c,oe=t*E[1]+u;g.push(ee,oe),v.push(ee,oe);break}const D=t*E[0]+c,C=t*E[1]+u,k=t*M[0]+c,j=t*M[1]+u,U=t*I[0]+c,F=t*I[1]+u,J=t*R[0]+c,G=t*R[1]+u;w===0&&(g.push(D,C),v.push(D,C)),g.push(k,j,U,F,J,G),v.push(k,j),w===A-1&&v.push(J,G)}o.push({bezier:z(f=On,al,EE).call(f,g,s,this.rotation),points:z(p=On,al,EE).call(p,v,s,this.rotation)})}return o},CE=function(){let t=1/0,i=-1/0,r=1/0,s=-1/0;for(const o of this.paths)for(const[a,c,u,f]of o){const p=ot.bezierBoundingBox(...a,...c,...u,...f);t=Math.min(t,p[0]),r=Math.min(r,p[1]),i=Math.max(i,p[2]),s=Math.max(s,p[3])}return[t,r,i,s]},T0=function(){return S(this,_s)?Math.ceil(this.thickness*this.parentScale):0},Sy=function(t=!1){if(this.isEmpty())return;if(!S(this,_s)){z(this,Ge,Tc).call(this);return}const i=z(this,Ge,CE).call(this),r=z(this,Ge,T0).call(this);L(this,gd,Math.max(on.MIN_SIZE,i[2]-i[0])),L(this,md,Math.max(on.MIN_SIZE,i[3]-i[1]));const s=Math.ceil(r+S(this,gd)*this.scaleFactor),o=Math.ceil(r+S(this,md)*this.scaleFactor),[a,c]=this.parentDimensions;this.width=s/a,this.height=o/c,this.setAspectRatio(s,o);const u=this.translationX,f=this.translationY;this.translationX=-i[0],this.translationY=-i[1],z(this,Ge,Hf).call(this),z(this,Ge,Tc).call(this),L(this,vd,s),L(this,Sd,o),this.setDims(s,o);const p=t?r/this.scaleFactor/2:0;this.translate(u-this.translationX-p,f-this.translationY-p)},$(On,al),_t(On,"_defaultColor",null),_t(On,"_defaultOpacity",1),_t(On,"_defaultThickness",1),_t(On,"_type","ink"),_t(On,"_editorType",xt.INK);let bE=On;var Fn,Pi,mu,Wa,gu,Wh,Bo,Ka,Fo,Jr,Kh,Vt,wy,Ty,A0,xE,BU,E0,ME,C0,FU,PU;const Ry=class Ry extends on{constructor(t){super({...t,name:"stampEditor"});$(this,Vt);$(this,Fn,null);$(this,Pi,null);$(this,mu,null);$(this,Wa,null);$(this,gu,null);$(this,Wh,"");$(this,Bo,null);$(this,Ka,null);$(this,Fo,null);$(this,Jr,!1);$(this,Kh,!1);L(this,Wa,t.bitmapUrl),L(this,gu,t.bitmapFile)}static initialize(t,i){on.initialize(t,i)}static get supportedTypes(){return jt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return jt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(xt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,i;S(this,Pi)&&(L(this,Fn,null),this._uiManager.imageManager.deleteId(S(this,Pi)),(t=S(this,Bo))==null||t.remove(),L(this,Bo,null),(i=S(this,Ka))==null||i.disconnect(),L(this,Ka,null),S(this,Fo)&&(clearTimeout(S(this,Fo)),L(this,Fo,null))),super.remove()}rebuild(){if(!this.parent){S(this,Pi)&&z(this,Vt,A0).call(this);return}super.rebuild(),this.div!==null&&(S(this,Pi)&&S(this,Bo)===null&&z(this,Vt,A0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(S(this,mu)||S(this,Fn)||S(this,Wa)||S(this,gu)||S(this,Pi))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),S(this,Fn)?z(this,Vt,xE).call(this):z(this,Vt,A0).call(this),this.width&&!this.annotationElementId){const[r,s]=this.parentDimensions;this.setAt(t*r,i*s,this.width*r,this.height*s)}return this.div}copyCanvas(t,i,r=!1){var g;t||(t=224);const{width:s,height:o}=S(this,Fn),a=new A1;let c=S(this,Fn),u=s,f=o,p=null;if(i){if(s>i||o>i){const j=Math.min(i/s,i/o);u=Math.floor(s*j),f=Math.floor(o*j)}p=document.createElement("canvas");const v=p.width=Math.ceil(u*a.sx),w=p.height=Math.ceil(f*a.sy);S(this,Jr)||(c=z(this,Vt,E0).call(this,v,w));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let E="white",M="#cfcfd8";this._uiManager.hcmFilter!=="none"?M="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(E="#8f8f9d",M="#42414d");const I=15,R=I*a.sx,D=I*a.sy,C=new OffscreenCanvas(R*2,D*2),k=C.getContext("2d");k.fillStyle=E,k.fillRect(0,0,R*2,D*2),k.fillStyle=M,k.fillRect(0,0,R,D),k.fillRect(R,D,R,D),A.fillStyle=A.createPattern(C,"repeat"),A.fillRect(0,0,v,w),A.drawImage(c,0,0,c.width,c.height,0,0,v,w)}let m=null;if(r){let v,w;if(a.symmetric&&c.width<t&&c.height<t)v=c.width,w=c.height;else if(c=S(this,Fn),s>t||o>t){const M=Math.min(t/s,t/o);v=Math.floor(s*M),w=Math.floor(o*M),S(this,Jr)||(c=z(this,Vt,E0).call(this,v,w))}const E=new OffscreenCanvas(v,w).getContext("2d",{willReadFrequently:!0});E.drawImage(c,0,0,c.width,c.height,0,0,v,w),m={width:v,height:w,data:E.getImageData(0,0,v,w).data}}return{canvas:p,width:u,height:f,imageData:m}}getImageForAltText(){return S(this,Bo)}static async deserialize(t,i,r){var w;let s=null;if(t instanceof YL){const{data:{rect:A,rotation:E,id:M,structParent:I,popupRef:R},container:D,parent:{page:{pageNumber:C}}}=t,k=D.querySelector("canvas"),j=r.imageManager.getFromCanvas(D.id,k);k.remove();const U=((w=await i._structTree.getAriaAttributes(`${MC}${M}`))==null?void 0:w.get("aria-label"))||"";s=t={annotationType:xt.STAMP,bitmapId:j.id,bitmap:j.bitmap,pageIndex:C-1,rect:A.slice(0),rotation:E,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:I,popupRef:R}}const o=await super.deserialize(t,i,r),{rect:a,bitmap:c,bitmapUrl:u,bitmapId:f,isSvg:p,accessibilityData:m}=t;f&&r.imageManager.isValidId(f)?(L(o,Pi,f),c&&L(o,Fn,c)):L(o,Wa,u),L(o,Jr,p);const[g,v]=o.pageDimensions;return o.width=(a[2]-a[0])/g,o.height=(a[3]-a[1])/v,o.annotationElementId=t.id||null,m&&(o.altTextData=m),o._initialData=s,L(o,Kh,!!s),o}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:xt.STAMP,bitmapId:S(this,Pi),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:S(this,Jr),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=z(this,Vt,C0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=z(this,Vt,PU).call(this,r);if(c.isSame)return null;c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const a=S(this,Jr)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(S(this,Pi)))i.stamps.set(S(this,Pi),{area:a,serialized:r}),r.bitmap=z(this,Vt,C0).call(this,!1);else if(S(this,Jr)){const c=i.stamps.get(S(this,Pi));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=z(this,Vt,C0).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Fn=new WeakMap,Pi=new WeakMap,mu=new WeakMap,Wa=new WeakMap,gu=new WeakMap,Wh=new WeakMap,Bo=new WeakMap,Ka=new WeakMap,Fo=new WeakMap,Jr=new WeakMap,Kh=new WeakMap,Vt=new WeakSet,wy=function(t,i=!1){if(!t){this.remove();return}L(this,Fn,t.bitmap),i||(L(this,Pi,t.id),L(this,Jr,t.isSvg)),t.file&&L(this,Wh,t.file.name),z(this,Vt,xE).call(this)},Ty=function(){if(L(this,mu,null),this._uiManager.enableWaiting(!1),!!S(this,Bo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&S(this,Fn)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&S(this,Fn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},A0=function(){if(S(this,Pi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(S(this,Pi)).then(r=>z(this,Vt,wy).call(this,r,!0)).finally(()=>z(this,Vt,Ty).call(this));return}if(S(this,Wa)){const r=S(this,Wa);L(this,Wa,null),this._uiManager.enableWaiting(!0),L(this,mu,this._uiManager.imageManager.getFromUrl(r).then(s=>z(this,Vt,wy).call(this,s)).finally(()=>z(this,Vt,Ty).call(this)));return}if(S(this,gu)){const r=S(this,gu);L(this,gu,null),this._uiManager.enableWaiting(!0),L(this,mu,this._uiManager.imageManager.getFromFile(r).then(s=>z(this,Vt,wy).call(this,s)).finally(()=>z(this,Vt,Ty).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Ry.supportedTypesStr;const i=this._uiManager._signal;L(this,mu,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),z(this,Vt,wy).call(this,s)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>z(this,Vt,Ty).call(this))),t.click()},xE=function(){const{div:t}=this;let{width:i,height:r}=S(this,Fn);const[s,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*s,r=this.height*o;else if(i>a*s||r>a*o){const p=Math.min(a*s/i,a*o/r);i*=p,r*=p}const[c,u]=this.parentDimensions;this.setDims(i*c/s,r*u/o),this._uiManager.enableWaiting(!1);const f=L(this,Bo,document.createElement("canvas"));f.setAttribute("role","img"),this.addContainer(f),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),z(this,Vt,ME).call(this,i,r),z(this,Vt,FU).call(this),S(this,Kh)||(this.parent.addUndoableEditor(this),L(this,Kh,!0)),this._reportTelemetry({action:"inserted_image"}),S(this,Wh)&&f.setAttribute("aria-label",S(this,Wh))},BU=function(t,i){var a;const[r,s]=this.parentDimensions;this.width=t/r,this.height=i/s,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,S(this,Fo)!==null&&clearTimeout(S(this,Fo)),L(this,Fo,setTimeout(()=>{L(this,Fo,null),z(this,Vt,ME).call(this,t,i)},200))},E0=function(t,i){const{width:r,height:s}=S(this,Fn);let o=r,a=s,c=S(this,Fn);for(;o>2*t||a>2*i;){const u=o,f=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const p=new OffscreenCanvas(o,a);p.getContext("2d").drawImage(c,0,0,u,f,0,0,o,a),c=p.transferToImageBitmap()}return c},ME=function(t,i){const r=new A1,s=Math.ceil(t*r.sx),o=Math.ceil(i*r.sy),a=S(this,Bo);if(!a||a.width===s&&a.height===o)return;a.width=s,a.height=o;const c=S(this,Jr)?S(this,Fn):z(this,Vt,E0).call(this,s,o),u=a.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,s,o)},C0=function(t){if(t){if(S(this,Jr)){const s=this._uiManager.imageManager.getSvgUrl(S(this,Pi));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=S(this,Fn),i.getContext("2d").drawImage(S(this,Fn),0,0),i.toDataURL()}if(S(this,Jr)){const[i,r]=this.pageDimensions,s=Math.round(this.width*i*wu.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*wu.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(S(this,Fn),0,0,S(this,Fn).width,S(this,Fn).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(S(this,Fn))},FU=function(){this._uiManager._signal&&(L(this,Ka,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&z(this,Vt,BU).call(this,i.width,i.height)})),S(this,Ka).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=S(this,Ka))==null||t.disconnect(),L(this,Ka,null)},{once:!0}))},PU=function(t){var u;const{rect:i,pageIndex:r,accessibilityData:{altText:s}}=this._initialData,o=t.rect.every((f,p)=>Math.abs(f-i[p])<1),a=t.pageIndex===r,c=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===s;return{isSame:o&&a&&c,isSameAltText:c}},_t(Ry,"_type","stamp"),_t(Ry,"_editorType",xt.STAMP);let IE=Ry;var wd,Xh,Po,yu,Xa,Zr,bu,Jh,Zh,Xi,Ja,ft,_u,Li,LU,RE,kE,NE,I0;const Vs=class Vs{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:f}){$(this,Li);$(this,wd);$(this,Xh,!1);$(this,Po,null);$(this,yu,null);$(this,Xa,null);$(this,Zr,new Map);$(this,bu,!1);$(this,Jh,!1);$(this,Zh,!1);$(this,Xi,null);$(this,Ja,null);$(this,ft);const p=[...S(Vs,_u).values()];if(!Vs._initialized){Vs._initialized=!0;for(const m of p)m.initialize(f,e)}e.registerEditorTypes(p),L(this,ft,e),this.pageIndex=t,this.div=i,L(this,wd,s),L(this,Po,o),this.viewport=u,L(this,Xi,c),this.drawLayer=a,this._structTree=r,S(this,ft).addLayer(this)}get isEmpty(){return S(this,Zr).size===0}get isInvisible(){return this.isEmpty&&S(this,ft).getMode()===xt.NONE}updateToolbar(e){S(this,ft).updateToolbar(e)}updateMode(e=S(this,ft).getMode()){switch(z(this,Li,I0).call(this),e){case xt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case xt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of S(Vs,_u).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=S(this,Xi))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(S(this,ft).getMode()!==xt.INK)return;if(!e){for(const i of S(this,Zr).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){S(this,ft).setEditingState(e)}addCommands(e){S(this,ft).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=S(this,Po))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of S(this,Zr).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(S(this,ft).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!S(this,Po))return;const t=S(this,Po).getEditableAnnotations();for(const i of t){if(i.hide(),S(this,ft).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;L(this,Zh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of S(this,Zr).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(S(this,Po)){const s=S(this,Po).getEditableAnnotations();for(const o of s){const{id:a}=o.data;if(S(this,ft).isDeletedAnnotationElement(a))continue;let c=t.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(a),c&&(S(this,ft).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}z(this,Li,I0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of S(Vs,_u).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),L(this,Zh,!1)}getEditableAnnotation(e){var t;return((t=S(this,Po))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){S(this,ft).getActive()!==e&&S(this,ft).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=S(this,Xi))!=null&&e.div&&!S(this,Ja)){L(this,Ja,new AbortController);const t=S(this,ft).combinedSignal(S(this,Ja));S(this,Xi).div.addEventListener("pointerdown",z(this,Li,LU).bind(this),{signal:t}),S(this,Xi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=S(this,Xi))!=null&&e.div&&S(this,Ja)&&(S(this,Ja).abort(),L(this,Ja,null),S(this,Xi).div.classList.remove("highlighting"))}enableClick(){if(S(this,yu))return;L(this,yu,new AbortController);const e=S(this,ft).combinedSignal(S(this,yu));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=S(this,yu))==null||e.abort(),L(this,yu,null)}attach(e){S(this,Zr).set(e.id,e);const{annotationElementId:t}=e;t&&S(this,ft).isDeletedAnnotationElement(t)&&S(this,ft).removeDeletedAnnotationElement(e)}detach(e){var t;S(this,Zr).delete(e.id),(t=S(this,wd))==null||t.removePointerInTextLayer(e.contentDiv),!S(this,Zh)&&e.annotationElementId&&S(this,ft).addDeletedAnnotationElement(e)}remove(e){this.detach(e),S(this,ft).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,S(this,Jh)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(S(this,ft).addDeletedAnnotationElement(e.annotationElementId),on.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),S(this,ft).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),S(this,ft).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!S(this,Xa)&&(e._focusEventsAllowed=!1,L(this,Xa,setTimeout(()=>{L(this,Xa,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:S(this,ft)._signal}),t.focus())},0))),e._structTreeParentId=(i=S(this,wd))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return S(this,ft).getId()}combinedSignal(e){return S(this,ft).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=S(this,Li,RE))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){S(this,ft).updateToolbar(e),S(this,ft).updateMode(e);const{offsetX:i,offsetY:r}=z(this,Li,NE).call(this),s=this.getNextId(),o=z(this,Li,kE).call(this,{parent:this,id:s,x:i,y:r,uiManager:S(this,ft),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=S(Vs,_u).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,S(this,ft)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),s=z(this,Li,kE).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:S(this,ft),isCentered:t,...i});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(z(this,Li,NE).call(this),!0)}setSelected(e){S(this,ft).setSelected(e)}toggleSelected(e){S(this,ft).toggleSelected(e)}unselect(e){S(this,ft).unselect(e)}pointerup(e){const{isMac:t}=cr.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&S(this,bu)){if(L(this,bu,!1),!S(this,Xh)){L(this,Xh,!0);return}if(S(this,ft).getMode()===xt.STAMP){S(this,ft).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(S(this,ft).getMode()===xt.HIGHLIGHT&&this.enableTextSelection(),S(this,bu)){L(this,bu,!1);return}const{isMac:t}=cr.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;L(this,bu,!0);const i=S(this,ft).getActive();L(this,Xh,!i||i.isEmpty())}findNewParent(e,t,i){const r=S(this,ft).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=S(this,ft).getActive())==null?void 0:e.parent)===this&&(S(this,ft).commitOrRemove(),S(this,ft).setActiveEditor(null)),S(this,Xa)&&(clearTimeout(S(this,Xa)),L(this,Xa,null));for(const i of S(this,Zr).values())(t=S(this,wd))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,S(this,Zr).clear(),S(this,ft).removeLayer(this)}render({viewport:e}){this.viewport=e,Id(this.div,e);for(const t of S(this,ft).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){S(this,ft).commitOrRemove(),z(this,Li,I0).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Id(this.div,{rotation:i}),t!==i)for(const r of S(this,Zr).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return S(this,ft).viewParameters.realScale}};wd=new WeakMap,Xh=new WeakMap,Po=new WeakMap,yu=new WeakMap,Xa=new WeakMap,Zr=new WeakMap,bu=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,Xi=new WeakMap,Ja=new WeakMap,ft=new WeakMap,_u=new WeakMap,Li=new WeakSet,LU=function(e){S(this,ft).unselectAll();const{target:t}=e;if(t===S(this,Xi).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&S(this,Xi).div.contains(t)){const{isMac:i}=cr.platform;if(e.button!==0||e.ctrlKey&&i)return;S(this,ft).showAllEditors("highlight",!0,!0),S(this,Xi).div.classList.add("free"),this.toggleDrawing(),Y0.startHighlighting(this,S(this,ft).direction==="ltr",{target:S(this,Xi).div,x:e.x,y:e.y}),S(this,Xi).div.addEventListener("pointerup",()=>{S(this,Xi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:S(this,ft)._signal}),e.preventDefault()}},RE=function(){return S(Vs,_u).get(S(this,ft).getMode())},kE=function(e){const t=S(this,Li,RE);return t?new t.prototype.constructor(e):null},NE=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,t+r),u=(s+a)/2-e,f=(o+c)/2-t,[p,m]=this.viewport.rotation%180===0?[u,f]:[f,u];return{offsetX:p,offsetY:m}},I0=function(){L(this,Jh,!0);for(const e of S(this,Zr).values())e.isEmpty()&&e.remove();L(this,Jh,!1)},_t(Vs,"_initialized",!1),$(Vs,_u,new Map([uE,bE,IE,Y0].map(e=>[e._editorType,e])));let DE=Vs;var Lo,Qb,ai,Za,e_,BE,Rd,FE,UU;const Oi=class Oi{constructor({pageIndex:e}){$(this,Rd);$(this,Lo,null);$(this,Qb,0);$(this,ai,new Map);$(this,Za,new Map);this.pageIndex=e}setParent(e){if(!S(this,Lo)){L(this,Lo,e);return}if(S(this,Lo)!==e){if(S(this,ai).size>0)for(const t of S(this,ai).values())t.remove(),e.append(t);L(this,Lo,e)}}static get _svgFactory(){return jt(this,"_svgFactory",new UC)}draw(e,t,i,r=!1){const s=rr(this,Qb)._++,o=z(this,Rd,FE).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const a=Oi._svgFactory.createElement("defs");o.append(a);const c=Oi._svgFactory.createElement("path");a.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("d",e.toSVGPath()),r&&S(this,Za).set(s,c);const f=z(this,Rd,UU).call(this,a,u),p=Oi._svgFactory.createElement("use");return o.append(p),o.setAttribute("fill",t),o.setAttribute("fill-opacity",i),p.setAttribute("href",`#${u}`),S(this,ai).set(s,o),{id:s,clipPathId:`url(#${f})`}}drawOutline(e){const t=rr(this,Qb)._++,i=z(this,Rd,FE).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const r=Oi._svgFactory.createElement("defs");i.append(r);const s=Oi._svgFactory.createElement("path");r.append(s);const o=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",o),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let a;if(e.mustRemoveSelfIntersections){const f=Oi._svgFactory.createElement("mask");r.append(f),a=`mask_p${this.pageIndex}_${t}`,f.setAttribute("id",a),f.setAttribute("maskUnits","objectBoundingBox");const p=Oi._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=Oi._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=Oi._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),S(this,ai).set(t,i),t}finalizeLine(e,t){const i=S(this,Za).get(e);S(this,Za).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){S(this,ai).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){S(this,Za).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;z(i=Oi,e_,BE).call(i,S(this,ai).get(e),t)}show(e,t){S(this,ai).get(e).classList.toggle("hidden",!t)}rotate(e,t){S(this,ai).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){S(this,ai).get(e).setAttribute("fill",t)}changeOpacity(e,t){S(this,ai).get(e).setAttribute("fill-opacity",t)}addClass(e,t){S(this,ai).get(e).classList.add(t)}removeClass(e,t){S(this,ai).get(e).classList.remove(t)}getSVGRoot(e){return S(this,ai).get(e)}remove(e){S(this,Za).delete(e),S(this,Lo)!==null&&(S(this,ai).get(e).remove(),S(this,ai).delete(e))}destroy(){L(this,Lo,null);for(const e of S(this,ai).values())e.remove();S(this,ai).clear(),S(this,Za).clear()}};Lo=new WeakMap,Qb=new WeakMap,ai=new WeakMap,Za=new WeakMap,e_=new WeakSet,BE=function(e,{x:t=0,y:i=0,width:r=1,height:s=1}={}){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*s}%`},Rd=new WeakSet,FE=function(e){var i;const t=Oi._svgFactory.create(1,1,!0);return S(this,Lo).append(t),t.setAttribute("aria-hidden",!0),z(i=Oi,e_,BE).call(i,t,e),t},UU=function(e,t){const i=Oi._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Oi._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},$(Oi,e_);let OE=Oi;wt.AbortException;wt.AnnotationEditorLayer;wt.AnnotationEditorParamsType;wt.AnnotationEditorType;wt.AnnotationEditorUIManager;wt.AnnotationLayer;wt.AnnotationMode;wt.ColorPicker;wt.DOMSVGFactory;wt.DrawLayer;wt.FeatureTest;var Tte=wt.GlobalWorkerOptions;wt.ImageKind;wt.InvalidPDFException;wt.MissingPDFException;wt.OPS;wt.OutputScale;wt.PDFDataRangeTransport;wt.PDFDateString;wt.PDFWorker;wt.PasswordResponses;wt.PermissionFlag;wt.PixelsPerInch;wt.RenderingCancelledException;wt.TextLayer;wt.UnexpectedResponseException;wt.Util;wt.VerbosityLevel;wt.XfaLayer;wt.build;wt.createValidAbsoluteUrl;wt.fetchData;var Ate=wt.getDocument;wt.getFilenameFromUrl;wt.getPdfFilenameFromUrl;wt.getXfaPageViewport;wt.isDataScheme;wt.isPdfFile;wt.noContextMenu;wt.normalizeUnicode;wt.setLayerDimensions;wt.shadow;wt.version;Tte.workerSrc="pdfjs-dist/build/pdf.worker.mjs";const Ete=n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{typeof i.result=="string"?e(i.result.split(",")[1]):t(new Error("Failed to read file as base64: result is not a string."))},i.onerror=r=>t(r),i.readAsDataURL(n)}),Cte=n=>new Promise((e,t)=>{const i=new FileReader;i.onload=r=>{r.target&&typeof r.target.result=="string"?e(r.target.result):t(new Error("Failed to read text from file."))},i.onerror=r=>t(r),i.readAsText(n)}),Ite=async n=>{try{const t=await Ate({data:n}).promise;let i="";for(let r=1;r<=t.numPages;r++){const o=await(await t.getPage(r)).getTextContent();i+=o.items.map(a=>a.str).join(" ")+`
`}return i}catch(e){throw console.error("Error extracting text from PDF:",e),new Error("Failed to extract text from PDF.")}},xte=async n=>{const e=await Ete(n);let t;if(n.type==="application/pdf"){const i=await n.arrayBuffer();try{t=await Ite(i)}catch(r){console.warn("Could not extract text from PDF, will send raw file if model supports it.",r)}}else if(n.type.startsWith("text/"))try{t=await Cte(n)}catch(i){console.warn("Could not read text from file.",i)}return{name:n.name,type:n.type,base64Data:e,extractedText:t}},VC="chromaAINotes",Mte=()=>Math.random().toString(36).substr(2,9)+Date.now().toString(36),BS=async()=>{try{const n=localStorage.getItem(VC);return n?JSON.parse(n):[]}catch(n){return console.error("Error fetching notes from localStorage:",n),[]}},zU=async n=>{if(!n.trim())throw new Error("Note content cannot be empty.");const e=await BS(),t={id:Mte(),content:n.trim(),createdAt:new Date().toISOString()},i=[...e,t];try{return localStorage.setItem(VC,JSON.stringify(i)),t}catch(r){throw console.error("Error saving note to localStorage:",r),new Error("Failed to save note.")}},VU=async n=>{let e=await BS();const t=e.filter(i=>i.id!==n);e.length===t.length&&console.warn(`Note with ID ${n} not found for deletion.`);try{localStorage.setItem(VC,JSON.stringify(t))}catch(i){throw console.error("Error deleting note from localStorage:",i),new Error("Failed to delete note.")}};var PE=function(n,e){return PE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},PE(n,e)};function jU(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");PE(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var W0=function(){return W0=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},W0.apply(this,arguments)};function qU(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function HU(n,e,t,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function GU(n,e){return function(t,i){e(t,i,n)}}function $U(n,e,t,i,r,s){function o(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var a=i.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&n?i.static?n:n.prototype:null,f=e||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),p,m=!1,g=t.length-1;g>=0;g--){var v={};for(var w in i)v[w]=w==="access"?{}:i[w];for(var w in i.access)v.access[w]=i.access[w];v.addInitializer=function(E){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(E||null))};var A=(0,t[g])(a==="accessor"?{get:f.get,set:f.set}:f[c],v);if(a==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(p=o(A.get))&&(f.get=p),(p=o(A.set))&&(f.set=p),(p=o(A.init))&&r.unshift(p)}else(p=o(A))&&(a==="field"?r.unshift(p):f[c]=p)}u&&Object.defineProperty(u,i.name,f),m=!0}function YU(n,e,t){for(var i=arguments.length>2,r=0;r<e.length;r++)t=i?e[r].call(n,t):e[r].call(n);return i?t:void 0}function WU(n){return typeof n=="symbol"?n:"".concat(n)}function KU(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function XU(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function JU(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{u(i.next(f))}catch(p){o(p)}}function c(f){try{u(i.throw(f))}catch(p){o(p)}}function u(f){f.done?s(f.value):r(f.value).then(a,c)}u((i=i.apply(n,e||[])).next())})}function ZU(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,r,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(f){return c([u,f])}}function c(u){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(i=1,r&&(s=u[0]&2?r.return:u[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,u[1])).done)return s;switch(r=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(f){u=[6,f],r=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var FS=Object.create?function(n,e,t,i){i===void 0&&(i=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,i,r)}:function(n,e,t,i){i===void 0&&(i=t),n[i]=e[t]};function QU(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&FS(e,n,t)}function K0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jC(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function e3(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(jC(arguments[e]));return n}function t3(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var i=Array(n),r=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,r++)i[r]=s[o];return i}function n3(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))}function op(n){return this instanceof op?(this.v=n,this):new op(n)}function i3(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(g){return function(v){return Promise.resolve(v).then(g,p)}}function a(g,v){i[g]&&(r[g]=function(w){return new Promise(function(A,E){s.push([g,w,A,E])>1||c(g,w)})},v&&(r[g]=v(r[g])))}function c(g,v){try{u(i[g](v))}catch(w){m(s[0][3],w)}}function u(g){g.value instanceof op?Promise.resolve(g.value.v).then(f,p):m(s[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function m(g,v){g(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function r3(n){var e,t;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,s){e[r]=n[r]?function(o){return(t=!t)?{value:op(n[r](o)),done:!1}:s?s(o):o}:s}}function s3(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof K0=="function"?K0(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}function o3(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var Dte=Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e},LE=function(n){return LE=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},LE(n)};function a3(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=LE(n),i=0;i<t.length;i++)t[i]!=="default"&&FS(e,n,t[i]);return Dte(e,n),e}function l3(n){return n&&n.__esModule?n:{default:n}}function u3(n,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(n):i?i.value:e.get(n)}function c3(n,e,t,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(n,t):r?r.value=t:e.set(n,t),t}function d3(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function f3(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,r;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],t&&(r=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(s){return Promise.reject(s)}}),n.stack.push({value:e,dispose:i,async:t})}else t&&n.stack.push({async:!0});return e}var Rte=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var i=new Error(t);return i.name="SuppressedError",i.error=n,i.suppressed=e,i};function h3(n){function e(s){n.error=n.hasError?new Rte(s,n.error,"An error was suppressed during disposal."):s,n.hasError=!0}var t,i=0;function r(){for(;t=n.stack.pop();)try{if(!t.async&&i===1)return i=0,n.stack.push(t),Promise.resolve().then(r);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return i|=2,Promise.resolve(s).then(r,function(o){return e(o),r()})}else i|=1}catch(o){e(o)}if(i===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return r()}function p3(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,i,r,s,o){return i?e?".jsx":".js":r&&(!s||!o)?t:r+s+"."+o.toLowerCase()+"js"}):n}const kte={__extends:jU,__assign:W0,__rest:qU,__decorate:HU,__param:GU,__esDecorate:$U,__runInitializers:YU,__propKey:WU,__setFunctionName:KU,__metadata:XU,__awaiter:JU,__generator:ZU,__createBinding:FS,__exportStar:QU,__values:K0,__read:jC,__spread:e3,__spreadArrays:t3,__spreadArray:n3,__await:op,__asyncGenerator:i3,__asyncDelegator:r3,__asyncValues:s3,__makeTemplateObject:o3,__importStar:a3,__importDefault:l3,__classPrivateFieldGet:u3,__classPrivateFieldSet:c3,__classPrivateFieldIn:d3,__addDisposableResource:f3,__disposeResources:h3,__rewriteRelativeImportExtension:p3},Nte=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:f3,get __assign(){return W0},__asyncDelegator:r3,__asyncGenerator:i3,__asyncValues:s3,__await:op,__awaiter:JU,__classPrivateFieldGet:u3,__classPrivateFieldIn:d3,__classPrivateFieldSet:c3,__createBinding:FS,__decorate:HU,__disposeResources:h3,__esDecorate:$U,__exportStar:QU,__extends:jU,__generator:ZU,__importDefault:l3,__importStar:a3,__makeTemplateObject:o3,__metadata:XU,__param:GU,__propKey:WU,__read:jC,__rest:qU,__rewriteRelativeImportExtension:p3,__runInitializers:YU,__setFunctionName:KU,__spread:e3,__spreadArray:n3,__spreadArrays:t3,__values:K0,default:kte},Symbol.toStringTag,{value:"Module"}));var UE;(function(n){n[n.V1=0]="V1",n[n.V2=1]="V2",n[n.V3=2]="V3",n[n.V4=3]="V4",n[n.V5=4]="V5"})(UE||(UE={}));var X0;(function(n){n[n.Sparse=0]="Sparse",n[n.Dense=1]="Dense"})(X0||(X0={}));var eh;(function(n){n[n.HALF=0]="HALF",n[n.SINGLE=1]="SINGLE",n[n.DOUBLE=2]="DOUBLE"})(eh||(eh={}));var zE;(function(n){n[n.DAY=0]="DAY",n[n.MILLISECOND=1]="MILLISECOND"})(zE||(zE={}));var Ly;(function(n){n[n.SECOND=0]="SECOND",n[n.MILLISECOND=1]="MILLISECOND",n[n.MICROSECOND=2]="MICROSECOND",n[n.NANOSECOND=3]="NANOSECOND"})(Ly||(Ly={}));var VE;(function(n){n[n.YEAR_MONTH=0]="YEAR_MONTH",n[n.DAY_TIME=1]="DAY_TIME",n[n.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(VE||(VE={}));var PN;(function(n){n[n.NONE=0]="NONE",n[n.Schema=1]="Schema",n[n.DictionaryBatch=2]="DictionaryBatch",n[n.RecordBatch=3]="RecordBatch",n[n.Tensor=4]="Tensor",n[n.SparseTensor=5]="SparseTensor"})(PN||(PN={}));var It;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Duration=18]="Duration",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth",n[n.DurationSecond=-27]="DurationSecond",n[n.DurationMillisecond=-28]="DurationMillisecond",n[n.DurationMicrosecond=-29]="DurationMicrosecond",n[n.DurationNanosecond=-30]="DurationNanosecond"})(It||(It={}));var LN;(function(n){n[n.OFFSET=0]="OFFSET",n[n.DATA=1]="DATA",n[n.VALIDITY=2]="VALIDITY",n[n.TYPE=3]="TYPE"})(LN||(LN={}));function Ote(n){if(typeof n=="bigint"&&(n<Number.MIN_SAFE_INTEGER||n>Number.MAX_SAFE_INTEGER))throw new TypeError(`${n} is not safe to convert to a number.`);return Number(n)}var m3,g3,y3,b3,_3,v3,S3,w3,T3,A3,E3,C3,I3,x3,M3,D3,R3,k3,N3,O3;class Tn{static isNull(e){return(e==null?void 0:e.typeId)===It.Null}static isInt(e){return(e==null?void 0:e.typeId)===It.Int}static isFloat(e){return(e==null?void 0:e.typeId)===It.Float}static isBinary(e){return(e==null?void 0:e.typeId)===It.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===It.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===It.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===It.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===It.Date}static isTime(e){return(e==null?void 0:e.typeId)===It.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===It.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===It.Interval}static isDuration(e){return(e==null?void 0:e.typeId)===It.Duration}static isList(e){return(e==null?void 0:e.typeId)===It.List}static isStruct(e){return(e==null?void 0:e.typeId)===It.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===It.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===It.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===It.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===It.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===It.Dictionary}static isDenseUnion(e){return Tn.isUnion(e)&&e.mode===X0.Dense}static isSparseUnion(e){return Tn.isUnion(e)&&e.mode===X0.Sparse}get typeId(){return It.NONE}}m3=Symbol.toStringTag;Tn[m3]=(n=>(n.children=null,n.ArrayType=Array,n[Symbol.toStringTag]="DataType"))(Tn.prototype);class UN extends Tn{toString(){return"Null"}get typeId(){return It.Null}}g3=Symbol.toStringTag;UN[g3]=(n=>n[Symbol.toStringTag]="Null")(UN.prototype);class zN extends Tn{constructor(e,t){super(),this.isSigned=e,this.bitWidth=t}get typeId(){return It.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}y3=Symbol.toStringTag;zN[y3]=(n=>(n.isSigned=null,n.bitWidth=null,n[Symbol.toStringTag]="Int"))(zN.prototype);class jE extends Tn{constructor(e){super(),this.precision=e}get typeId(){return It.Float}get ArrayType(){switch(this.precision){case eh.HALF:return Uint16Array;case eh.SINGLE:return Float32Array;case eh.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}b3=Symbol.toStringTag;jE[b3]=(n=>(n.precision=null,n[Symbol.toStringTag]="Float"))(jE.prototype);class B3 extends jE{constructor(){super(eh.SINGLE)}}Object.defineProperty(B3.prototype,"ArrayType",{value:Float32Array});class VN extends Tn{constructor(){super()}get typeId(){return It.Binary}toString(){return"Binary"}}_3=Symbol.toStringTag;VN[_3]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Binary"))(VN.prototype);class Yf extends Tn{constructor(){super()}get typeId(){return It.Utf8}toString(){return"Utf8"}}v3=Symbol.toStringTag;Yf[v3]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Utf8"))(Yf.prototype);class jN extends Tn{constructor(){super()}get typeId(){return It.Bool}toString(){return"Bool"}}S3=Symbol.toStringTag;jN[S3]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Bool"))(jN.prototype);class qN extends Tn{constructor(e,t,i=128){super(),this.scale=e,this.precision=t,this.bitWidth=i}get typeId(){return It.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}w3=Symbol.toStringTag;qN[w3]=(n=>(n.scale=null,n.precision=null,n.ArrayType=Uint32Array,n[Symbol.toStringTag]="Decimal"))(qN.prototype);class HN extends Tn{constructor(e){super(),this.unit=e}get typeId(){return It.Date}toString(){return`Date${(this.unit+1)*32}<${zE[this.unit]}>`}}T3=Symbol.toStringTag;HN[T3]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Date"))(HN.prototype);class GN extends Tn{constructor(e,t){super(),this.unit=e,this.bitWidth=t}get typeId(){return It.Time}toString(){return`Time${this.bitWidth}<${Ly[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}A3=Symbol.toStringTag;GN[A3]=(n=>(n.unit=null,n.bitWidth=null,n[Symbol.toStringTag]="Time"))(GN.prototype);class $N extends Tn{constructor(e,t){super(),this.unit=e,this.timezone=t}get typeId(){return It.Timestamp}toString(){return`Timestamp<${Ly[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}E3=Symbol.toStringTag;$N[E3]=(n=>(n.unit=null,n.timezone=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Timestamp"))($N.prototype);class YN extends Tn{constructor(e){super(),this.unit=e}get typeId(){return It.Interval}toString(){return`Interval<${VE[this.unit]}>`}}C3=Symbol.toStringTag;YN[C3]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Interval"))(YN.prototype);class WN extends Tn{constructor(e){super(),this.unit=e}get typeId(){return It.Duration}toString(){return`Duration<${Ly[this.unit]}>`}}I3=Symbol.toStringTag;WN[I3]=(n=>(n.unit=null,n.ArrayType=BigInt64Array,n[Symbol.toStringTag]="Duration"))(WN.prototype);class KN extends Tn{constructor(e){super(),this.children=[e]}get typeId(){return It.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}x3=Symbol.toStringTag;KN[x3]=(n=>(n.children=null,n[Symbol.toStringTag]="List"))(KN.prototype);class XN extends Tn{constructor(e){super(),this.children=e}get typeId(){return It.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}M3=Symbol.toStringTag;XN[M3]=(n=>(n.children=null,n[Symbol.toStringTag]="Struct"))(XN.prototype);class JN extends Tn{constructor(e,t,i){super(),this.mode=e,this.children=i,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((r,s,o)=>(r[s]=o)&&r||r,Object.create(null))}get typeId(){return It.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}D3=Symbol.toStringTag;JN[D3]=(n=>(n.mode=null,n.typeIds=null,n.children=null,n.typeIdToChildIndex=null,n.ArrayType=Int8Array,n[Symbol.toStringTag]="Union"))(JN.prototype);class ZN extends Tn{constructor(e){super(),this.byteWidth=e}get typeId(){return It.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}R3=Symbol.toStringTag;ZN[R3]=(n=>(n.byteWidth=null,n.ArrayType=Uint8Array,n[Symbol.toStringTag]="FixedSizeBinary"))(ZN.prototype);class qE extends Tn{constructor(e,t){super(),this.listSize=e,this.children=[t]}get typeId(){return It.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}k3=Symbol.toStringTag;qE[k3]=(n=>(n.children=null,n.listSize=null,n[Symbol.toStringTag]="FixedSizeList"))(qE.prototype);class QN extends Tn{constructor(e,t=!1){var i,r,s;if(super(),this.children=[e],this.keysSorted=t,e&&(e.name="entries",!((i=e==null?void 0:e.type)===null||i===void 0)&&i.children)){const o=(r=e==null?void 0:e.type)===null||r===void 0?void 0:r.children[0];o&&(o.name="key");const a=(s=e==null?void 0:e.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return It.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}N3=Symbol.toStringTag;QN[N3]=(n=>(n.children=null,n.keysSorted=null,n[Symbol.toStringTag]="Map_"))(QN.prototype);const Bte=(n=>()=>++n)(-1);class eO extends Tn{constructor(e,t,i,r){super(),this.indices=t,this.dictionary=e,this.isOrdered=r||!1,this.id=i==null?Bte():Ote(i)}get typeId(){return It.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}O3=Symbol.toStringTag;eO[O3]=(n=>(n.id=null,n.indices=null,n.isOrdered=null,n.dictionary=null,n[Symbol.toStringTag]="Dictionary"))(eO.prototype);const x0=2,io=4,Uo=4,F3=4,xa=new Int32Array(2),HE=new Float32Array(xa.buffer),GE=new Float64Array(xa.buffer),Ay=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var J0;(function(n){n[n.UTF8_BYTES=1]="UTF8_BYTES",n[n.UTF16_STRING=2]="UTF16_STRING"})(J0||(J0={}));class Uy{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new Uy(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return xa[0]=this.readInt32(e),HE[0]}readFloat64(e){return xa[Ay?0:1]=this.readInt32(e),xa[Ay?1:0]=this.readInt32(e+4),GE[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){HE[0]=t,this.writeInt32(e,xa[0])}writeFloat64(e,t){GE[0]=t,this.writeInt32(e,xa[Ay?0:1]),this.writeInt32(e+4,xa[Ay?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+io+Uo)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<Uo;t++)e+=String.fromCharCode(this.readInt8(this.position_+io+t));return e}__offset(e,t){const i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const i=this.readInt32(e);e+=io;const r=this.bytes_.subarray(e,e+i);return t===J0.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+io}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=Uo)throw new Error("FlatBuffers: file identifier must be length "+Uo);for(let t=0;t<Uo;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+io+t))return!1;return!0}createScalarList(e,t){const i=[];for(let r=0;r<t;++r){const s=e(r);s!==null&&i.push(s)}return i}createObjList(e,t){const i=[];for(let r=0;r<t;++r){const s=e(r);s!==null&&i.push(s.unpack())}return i}}class qC{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let t;e?t=e:t=1024,this.bb=Uy.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const i=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<i+e+t;){const r=this.bb.capacity();this.bb=qC.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||t!==i)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=t<<1,r=Uy.allocate(i);return r.setPosition(i-t),r.bytes().set(e.bytes(),i-t),r}addOffset(e){this.prep(io,0),this.writeInt32(this.offset()-e+io)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&this.vtable[t]==0;t--);const i=t+1;for(;t>=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const r=2;this.addInt16(e-this.object_start);const s=(i+r)*x0;this.addInt16(s);let o=0;const a=this.space;e:for(t=0;t<this.vtables.length;t++){const c=this.bb.capacity()-this.vtables[t];if(s==this.bb.readInt16(c)){for(let u=x0;u<s;u+=x0)if(this.bb.readInt16(a+u)!=this.bb.readInt16(c+u))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){const r=i?F3:0;if(t){const s=t;if(this.prep(this.minalign,io+Uo+r),s.length!=Uo)throw new TypeError("FlatBuffers: file identifier must be length "+Uo);for(let o=Uo-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,io+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(t<this.bb.readInt16(r)&&this.bb.readInt16(r+t)!=0))throw new TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(io,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(e==null)return 0;let t;e instanceof Uint8Array?t=e:t=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(let i=0,r=this.space,s=this.bb.bytes();i<t.length;i++)s[r++]=t[i];return this.endVector()}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let i=0;i<e.length;++i){const r=e[i];if(r!==null)t.push(this.createObjectOffset(r));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}const Fte=Object.freeze(Object.defineProperty({__proto__:null,Builder:qC,ByteBuffer:Uy,get Encoding(){return J0},FILE_IDENTIFIER_LENGTH:Uo,SIZEOF_INT:io,SIZEOF_SHORT:x0,SIZE_PREFIX_LENGTH:F3,float32:HE,float64:GE,int32:xa,isLittleEndian:Ay},Symbol.toStringTag,{value:"Module"}));class no{constructor(e=[],t,i,r=UE.V5){this.fields=e||[],this.metadata=t||new Map,i||(i=$E(e)),this.dictionaries=i,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(e){const t=new Set(e),i=this.fields.filter(r=>t.has(r.name));return new no(i,this.metadata)}selectAt(e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new no(t,this.metadata)}assign(...e){const t=e[0]instanceof no?e[0]:Array.isArray(e[0])?new no(e[0]):new no(e),i=[...this.fields],r=qv(qv(new Map,this.metadata),t.metadata),s=t.fields.filter(a=>{const c=i.findIndex(u=>u.name===a.name);return~c?(i[c]=a.clone({metadata:qv(qv(new Map,i[c].metadata),a.metadata)}))&&!1:!0}),o=$E(s,new Map);return new no([...i,...s],r,new Map([...this.dictionaries,...o]))}}no.prototype.fields=null;no.prototype.metadata=null;no.prototype.dictionaries=null;class es{static new(...e){let[t,i,r,s]=e;return e[0]&&typeof e[0]=="object"&&({name:t}=e[0],i===void 0&&(i=e[0].type),r===void 0&&(r=e[0].nullable),s===void 0&&(s=e[0].metadata)),new es(`${t}`,i,r,s)}constructor(e,t,i=!1,r){this.name=e,this.type=t,this.nullable=i,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[t,i,r,s]=e;return!e[0]||typeof e[0]!="object"?[t=this.name,i=this.type,r=this.nullable,s=this.metadata]=e:{name:t=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=e[0],es.new(t,i,r,s)}}es.prototype.type=null;es.prototype.name=null;es.prototype.nullable=null;es.prototype.metadata=null;function qv(n,e){return new Map([...n||new Map,...e||new Map])}function $E(n,e=new Map){for(let t=-1,i=n.length;++t<i;){const s=n[t].type;if(Tn.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&$E(s.children,e)}return e}var IA={},xA={};const dt=zF(Nte);var Hv={},We={},sc={},tO;function pp(){if(tO)return sc;tO=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.encodeUtf8=sc.decodeUtf8=void 0;const n=new TextDecoder("utf-8"),e=r=>n.decode(r);sc.decodeUtf8=e;const t=new TextEncoder,i=r=>t.encode(r);return sc.encodeUtf8=i,sc}var MA={},nO;function Pd(){return nO||(nO=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFlatbuffersByteBuffer=n.isReadableNodeStream=n.isWritableNodeStream=n.isReadableDOMStream=n.isWritableDOMStream=n.isFetchResponse=n.isFSReadStream=n.isFileHandle=n.isUnderlyingSink=n.isIteratorResult=n.isArrayLike=n.isArrowJSON=n.isAsyncIterable=n.isIterable=n.isObservable=n.isPromise=n.isObject=void 0;const e=C=>typeof C=="number",t=C=>typeof C=="boolean",i=C=>typeof C=="function",r=C=>C!=null&&Object(C)===C;n.isObject=r;const s=C=>(0,n.isObject)(C)&&i(C.then);n.isPromise=s;const o=C=>(0,n.isObject)(C)&&i(C.subscribe);n.isObservable=o;const a=C=>(0,n.isObject)(C)&&i(C[Symbol.iterator]);n.isIterable=a;const c=C=>(0,n.isObject)(C)&&i(C[Symbol.asyncIterator]);n.isAsyncIterable=c;const u=C=>(0,n.isObject)(C)&&(0,n.isObject)(C.schema);n.isArrowJSON=u;const f=C=>(0,n.isObject)(C)&&e(C.length);n.isArrayLike=f;const p=C=>(0,n.isObject)(C)&&"done"in C&&"value"in C;n.isIteratorResult=p;const m=C=>(0,n.isObject)(C)&&i(C.abort)&&i(C.close)&&i(C.start)&&i(C.write);n.isUnderlyingSink=m;const g=C=>(0,n.isObject)(C)&&i(C.stat)&&e(C.fd);n.isFileHandle=g;const v=C=>(0,n.isReadableNodeStream)(C)&&e(C.bytesRead);n.isFSReadStream=v;const w=C=>(0,n.isObject)(C)&&(0,n.isReadableDOMStream)(C.body);n.isFetchResponse=w;const A=C=>"_getDOMStream"in C&&"_getNodeStream"in C,E=C=>(0,n.isObject)(C)&&i(C.abort)&&i(C.getWriter)&&!A(C);n.isWritableDOMStream=E;const M=C=>(0,n.isObject)(C)&&i(C.cancel)&&i(C.getReader)&&!A(C);n.isReadableDOMStream=M;const I=C=>(0,n.isObject)(C)&&i(C.end)&&i(C.write)&&t(C.writable)&&!A(C);n.isWritableNodeStream=I;const R=C=>(0,n.isObject)(C)&&i(C.read)&&i(C.pipe)&&t(C.readable)&&!A(C);n.isReadableNodeStream=R;const D=C=>(0,n.isObject)(C)&&i(C.clear)&&i(C.bytes)&&i(C.position)&&i(C.setPosition)&&i(C.capacity)&&i(C.getBufferIdentifier)&&i(C.createLong);n.isFlatbuffersByteBuffer=D}(MA)),MA}var iO;function er(){if(iO)return We;iO=1,Object.defineProperty(We,"__esModule",{value:!0}),We.compareArrayLike=We.rebaseValueOffsets=We.toUint8ClampedArrayAsyncIterator=We.toFloat64ArrayAsyncIterator=We.toFloat32ArrayAsyncIterator=We.toUint32ArrayAsyncIterator=We.toUint16ArrayAsyncIterator=We.toUint8ArrayAsyncIterator=We.toInt32ArrayAsyncIterator=We.toInt16ArrayAsyncIterator=We.toInt8ArrayAsyncIterator=We.toArrayBufferViewAsyncIterator=We.toUint8ClampedArrayIterator=We.toFloat64ArrayIterator=We.toFloat32ArrayIterator=We.toUint32ArrayIterator=We.toUint16ArrayIterator=We.toUint8ArrayIterator=We.toInt32ArrayIterator=We.toInt16ArrayIterator=We.toInt8ArrayIterator=We.toArrayBufferViewIterator=We.toUint8ClampedArray=We.toFloat64Array=We.toFloat32Array=We.toBigUint64Array=We.toUint32Array=We.toUint16Array=We.toUint8Array=We.toBigInt64Array=We.toInt32Array=We.toInt16Array=We.toInt8Array=We.toArrayBufferView=We.joinUint8Arrays=We.memcpy=void 0;const n=dt,e=pp(),t=Pd(),i=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function r(re){const ae=re[0]?[re[0]]:[];let de,fe,Pe,Ue;for(let Je,$e,tt=0,Ut=0,zt=re.length;++tt<zt;){if(Je=ae[Ut],$e=re[tt],!Je||!$e||Je.buffer!==$e.buffer||$e.byteOffset<Je.byteOffset){$e&&(ae[++Ut]=$e);continue}if({byteOffset:de,byteLength:Pe}=Je,{byteOffset:fe,byteLength:Ue}=$e,de+Pe<fe||fe+Ue<de){$e&&(ae[++Ut]=$e);continue}ae[Ut]=new Uint8Array(Je.buffer,de,fe-de+Ue)}return ae}function s(re,ae,de=0,fe=ae.byteLength){const Pe=re.byteLength,Ue=new Uint8Array(re.buffer,re.byteOffset,Pe),Je=new Uint8Array(ae.buffer,ae.byteOffset,Math.min(fe,Pe));return Ue.set(Je,de),re}We.memcpy=s;function o(re,ae){const de=r(re),fe=de.reduce((zt,Zt)=>zt+Zt.byteLength,0);let Pe,Ue,Je,$e=0,tt=-1;const Ut=Math.min(ae||Number.POSITIVE_INFINITY,fe);for(const zt=de.length;++tt<zt;){if(Pe=de[tt],Ue=Pe.subarray(0,Math.min(Pe.length,Ut-$e)),Ut<=$e+Ue.length){Ue.length<Pe.length?de[tt]=Pe.subarray(Ue.length):Ue.length===Pe.length&&tt++,Je?s(Je,Ue,$e):Je=Ue;break}s(Je||(Je=new Uint8Array(Ut)),Ue,$e),$e+=Ue.length}return[Je||new Uint8Array(0),de.slice(tt),fe-(Je?Je.byteLength:0)]}We.joinUint8Arrays=o;function a(re,ae){let de=(0,t.isIteratorResult)(ae)?ae.value:ae;return de instanceof re?re===Uint8Array?new re(de.buffer,de.byteOffset,de.byteLength):de:de?(typeof de=="string"&&(de=(0,e.encodeUtf8)(de)),de instanceof ArrayBuffer?new re(de):de instanceof i?new re(de):(0,t.isFlatbuffersByteBuffer)(de)?a(re,de.bytes()):ArrayBuffer.isView(de)?de.byteLength<=0?new re(0):new re(de.buffer,de.byteOffset,de.byteLength/re.BYTES_PER_ELEMENT):re.from(de)):new re(0)}We.toArrayBufferView=a;const c=re=>a(Int8Array,re);We.toInt8Array=c;const u=re=>a(Int16Array,re);We.toInt16Array=u;const f=re=>a(Int32Array,re);We.toInt32Array=f;const p=re=>a(BigInt64Array,re);We.toBigInt64Array=p;const m=re=>a(Uint8Array,re);We.toUint8Array=m;const g=re=>a(Uint16Array,re);We.toUint16Array=g;const v=re=>a(Uint32Array,re);We.toUint32Array=v;const w=re=>a(BigUint64Array,re);We.toBigUint64Array=w;const A=re=>a(Float32Array,re);We.toFloat32Array=A;const E=re=>a(Float64Array,re);We.toFloat64Array=E;const M=re=>a(Uint8ClampedArray,re);We.toUint8ClampedArray=M;const I=re=>(re.next(),re);function*R(re,ae){const de=function*(Pe){yield Pe},fe=typeof ae=="string"||ArrayBuffer.isView(ae)||ae instanceof ArrayBuffer||ae instanceof i?de(ae):(0,t.isIterable)(ae)?ae:de(ae);return yield*I(function*(Pe){let Ue=null;do Ue=Pe.next(yield a(re,Ue));while(!Ue.done)}(fe[Symbol.iterator]())),new re}We.toArrayBufferViewIterator=R;const D=re=>R(Int8Array,re);We.toInt8ArrayIterator=D;const C=re=>R(Int16Array,re);We.toInt16ArrayIterator=C;const k=re=>R(Int32Array,re);We.toInt32ArrayIterator=k;const j=re=>R(Uint8Array,re);We.toUint8ArrayIterator=j;const U=re=>R(Uint16Array,re);We.toUint16ArrayIterator=U;const F=re=>R(Uint32Array,re);We.toUint32ArrayIterator=F;const J=re=>R(Float32Array,re);We.toFloat32ArrayIterator=J;const G=re=>R(Float64Array,re);We.toFloat64ArrayIterator=G;const ee=re=>R(Uint8ClampedArray,re);We.toUint8ClampedArrayIterator=ee;function oe(re,ae){return n.__asyncGenerator(this,arguments,function*(){if((0,t.isPromise)(ae))return yield n.__await(yield n.__await(yield*n.__asyncDelegator(n.__asyncValues(oe(re,yield n.__await(ae))))));const fe=function(Je){return n.__asyncGenerator(this,arguments,function*(){yield yield n.__await(yield n.__await(Je))})},Pe=function(Je){return n.__asyncGenerator(this,arguments,function*(){yield n.__await(yield*n.__asyncDelegator(n.__asyncValues(I(function*($e){let tt=null;do tt=$e.next(yield tt==null?void 0:tt.value);while(!tt.done)}(Je[Symbol.iterator]())))))})},Ue=typeof ae=="string"||ArrayBuffer.isView(ae)||ae instanceof ArrayBuffer||ae instanceof i?fe(ae):(0,t.isIterable)(ae)?Pe(ae):(0,t.isAsyncIterable)(ae)?ae:fe(ae);return yield n.__await(yield*n.__asyncDelegator(n.__asyncValues(I(function(Je){return n.__asyncGenerator(this,arguments,function*(){let $e=null;do $e=yield n.__await(Je.next(yield yield n.__await(a(re,$e))));while(!$e.done)})}(Ue[Symbol.asyncIterator]()))))),yield n.__await(new re)})}We.toArrayBufferViewAsyncIterator=oe;const me=re=>oe(Int8Array,re);We.toInt8ArrayAsyncIterator=me;const Q=re=>oe(Int16Array,re);We.toInt16ArrayAsyncIterator=Q;const V=re=>oe(Int32Array,re);We.toInt32ArrayAsyncIterator=V;const te=re=>oe(Uint8Array,re);We.toUint8ArrayAsyncIterator=te;const xe=re=>oe(Uint16Array,re);We.toUint16ArrayAsyncIterator=xe;const N=re=>oe(Uint32Array,re);We.toUint32ArrayAsyncIterator=N;const ce=re=>oe(Float32Array,re);We.toFloat32ArrayAsyncIterator=ce;const Me=re=>oe(Float64Array,re);We.toFloat64ArrayAsyncIterator=Me;const q=re=>oe(Uint8ClampedArray,re);We.toUint8ClampedArrayAsyncIterator=q;function Re(re,ae,de){if(re!==0){de=de.slice(0,ae);for(let fe=-1,Pe=de.length;++fe<Pe;)de[fe]+=re}return de.subarray(0,ae)}We.rebaseValueOffsets=Re;function je(re,ae){let de=0;const fe=re.length;if(fe!==ae.length)return!1;if(fe>0)do if(re[de]!==ae[de])return!1;while(++de<fe);return!0}return We.compareArrayLike=je,We}var rO;function PS(){if(rO)return Hv;rO=1,Object.defineProperty(Hv,"__esModule",{value:!0});const n=dt,e=er();Hv.default={fromIterable(u){return t(i(u))},fromAsyncIterable(u){return t(r(u))},fromDOMStream(u){return t(s(u))},fromNodeStream(u){return t(c(u))},toDOMStream(u,f){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(u,f){throw new Error('"toNodeStream" not available in this environment')}};const t=u=>(u.next(),u);function*i(u){let f,p=!1,m=[],g,v,w,A=0;function E(){return v==="peek"?(0,e.joinUint8Arrays)(m,w)[0]:([g,m,A]=(0,e.joinUint8Arrays)(m,w),g)}({cmd:v,size:w}=yield null);const M=(0,e.toUint8ArrayIterator)(u)[Symbol.iterator]();try{do if({done:f,value:g}=Number.isNaN(w-A)?M.next():M.next(w-A),!f&&g.byteLength>0&&(m.push(g),A+=g.byteLength),f||w<=A)do({cmd:v,size:w}=yield E());while(w<A);while(!f)}catch(I){(p=!0)&&typeof M.throw=="function"&&M.throw(I)}finally{p===!1&&typeof M.return=="function"&&M.return(null)}return null}function r(u){return n.__asyncGenerator(this,arguments,function*(){let p,m=!1,g=[],v,w,A,E=0;function M(){return w==="peek"?(0,e.joinUint8Arrays)(g,A)[0]:([v,g,E]=(0,e.joinUint8Arrays)(g,A),v)}({cmd:w,size:A}=yield yield n.__await(null));const I=(0,e.toUint8ArrayAsyncIterator)(u)[Symbol.asyncIterator]();try{do if({done:p,value:v}=Number.isNaN(A-E)?yield n.__await(I.next()):yield n.__await(I.next(A-E)),!p&&v.byteLength>0&&(g.push(v),E+=v.byteLength),p||A<=E)do({cmd:w,size:A}=yield yield n.__await(M()));while(A<E);while(!p)}catch(R){(m=!0)&&typeof I.throw=="function"&&(yield n.__await(I.throw(R)))}finally{m===!1&&typeof I.return=="function"&&(yield n.__await(I.return(new Uint8Array(0))))}return yield n.__await(null)})}function s(u){return n.__asyncGenerator(this,arguments,function*(){let p=!1,m=!1,g=[],v,w,A,E=0;function M(){return w==="peek"?(0,e.joinUint8Arrays)(g,A)[0]:([v,g,E]=(0,e.joinUint8Arrays)(g,A),v)}({cmd:w,size:A}=yield yield n.__await(null));const I=new o(u);try{do if({done:p,value:v}=Number.isNaN(A-E)?yield n.__await(I.read()):yield n.__await(I.read(A-E)),!p&&v.byteLength>0&&(g.push((0,e.toUint8Array)(v)),E+=v.byteLength),p||A<=E)do({cmd:w,size:A}=yield yield n.__await(M()));while(A<E);while(!p)}catch(R){(m=!0)&&(yield n.__await(I.cancel(R)))}finally{m===!1?yield n.__await(I.cancel()):u.locked&&I.releaseLock()}return yield n.__await(null)})}class o{constructor(f){this.source=f,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(f){return n.__awaiter(this,void 0,void 0,function*(){const{reader:p,source:m}=this;p&&(yield p.cancel(f).catch(()=>{})),m&&m.locked&&this.releaseLock()})}read(f){return n.__awaiter(this,void 0,void 0,function*(){if(f===0)return{done:this.reader==null,value:new Uint8Array(0)};const p=yield this.reader.read();return!p.done&&(p.value=(0,e.toUint8Array)(p)),p})}}const a=(u,f)=>{const p=g=>m([f,g]);let m;return[f,p,new Promise(g=>(m=g)&&u.once(f,p))]};function c(u){return n.__asyncGenerator(this,arguments,function*(){const p=[];let m="error",g=!1,v=null,w,A,E=0,M=[],I;function R(){return w==="peek"?(0,e.joinUint8Arrays)(M,A)[0]:([I,M,E]=(0,e.joinUint8Arrays)(M,A),I)}if({cmd:w,size:A}=yield yield n.__await(null),u.isTTY)return yield yield n.__await(new Uint8Array(0)),yield n.__await(null);try{p[0]=a(u,"end"),p[1]=a(u,"error");do{if(p[2]=a(u,"readable"),[m,v]=yield n.__await(Promise.race(p.map(C=>C[2]))),m==="error")break;if((g=m==="end")||(Number.isFinite(A-E)?(I=(0,e.toUint8Array)(u.read(A-E)),I.byteLength<A-E&&(I=(0,e.toUint8Array)(u.read()))):I=(0,e.toUint8Array)(u.read()),I.byteLength>0&&(M.push(I),E+=I.byteLength)),g||A<=E)do({cmd:w,size:A}=yield yield n.__await(R()));while(A<E)}while(!g)}finally{yield n.__await(D(p,m==="error"?v:null))}return yield n.__await(null);function D(C,k){return I=M=null,new Promise((j,U)=>{for(const[F,J]of C)u.off(F,J);try{const F=u.destroy;F&&F.call(u,k),k=void 0}catch(F){k=F||k}finally{k!=null?U(k):j()}})}})}return Hv}var ha={},oc={},Yn={},sO;function Ln(){if(sO)return Yn;sO=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.BufferType=Yn.Type=Yn.MessageHeader=Yn.IntervalUnit=Yn.TimeUnit=Yn.DateUnit=Yn.Precision=Yn.UnionMode=Yn.MetadataVersion=void 0;var n;(function(u){u[u.V1=0]="V1",u[u.V2=1]="V2",u[u.V3=2]="V3",u[u.V4=3]="V4",u[u.V5=4]="V5"})(n||(Yn.MetadataVersion=n={}));var e;(function(u){u[u.Sparse=0]="Sparse",u[u.Dense=1]="Dense"})(e||(Yn.UnionMode=e={}));var t;(function(u){u[u.HALF=0]="HALF",u[u.SINGLE=1]="SINGLE",u[u.DOUBLE=2]="DOUBLE"})(t||(Yn.Precision=t={}));var i;(function(u){u[u.DAY=0]="DAY",u[u.MILLISECOND=1]="MILLISECOND"})(i||(Yn.DateUnit=i={}));var r;(function(u){u[u.SECOND=0]="SECOND",u[u.MILLISECOND=1]="MILLISECOND",u[u.MICROSECOND=2]="MICROSECOND",u[u.NANOSECOND=3]="NANOSECOND"})(r||(Yn.TimeUnit=r={}));var s;(function(u){u[u.YEAR_MONTH=0]="YEAR_MONTH",u[u.DAY_TIME=1]="DAY_TIME",u[u.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(s||(Yn.IntervalUnit=s={}));var o;(function(u){u[u.NONE=0]="NONE",u[u.Schema=1]="Schema",u[u.DictionaryBatch=2]="DictionaryBatch",u[u.RecordBatch=3]="RecordBatch",u[u.Tensor=4]="Tensor",u[u.SparseTensor=5]="SparseTensor"})(o||(Yn.MessageHeader=o={}));var a;(function(u){u[u.NONE=0]="NONE",u[u.Null=1]="Null",u[u.Int=2]="Int",u[u.Float=3]="Float",u[u.Binary=4]="Binary",u[u.Utf8=5]="Utf8",u[u.Bool=6]="Bool",u[u.Decimal=7]="Decimal",u[u.Date=8]="Date",u[u.Time=9]="Time",u[u.Timestamp=10]="Timestamp",u[u.Interval=11]="Interval",u[u.List=12]="List",u[u.Struct=13]="Struct",u[u.Union=14]="Union",u[u.FixedSizeBinary=15]="FixedSizeBinary",u[u.FixedSizeList=16]="FixedSizeList",u[u.Map=17]="Map",u[u.Duration=18]="Duration",u[u.Dictionary=-1]="Dictionary",u[u.Int8=-2]="Int8",u[u.Int16=-3]="Int16",u[u.Int32=-4]="Int32",u[u.Int64=-5]="Int64",u[u.Uint8=-6]="Uint8",u[u.Uint16=-7]="Uint16",u[u.Uint32=-8]="Uint32",u[u.Uint64=-9]="Uint64",u[u.Float16=-10]="Float16",u[u.Float32=-11]="Float32",u[u.Float64=-12]="Float64",u[u.DateDay=-13]="DateDay",u[u.DateMillisecond=-14]="DateMillisecond",u[u.TimestampSecond=-15]="TimestampSecond",u[u.TimestampMillisecond=-16]="TimestampMillisecond",u[u.TimestampMicrosecond=-17]="TimestampMicrosecond",u[u.TimestampNanosecond=-18]="TimestampNanosecond",u[u.TimeSecond=-19]="TimeSecond",u[u.TimeMillisecond=-20]="TimeMillisecond",u[u.TimeMicrosecond=-21]="TimeMicrosecond",u[u.TimeNanosecond=-22]="TimeNanosecond",u[u.DenseUnion=-23]="DenseUnion",u[u.SparseUnion=-24]="SparseUnion",u[u.IntervalDayTime=-25]="IntervalDayTime",u[u.IntervalYearMonth=-26]="IntervalYearMonth",u[u.DurationSecond=-27]="DurationSecond",u[u.DurationMillisecond=-28]="DurationMillisecond",u[u.DurationMicrosecond=-29]="DurationMicrosecond",u[u.DurationNanosecond=-30]="DurationNanosecond"})(a||(Yn.Type=a={}));var c;return function(u){u[u.OFFSET=0]="OFFSET",u[u.DATA=1]="DATA",u[u.VALIDITY=2]="VALIDITY",u[u.TYPE=3]="TYPE"}(c||(Yn.BufferType=c={})),Yn}var pa={},DA={},Nm={},oO;function LS(){if(oO)return Nm;oO=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.valueToString=void 0;const n=void 0;function e(t){if(t===null)return"null";if(t===n)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(i=>e(i))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(i,r)=>typeof r=="bigint"?`${r}`:r)}return Nm.valueToString=e,Nm}var RA={},kA={},aO;function HC(){return aO||(aO=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.BN=n.bigNumToBigInt=n.bigNumToString=n.isArrowBigNumSymbol=void 0;const e=er();n.isArrowBigNumSymbol=Symbol.for("isArrowBigNum");function t(u,...f){return f.length===0?Object.setPrototypeOf((0,e.toArrayBufferView)(this.TypedArray,u),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(u,...f),this.constructor.prototype)}t.prototype[n.isArrowBigNumSymbol]=!0,t.prototype.toJSON=function(){return`"${(0,n.bigNumToString)(this)}"`},t.prototype.valueOf=function(){return o(this)},t.prototype.toString=function(){return(0,n.bigNumToString)(this)},t.prototype[Symbol.toPrimitive]=function(u="default"){switch(u){case"number":return o(this);case"string":return(0,n.bigNumToString)(this);case"default":return(0,n.bigNumToBigInt)(this)}return(0,n.bigNumToString)(this)};function i(...u){return t.apply(this,u)}function r(...u){return t.apply(this,u)}function s(...u){return t.apply(this,u)}Object.setPrototypeOf(i.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(r.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(s.prototype,Object.create(Uint32Array.prototype)),Object.assign(i.prototype,t.prototype,{constructor:i,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(r.prototype,t.prototype,{constructor:r,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(s.prototype,t.prototype,{constructor:s,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function o(u){const{buffer:f,byteOffset:p,length:m,signed:g}=u,v=new BigUint64Array(f,p,m),w=g&&v.at(-1)&BigInt(1)<<BigInt(63);let A=BigInt(w?1:0),E=BigInt(0);if(w){for(const M of v)A+=~M*(BigInt(1)<<BigInt(32)*E++);A*=BigInt(-1)}else for(const M of v)A+=M*(BigInt(1)<<BigInt(32)*E++);return A}n.bigNumToString=u=>{if(u.byteLength===8)return`${new u.BigIntArray(u.buffer,u.byteOffset,1)[0]}`;if(!u.signed)return a(u);let f=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/2);if(new Int16Array([f.at(-1)])[0]>=0)return a(u);f=f.slice();let m=1;for(let v=0;v<f.length;v++){const w=f[v],A=~w+m;f[v]=A,m&=w===0?1:0}return`-${a(f)}`},n.bigNumToBigInt=u=>u.byteLength===8?new u.BigIntArray(u.buffer,u.byteOffset,1)[0]:(0,n.bigNumToString)(u);function a(u){let f="";const p=new Uint32Array(2);let m=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/2);const g=new Uint32Array((m=new Uint16Array(m).reverse()).buffer);let v=-1;const w=m.length-1;do{for(p[0]=m[v=0];v<w;)m[v++]=p[1]=p[0]/10,p[0]=(p[0]-p[1]*10<<16)+m[v];m[v]=p[1]=p[0]/10,p[0]=p[0]-p[1]*10,f=`${p[0]}${f}`}while(g[0]||g[1]||g[2]||g[3]);return f??"0"}class c{static new(f,p){switch(p){case!0:return new i(f);case!1:return new r(f)}switch(f.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new i(f)}return f.byteLength===16?new s(f):new r(f)}static signed(f){return new i(f)}static unsigned(f){return new r(f)}static decimal(f){return new s(f)}constructor(f,p){return c.new(f,p)}}n.BN=c}(kA)),kA}var Om={},Be={},Bm={},lO;function GC(){if(lO)return Bm;lO=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.bigIntToNumber=void 0;function n(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}return Bm.bigIntToNumber=n,Bm}var uO;function An(){if(uO)return Be;uO=1;var n,e,t,i,r,s,o,a,c,u,f,p,m,g,v,w,A,E,M,I;Object.defineProperty(Be,"__esModule",{value:!0}),Be.strideForType=Be.Dictionary=Be.Map_=Be.FixedSizeList=Be.FixedSizeBinary=Be.SparseUnion=Be.DenseUnion=Be.Union=Be.Struct=Be.List=Be.DurationNanosecond=Be.DurationMicrosecond=Be.DurationMillisecond=Be.DurationSecond=Be.Duration=Be.IntervalYearMonth=Be.IntervalDayTime=Be.Interval=Be.TimestampNanosecond=Be.TimestampMicrosecond=Be.TimestampMillisecond=Be.TimestampSecond=Be.Timestamp=Be.TimeNanosecond=Be.TimeMicrosecond=Be.TimeMillisecond=Be.TimeSecond=Be.Time=Be.DateMillisecond=Be.DateDay=Be.Date_=Be.Decimal=Be.Bool=Be.Utf8=Be.Binary=Be.Float64=Be.Float32=Be.Float16=Be.Float=Be.Uint64=Be.Uint32=Be.Uint16=Be.Uint8=Be.Int64=Be.Int32=Be.Int16=Be.Int8=Be.Int=Be.Null=Be.DataType=void 0;const R=GC(),D=Ln();class C{static isNull(ve){return(ve==null?void 0:ve.typeId)===D.Type.Null}static isInt(ve){return(ve==null?void 0:ve.typeId)===D.Type.Int}static isFloat(ve){return(ve==null?void 0:ve.typeId)===D.Type.Float}static isBinary(ve){return(ve==null?void 0:ve.typeId)===D.Type.Binary}static isUtf8(ve){return(ve==null?void 0:ve.typeId)===D.Type.Utf8}static isBool(ve){return(ve==null?void 0:ve.typeId)===D.Type.Bool}static isDecimal(ve){return(ve==null?void 0:ve.typeId)===D.Type.Decimal}static isDate(ve){return(ve==null?void 0:ve.typeId)===D.Type.Date}static isTime(ve){return(ve==null?void 0:ve.typeId)===D.Type.Time}static isTimestamp(ve){return(ve==null?void 0:ve.typeId)===D.Type.Timestamp}static isInterval(ve){return(ve==null?void 0:ve.typeId)===D.Type.Interval}static isDuration(ve){return(ve==null?void 0:ve.typeId)===D.Type.Duration}static isList(ve){return(ve==null?void 0:ve.typeId)===D.Type.List}static isStruct(ve){return(ve==null?void 0:ve.typeId)===D.Type.Struct}static isUnion(ve){return(ve==null?void 0:ve.typeId)===D.Type.Union}static isFixedSizeBinary(ve){return(ve==null?void 0:ve.typeId)===D.Type.FixedSizeBinary}static isFixedSizeList(ve){return(ve==null?void 0:ve.typeId)===D.Type.FixedSizeList}static isMap(ve){return(ve==null?void 0:ve.typeId)===D.Type.Map}static isDictionary(ve){return(ve==null?void 0:ve.typeId)===D.Type.Dictionary}static isDenseUnion(ve){return C.isUnion(ve)&&ve.mode===D.UnionMode.Dense}static isSparseUnion(ve){return C.isUnion(ve)&&ve.mode===D.UnionMode.Sparse}get typeId(){return D.Type.NONE}}Be.DataType=C,n=Symbol.toStringTag,C[n]=(Ce=>(Ce.children=null,Ce.ArrayType=Array,Ce[Symbol.toStringTag]="DataType"))(C.prototype);class k extends C{toString(){return"Null"}get typeId(){return D.Type.Null}}Be.Null=k,e=Symbol.toStringTag,k[e]=(Ce=>Ce[Symbol.toStringTag]="Null")(k.prototype);class j extends C{constructor(ve,mn){super(),this.isSigned=ve,this.bitWidth=mn}get typeId(){return D.Type.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Be.Int=j,t=Symbol.toStringTag,j[t]=(Ce=>(Ce.isSigned=null,Ce.bitWidth=null,Ce[Symbol.toStringTag]="Int"))(j.prototype);class U extends j{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}Be.Int8=U;class F extends j{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}Be.Int16=F;class J extends j{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Be.Int32=J;class G extends j{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}Be.Int64=G;class ee extends j{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}Be.Uint8=ee;class oe extends j{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}Be.Uint16=oe;class me extends j{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}Be.Uint32=me;class Q extends j{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Be.Uint64=Q,Object.defineProperty(U.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(F.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(J.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(G.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(ee.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(oe.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(me.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(Q.prototype,"ArrayType",{value:BigUint64Array});class V extends C{constructor(ve){super(),this.precision=ve}get typeId(){return D.Type.Float}get ArrayType(){switch(this.precision){case D.Precision.HALF:return Uint16Array;case D.Precision.SINGLE:return Float32Array;case D.Precision.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Be.Float=V,i=Symbol.toStringTag,V[i]=(Ce=>(Ce.precision=null,Ce[Symbol.toStringTag]="Float"))(V.prototype);class te extends V{constructor(){super(D.Precision.HALF)}}Be.Float16=te;class xe extends V{constructor(){super(D.Precision.SINGLE)}}Be.Float32=xe;class N extends V{constructor(){super(D.Precision.DOUBLE)}}Be.Float64=N,Object.defineProperty(te.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(xe.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(N.prototype,"ArrayType",{value:Float64Array});class ce extends C{constructor(){super()}get typeId(){return D.Type.Binary}toString(){return"Binary"}}Be.Binary=ce,r=Symbol.toStringTag,ce[r]=(Ce=>(Ce.ArrayType=Uint8Array,Ce[Symbol.toStringTag]="Binary"))(ce.prototype);class Me extends C{constructor(){super()}get typeId(){return D.Type.Utf8}toString(){return"Utf8"}}Be.Utf8=Me,s=Symbol.toStringTag,Me[s]=(Ce=>(Ce.ArrayType=Uint8Array,Ce[Symbol.toStringTag]="Utf8"))(Me.prototype);class q extends C{constructor(){super()}get typeId(){return D.Type.Bool}toString(){return"Bool"}}Be.Bool=q,o=Symbol.toStringTag,q[o]=(Ce=>(Ce.ArrayType=Uint8Array,Ce[Symbol.toStringTag]="Bool"))(q.prototype);class Re extends C{constructor(ve,mn,Ui=128){super(),this.scale=ve,this.precision=mn,this.bitWidth=Ui}get typeId(){return D.Type.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Be.Decimal=Re,a=Symbol.toStringTag,Re[a]=(Ce=>(Ce.scale=null,Ce.precision=null,Ce.ArrayType=Uint32Array,Ce[Symbol.toStringTag]="Decimal"))(Re.prototype);class je extends C{constructor(ve){super(),this.unit=ve}get typeId(){return D.Type.Date}toString(){return`Date${(this.unit+1)*32}<${D.DateUnit[this.unit]}>`}}Be.Date_=je,c=Symbol.toStringTag,je[c]=(Ce=>(Ce.unit=null,Ce.ArrayType=Int32Array,Ce[Symbol.toStringTag]="Date"))(je.prototype);class re extends je{constructor(){super(D.DateUnit.DAY)}}Be.DateDay=re;class ae extends je{constructor(){super(D.DateUnit.MILLISECOND)}}Be.DateMillisecond=ae;class de extends C{constructor(ve,mn){super(),this.unit=ve,this.bitWidth=mn}get typeId(){return D.Type.Time}toString(){return`Time${this.bitWidth}<${D.TimeUnit[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Be.Time=de,u=Symbol.toStringTag,de[u]=(Ce=>(Ce.unit=null,Ce.bitWidth=null,Ce[Symbol.toStringTag]="Time"))(de.prototype);class fe extends de{constructor(){super(D.TimeUnit.SECOND,32)}}Be.TimeSecond=fe;class Pe extends de{constructor(){super(D.TimeUnit.MILLISECOND,32)}}Be.TimeMillisecond=Pe;class Ue extends de{constructor(){super(D.TimeUnit.MICROSECOND,64)}}Be.TimeMicrosecond=Ue;class Je extends de{constructor(){super(D.TimeUnit.NANOSECOND,64)}}Be.TimeNanosecond=Je;class $e extends C{constructor(ve,mn){super(),this.unit=ve,this.timezone=mn}get typeId(){return D.Type.Timestamp}toString(){return`Timestamp<${D.TimeUnit[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Be.Timestamp=$e,f=Symbol.toStringTag,$e[f]=(Ce=>(Ce.unit=null,Ce.timezone=null,Ce.ArrayType=Int32Array,Ce[Symbol.toStringTag]="Timestamp"))($e.prototype);class tt extends $e{constructor(ve){super(D.TimeUnit.SECOND,ve)}}Be.TimestampSecond=tt;class Ut extends $e{constructor(ve){super(D.TimeUnit.MILLISECOND,ve)}}Be.TimestampMillisecond=Ut;class zt extends $e{constructor(ve){super(D.TimeUnit.MICROSECOND,ve)}}Be.TimestampMicrosecond=zt;class Zt extends $e{constructor(ve){super(D.TimeUnit.NANOSECOND,ve)}}Be.TimestampNanosecond=Zt;class $t extends C{constructor(ve){super(),this.unit=ve}get typeId(){return D.Type.Interval}toString(){return`Interval<${D.IntervalUnit[this.unit]}>`}}Be.Interval=$t,p=Symbol.toStringTag,$t[p]=(Ce=>(Ce.unit=null,Ce.ArrayType=Int32Array,Ce[Symbol.toStringTag]="Interval"))($t.prototype);class we extends $t{constructor(){super(D.IntervalUnit.DAY_TIME)}}Be.IntervalDayTime=we;class Ae extends $t{constructor(){super(D.IntervalUnit.YEAR_MONTH)}}Be.IntervalYearMonth=Ae;class Se extends C{constructor(ve){super(),this.unit=ve}get typeId(){return D.Type.Duration}toString(){return`Duration<${D.TimeUnit[this.unit]}>`}}Be.Duration=Se,m=Symbol.toStringTag,Se[m]=(Ce=>(Ce.unit=null,Ce.ArrayType=BigInt64Array,Ce[Symbol.toStringTag]="Duration"))(Se.prototype);class Ze extends Se{constructor(){super(D.TimeUnit.SECOND)}}Be.DurationSecond=Ze;class ge extends Se{constructor(){super(D.TimeUnit.MILLISECOND)}}Be.DurationMillisecond=ge;class X extends Se{constructor(){super(D.TimeUnit.MICROSECOND)}}Be.DurationMicrosecond=X;class Y extends Se{constructor(){super(D.TimeUnit.NANOSECOND)}}Be.DurationNanosecond=Y;class Z extends C{constructor(ve){super(),this.children=[ve]}get typeId(){return D.Type.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Be.List=Z,g=Symbol.toStringTag,Z[g]=(Ce=>(Ce.children=null,Ce[Symbol.toStringTag]="List"))(Z.prototype);class ue extends C{constructor(ve){super(),this.children=ve}get typeId(){return D.Type.Struct}toString(){return`Struct<{${this.children.map(ve=>`${ve.name}:${ve.type}`).join(", ")}}>`}}Be.Struct=ue,v=Symbol.toStringTag,ue[v]=(Ce=>(Ce.children=null,Ce[Symbol.toStringTag]="Struct"))(ue.prototype);class Oe extends C{constructor(ve,mn,Ui){super(),this.mode=ve,this.children=Ui,this.typeIds=mn=Int32Array.from(mn),this.typeIdToChildIndex=mn.reduce((tr,pr,$o)=>(tr[pr]=$o)&&tr||tr,Object.create(null))}get typeId(){return D.Type.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(ve=>`${ve.type}`).join(" | ")}>`}}Be.Union=Oe,w=Symbol.toStringTag,Oe[w]=(Ce=>(Ce.mode=null,Ce.typeIds=null,Ce.children=null,Ce.typeIdToChildIndex=null,Ce.ArrayType=Int8Array,Ce[Symbol.toStringTag]="Union"))(Oe.prototype);class Le extends Oe{constructor(ve,mn){super(D.UnionMode.Dense,ve,mn)}}Be.DenseUnion=Le;class st extends Oe{constructor(ve,mn){super(D.UnionMode.Sparse,ve,mn)}}Be.SparseUnion=st;class Yt extends C{constructor(ve){super(),this.byteWidth=ve}get typeId(){return D.Type.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Be.FixedSizeBinary=Yt,A=Symbol.toStringTag,Yt[A]=(Ce=>(Ce.byteWidth=null,Ce.ArrayType=Uint8Array,Ce[Symbol.toStringTag]="FixedSizeBinary"))(Yt.prototype);class ei extends C{constructor(ve,mn){super(),this.listSize=ve,this.children=[mn]}get typeId(){return D.Type.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Be.FixedSizeList=ei,E=Symbol.toStringTag,ei[E]=(Ce=>(Ce.children=null,Ce.listSize=null,Ce[Symbol.toStringTag]="FixedSizeList"))(ei.prototype);class Mn extends C{constructor(ve,mn=!1){var Ui,tr,pr;if(super(),this.children=[ve],this.keysSorted=mn,ve&&(ve.name="entries",!((Ui=ve==null?void 0:ve.type)===null||Ui===void 0)&&Ui.children)){const $o=(tr=ve==null?void 0:ve.type)===null||tr===void 0?void 0:tr.children[0];$o&&($o.name="key");const Ru=(pr=ve==null?void 0:ve.type)===null||pr===void 0?void 0:pr.children[1];Ru&&(Ru.name="value")}}get typeId(){return D.Type.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(ve=>`${ve.name}:${ve.type}`).join(", ")}}>`}}Be.Map_=Mn,M=Symbol.toStringTag,Mn[M]=(Ce=>(Ce.children=null,Ce.keysSorted=null,Ce[Symbol.toStringTag]="Map_"))(Mn.prototype);const Si=(Ce=>()=>++Ce)(-1);class En extends C{constructor(ve,mn,Ui,tr){super(),this.indices=mn,this.dictionary=ve,this.isOrdered=tr||!1,this.id=Ui==null?Si():(0,R.bigIntToNumber)(Ui)}get typeId(){return D.Type.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Be.Dictionary=En,I=Symbol.toStringTag,En[I]=(Ce=>(Ce.id=null,Ce.indices=null,Ce.isOrdered=null,Ce.dictionary=null,Ce[Symbol.toStringTag]="Dictionary"))(En.prototype);function vn(Ce){const ve=Ce;switch(Ce.typeId){case D.Type.Decimal:return Ce.bitWidth/32;case D.Type.Timestamp:return 2;case D.Type.Date:return 1+ve.unit;case D.Type.Interval:return 1+ve.unit;case D.Type.FixedSizeList:return ve.listSize;case D.Type.FixedSizeBinary:return ve.byteWidth;default:return 1}}return Be.strideForType=vn,Be}var cO;function Ir(){if(cO)return Om;cO=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.Visitor=void 0;const n=Ln(),e=An();class t{visitMany(a,...c){return a.map((u,f)=>this.visit(u,...c.map(p=>p[f])))}visit(...a){return this.getVisitFn(a[0],!1).apply(this,a)}getVisitFn(a,c=!0){return i(this,a,c)}getVisitFnByTypeId(a,c=!0){return r(this,a,c)}visitNull(a,...c){return null}visitBool(a,...c){return null}visitInt(a,...c){return null}visitFloat(a,...c){return null}visitUtf8(a,...c){return null}visitBinary(a,...c){return null}visitFixedSizeBinary(a,...c){return null}visitDate(a,...c){return null}visitTimestamp(a,...c){return null}visitTime(a,...c){return null}visitDecimal(a,...c){return null}visitList(a,...c){return null}visitStruct(a,...c){return null}visitUnion(a,...c){return null}visitDictionary(a,...c){return null}visitInterval(a,...c){return null}visitDuration(a,...c){return null}visitFixedSizeList(a,...c){return null}visitMap(a,...c){return null}}Om.Visitor=t;function i(o,a,c=!0){return typeof a=="number"?r(o,a,c):typeof a=="string"&&a in n.Type?r(o,n.Type[a],c):a&&a instanceof e.DataType?r(o,s(a),c):a!=null&&a.type&&a.type instanceof e.DataType?r(o,s(a.type),c):r(o,n.Type.NONE,c)}function r(o,a,c=!0){let u=null;switch(a){case n.Type.Null:u=o.visitNull;break;case n.Type.Bool:u=o.visitBool;break;case n.Type.Int:u=o.visitInt;break;case n.Type.Int8:u=o.visitInt8||o.visitInt;break;case n.Type.Int16:u=o.visitInt16||o.visitInt;break;case n.Type.Int32:u=o.visitInt32||o.visitInt;break;case n.Type.Int64:u=o.visitInt64||o.visitInt;break;case n.Type.Uint8:u=o.visitUint8||o.visitInt;break;case n.Type.Uint16:u=o.visitUint16||o.visitInt;break;case n.Type.Uint32:u=o.visitUint32||o.visitInt;break;case n.Type.Uint64:u=o.visitUint64||o.visitInt;break;case n.Type.Float:u=o.visitFloat;break;case n.Type.Float16:u=o.visitFloat16||o.visitFloat;break;case n.Type.Float32:u=o.visitFloat32||o.visitFloat;break;case n.Type.Float64:u=o.visitFloat64||o.visitFloat;break;case n.Type.Utf8:u=o.visitUtf8;break;case n.Type.Binary:u=o.visitBinary;break;case n.Type.FixedSizeBinary:u=o.visitFixedSizeBinary;break;case n.Type.Date:u=o.visitDate;break;case n.Type.DateDay:u=o.visitDateDay||o.visitDate;break;case n.Type.DateMillisecond:u=o.visitDateMillisecond||o.visitDate;break;case n.Type.Timestamp:u=o.visitTimestamp;break;case n.Type.TimestampSecond:u=o.visitTimestampSecond||o.visitTimestamp;break;case n.Type.TimestampMillisecond:u=o.visitTimestampMillisecond||o.visitTimestamp;break;case n.Type.TimestampMicrosecond:u=o.visitTimestampMicrosecond||o.visitTimestamp;break;case n.Type.TimestampNanosecond:u=o.visitTimestampNanosecond||o.visitTimestamp;break;case n.Type.Time:u=o.visitTime;break;case n.Type.TimeSecond:u=o.visitTimeSecond||o.visitTime;break;case n.Type.TimeMillisecond:u=o.visitTimeMillisecond||o.visitTime;break;case n.Type.TimeMicrosecond:u=o.visitTimeMicrosecond||o.visitTime;break;case n.Type.TimeNanosecond:u=o.visitTimeNanosecond||o.visitTime;break;case n.Type.Decimal:u=o.visitDecimal;break;case n.Type.List:u=o.visitList;break;case n.Type.Struct:u=o.visitStruct;break;case n.Type.Union:u=o.visitUnion;break;case n.Type.DenseUnion:u=o.visitDenseUnion||o.visitUnion;break;case n.Type.SparseUnion:u=o.visitSparseUnion||o.visitUnion;break;case n.Type.Dictionary:u=o.visitDictionary;break;case n.Type.Interval:u=o.visitInterval;break;case n.Type.IntervalDayTime:u=o.visitIntervalDayTime||o.visitInterval;break;case n.Type.IntervalYearMonth:u=o.visitIntervalYearMonth||o.visitInterval;break;case n.Type.Duration:u=o.visitDuration;break;case n.Type.DurationSecond:u=o.visitDurationSecond||o.visitDuration;break;case n.Type.DurationMillisecond:u=o.visitDurationMillisecond||o.visitDuration;break;case n.Type.DurationMicrosecond:u=o.visitDurationMicrosecond||o.visitDuration;break;case n.Type.DurationNanosecond:u=o.visitDurationNanosecond||o.visitDuration;break;case n.Type.FixedSizeList:u=o.visitFixedSizeList;break;case n.Type.Map:u=o.visitMap;break}if(typeof u=="function")return u;if(!c)return()=>null;throw new Error(`Unrecognized type '${n.Type[a]}'`)}function s(o){switch(o.typeId){case n.Type.Null:return n.Type.Null;case n.Type.Int:{const{bitWidth:a,isSigned:c}=o;switch(a){case 8:return c?n.Type.Int8:n.Type.Uint8;case 16:return c?n.Type.Int16:n.Type.Uint16;case 32:return c?n.Type.Int32:n.Type.Uint32;case 64:return c?n.Type.Int64:n.Type.Uint64}return n.Type.Int}case n.Type.Float:switch(o.precision){case n.Precision.HALF:return n.Type.Float16;case n.Precision.SINGLE:return n.Type.Float32;case n.Precision.DOUBLE:return n.Type.Float64}return n.Type.Float;case n.Type.Binary:return n.Type.Binary;case n.Type.Utf8:return n.Type.Utf8;case n.Type.Bool:return n.Type.Bool;case n.Type.Decimal:return n.Type.Decimal;case n.Type.Time:switch(o.unit){case n.TimeUnit.SECOND:return n.Type.TimeSecond;case n.TimeUnit.MILLISECOND:return n.Type.TimeMillisecond;case n.TimeUnit.MICROSECOND:return n.Type.TimeMicrosecond;case n.TimeUnit.NANOSECOND:return n.Type.TimeNanosecond}return n.Type.Time;case n.Type.Timestamp:switch(o.unit){case n.TimeUnit.SECOND:return n.Type.TimestampSecond;case n.TimeUnit.MILLISECOND:return n.Type.TimestampMillisecond;case n.TimeUnit.MICROSECOND:return n.Type.TimestampMicrosecond;case n.TimeUnit.NANOSECOND:return n.Type.TimestampNanosecond}return n.Type.Timestamp;case n.Type.Date:switch(o.unit){case n.DateUnit.DAY:return n.Type.DateDay;case n.DateUnit.MILLISECOND:return n.Type.DateMillisecond}return n.Type.Date;case n.Type.Interval:switch(o.unit){case n.IntervalUnit.DAY_TIME:return n.Type.IntervalDayTime;case n.IntervalUnit.YEAR_MONTH:return n.Type.IntervalYearMonth}return n.Type.Interval;case n.Type.Duration:switch(o.unit){case n.TimeUnit.SECOND:return n.Type.DurationSecond;case n.TimeUnit.MILLISECOND:return n.Type.DurationMillisecond;case n.TimeUnit.MICROSECOND:return n.Type.DurationMicrosecond;case n.TimeUnit.NANOSECOND:return n.Type.DurationNanosecond}return n.Type.Duration;case n.Type.Map:return n.Type.Map;case n.Type.List:return n.Type.List;case n.Type.Struct:return n.Type.Struct;case n.Type.Union:switch(o.mode){case n.UnionMode.Dense:return n.Type.DenseUnion;case n.UnionMode.Sparse:return n.Type.SparseUnion}return n.Type.Union;case n.Type.FixedSizeBinary:return n.Type.FixedSizeBinary;case n.Type.FixedSizeList:return n.Type.FixedSizeList;case n.Type.Dictionary:return n.Type.Dictionary}throw new Error(`Unrecognized type '${n.Type[o.typeId]}'`)}return t.prototype.visitInt8=null,t.prototype.visitInt16=null,t.prototype.visitInt32=null,t.prototype.visitInt64=null,t.prototype.visitUint8=null,t.prototype.visitUint16=null,t.prototype.visitUint32=null,t.prototype.visitUint64=null,t.prototype.visitFloat16=null,t.prototype.visitFloat32=null,t.prototype.visitFloat64=null,t.prototype.visitDateDay=null,t.prototype.visitDateMillisecond=null,t.prototype.visitTimestampSecond=null,t.prototype.visitTimestampMillisecond=null,t.prototype.visitTimestampMicrosecond=null,t.prototype.visitTimestampNanosecond=null,t.prototype.visitTimeSecond=null,t.prototype.visitTimeMillisecond=null,t.prototype.visitTimeMicrosecond=null,t.prototype.visitTimeNanosecond=null,t.prototype.visitDenseUnion=null,t.prototype.visitSparseUnion=null,t.prototype.visitIntervalDayTime=null,t.prototype.visitIntervalYearMonth=null,t.prototype.visitDuration=null,t.prototype.visitDurationSecond=null,t.prototype.visitDurationMillisecond=null,t.prototype.visitDurationMicrosecond=null,t.prototype.visitDurationNanosecond=null,Om}var Fm={},NA={},ac={},dO;function US(){if(dO)return ac;dO=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.float64ToUint16=ac.uint16ToFloat64=void 0;const n=new Float64Array(1),e=new Uint32Array(n.buffer);function t(r){const s=(r&31744)>>10,o=(r&1023)/1024,a=Math.pow(-1,(r&32768)>>15);switch(s){case 31:return a*(o?Number.NaN:1/0);case 0:return a*(o?6103515625e-14*o:0)}return a*Math.pow(2,s-15)*(1+o)}ac.uint16ToFloat64=t;function i(r){if(r!==r)return 32256;n[0]=r;const s=(e[1]&2147483648)>>16&65535;let o=e[1]&2146435072,a=0;return o>=1089470464?e[0]>0?o=31744:(o=(o&2080374784)>>16,a=(e[1]&1048575)>>10):o<=1056964608?(a=1048576+(e[1]&1048575),a=1048576+(a<<(o>>20)-998)>>21,o=0):(o=o-1056964608>>10,a=(e[1]&1048575)+512>>10),s|o|a&65535}return ac.float64ToUint16=i,ac}var fO;function xs(){return fO||(fO=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.instance=n.setDuration=n.setDurationNanosecond=n.setDurationMicrosecond=n.setDurationMillisecond=n.setDurationSecond=n.setIntervalYearMonth=n.setIntervalDayTime=n.setIntervalValue=n.setDecimal=n.setTime=n.setTimeNanosecond=n.setTimeMicrosecond=n.setTimeMillisecond=n.setTimeSecond=n.setTimestamp=n.setTimestampNanosecond=n.setTimestampMicrosecond=n.setTimestampMillisecond=n.setTimestampSecond=n.setDate=n.setFixedSizeBinary=n.setDateMillisecond=n.setDateDay=n.setAnyFloat=n.setFloat16=n.setFloat=n.setInt=n.setVariableWidthBytes=n.setEpochMsToNanosecondsLong=n.setEpochMsToMicrosecondsLong=n.setEpochMsToMillisecondsLong=n.setEpochMsToDays=n.SetVisitor=void 0;const e=xr(),t=Ir(),i=pp(),r=US(),s=Ln();class o extends t.Visitor{}n.SetVisitor=o;function a(we){return(Ae,Se,Ze)=>{if(Ae.setValid(Se,Ze!=null))return we(Ae,Se,Ze)}}const c=(we,Ae,Se)=>{we[Ae]=Math.trunc(Se/864e5)};n.setEpochMsToDays=c;const u=(we,Ae,Se)=>{we[Ae]=Math.trunc(Se%4294967296),we[Ae+1]=Math.trunc(Se/4294967296)};n.setEpochMsToMillisecondsLong=u;const f=(we,Ae,Se)=>{we[Ae]=Math.trunc(Se*1e3%4294967296),we[Ae+1]=Math.trunc(Se*1e3/4294967296)};n.setEpochMsToMicrosecondsLong=f;const p=(we,Ae,Se)=>{we[Ae]=Math.trunc(Se*1e6%4294967296),we[Ae+1]=Math.trunc(Se*1e6/4294967296)};n.setEpochMsToNanosecondsLong=p;const m=(we,Ae,Se,Ze)=>{if(Se+1<Ae.length){const{[Se]:ge,[Se+1]:X}=Ae;we.set(Ze.subarray(0,X-ge),ge)}};n.setVariableWidthBytes=m;const g=({offset:we,values:Ae},Se,Ze)=>{const ge=we+Se;Ze?Ae[ge>>3]|=1<<ge%8:Ae[ge>>3]&=~(1<<ge%8)},v=({values:we},Ae,Se)=>{we[Ae]=Se};n.setInt=v;const w=({values:we},Ae,Se)=>{we[Ae]=Se};n.setFloat=w;const A=({values:we},Ae,Se)=>{we[Ae]=(0,r.float64ToUint16)(Se)};n.setFloat16=A;const E=(we,Ae,Se)=>{switch(we.type.precision){case s.Precision.HALF:return(0,n.setFloat16)(we,Ae,Se);case s.Precision.SINGLE:case s.Precision.DOUBLE:return(0,n.setFloat)(we,Ae,Se)}};n.setAnyFloat=E;const M=({values:we},Ae,Se)=>{(0,n.setEpochMsToDays)(we,Ae,Se.valueOf())};n.setDateDay=M;const I=({values:we},Ae,Se)=>{(0,n.setEpochMsToMillisecondsLong)(we,Ae*2,Se.valueOf())};n.setDateMillisecond=I;const R=({stride:we,values:Ae},Se,Ze)=>{Ae.set(Ze.subarray(0,we),we*Se)};n.setFixedSizeBinary=R;const D=({values:we,valueOffsets:Ae},Se,Ze)=>(0,n.setVariableWidthBytes)(we,Ae,Se,Ze),C=({values:we,valueOffsets:Ae},Se,Ze)=>{(0,n.setVariableWidthBytes)(we,Ae,Se,(0,i.encodeUtf8)(Ze))},k=(we,Ae,Se)=>{we.type.unit===s.DateUnit.DAY?(0,n.setDateDay)(we,Ae,Se):(0,n.setDateMillisecond)(we,Ae,Se)};n.setDate=k;const j=({values:we},Ae,Se)=>(0,n.setEpochMsToMillisecondsLong)(we,Ae*2,Se/1e3);n.setTimestampSecond=j;const U=({values:we},Ae,Se)=>(0,n.setEpochMsToMillisecondsLong)(we,Ae*2,Se);n.setTimestampMillisecond=U;const F=({values:we},Ae,Se)=>(0,n.setEpochMsToMicrosecondsLong)(we,Ae*2,Se);n.setTimestampMicrosecond=F;const J=({values:we},Ae,Se)=>(0,n.setEpochMsToNanosecondsLong)(we,Ae*2,Se);n.setTimestampNanosecond=J;const G=(we,Ae,Se)=>{switch(we.type.unit){case s.TimeUnit.SECOND:return(0,n.setTimestampSecond)(we,Ae,Se);case s.TimeUnit.MILLISECOND:return(0,n.setTimestampMillisecond)(we,Ae,Se);case s.TimeUnit.MICROSECOND:return(0,n.setTimestampMicrosecond)(we,Ae,Se);case s.TimeUnit.NANOSECOND:return(0,n.setTimestampNanosecond)(we,Ae,Se)}};n.setTimestamp=G;const ee=({values:we},Ae,Se)=>{we[Ae]=Se};n.setTimeSecond=ee;const oe=({values:we},Ae,Se)=>{we[Ae]=Se};n.setTimeMillisecond=oe;const me=({values:we},Ae,Se)=>{we[Ae]=Se};n.setTimeMicrosecond=me;const Q=({values:we},Ae,Se)=>{we[Ae]=Se};n.setTimeNanosecond=Q;const V=(we,Ae,Se)=>{switch(we.type.unit){case s.TimeUnit.SECOND:return(0,n.setTimeSecond)(we,Ae,Se);case s.TimeUnit.MILLISECOND:return(0,n.setTimeMillisecond)(we,Ae,Se);case s.TimeUnit.MICROSECOND:return(0,n.setTimeMicrosecond)(we,Ae,Se);case s.TimeUnit.NANOSECOND:return(0,n.setTimeNanosecond)(we,Ae,Se)}};n.setTime=V;const te=({values:we,stride:Ae},Se,Ze)=>{we.set(Ze.subarray(0,Ae),Ae*Se)};n.setDecimal=te;const xe=(we,Ae,Se)=>{const Ze=we.children[0],ge=we.valueOffsets,X=n.instance.getVisitFn(Ze);if(Array.isArray(Se))for(let Y=-1,Z=ge[Ae],ue=ge[Ae+1];Z<ue;)X(Ze,Z++,Se[++Y]);else for(let Y=-1,Z=ge[Ae],ue=ge[Ae+1];Z<ue;)X(Ze,Z++,Se.get(++Y))},N=(we,Ae,Se)=>{const Ze=we.children[0],{valueOffsets:ge}=we,X=n.instance.getVisitFn(Ze);let{[Ae]:Y,[Ae+1]:Z}=ge;const ue=Se instanceof Map?Se.entries():Object.entries(Se);for(const Oe of ue)if(X(Ze,Y,Oe),++Y>=Z)break},ce=(we,Ae)=>(Se,Ze,ge,X)=>Ze&&Se(Ze,we,Ae[X]),Me=(we,Ae)=>(Se,Ze,ge,X)=>Ze&&Se(Ze,we,Ae.get(X)),q=(we,Ae)=>(Se,Ze,ge,X)=>Ze&&Se(Ze,we,Ae.get(ge.name)),Re=(we,Ae)=>(Se,Ze,ge,X)=>Ze&&Se(Ze,we,Ae[ge.name]),je=(we,Ae,Se)=>{const Ze=we.type.children.map(X=>n.instance.getVisitFn(X.type)),ge=Se instanceof Map?q(Ae,Se):Se instanceof e.Vector?Me(Ae,Se):Array.isArray(Se)?ce(Ae,Se):Re(Ae,Se);we.type.children.forEach((X,Y)=>ge(Ze[Y],we.children[Y],X,Y))},re=(we,Ae,Se)=>{we.type.mode===s.UnionMode.Dense?ae(we,Ae,Se):de(we,Ae,Se)},ae=(we,Ae,Se)=>{const Ze=we.type.typeIdToChildIndex[we.typeIds[Ae]],ge=we.children[Ze];n.instance.visit(ge,we.valueOffsets[Ae],Se)},de=(we,Ae,Se)=>{const Ze=we.type.typeIdToChildIndex[we.typeIds[Ae]],ge=we.children[Ze];n.instance.visit(ge,Ae,Se)},fe=(we,Ae,Se)=>{var Ze;(Ze=we.dictionary)===null||Ze===void 0||Ze.set(we.values[Ae],Se)},Pe=(we,Ae,Se)=>{we.type.unit===s.IntervalUnit.DAY_TIME?(0,n.setIntervalDayTime)(we,Ae,Se):(0,n.setIntervalYearMonth)(we,Ae,Se)};n.setIntervalValue=Pe;const Ue=({values:we},Ae,Se)=>{we.set(Se.subarray(0,2),2*Ae)};n.setIntervalDayTime=Ue;const Je=({values:we},Ae,Se)=>{we[Ae]=Se[0]*12+Se[1]%12};n.setIntervalYearMonth=Je;const $e=({values:we},Ae,Se)=>{we[Ae]=Se};n.setDurationSecond=$e;const tt=({values:we},Ae,Se)=>{we[Ae]=Se};n.setDurationMillisecond=tt;const Ut=({values:we},Ae,Se)=>{we[Ae]=Se};n.setDurationMicrosecond=Ut;const zt=({values:we},Ae,Se)=>{we[Ae]=Se};n.setDurationNanosecond=zt;const Zt=(we,Ae,Se)=>{switch(we.type.unit){case s.TimeUnit.SECOND:return(0,n.setDurationSecond)(we,Ae,Se);case s.TimeUnit.MILLISECOND:return(0,n.setDurationMillisecond)(we,Ae,Se);case s.TimeUnit.MICROSECOND:return(0,n.setDurationMicrosecond)(we,Ae,Se);case s.TimeUnit.NANOSECOND:return(0,n.setDurationNanosecond)(we,Ae,Se)}};n.setDuration=Zt;const $t=(we,Ae,Se)=>{const{stride:Ze}=we,ge=we.children[0],X=n.instance.getVisitFn(ge);if(Array.isArray(Se))for(let Y=-1,Z=Ae*Ze;++Y<Ze;)X(ge,Z+Y,Se[Y]);else for(let Y=-1,Z=Ae*Ze;++Y<Ze;)X(ge,Z+Y,Se.get(Y))};o.prototype.visitBool=a(g),o.prototype.visitInt=a(n.setInt),o.prototype.visitInt8=a(n.setInt),o.prototype.visitInt16=a(n.setInt),o.prototype.visitInt32=a(n.setInt),o.prototype.visitInt64=a(n.setInt),o.prototype.visitUint8=a(n.setInt),o.prototype.visitUint16=a(n.setInt),o.prototype.visitUint32=a(n.setInt),o.prototype.visitUint64=a(n.setInt),o.prototype.visitFloat=a(n.setAnyFloat),o.prototype.visitFloat16=a(n.setFloat16),o.prototype.visitFloat32=a(n.setFloat),o.prototype.visitFloat64=a(n.setFloat),o.prototype.visitUtf8=a(C),o.prototype.visitBinary=a(D),o.prototype.visitFixedSizeBinary=a(n.setFixedSizeBinary),o.prototype.visitDate=a(n.setDate),o.prototype.visitDateDay=a(n.setDateDay),o.prototype.visitDateMillisecond=a(n.setDateMillisecond),o.prototype.visitTimestamp=a(n.setTimestamp),o.prototype.visitTimestampSecond=a(n.setTimestampSecond),o.prototype.visitTimestampMillisecond=a(n.setTimestampMillisecond),o.prototype.visitTimestampMicrosecond=a(n.setTimestampMicrosecond),o.prototype.visitTimestampNanosecond=a(n.setTimestampNanosecond),o.prototype.visitTime=a(n.setTime),o.prototype.visitTimeSecond=a(n.setTimeSecond),o.prototype.visitTimeMillisecond=a(n.setTimeMillisecond),o.prototype.visitTimeMicrosecond=a(n.setTimeMicrosecond),o.prototype.visitTimeNanosecond=a(n.setTimeNanosecond),o.prototype.visitDecimal=a(n.setDecimal),o.prototype.visitList=a(xe),o.prototype.visitStruct=a(je),o.prototype.visitUnion=a(re),o.prototype.visitDenseUnion=a(ae),o.prototype.visitSparseUnion=a(de),o.prototype.visitDictionary=a(fe),o.prototype.visitInterval=a(n.setIntervalValue),o.prototype.visitIntervalDayTime=a(n.setIntervalDayTime),o.prototype.visitIntervalYearMonth=a(n.setIntervalYearMonth),o.prototype.visitDuration=a(n.setDuration),o.prototype.visitDurationSecond=a(n.setDurationSecond),o.prototype.visitDurationMillisecond=a(n.setDurationMillisecond),o.prototype.visitDurationMicrosecond=a(n.setDurationMicrosecond),o.prototype.visitDurationNanosecond=a(n.setDurationNanosecond),o.prototype.visitFixedSizeList=a($t),o.prototype.visitMap=a(N),n.instance=new o}(NA)),NA}var hO;function $C(){if(hO)return Fm;hO=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.StructRow=void 0;const n=LS(),e=mp(),t=xs(),i=Symbol.for("parent"),r=Symbol.for("rowIndex");class s{constructor(u,f){return this[i]=u,this[r]=f,new Proxy(this,new a)}toArray(){return Object.values(this.toJSON())}toJSON(){const u=this[r],f=this[i],p=f.type.children,m={};for(let g=-1,v=p.length;++g<v;)m[p[g].name]=e.instance.visit(f.children[g],u);return m}toString(){return`{${[...this].map(([u,f])=>`${(0,n.valueToString)(u)}: ${(0,n.valueToString)(f)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new o(this[i],this[r])}}Fm.StructRow=s;class o{constructor(u,f){this.childIndex=0,this.children=u.children,this.rowIndex=f,this.childFields=u.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const u=this.childIndex;return u<this.numChildren?(this.childIndex=u+1,{done:!1,value:[this.childFields[u].name,e.instance.visit(this.children[u],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[i]:{writable:!0,enumerable:!1,configurable:!1,value:null},[r]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class a{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(u){return u[i].type.children.map(f=>f.name)}has(u,f){return u[i].type.children.findIndex(p=>p.name===f)!==-1}getOwnPropertyDescriptor(u,f){if(u[i].type.children.findIndex(p=>p.name===f)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(u,f){if(Reflect.has(u,f))return u[f];const p=u[i].type.children.findIndex(m=>m.name===f);if(p!==-1){const m=e.instance.visit(u[i].children[p],u[r]);return Reflect.set(u,f,m),m}}set(u,f,p){const m=u[i].type.children.findIndex(g=>g.name===f);return m!==-1?(t.instance.visit(u[i].children[m],u[r],p),Reflect.set(u,f,p)):Reflect.has(u,f)||typeof f=="symbol"?Reflect.set(u,f,p):!1}}return Fm}var pO;function mp(){return pO||(pO=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.instance=n.GetVisitor=void 0;const e=HC(),t=xr(),i=Ir(),r=zS(),s=$C(),o=pp(),a=US(),c=Ln();class u extends i.Visitor{}n.GetVisitor=u;function f(ge){return(X,Y)=>X.getValid(Y)?ge(X,Y):null}const p=(ge,X)=>864e5*ge[X],m=(ge,X)=>4294967296*ge[X+1]+(ge[X]>>>0),g=(ge,X)=>4294967296*(ge[X+1]/1e3)+(ge[X]>>>0)/1e3,v=(ge,X)=>4294967296*(ge[X+1]/1e6)+(ge[X]>>>0)/1e6,w=ge=>new Date(ge),A=(ge,X)=>w(p(ge,X)),E=(ge,X)=>w(m(ge,X)),M=(ge,X)=>null,I=(ge,X,Y)=>{if(Y+1>=X.length)return null;const Z=X[Y],ue=X[Y+1];return ge.subarray(Z,ue)},R=({offset:ge,values:X},Y)=>{const Z=ge+Y;return(X[Z>>3]&1<<Z%8)!==0},D=({values:ge},X)=>A(ge,X),C=({values:ge},X)=>E(ge,X*2),k=({stride:ge,values:X},Y)=>X[ge*Y],j=({stride:ge,values:X},Y)=>(0,a.uint16ToFloat64)(X[ge*Y]),U=({values:ge},X)=>ge[X],F=({stride:ge,values:X},Y)=>X.subarray(ge*Y,ge*(Y+1)),J=({values:ge,valueOffsets:X},Y)=>I(ge,X,Y),G=({values:ge,valueOffsets:X},Y)=>{const Z=I(ge,X,Y);return Z!==null?(0,o.decodeUtf8)(Z):null},ee=({values:ge},X)=>ge[X],oe=({type:ge,values:X},Y)=>ge.precision!==c.Precision.HALF?X[Y]:(0,a.uint16ToFloat64)(X[Y]),me=(ge,X)=>ge.type.unit===c.DateUnit.DAY?D(ge,X):C(ge,X),Q=({values:ge},X)=>1e3*m(ge,X*2),V=({values:ge},X)=>m(ge,X*2),te=({values:ge},X)=>g(ge,X*2),xe=({values:ge},X)=>v(ge,X*2),N=(ge,X)=>{switch(ge.type.unit){case c.TimeUnit.SECOND:return Q(ge,X);case c.TimeUnit.MILLISECOND:return V(ge,X);case c.TimeUnit.MICROSECOND:return te(ge,X);case c.TimeUnit.NANOSECOND:return xe(ge,X)}},ce=({values:ge},X)=>ge[X],Me=({values:ge},X)=>ge[X],q=({values:ge},X)=>ge[X],Re=({values:ge},X)=>ge[X],je=(ge,X)=>{switch(ge.type.unit){case c.TimeUnit.SECOND:return ce(ge,X);case c.TimeUnit.MILLISECOND:return Me(ge,X);case c.TimeUnit.MICROSECOND:return q(ge,X);case c.TimeUnit.NANOSECOND:return Re(ge,X)}},re=({values:ge,stride:X},Y)=>e.BN.decimal(ge.subarray(X*Y,X*(Y+1))),ae=(ge,X)=>{const{valueOffsets:Y,stride:Z,children:ue}=ge,{[X*Z]:Oe,[X*Z+1]:Le}=Y,Yt=ue[0].slice(Oe,Le-Oe);return new t.Vector([Yt])},de=(ge,X)=>{const{valueOffsets:Y,children:Z}=ge,{[X]:ue,[X+1]:Oe}=Y,Le=Z[0];return new r.MapRow(Le.slice(ue,Oe-ue))},fe=(ge,X)=>new s.StructRow(ge,X),Pe=(ge,X)=>ge.type.mode===c.UnionMode.Dense?Ue(ge,X):Je(ge,X),Ue=(ge,X)=>{const Y=ge.type.typeIdToChildIndex[ge.typeIds[X]],Z=ge.children[Y];return n.instance.visit(Z,ge.valueOffsets[X])},Je=(ge,X)=>{const Y=ge.type.typeIdToChildIndex[ge.typeIds[X]],Z=ge.children[Y];return n.instance.visit(Z,X)},$e=(ge,X)=>{var Y;return(Y=ge.dictionary)===null||Y===void 0?void 0:Y.get(ge.values[X])},tt=(ge,X)=>ge.type.unit===c.IntervalUnit.DAY_TIME?Ut(ge,X):zt(ge,X),Ut=({values:ge},X)=>ge.subarray(2*X,2*(X+1)),zt=({values:ge},X)=>{const Y=ge[X],Z=new Int32Array(2);return Z[0]=Math.trunc(Y/12),Z[1]=Math.trunc(Y%12),Z},Zt=({values:ge},X)=>ge[X],$t=({values:ge},X)=>ge[X],we=({values:ge},X)=>ge[X],Ae=({values:ge},X)=>ge[X],Se=(ge,X)=>{switch(ge.type.unit){case c.TimeUnit.SECOND:return Zt(ge,X);case c.TimeUnit.MILLISECOND:return $t(ge,X);case c.TimeUnit.MICROSECOND:return we(ge,X);case c.TimeUnit.NANOSECOND:return Ae(ge,X)}},Ze=(ge,X)=>{const{stride:Y,children:Z}=ge,Oe=Z[0].slice(X*Y,Y);return new t.Vector([Oe])};u.prototype.visitNull=f(M),u.prototype.visitBool=f(R),u.prototype.visitInt=f(ee),u.prototype.visitInt8=f(k),u.prototype.visitInt16=f(k),u.prototype.visitInt32=f(k),u.prototype.visitInt64=f(U),u.prototype.visitUint8=f(k),u.prototype.visitUint16=f(k),u.prototype.visitUint32=f(k),u.prototype.visitUint64=f(U),u.prototype.visitFloat=f(oe),u.prototype.visitFloat16=f(j),u.prototype.visitFloat32=f(k),u.prototype.visitFloat64=f(k),u.prototype.visitUtf8=f(G),u.prototype.visitBinary=f(J),u.prototype.visitFixedSizeBinary=f(F),u.prototype.visitDate=f(me),u.prototype.visitDateDay=f(D),u.prototype.visitDateMillisecond=f(C),u.prototype.visitTimestamp=f(N),u.prototype.visitTimestampSecond=f(Q),u.prototype.visitTimestampMillisecond=f(V),u.prototype.visitTimestampMicrosecond=f(te),u.prototype.visitTimestampNanosecond=f(xe),u.prototype.visitTime=f(je),u.prototype.visitTimeSecond=f(ce),u.prototype.visitTimeMillisecond=f(Me),u.prototype.visitTimeMicrosecond=f(q),u.prototype.visitTimeNanosecond=f(Re),u.prototype.visitDecimal=f(re),u.prototype.visitList=f(ae),u.prototype.visitStruct=f(fe),u.prototype.visitUnion=f(Pe),u.prototype.visitDenseUnion=f(Ue),u.prototype.visitSparseUnion=f(Je),u.prototype.visitDictionary=f($e),u.prototype.visitInterval=f(tt),u.prototype.visitIntervalDayTime=f(Ut),u.prototype.visitIntervalYearMonth=f(zt),u.prototype.visitDuration=f(Se),u.prototype.visitDurationSecond=f(Zt),u.prototype.visitDurationMillisecond=f($t),u.prototype.visitDurationMicrosecond=f(we),u.prototype.visitDurationNanosecond=f(Ae),u.prototype.visitFixedSizeList=f(Ze),u.prototype.visitMap=f(de),n.instance=new u}(RA)),RA}var mO;function zS(){return mO||(mO=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.MapRow=n.kVals=n.kKeys=void 0;const e=xr(),t=LS(),i=mp(),r=xs();n.kKeys=Symbol.for("keys"),n.kVals=Symbol.for("vals");class s{constructor(u){return this[n.kKeys]=new e.Vector([u.children[0]]).memoize(),this[n.kVals]=u.children[1],new Proxy(this,new a)}[Symbol.iterator](){return new o(this[n.kKeys],this[n.kVals])}get size(){return this[n.kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const u=this[n.kKeys],f=this[n.kVals],p={};for(let m=-1,g=u.length;++m<g;)p[u.get(m)]=i.instance.visit(f,m);return p}toString(){return`{${[...this].map(([u,f])=>`${(0,t.valueToString)(u)}: ${(0,t.valueToString)(f)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}n.MapRow=s;class o{constructor(u,f){this.keys=u,this.vals=f,this.keyIndex=0,this.numKeys=u.length}[Symbol.iterator](){return this}next(){const u=this.keyIndex;return u===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(u),i.instance.visit(this.vals,u)]})}}class a{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(u){return u[n.kKeys].toArray().map(String)}has(u,f){return u[n.kKeys].includes(f)}getOwnPropertyDescriptor(u,f){if(u[n.kKeys].indexOf(f)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(u,f){if(Reflect.has(u,f))return u[f];const p=u[n.kKeys].indexOf(f);if(p!==-1){const m=i.instance.visit(Reflect.get(u,n.kVals),p);return Reflect.set(u,f,m),m}}set(u,f,p){const m=u[n.kKeys].indexOf(f);return m!==-1?(r.instance.visit(Reflect.get(u,n.kVals),m,p),Reflect.set(u,f,p)):Reflect.has(u,f)?Reflect.set(u,f,p):!1}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[n.kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[n.kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null}})}(DA)),DA}var gO;function VS(){if(gO)return pa;gO=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.createElementComparator=pa.clampRange=pa.clampIndex=void 0;const n=xr(),e=zS(),t=$C(),i=er();function r(E,M,I){const R=E.length,D=M>-1?M:R+M%R;return I?I(E,D):D}pa.clampIndex=r;let s;function o(E,M,I,R){const{length:D=0}=E;let C=typeof M!="number"?0:M,k=typeof I!="number"?D:I;return C<0&&(C=(C%D+D)%D),k<0&&(k=(k%D+D)%D),k<C&&(s=C,C=k,k=s),k>D&&(k=D),R?R(E,C,k):[C,k]}pa.clampRange=o;const a=E=>E!==E;function c(E){if(typeof E!=="object"||E===null)return a(E)?a:I=>I===E;if(E instanceof Date){const I=E.valueOf();return R=>R instanceof Date?R.valueOf()===I:!1}return ArrayBuffer.isView(E)?I=>I?(0,i.compareArrayLike)(E,I):!1:E instanceof Map?f(E):Array.isArray(E)?u(E):E instanceof n.Vector?p(E):m(E,!0)}pa.createElementComparator=c;function u(E){const M=[];for(let I=-1,R=E.length;++I<R;)M[I]=c(E[I]);return g(M)}function f(E){let M=-1;const I=[];for(const R of E.values())I[++M]=c(R);return g(I)}function p(E){const M=[];for(let I=-1,R=E.length;++I<R;)M[I]=c(E.get(I));return g(M)}function m(E,M=!1){const I=Object.keys(E);if(!M&&I.length===0)return()=>!1;const R=[];for(let D=-1,C=I.length;++D<C;)R[D]=c(E[I[D]]);return g(R,I)}function g(E,M){return I=>{if(!I||typeof I!="object")return!1;switch(I.constructor){case Array:return v(E,I);case Map:return A(E,I,I.keys());case e.MapRow:case t.StructRow:case Object:case void 0:return A(E,I,M||Object.keys(I))}return I instanceof n.Vector?w(E,I):!1}}function v(E,M){const I=E.length;if(M.length!==I)return!1;for(let R=-1;++R<I;)if(!E[R](M[R]))return!1;return!0}function w(E,M){const I=E.length;if(M.length!==I)return!1;for(let R=-1;++R<I;)if(!E[R](M.get(R)))return!1;return!0}function A(E,M,I){const R=I[Symbol.iterator](),D=M instanceof Map?M.keys():Object.keys(M)[Symbol.iterator](),C=M instanceof Map?M.values():Object.values(M)[Symbol.iterator]();let k=0;const j=E.length;let U=C.next(),F=R.next(),J=D.next();for(;k<j&&!F.done&&!J.done&&!U.done&&!(F.value!==J.value||!E[k](U.value));++k,F=R.next(),J=D.next(),U=C.next());return k===j&&F.done&&J.done&&U.done?!0:(R.return&&R.return(),D.return&&D.return(),C.return&&C.return(),!1)}return pa}var OA={},Wn={},yO;function gp(){if(yO)return Wn;yO=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.popcnt_uint32=Wn.popcnt_array=Wn.popcnt_bit_range=Wn.BitIterator=Wn.packBools=Wn.truncateBitmap=Wn.setBool=Wn.getBit=Wn.getBool=void 0;function n(u,f,p,m){return(p&1<<m)!==0}Wn.getBool=n;function e(u,f,p,m){return(p&1<<m)>>m}Wn.getBit=e;function t(u,f,p){return p?!!(u[f>>3]|=1<<f%8)||!0:!(u[f>>3]&=~(1<<f%8))&&!1}Wn.setBool=t;function i(u,f,p){const m=p.byteLength+7&-8;if(u>0||p.byteLength<m){const g=new Uint8Array(m);return g.set(u%8===0?p.subarray(u>>3):r(new s(p,u,f,null,n)).subarray(0,m)),g}return p}Wn.truncateBitmap=i;function r(u){const f=[];let p=0,m=0,g=0;for(const w of u)w&&(g|=1<<m),++m===8&&(f[p++]=g,g=m=0);(p===0||m>0)&&(f[p++]=g);const v=new Uint8Array(f.length+7&-8);return v.set(f),v}Wn.packBools=r;class s{constructor(f,p,m,g,v){this.bytes=f,this.length=m,this.context=g,this.get=v,this.bit=p%8,this.byteIndex=p>>3,this.byte=f[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}Wn.BitIterator=s;function o(u,f,p){if(p-f<=0)return 0;if(p-f<8){let v=0;for(const w of new s(u,f,p-f,u,e))v+=w;return v}const m=p>>3<<3,g=f+(f%8===0?0:8-f%8);return o(u,f,g)+o(u,m,p)+a(u,g>>3,m-g>>3)}Wn.popcnt_bit_range=o;function a(u,f,p){let m=0,g=Math.trunc(f);const v=new DataView(u.buffer,u.byteOffset,u.byteLength),w=p===void 0?u.byteLength:g+p;for(;w-g>=4;)m+=c(v.getUint32(g)),g+=4;for(;w-g>=2;)m+=c(v.getUint16(g)),g+=2;for(;w-g>=1;)m+=c(v.getUint8(g)),g+=1;return m}Wn.popcnt_array=a;function c(u){let f=Math.trunc(u);return f=f-(f>>>1&1431655765),f=(f&858993459)+(f>>>2&858993459),(f+(f>>>4)&252645135)*16843009>>>24}return Wn.popcnt_uint32=c,Wn}var bO;function ul(){return bO||(bO=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.makeData=n.Data=n.kUnknownNullCount=void 0;const e=xr(),t=Ln(),i=An(),r=gp();n.kUnknownNullCount=-1;class s{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:m}=this;return i.DataType.isSparseUnion(m)?this.children.some(g=>g.nullable):i.DataType.isDenseUnion(m)?this.children.some(g=>g.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let m=0;const{valueOffsets:g,values:v,nullBitmap:w,typeIds:A}=this;return g&&(m+=g.byteLength),v&&(m+=v.byteLength),w&&(m+=w.byteLength),A&&(m+=A.byteLength),this.children.reduce((E,M)=>E+M.byteLength,m)}get nullCount(){if(i.DataType.isUnion(this.type))return this.children.reduce((v,w)=>v+w.nullCount,0);let m=this._nullCount,g;return m<=n.kUnknownNullCount&&(g=this.nullBitmap)&&(this._nullCount=m=this.length-(0,r.popcnt_bit_range)(g,this.offset,this.offset+this.length)),m}constructor(m,g,v,w,A,E=[],M){this.type=m,this.children=E,this.dictionary=M,this.offset=Math.floor(Math.max(g||0,0)),this.length=Math.floor(Math.max(v||0,0)),this._nullCount=Math.floor(Math.max(w||0,-1));let I;A instanceof s?(this.stride=A.stride,this.values=A.values,this.typeIds=A.typeIds,this.nullBitmap=A.nullBitmap,this.valueOffsets=A.valueOffsets):(this.stride=(0,i.strideForType)(m),A&&((I=A[0])&&(this.valueOffsets=I),(I=A[1])&&(this.values=I),(I=A[2])&&(this.nullBitmap=I),(I=A[3])&&(this.typeIds=I)))}getValid(m){const{type:g}=this;if(i.DataType.isUnion(g)){const v=g,w=this.children[v.typeIdToChildIndex[this.typeIds[m]]],A=v.mode===t.UnionMode.Dense?this.valueOffsets[m]:m;return w.getValid(A)}if(this.nullable&&this.nullCount>0){const v=this.offset+m;return(this.nullBitmap[v>>3]&1<<v%8)!==0}return!0}setValid(m,g){let v;const{type:w}=this;if(i.DataType.isUnion(w)){const A=w,E=this.children[A.typeIdToChildIndex[this.typeIds[m]]],M=A.mode===t.UnionMode.Dense?this.valueOffsets[m]:m;v=E.getValid(M),E.setValid(M,g)}else{let{nullBitmap:A}=this;const{offset:E,length:M}=this,I=E+m,R=1<<I%8,D=I>>3;(!A||A.byteLength<=D)&&(A=new Uint8Array((E+M+63&-64)>>3).fill(255),this.nullCount>0&&A.set((0,r.truncateBitmap)(E,M,this.nullBitmap),0),Object.assign(this,{nullBitmap:A,_nullCount:-1}));const C=A[D];v=(C&R)!==0,g?A[D]=C|R:A[D]=C&~R}return v!==!!g&&(this._nullCount=this.nullCount+(g?-1:1)),g}clone(m=this.type,g=this.offset,v=this.length,w=this._nullCount,A=this,E=this.children){return new s(m,g,v,w,A,E,this.dictionary)}slice(m,g){const{stride:v,typeId:w,children:A}=this,E=+(this._nullCount===0)-1,M=w===16?v:1,I=this._sliceBuffers(m,g,v,w);return this.clone(this.type,this.offset+m,g,E,I,A.length===0||this.valueOffsets?A:this._sliceChildren(A,M*m,M*g))}_changeLengthAndBackfillNullBitmap(m){if(this.typeId===t.Type.Null)return this.clone(this.type,0,m,0);const{length:g,nullCount:v}=this,w=new Uint8Array((m+63&-64)>>3).fill(255,0,g>>3);w[g>>3]=(1<<g-(g&-8))-1,v>0&&w.set((0,r.truncateBitmap)(this.offset,g,this.nullBitmap),0);const A=this.buffers;return A[t.BufferType.VALIDITY]=w,this.clone(this.type,0,m,v+(m-g),A)}_sliceBuffers(m,g,v,w){let A;const{buffers:E}=this;return(A=E[t.BufferType.TYPE])&&(E[t.BufferType.TYPE]=A.subarray(m,m+g)),(A=E[t.BufferType.OFFSET])&&(E[t.BufferType.OFFSET]=A.subarray(m,m+g+1))||(A=E[t.BufferType.DATA])&&(E[t.BufferType.DATA]=w===6?A:A.subarray(v*m,v*(m+g))),E}_sliceChildren(m,g,v){return m.map(w=>w.slice(g,v))}}n.Data=s,s.prototype.children=Object.freeze([]);const o=Ir(),a=er();class c extends o.Visitor{visit(m){return this.getVisitFn(m.type).call(this,m)}visitNull(m){const{["type"]:g,["offset"]:v=0,["length"]:w=0}=m;return new s(g,v,w,w)}visitBool(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length>>3,["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitInt(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length,["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitFloat(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length,["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitUtf8(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.data),A=(0,a.toUint8Array)(m.nullBitmap),E=(0,a.toInt32Array)(m.valueOffsets),{["length"]:M=E.length-1,["nullCount"]:I=m.nullBitmap?-1:0}=m;return new s(g,v,M,I,[E,w,A])}visitBinary(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.data),A=(0,a.toUint8Array)(m.nullBitmap),E=(0,a.toInt32Array)(m.valueOffsets),{["length"]:M=E.length-1,["nullCount"]:I=m.nullBitmap?-1:0}=m;return new s(g,v,M,I,[E,w,A])}visitFixedSizeBinary(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length/(0,i.strideForType)(g),["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitDate(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length/(0,i.strideForType)(g),["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitTimestamp(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length/(0,i.strideForType)(g),["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitTime(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length/(0,i.strideForType)(g),["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitDecimal(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length/(0,i.strideForType)(g),["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitList(m){const{["type"]:g,["offset"]:v=0,["child"]:w}=m,A=(0,a.toUint8Array)(m.nullBitmap),E=(0,a.toInt32Array)(m.valueOffsets),{["length"]:M=E.length-1,["nullCount"]:I=m.nullBitmap?-1:0}=m;return new s(g,v,M,I,[E,void 0,A],[w])}visitStruct(m){const{["type"]:g,["offset"]:v=0,["children"]:w=[]}=m,A=(0,a.toUint8Array)(m.nullBitmap),{length:E=w.reduce((I,{length:R})=>Math.max(I,R),0),nullCount:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,void 0,A],w)}visitUnion(m){const{["type"]:g,["offset"]:v=0,["children"]:w=[]}=m,A=(0,a.toArrayBufferView)(g.ArrayType,m.typeIds),{["length"]:E=A.length,["nullCount"]:M=-1}=m;if(i.DataType.isSparseUnion(g))return new s(g,v,E,M,[void 0,void 0,void 0,A],w);const I=(0,a.toInt32Array)(m.valueOffsets);return new s(g,v,E,M,[I,void 0,void 0,A],w)}visitDictionary(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.indices.ArrayType,m.data),{["dictionary"]:E=new e.Vector([new c().visit({type:g.dictionary})])}=m,{["length"]:M=A.length,["nullCount"]:I=m.nullBitmap?-1:0}=m;return new s(g,v,M,I,[void 0,A,w],[],E)}visitInterval(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length/(0,i.strideForType)(g),["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitDuration(m){const{["type"]:g,["offset"]:v=0}=m,w=(0,a.toUint8Array)(m.nullBitmap),A=(0,a.toArrayBufferView)(g.ArrayType,m.data),{["length"]:E=A.length,["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,A,w])}visitFixedSizeList(m){const{["type"]:g,["offset"]:v=0,["child"]:w=new c().visit({type:g.valueType})}=m,A=(0,a.toUint8Array)(m.nullBitmap),{["length"]:E=w.length/(0,i.strideForType)(g),["nullCount"]:M=m.nullBitmap?-1:0}=m;return new s(g,v,E,M,[void 0,void 0,A],[w])}visitMap(m){const{["type"]:g,["offset"]:v=0,["child"]:w=new c().visit({type:g.childType})}=m,A=(0,a.toUint8Array)(m.nullBitmap),E=(0,a.toInt32Array)(m.valueOffsets),{["length"]:M=E.length-1,["nullCount"]:I=m.nullBitmap?-1:0}=m;return new s(g,v,M,I,[E,void 0,A],[w])}}const u=new c;function f(p){return u.visit(p)}n.makeData=f}(OA)),OA}var Kn={},_O;function YC(){if(_O)return Kn;_O=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.wrapChunkedIndexOf=Kn.wrapChunkedCall2=Kn.wrapChunkedCall1=Kn.isChunkedValid=Kn.binarySearch=Kn.sliceChunks=Kn.computeChunkOffsets=Kn.computeChunkNullCounts=Kn.ChunkedIterator=void 0;class n{constructor(f=0,p){this.numChunks=f,this.getChunkIterator=p,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const f=this.chunkIterator.next();if(!f.done)return f;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}Kn.ChunkedIterator=n;function e(u){return u.reduce((f,p)=>f+p.nullCount,0)}Kn.computeChunkNullCounts=e;function t(u){return u.reduce((f,p,m)=>(f[m+1]=f[m]+p.length,f),new Uint32Array(u.length+1))}Kn.computeChunkOffsets=t;function i(u,f,p,m){const g=[];for(let v=-1,w=u.length;++v<w;){const A=u[v],E=f[v],{length:M}=A;if(E>=m)break;if(p>=E+M)continue;if(E>=p&&E+M<=m){g.push(A);continue}const I=Math.max(0,p-E),R=Math.min(m-E,M);g.push(A.slice(I,R-I))}return g.length===0&&g.push(u[0].slice(0,0)),g}Kn.sliceChunks=i;function r(u,f,p,m){let g=0,v=0,w=f.length-1;do{if(g>=w-1)return p<f[w]?m(u,g,p-f[g]):null;v=g+Math.trunc((w-g)*.5),p<f[v]?w=v:g=v}while(g<w)}Kn.binarySearch=r;function s(u,f){return u.getValid(f)}Kn.isChunkedValid=s;function o(u){function f(p,m,g){return u(p[m],g)}return function(p){const m=this.data;return r(m,this._offsets,p,f)}}Kn.wrapChunkedCall1=o;function a(u){let f;function p(m,g,v){return u(m[g],v,f)}return function(m,g){const v=this.data;f=g;const w=r(v,this._offsets,m,p);return f=void 0,w}}Kn.wrapChunkedCall2=a;function c(u){let f;function p(m,g,v){let w=v,A=0,E=0;for(let M=g-1,I=m.length;++M<I;){const R=m[M];if(~(A=u(R,f,w)))return E+A;w=0,E+=R.length}return-1}return function(m,g){f=m;const v=this.data,w=typeof g!="number"?p(v,0,0):r(v,this._offsets,g,p);return f=void 0,w}}return Kn.wrapChunkedIndexOf=c,Kn}var lc={},vO;function WC(){if(vO)return lc;vO=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.instance=lc.IndexOfVisitor=void 0;const n=Ln(),e=Ir(),t=mp(),i=gp(),r=VS();class s extends e.Visitor{}lc.IndexOfVisitor=s;function o(f,p){return p===null&&f.length>0?0:-1}function a(f,p){const{nullBitmap:m}=f;if(!m||f.nullCount<=0)return-1;let g=0;for(const v of new i.BitIterator(m,f.offset+(p||0),f.length,m,i.getBool)){if(!v)return g;++g}return-1}function c(f,p,m){if(p===void 0)return-1;if(p===null)switch(f.typeId){case n.Type.Union:break;case n.Type.Dictionary:break;default:return a(f,m)}const g=t.instance.getVisitFn(f),v=(0,r.createElementComparator)(p);for(let w=(m||0)-1,A=f.length;++w<A;)if(v(g(f,w)))return w;return-1}function u(f,p,m){const g=t.instance.getVisitFn(f),v=(0,r.createElementComparator)(p);for(let w=(m||0)-1,A=f.length;++w<A;)if(v(g(f,w)))return w;return-1}return s.prototype.visitNull=o,s.prototype.visitBool=c,s.prototype.visitInt=c,s.prototype.visitInt8=c,s.prototype.visitInt16=c,s.prototype.visitInt32=c,s.prototype.visitInt64=c,s.prototype.visitUint8=c,s.prototype.visitUint16=c,s.prototype.visitUint32=c,s.prototype.visitUint64=c,s.prototype.visitFloat=c,s.prototype.visitFloat16=c,s.prototype.visitFloat32=c,s.prototype.visitFloat64=c,s.prototype.visitUtf8=c,s.prototype.visitBinary=c,s.prototype.visitFixedSizeBinary=c,s.prototype.visitDate=c,s.prototype.visitDateDay=c,s.prototype.visitDateMillisecond=c,s.prototype.visitTimestamp=c,s.prototype.visitTimestampSecond=c,s.prototype.visitTimestampMillisecond=c,s.prototype.visitTimestampMicrosecond=c,s.prototype.visitTimestampNanosecond=c,s.prototype.visitTime=c,s.prototype.visitTimeSecond=c,s.prototype.visitTimeMillisecond=c,s.prototype.visitTimeMicrosecond=c,s.prototype.visitTimeNanosecond=c,s.prototype.visitDecimal=c,s.prototype.visitList=c,s.prototype.visitStruct=c,s.prototype.visitUnion=c,s.prototype.visitDenseUnion=u,s.prototype.visitSparseUnion=u,s.prototype.visitDictionary=c,s.prototype.visitInterval=c,s.prototype.visitIntervalDayTime=c,s.prototype.visitIntervalYearMonth=c,s.prototype.visitDuration=c,s.prototype.visitDurationSecond=c,s.prototype.visitDurationMillisecond=c,s.prototype.visitDurationMicrosecond=c,s.prototype.visitDurationNanosecond=c,s.prototype.visitFixedSizeList=c,s.prototype.visitMap=c,lc.instance=new s,lc}var uc={},SO;function KC(){if(SO)return uc;SO=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.instance=uc.IteratorVisitor=void 0;const n=Ir(),e=Ln(),t=An(),i=YC();class r extends n.Visitor{}uc.IteratorVisitor=r;function s(a){const{type:c}=a;if(a.nullCount===0&&a.stride===1&&(c.typeId===e.Type.Timestamp||c instanceof t.Int&&c.bitWidth!==64||c instanceof t.Time&&c.bitWidth!==64||c instanceof t.Float&&c.precision!==e.Precision.HALF))return new i.ChunkedIterator(a.data.length,f=>{const p=a.data[f];return p.values.subarray(0,p.length)[Symbol.iterator]()});let u=0;return new i.ChunkedIterator(a.data.length,f=>{const m=a.data[f].length,g=a.slice(u,u+m);return u+=m,new o(g)})}class o{constructor(c){this.vector=c,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}return r.prototype.visitNull=s,r.prototype.visitBool=s,r.prototype.visitInt=s,r.prototype.visitInt8=s,r.prototype.visitInt16=s,r.prototype.visitInt32=s,r.prototype.visitInt64=s,r.prototype.visitUint8=s,r.prototype.visitUint16=s,r.prototype.visitUint32=s,r.prototype.visitUint64=s,r.prototype.visitFloat=s,r.prototype.visitFloat16=s,r.prototype.visitFloat32=s,r.prototype.visitFloat64=s,r.prototype.visitUtf8=s,r.prototype.visitBinary=s,r.prototype.visitFixedSizeBinary=s,r.prototype.visitDate=s,r.prototype.visitDateDay=s,r.prototype.visitDateMillisecond=s,r.prototype.visitTimestamp=s,r.prototype.visitTimestampSecond=s,r.prototype.visitTimestampMillisecond=s,r.prototype.visitTimestampMicrosecond=s,r.prototype.visitTimestampNanosecond=s,r.prototype.visitTime=s,r.prototype.visitTimeSecond=s,r.prototype.visitTimeMillisecond=s,r.prototype.visitTimeMicrosecond=s,r.prototype.visitTimeNanosecond=s,r.prototype.visitDecimal=s,r.prototype.visitList=s,r.prototype.visitStruct=s,r.prototype.visitUnion=s,r.prototype.visitDenseUnion=s,r.prototype.visitSparseUnion=s,r.prototype.visitDictionary=s,r.prototype.visitInterval=s,r.prototype.visitIntervalDayTime=s,r.prototype.visitIntervalYearMonth=s,r.prototype.visitDuration=s,r.prototype.visitDurationSecond=s,r.prototype.visitDurationMillisecond=s,r.prototype.visitDurationMicrosecond=s,r.prototype.visitDurationNanosecond=s,r.prototype.visitFixedSizeList=s,r.prototype.visitMap=s,uc.instance=new r,uc}var BA={},wO;function XC(){return wO||(wO=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.instance=n.GetByteLengthVisitor=void 0;const e=Ir(),t=Ln(),i=(m,g)=>m+g;class r extends e.Visitor{visitNull(g,v){return 0}visitInt(g,v){return g.type.bitWidth/8}visitFloat(g,v){return g.type.ArrayType.BYTES_PER_ELEMENT}visitBool(g,v){return 1/8}visitDecimal(g,v){return g.type.bitWidth/8}visitDate(g,v){return(g.type.unit+1)*4}visitTime(g,v){return g.type.bitWidth/8}visitTimestamp(g,v){return g.type.unit===t.TimeUnit.SECOND?4:8}visitInterval(g,v){return(g.type.unit+1)*4}visitDuration(g,v){return 8}visitStruct(g,v){return g.children.reduce((w,A)=>w+n.instance.visit(A,v),0)}visitFixedSizeBinary(g,v){return g.type.byteWidth}visitMap(g,v){return 8+g.children.reduce((w,A)=>w+n.instance.visit(A,v),0)}visitDictionary(g,v){var w;return g.type.indices.bitWidth/8+(((w=g.dictionary)===null||w===void 0?void 0:w.getByteLength(g.values[v]))||0)}}n.GetByteLengthVisitor=r;const s=({valueOffsets:m},g)=>8+(m[g+1]-m[g]),o=({valueOffsets:m},g)=>8+(m[g+1]-m[g]),a=({valueOffsets:m,stride:g,children:v},w)=>{const A=v[0],{[w*g]:E}=m,{[w*g+1]:M}=m,I=n.instance.getVisitFn(A.type),R=A.slice(E,M-E);let D=8;for(let C=-1,k=M-E;++C<k;)D+=I(R,C);return D},c=({stride:m,children:g},v)=>{const w=g[0],A=w.slice(v*m,m),E=n.instance.getVisitFn(w.type);let M=0;for(let I=-1,R=A.length;++I<R;)M+=E(A,I);return M},u=(m,g)=>m.type.mode===t.UnionMode.Dense?f(m,g):p(m,g),f=({type:m,children:g,typeIds:v,valueOffsets:w},A)=>{const E=m.typeIdToChildIndex[v[A]];return 8+n.instance.visit(g[E],w[A])},p=({children:m},g)=>4+n.instance.visitMany(m,m.map(()=>g)).reduce(i,0);r.prototype.visitUtf8=s,r.prototype.visitBinary=o,r.prototype.visitList=a,r.prototype.visitFixedSizeList=c,r.prototype.visitUnion=u,r.prototype.visitDenseUnion=f,r.prototype.visitSparseUnion=p,n.instance=new r}(BA)),BA}var TO;function xr(){if(TO)return oc;TO=1;var n;Object.defineProperty(oc,"__esModule",{value:!0}),oc.makeVector=oc.Vector=void 0;const e=dt,t=Ln(),i=VS(),r=An(),s=ul(),o=YC(),a=mp(),c=xs(),u=WC(),f=KC(),p=XC(),m={},g={};class v{constructor(R){var D,C,k;const j=R[0]instanceof v?R.flatMap(F=>F.data):R;if(j.length===0||j.some(F=>!(F instanceof s.Data)))throw new TypeError("Vector constructor expects an Array of Data instances.");const U=(D=j[0])===null||D===void 0?void 0:D.type;switch(j.length){case 0:this._offsets=[0];break;case 1:{const{get:F,set:J,indexOf:G,byteLength:ee}=m[U.typeId],oe=j[0];this.isValid=me=>(0,o.isChunkedValid)(oe,me),this.get=me=>F(oe,me),this.set=(me,Q)=>J(oe,me,Q),this.indexOf=me=>G(oe,me),this.getByteLength=me=>ee(oe,me),this._offsets=[0,oe.length];break}default:Object.setPrototypeOf(this,g[U.typeId]),this._offsets=(0,o.computeChunkOffsets)(j);break}this.data=j,this.type=U,this.stride=(0,r.strideForType)(U),this.numChildren=(k=(C=U.children)===null||C===void 0?void 0:C.length)!==null&&k!==void 0?k:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((R,D)=>R+D.byteLength,0)}get nullCount(){return(0,o.computeChunkNullCounts)(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${t.Type[this.type.typeId]}Vector`}isValid(R){return!1}get(R){return null}set(R,D){}indexOf(R,D){return-1}includes(R,D){return this.indexOf(R,D)>-1}getByteLength(R){return 0}[Symbol.iterator](){return f.instance.visit(this)}concat(...R){return new v(this.data.concat(R.flatMap(D=>D.data).flat(Number.POSITIVE_INFINITY)))}slice(R,D){return new v((0,i.clampRange)(this,R,D,({data:C,_offsets:k},j,U)=>(0,o.sliceChunks)(C,k,j,U)))}toJSON(){return[...this]}toArray(){const{type:R,data:D,length:C,stride:k,ArrayType:j}=this;switch(R.typeId){case t.Type.Int:case t.Type.Float:case t.Type.Decimal:case t.Type.Time:case t.Type.Timestamp:switch(D.length){case 0:return new j;case 1:return D[0].values.subarray(0,C*k);default:return D.reduce((U,{values:F,length:J})=>(U.array.set(F.subarray(0,J*k),U.offset),U.offset+=J*k,U),{array:new j(C*k),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(R){var D;return this.getChildAt((D=this.type.children)===null||D===void 0?void 0:D.findIndex(C=>C.name===R))}getChildAt(R){return R>-1&&R<this.numChildren?new v(this.data.map(({children:D})=>D[R])):null}get isMemoized(){return r.DataType.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(r.DataType.isDictionary(this.type)){const R=new w(this.data[0].dictionary),D=this.data.map(C=>{const k=C.clone();return k.dictionary=R,k});return new v(D)}return new w(this)}unmemoize(){if(r.DataType.isDictionary(this.type)&&this.isMemoized){const R=this.data[0].dictionary.unmemoize(),D=this.data.map(C=>{const k=C.clone();return k.dictionary=R,k});return new v(D)}return this}}oc.Vector=v,n=Symbol.toStringTag,v[n]=(I=>{I.type=r.DataType.prototype,I.data=[],I.length=0,I.stride=1,I.numChildren=0,I._offsets=new Uint32Array([0]),I[Symbol.isConcatSpreadable]=!0;const R=Object.keys(t.Type).map(D=>t.Type[D]).filter(D=>typeof D=="number"&&D!==t.Type.NONE);for(const D of R){const C=a.instance.getVisitFnByTypeId(D),k=c.instance.getVisitFnByTypeId(D),j=u.instance.getVisitFnByTypeId(D),U=p.instance.getVisitFnByTypeId(D);m[D]={get:C,set:k,indexOf:j,byteLength:U},g[D]=Object.create(I,{isValid:{value:(0,o.wrapChunkedCall1)(o.isChunkedValid)},get:{value:(0,o.wrapChunkedCall1)(a.instance.getVisitFnByTypeId(D))},set:{value:(0,o.wrapChunkedCall2)(c.instance.getVisitFnByTypeId(D))},indexOf:{value:(0,o.wrapChunkedIndexOf)(u.instance.getVisitFnByTypeId(D))},getByteLength:{value:(0,o.wrapChunkedCall1)(p.instance.getVisitFnByTypeId(D))}})}return"Vector"})(v.prototype);class w extends v{constructor(R){super(R.data);const D=this.get,C=this.set,k=this.slice,j=new Array(this.length);Object.defineProperty(this,"get",{value(U){const F=j[U];if(F!==void 0)return F;const J=D.call(this,U);return j[U]=J,J}}),Object.defineProperty(this,"set",{value(U,F){C.call(this,U,F),j[U]=F}}),Object.defineProperty(this,"slice",{value:(U,F)=>new w(k.call(this,U,F))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new v(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}const A=e.__importStar(An());function E(I){if(I){if(I instanceof s.Data)return new v([I]);if(I instanceof v)return new v(I.data);if(I.type instanceof r.DataType)return new v([(0,s.makeData)(I)]);if(Array.isArray(I))return new v(I.flatMap(R=>M(R)));if(ArrayBuffer.isView(I)){I instanceof DataView&&(I=new Uint8Array(I.buffer));const R={offset:0,length:I.length,nullCount:0,data:I};if(I instanceof Int8Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Int8}))]);if(I instanceof Int16Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Int16}))]);if(I instanceof Int32Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Int32}))]);if(I instanceof BigInt64Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Int64}))]);if(I instanceof Uint8Array||I instanceof Uint8ClampedArray)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Uint8}))]);if(I instanceof Uint16Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Uint16}))]);if(I instanceof Uint32Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Uint32}))]);if(I instanceof BigUint64Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Uint64}))]);if(I instanceof Float32Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Float32}))]);if(I instanceof Float64Array)return new v([(0,s.makeData)(Object.assign(Object.assign({},R),{type:new A.Float64}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}oc.makeVector=E;function M(I){return I instanceof s.Data?[I]:I instanceof v?I.data:E(I).data}return oc}var Pm={},AO;function Pte(){if(AO)return Pm;AO=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.createIsValidFunction=void 0;const n=LS();function e(i){if(!i||i.length<=0)return function(a){return!0};let r="";const s=i.filter(o=>o===o);return s.length>0&&(r=`
    switch (x) {${s.map(o=>`
        case ${t(o)}:`).join("")}
            return false;
    }`),i.length!==s.length&&(r=`if (x !== x) return false;
${r}`),new Function("x",`${r}
return true;`)}Pm.createIsValidFunction=e;function t(i){return typeof i!="bigint"?(0,n.valueToString)(i):`${(0,n.valueToString)(i)}n`}return Pm}var Fs={},EO;function yp(){if(EO)return Fs;EO=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.OffsetsBufferBuilder=Fs.BitmapBufferBuilder=Fs.DataBufferBuilder=Fs.BufferBuilder=void 0;const n=er(),e=(a,c)=>(Math.ceil(a)*c+63&-64||64)/c,t=(a,c=0)=>a.length>=c?a.subarray(0,c):(0,n.memcpy)(new a.constructor(c),a,0);class i{constructor(c,u=1){this.buffer=c,this.stride=u,this.BYTES_PER_ELEMENT=c.BYTES_PER_ELEMENT,this.ArrayType=c.constructor,this._resize(this.length=Math.ceil(c.length/u))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(c,u){return this}append(c){return this.set(this.length,c)}reserve(c){if(c>0){this.length+=c;const u=this.stride,f=this.length*u,p=this.buffer.length;f>=p&&this._resize(p===0?e(f*1,this.BYTES_PER_ELEMENT):e(f*2,this.BYTES_PER_ELEMENT))}return this}flush(c=this.length){c=e(c*this.stride,this.BYTES_PER_ELEMENT);const u=t(this.buffer,c);return this.clear(),u}clear(){return this.length=0,this._resize(0),this}_resize(c){return this.buffer=(0,n.memcpy)(new this.ArrayType(c),this.buffer)}}Fs.BufferBuilder=i,i.prototype.offset=0;class r extends i{last(){return this.get(this.length-1)}get(c){return this.buffer[c]}set(c,u){return this.reserve(c-this.length+1),this.buffer[c*this.stride]=u,this}}Fs.DataBufferBuilder=r;class s extends r{constructor(c=new Uint8Array(0)){super(c,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(c){return this.buffer[c>>3]>>c%8&1}set(c,u){const{buffer:f}=this.reserve(c-this.length+1),p=c>>3,m=c%8,g=f[p]>>m&1;return u?g===0&&(f[p]|=1<<m,++this.numValid):g===1&&(f[p]&=~(1<<m),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}Fs.BitmapBufferBuilder=s;class o extends r{constructor(c=new Int32Array(1)){super(c,1)}append(c){return this.set(this.length-1,c)}set(c,u){const f=this.length-1,p=this.reserve(c-f+1).buffer;return f<c++&&p.fill(p[f],f,c),p[c]=p[c-1]+u,this}flush(c=this.length-1){return c>this.length&&this.set(c-1,0),super.flush(c+1)}}return Fs.OffsetsBufferBuilder=o,Fs}var CO;function Qn(){if(CO)return ha;CO=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.VariableWidthBuilder=ha.FixedWidthBuilder=ha.Builder=void 0;const n=xr(),e=ul(),t=zS(),i=An(),r=Pte(),s=yp();class o{static throughNode(f){throw new Error('"throughNode" not available in this environment')}static throughDOM(f){throw new Error('"throughDOM" not available in this environment')}constructor({type:f,nullValues:p}){this.length=0,this.finished=!1,this.type=f,this.children=[],this.nullValues=p,this.stride=(0,i.strideForType)(f),this._nulls=new s.BitmapBufferBuilder,p&&p.length>0&&(this._isValid=(0,r.createIsValidFunction)(p))}toVector(){return new n.Vector([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let f=0;const{_offsets:p,_values:m,_nulls:g,_typeIds:v,children:w}=this;return p&&(f+=p.byteLength),m&&(f+=m.byteLength),g&&(f+=g.byteLength),v&&(f+=v.byteLength),w.reduce((A,E)=>A+E.byteLength,f)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let f=0;return this._offsets&&(f+=this._offsets.reservedByteLength),this._values&&(f+=this._values.reservedByteLength),this._nulls&&(f+=this._nulls.reservedByteLength),this._typeIds&&(f+=this._typeIds.reservedByteLength),this.children.reduce((p,m)=>p+m.reservedByteLength,f)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(f){return this.set(this.length,f)}isValid(f){return this._isValid(f)}set(f,p){return this.setValid(f,this.isValid(p))&&this.setValue(f,p),this}setValue(f,p){this._setValue(this,f,p)}setValid(f,p){return this.length=this._nulls.set(f,+p).length,p}addChild(f,p=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(f){return this.children[f]||null}flush(){let f,p,m,g;const{type:v,length:w,nullCount:A,_typeIds:E,_offsets:M,_values:I,_nulls:R}=this;(p=E==null?void 0:E.flush(w))?g=M==null?void 0:M.flush(w):(g=M==null?void 0:M.flush(w))?f=I==null?void 0:I.flush(M.last()):f=I==null?void 0:I.flush(w),A>0&&(m=R==null?void 0:R.flush(w));const D=this.children.map(C=>C.flush());return this.clear(),(0,e.makeData)({type:v,length:w,nullCount:A,children:D,child:D[0],data:f,typeIds:p,nullBitmap:m,valueOffsets:g})}finish(){this.finished=!0;for(const f of this.children)f.finish();return this}clear(){var f,p,m,g;this.length=0,(f=this._nulls)===null||f===void 0||f.clear(),(p=this._values)===null||p===void 0||p.clear(),(m=this._offsets)===null||m===void 0||m.clear(),(g=this._typeIds)===null||g===void 0||g.clear();for(const v of this.children)v.clear();return this}}ha.Builder=o,o.prototype.length=1,o.prototype.stride=1,o.prototype.children=null,o.prototype.finished=!1,o.prototype.nullValues=null,o.prototype._isValid=()=>!0;class a extends o{constructor(f){super(f),this._values=new s.DataBufferBuilder(new this.ArrayType(0),this.stride)}setValue(f,p){const m=this._values;return m.reserve(f-m.length+1),super.setValue(f,p)}}ha.FixedWidthBuilder=a;class c extends o{constructor(f){super(f),this._pendingLength=0,this._offsets=new s.OffsetsBufferBuilder}setValue(f,p){const m=this._pending||(this._pending=new Map),g=m.get(f);g&&(this._pendingLength-=g.length),this._pendingLength+=p instanceof t.MapRow?p[t.kKeys].length:p.length,m.set(f,p)}setValid(f,p){return super.setValid(f,p)?!0:((this._pending||(this._pending=new Map)).set(f,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const f=this._pending,p=this._pendingLength;return this._pendingLength=0,this._pending=void 0,f&&f.size>0&&this._flushPending(f,p),this}}return ha.VariableWidthBuilder=c,ha}var Lr={},cc={},Lm={},IO;function P3(){if(IO)return Lm;IO=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.Block=void 0;class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,i,r,s){return t.prep(8,24),t.writeInt64(BigInt(s??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(i??0)),t.offset()}}return Lm.Block=n,Lm}var Um={};const Rt=zF(Fte);var zm={},xO;function f_(){if(xO)return zm;xO=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.KeyValue=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsKeyValue(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsKeyValue(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}key(r){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__string(this.bb_pos+s,r):null}value(r){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__string(this.bb_pos+s,r):null}static startKeyValue(r){r.startObject(2)}static addKey(r,s){r.addFieldOffset(0,s,0)}static addValue(r,s){r.addFieldOffset(1,s,0)}static endKeyValue(r){return r.endObject()}static createKeyValue(r,s,o){return t.startKeyValue(r),t.addKey(r,s),t.addValue(r,o),t.endKeyValue(r)}}return zm.KeyValue=t,zm}var Vm={},MO;function L3(){if(MO)return Vm;MO=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.MetadataVersion=void 0;var n;return function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"}(n||(Vm.MetadataVersion=n={})),Vm}var jm={},qm={},DO;function U3(){if(DO)return qm;DO=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.Endianness=void 0;var n;return function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(n||(qm.Endianness=n={})),qm}var Hm={},Gm={},$m={},RO;function Lte(){if(RO)return $m;RO=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.DictionaryKind=void 0;var n;return function(e){e[e.DenseArray=0]="DenseArray"}(n||($m.DictionaryKind=n={})),$m}var Ym={},kO;function Ld(){if(kO)return Ym;kO=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.Int=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsInt(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsInt(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}bitWidth(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt32(this.bb_pos+r):0}isSigned(){const r=this.bb.__offset(this.bb_pos,6);return r?!!this.bb.readInt8(this.bb_pos+r):!1}static startInt(r){r.startObject(2)}static addBitWidth(r,s){r.addFieldInt32(0,s,0)}static addIsSigned(r,s){r.addFieldInt8(1,+s,0)}static endInt(r){return r.endObject()}static createInt(r,s,o){return t.startInt(r),t.addBitWidth(r,s),t.addIsSigned(r,o),t.endInt(r)}}return Ym.Int=t,Ym}var NO;function z3(){if(NO)return Gm;NO=1,Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.DictionaryEncoding=void 0;const e=dt.__importStar(Rt),t=Lte(),i=Ld();class r{constructor(){this.bb=null,this.bb_pos=0}__init(o,a){return this.bb_pos=o,this.bb=a,this}static getRootAsDictionaryEncoding(o,a){return(a||new r).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsDictionaryEncoding(o,a){return o.setPosition(o.position()+e.SIZE_PREFIX_LENGTH),(a||new r).__init(o.readInt32(o.position())+o.position(),o)}id(){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readInt64(this.bb_pos+o):BigInt("0")}indexType(o){const a=this.bb.__offset(this.bb_pos,6);return a?(o||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}isOrdered(){const o=this.bb.__offset(this.bb_pos,8);return o?!!this.bb.readInt8(this.bb_pos+o):!1}dictionaryKind(){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt16(this.bb_pos+o):t.DictionaryKind.DenseArray}static startDictionaryEncoding(o){o.startObject(4)}static addId(o,a){o.addFieldInt64(0,a,BigInt("0"))}static addIndexType(o,a){o.addFieldOffset(1,a,0)}static addIsOrdered(o,a){o.addFieldInt8(2,+a,0)}static addDictionaryKind(o,a){o.addFieldInt16(3,a,t.DictionaryKind.DenseArray)}static endDictionaryEncoding(o){return o.endObject()}}return Gm.DictionaryEncoding=r,Gm}var ma={},Wm={},OO;function V3(){if(OO)return Wm;OO=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.Binary=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsBinary(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsBinary(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startBinary(r){r.startObject(0)}static endBinary(r){return r.endObject()}static createBinary(r){return t.startBinary(r),t.endBinary(r)}}return Wm.Binary=t,Wm}var Km={},BO;function j3(){if(BO)return Km;BO=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.Bool=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsBool(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsBool(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startBool(r){r.startObject(0)}static endBool(r){return r.endObject()}static createBool(r){return t.startBool(r),t.endBool(r)}}return Km.Bool=t,Km}var Xm={},Jm={},FO;function Ute(){if(FO)return Jm;FO=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.DateUnit=void 0;var n;return function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"}(n||(Jm.DateUnit=n={})),Jm}var PO;function JC(){if(PO)return Xm;PO=1,Object.defineProperty(Xm,"__esModule",{value:!0}),Xm.Date=void 0;const e=dt.__importStar(Rt),t=Ute();class i{constructor(){this.bb=null,this.bb_pos=0}__init(s,o){return this.bb_pos=s,this.bb=o,this}static getRootAsDate(s,o){return(o||new i).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDate(s,o){return s.setPosition(s.position()+e.SIZE_PREFIX_LENGTH),(o||new i).__init(s.readInt32(s.position())+s.position(),s)}unit(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt16(this.bb_pos+s):t.DateUnit.MILLISECOND}static startDate(s){s.startObject(1)}static addUnit(s,o){s.addFieldInt16(0,o,t.DateUnit.MILLISECOND)}static endDate(s){return s.endObject()}static createDate(s,o){return i.startDate(s),i.addUnit(s,o),i.endDate(s)}}return Xm.Date=i,Xm}var Zm={},LO;function ZC(){if(LO)return Zm;LO=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.Decimal=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsDecimal(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsDecimal(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}precision(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt32(this.bb_pos+r):0}scale(){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb_pos+r):0}bitWidth(){const r=this.bb.__offset(this.bb_pos,8);return r?this.bb.readInt32(this.bb_pos+r):128}static startDecimal(r){r.startObject(3)}static addPrecision(r,s){r.addFieldInt32(0,s,0)}static addScale(r,s){r.addFieldInt32(1,s,0)}static addBitWidth(r,s){r.addFieldInt32(2,s,128)}static endDecimal(r){return r.endObject()}static createDecimal(r,s,o,a){return t.startDecimal(r),t.addPrecision(r,s),t.addScale(r,o),t.addBitWidth(r,a),t.endDecimal(r)}}return Zm.Decimal=t,Zm}var Qm={},eg={},UO;function QC(){if(UO)return eg;UO=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.TimeUnit=void 0;var n;return function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"}(n||(eg.TimeUnit=n={})),eg}var zO;function eI(){if(zO)return Qm;zO=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.Duration=void 0;const e=dt.__importStar(Rt),t=QC();class i{constructor(){this.bb=null,this.bb_pos=0}__init(s,o){return this.bb_pos=s,this.bb=o,this}static getRootAsDuration(s,o){return(o||new i).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDuration(s,o){return s.setPosition(s.position()+e.SIZE_PREFIX_LENGTH),(o||new i).__init(s.readInt32(s.position())+s.position(),s)}unit(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt16(this.bb_pos+s):t.TimeUnit.MILLISECOND}static startDuration(s){s.startObject(1)}static addUnit(s,o){s.addFieldInt16(0,o,t.TimeUnit.MILLISECOND)}static endDuration(s){return s.endObject()}static createDuration(s,o){return i.startDuration(s),i.addUnit(s,o),i.endDuration(s)}}return Qm.Duration=i,Qm}var tg={},VO;function tI(){if(VO)return tg;VO=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.FixedSizeBinary=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsFixedSizeBinary(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsFixedSizeBinary(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}byteWidth(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt32(this.bb_pos+r):0}static startFixedSizeBinary(r){r.startObject(1)}static addByteWidth(r,s){r.addFieldInt32(0,s,0)}static endFixedSizeBinary(r){return r.endObject()}static createFixedSizeBinary(r,s){return t.startFixedSizeBinary(r),t.addByteWidth(r,s),t.endFixedSizeBinary(r)}}return tg.FixedSizeBinary=t,tg}var ng={},jO;function nI(){if(jO)return ng;jO=1,Object.defineProperty(ng,"__esModule",{value:!0}),ng.FixedSizeList=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsFixedSizeList(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsFixedSizeList(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}listSize(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt32(this.bb_pos+r):0}static startFixedSizeList(r){r.startObject(1)}static addListSize(r,s){r.addFieldInt32(0,s,0)}static endFixedSizeList(r){return r.endObject()}static createFixedSizeList(r,s){return t.startFixedSizeList(r),t.addListSize(r,s),t.endFixedSizeList(r)}}return ng.FixedSizeList=t,ng}var ig={},rg={},qO;function zte(){if(qO)return rg;qO=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.Precision=void 0;var n;return function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"}(n||(rg.Precision=n={})),rg}var HO;function iI(){if(HO)return ig;HO=1,Object.defineProperty(ig,"__esModule",{value:!0}),ig.FloatingPoint=void 0;const e=dt.__importStar(Rt),t=zte();class i{constructor(){this.bb=null,this.bb_pos=0}__init(s,o){return this.bb_pos=s,this.bb=o,this}static getRootAsFloatingPoint(s,o){return(o||new i).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsFloatingPoint(s,o){return s.setPosition(s.position()+e.SIZE_PREFIX_LENGTH),(o||new i).__init(s.readInt32(s.position())+s.position(),s)}precision(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt16(this.bb_pos+s):t.Precision.HALF}static startFloatingPoint(s){s.startObject(1)}static addPrecision(s,o){s.addFieldInt16(0,o,t.Precision.HALF)}static endFloatingPoint(s){return s.endObject()}static createFloatingPoint(s,o){return i.startFloatingPoint(s),i.addPrecision(s,o),i.endFloatingPoint(s)}}return ig.FloatingPoint=i,ig}var sg={},og={},GO;function Vte(){if(GO)return og;GO=1,Object.defineProperty(og,"__esModule",{value:!0}),og.IntervalUnit=void 0;var n;return function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(n||(og.IntervalUnit=n={})),og}var $O;function rI(){if($O)return sg;$O=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.Interval=void 0;const e=dt.__importStar(Rt),t=Vte();class i{constructor(){this.bb=null,this.bb_pos=0}__init(s,o){return this.bb_pos=s,this.bb=o,this}static getRootAsInterval(s,o){return(o||new i).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsInterval(s,o){return s.setPosition(s.position()+e.SIZE_PREFIX_LENGTH),(o||new i).__init(s.readInt32(s.position())+s.position(),s)}unit(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt16(this.bb_pos+s):t.IntervalUnit.YEAR_MONTH}static startInterval(s){s.startObject(1)}static addUnit(s,o){s.addFieldInt16(0,o,t.IntervalUnit.YEAR_MONTH)}static endInterval(s){return s.endObject()}static createInterval(s,o){return i.startInterval(s),i.addUnit(s,o),i.endInterval(s)}}return sg.Interval=i,sg}var ag={},YO;function jte(){if(YO)return ag;YO=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.LargeBinary=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsLargeBinary(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsLargeBinary(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startLargeBinary(r){r.startObject(0)}static endLargeBinary(r){return r.endObject()}static createLargeBinary(r){return t.startLargeBinary(r),t.endLargeBinary(r)}}return ag.LargeBinary=t,ag}var lg={},WO;function qte(){if(WO)return lg;WO=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.LargeList=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsLargeList(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsLargeList(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startLargeList(r){r.startObject(0)}static endLargeList(r){return r.endObject()}static createLargeList(r){return t.startLargeList(r),t.endLargeList(r)}}return lg.LargeList=t,lg}var ug={},KO;function Hte(){if(KO)return ug;KO=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.LargeUtf8=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsLargeUtf8(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsLargeUtf8(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startLargeUtf8(r){r.startObject(0)}static endLargeUtf8(r){return r.endObject()}static createLargeUtf8(r){return t.startLargeUtf8(r),t.endLargeUtf8(r)}}return ug.LargeUtf8=t,ug}var cg={},XO;function q3(){if(XO)return cg;XO=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.List=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsList(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsList(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startList(r){r.startObject(0)}static endList(r){return r.endObject()}static createList(r){return t.startList(r),t.endList(r)}}return cg.List=t,cg}var dg={},JO;function sI(){if(JO)return dg;JO=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.Map=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsMap(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsMap(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}keysSorted(){const r=this.bb.__offset(this.bb_pos,4);return r?!!this.bb.readInt8(this.bb_pos+r):!1}static startMap(r){r.startObject(1)}static addKeysSorted(r,s){r.addFieldInt8(0,+s,0)}static endMap(r){return r.endObject()}static createMap(r,s){return t.startMap(r),t.addKeysSorted(r,s),t.endMap(r)}}return dg.Map=t,dg}var fg={},ZO;function H3(){if(ZO)return fg;ZO=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.Null=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsNull(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsNull(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startNull(r){r.startObject(0)}static endNull(r){return r.endObject()}static createNull(r){return t.startNull(r),t.endNull(r)}}return fg.Null=t,fg}var hg={},QO;function Gte(){if(QO)return hg;QO=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.RunEndEncoded=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsRunEndEncoded(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsRunEndEncoded(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startRunEndEncoded(r){r.startObject(0)}static endRunEndEncoded(r){return r.endObject()}static createRunEndEncoded(r){return t.startRunEndEncoded(r),t.endRunEndEncoded(r)}}return hg.RunEndEncoded=t,hg}var pg={},eB;function G3(){if(eB)return pg;eB=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.Struct_=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsStruct_(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsStruct_(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startStruct_(r){r.startObject(0)}static endStruct_(r){return r.endObject()}static createStruct_(r){return t.startStruct_(r),t.endStruct_(r)}}return pg.Struct_=t,pg}var mg={},tB;function oI(){if(tB)return mg;tB=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.Time=void 0;const e=dt.__importStar(Rt),t=QC();class i{constructor(){this.bb=null,this.bb_pos=0}__init(s,o){return this.bb_pos=s,this.bb=o,this}static getRootAsTime(s,o){return(o||new i).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTime(s,o){return s.setPosition(s.position()+e.SIZE_PREFIX_LENGTH),(o||new i).__init(s.readInt32(s.position())+s.position(),s)}unit(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt16(this.bb_pos+s):t.TimeUnit.MILLISECOND}bitWidth(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt32(this.bb_pos+s):32}static startTime(s){s.startObject(2)}static addUnit(s,o){s.addFieldInt16(0,o,t.TimeUnit.MILLISECOND)}static addBitWidth(s,o){s.addFieldInt32(1,o,32)}static endTime(s){return s.endObject()}static createTime(s,o,a){return i.startTime(s),i.addUnit(s,o),i.addBitWidth(s,a),i.endTime(s)}}return mg.Time=i,mg}var gg={},nB;function aI(){if(nB)return gg;nB=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.Timestamp=void 0;const e=dt.__importStar(Rt),t=QC();class i{constructor(){this.bb=null,this.bb_pos=0}__init(s,o){return this.bb_pos=s,this.bb=o,this}static getRootAsTimestamp(s,o){return(o||new i).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTimestamp(s,o){return s.setPosition(s.position()+e.SIZE_PREFIX_LENGTH),(o||new i).__init(s.readInt32(s.position())+s.position(),s)}unit(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt16(this.bb_pos+s):t.TimeUnit.SECOND}timezone(s){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__string(this.bb_pos+o,s):null}static startTimestamp(s){s.startObject(2)}static addUnit(s,o){s.addFieldInt16(0,o,t.TimeUnit.SECOND)}static addTimezone(s,o){s.addFieldOffset(1,o,0)}static endTimestamp(s){return s.endObject()}static createTimestamp(s,o,a){return i.startTimestamp(s),i.addUnit(s,o),i.addTimezone(s,a),i.endTimestamp(s)}}return gg.Timestamp=i,gg}var yg={},bg={},iB;function $te(){if(iB)return bg;iB=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.UnionMode=void 0;var n;return function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"}(n||(bg.UnionMode=n={})),bg}var rB;function lI(){if(rB)return yg;rB=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.Union=void 0;const e=dt.__importStar(Rt),t=$te();class i{constructor(){this.bb=null,this.bb_pos=0}__init(s,o){return this.bb_pos=s,this.bb=o,this}static getRootAsUnion(s,o){return(o||new i).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsUnion(s,o){return s.setPosition(s.position()+e.SIZE_PREFIX_LENGTH),(o||new i).__init(s.readInt32(s.position())+s.position(),s)}mode(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt16(this.bb_pos+s):t.UnionMode.Sparse}typeIds(s){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readInt32(this.bb.__vector(this.bb_pos+o)+s*4):0}typeIdsLength(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}typeIdsArray(){const s=this.bb.__offset(this.bb_pos,6);return s?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}static startUnion(s){s.startObject(2)}static addMode(s,o){s.addFieldInt16(0,o,t.UnionMode.Sparse)}static addTypeIds(s,o){s.addFieldOffset(1,o,0)}static createTypeIdsVector(s,o){s.startVector(4,o.length,4);for(let a=o.length-1;a>=0;a--)s.addInt32(o[a]);return s.endVector()}static startTypeIdsVector(s,o){s.startVector(4,o,4)}static endUnion(s){return s.endObject()}static createUnion(s,o,a){return i.startUnion(s),i.addMode(s,o),i.addTypeIds(s,a),i.endUnion(s)}}return yg.Union=i,yg}var _g={},sB;function $3(){if(sB)return _g;sB=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.Utf8=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsUtf8(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsUtf8(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static startUtf8(r){r.startObject(0)}static endUtf8(r){return r.endObject()}static createUtf8(r){return t.startUtf8(r),t.endUtf8(r)}}return _g.Utf8=t,_g}var oB;function h_(){if(oB)return ma;oB=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.unionListToType=ma.unionToType=ma.Type=void 0;const n=V3(),e=j3(),t=JC(),i=ZC(),r=eI(),s=tI(),o=nI(),a=iI(),c=Ld(),u=rI(),f=jte(),p=qte(),m=Hte(),g=q3(),v=sI(),w=H3(),A=Gte(),E=G3(),M=oI(),I=aI(),R=lI(),D=$3();var C;(function(U){U[U.NONE=0]="NONE",U[U.Null=1]="Null",U[U.Int=2]="Int",U[U.FloatingPoint=3]="FloatingPoint",U[U.Binary=4]="Binary",U[U.Utf8=5]="Utf8",U[U.Bool=6]="Bool",U[U.Decimal=7]="Decimal",U[U.Date=8]="Date",U[U.Time=9]="Time",U[U.Timestamp=10]="Timestamp",U[U.Interval=11]="Interval",U[U.List=12]="List",U[U.Struct_=13]="Struct_",U[U.Union=14]="Union",U[U.FixedSizeBinary=15]="FixedSizeBinary",U[U.FixedSizeList=16]="FixedSizeList",U[U.Map=17]="Map",U[U.Duration=18]="Duration",U[U.LargeBinary=19]="LargeBinary",U[U.LargeUtf8=20]="LargeUtf8",U[U.LargeList=21]="LargeList",U[U.RunEndEncoded=22]="RunEndEncoded"})(C||(ma.Type=C={}));function k(U,F){switch(C[U]){case"NONE":return null;case"Null":return F(new w.Null);case"Int":return F(new c.Int);case"FloatingPoint":return F(new a.FloatingPoint);case"Binary":return F(new n.Binary);case"Utf8":return F(new D.Utf8);case"Bool":return F(new e.Bool);case"Decimal":return F(new i.Decimal);case"Date":return F(new t.Date);case"Time":return F(new M.Time);case"Timestamp":return F(new I.Timestamp);case"Interval":return F(new u.Interval);case"List":return F(new g.List);case"Struct_":return F(new E.Struct_);case"Union":return F(new R.Union);case"FixedSizeBinary":return F(new s.FixedSizeBinary);case"FixedSizeList":return F(new o.FixedSizeList);case"Map":return F(new v.Map);case"Duration":return F(new r.Duration);case"LargeBinary":return F(new f.LargeBinary);case"LargeUtf8":return F(new m.LargeUtf8);case"LargeList":return F(new p.LargeList);case"RunEndEncoded":return F(new A.RunEndEncoded);default:return null}}ma.unionToType=k;function j(U,F,J){switch(C[U]){case"NONE":return null;case"Null":return F(J,new w.Null);case"Int":return F(J,new c.Int);case"FloatingPoint":return F(J,new a.FloatingPoint);case"Binary":return F(J,new n.Binary);case"Utf8":return F(J,new D.Utf8);case"Bool":return F(J,new e.Bool);case"Decimal":return F(J,new i.Decimal);case"Date":return F(J,new t.Date);case"Time":return F(J,new M.Time);case"Timestamp":return F(J,new I.Timestamp);case"Interval":return F(J,new u.Interval);case"List":return F(J,new g.List);case"Struct_":return F(J,new E.Struct_);case"Union":return F(J,new R.Union);case"FixedSizeBinary":return F(J,new s.FixedSizeBinary);case"FixedSizeList":return F(J,new o.FixedSizeList);case"Map":return F(J,new v.Map);case"Duration":return F(J,new r.Duration);case"LargeBinary":return F(J,new f.LargeBinary);case"LargeUtf8":return F(J,new m.LargeUtf8);case"LargeList":return F(J,new p.LargeList);case"RunEndEncoded":return F(J,new A.RunEndEncoded);default:return null}}return ma.unionListToType=j,ma}var aB;function Y3(){if(aB)return Hm;aB=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.Field=void 0;const e=dt.__importStar(Rt),t=z3(),i=f_(),r=h_();class s{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsField(a,c){return(c||new s).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsField(a,c){return a.setPosition(a.position()+e.SIZE_PREFIX_LENGTH),(c||new s).__init(a.readInt32(a.position())+a.position(),a)}name(a){const c=this.bb.__offset(this.bb_pos,4);return c?this.bb.__string(this.bb_pos+c,a):null}nullable(){const a=this.bb.__offset(this.bb_pos,6);return a?!!this.bb.readInt8(this.bb_pos+a):!1}typeType(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readUint8(this.bb_pos+a):r.Type.NONE}type(a){const c=this.bb.__offset(this.bb_pos,10);return c?this.bb.__union(a,this.bb_pos+c):null}dictionary(a){const c=this.bb.__offset(this.bb_pos,12);return c?(a||new t.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}children(a,c){const u=this.bb.__offset(this.bb_pos,14);return u?(c||new s).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+a*4),this.bb):null}childrenLength(){const a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__vector_len(this.bb_pos+a):0}customMetadata(a,c){const u=this.bb.__offset(this.bb_pos,16);return u?(c||new i.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,16);return a?this.bb.__vector_len(this.bb_pos+a):0}static startField(a){a.startObject(7)}static addName(a,c){a.addFieldOffset(0,c,0)}static addNullable(a,c){a.addFieldInt8(1,+c,0)}static addTypeType(a,c){a.addFieldInt8(2,c,r.Type.NONE)}static addType(a,c){a.addFieldOffset(3,c,0)}static addDictionary(a,c){a.addFieldOffset(4,c,0)}static addChildren(a,c){a.addFieldOffset(5,c,0)}static createChildrenVector(a,c){a.startVector(4,c.length,4);for(let u=c.length-1;u>=0;u--)a.addOffset(c[u]);return a.endVector()}static startChildrenVector(a,c){a.startVector(4,c,4)}static addCustomMetadata(a,c){a.addFieldOffset(6,c,0)}static createCustomMetadataVector(a,c){a.startVector(4,c.length,4);for(let u=c.length-1;u>=0;u--)a.addOffset(c[u]);return a.endVector()}static startCustomMetadataVector(a,c){a.startVector(4,c,4)}static endField(a){return a.endObject()}}return Hm.Field=s,Hm}var lB;function uI(){if(lB)return jm;lB=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.Schema=void 0;const e=dt.__importStar(Rt),t=U3(),i=Y3(),r=f_();class s{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsSchema(a,c){return(c||new s).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSchema(a,c){return a.setPosition(a.position()+e.SIZE_PREFIX_LENGTH),(c||new s).__init(a.readInt32(a.position())+a.position(),a)}endianness(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):t.Endianness.Little}fields(a,c){const u=this.bb.__offset(this.bb_pos,6);return u?(c||new i.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+a*4),this.bb):null}fieldsLength(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}customMetadata(a,c){const u=this.bb.__offset(this.bb_pos,8);return u?(c||new r.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}features(a){const c=this.bb.__offset(this.bb_pos,10);return c?this.bb.readInt64(this.bb.__vector(this.bb_pos+c)+a*8):BigInt(0)}featuresLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0}static startSchema(a){a.startObject(4)}static addEndianness(a,c){a.addFieldInt16(0,c,t.Endianness.Little)}static addFields(a,c){a.addFieldOffset(1,c,0)}static createFieldsVector(a,c){a.startVector(4,c.length,4);for(let u=c.length-1;u>=0;u--)a.addOffset(c[u]);return a.endVector()}static startFieldsVector(a,c){a.startVector(4,c,4)}static addCustomMetadata(a,c){a.addFieldOffset(2,c,0)}static createCustomMetadataVector(a,c){a.startVector(4,c.length,4);for(let u=c.length-1;u>=0;u--)a.addOffset(c[u]);return a.endVector()}static startCustomMetadataVector(a,c){a.startVector(4,c,4)}static addFeatures(a,c){a.addFieldOffset(3,c,0)}static createFeaturesVector(a,c){a.startVector(8,c.length,8);for(let u=c.length-1;u>=0;u--)a.addInt64(c[u]);return a.endVector()}static startFeaturesVector(a,c){a.startVector(8,c,8)}static endSchema(a){return a.endObject()}static finishSchemaBuffer(a,c){a.finish(c)}static finishSizePrefixedSchemaBuffer(a,c){a.finish(c,void 0,!0)}static createSchema(a,c,u,f,p){return s.startSchema(a),s.addEndianness(a,c),s.addFields(a,u),s.addCustomMetadata(a,f),s.addFeatures(a,p),s.endSchema(a)}}return jm.Schema=s,jm}var uB;function Yte(){if(uB)return Um;uB=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.Footer=void 0;const e=dt.__importStar(Rt),t=P3(),i=f_(),r=L3(),s=uI();class o{constructor(){this.bb=null,this.bb_pos=0}__init(c,u){return this.bb_pos=c,this.bb=u,this}static getRootAsFooter(c,u){return(u||new o).__init(c.readInt32(c.position())+c.position(),c)}static getSizePrefixedRootAsFooter(c,u){return c.setPosition(c.position()+e.SIZE_PREFIX_LENGTH),(u||new o).__init(c.readInt32(c.position())+c.position(),c)}version(){const c=this.bb.__offset(this.bb_pos,4);return c?this.bb.readInt16(this.bb_pos+c):r.MetadataVersion.V1}schema(c){const u=this.bb.__offset(this.bb_pos,6);return u?(c||new s.Schema).__init(this.bb.__indirect(this.bb_pos+u),this.bb):null}dictionaries(c,u){const f=this.bb.__offset(this.bb_pos,8);return f?(u||new t.Block).__init(this.bb.__vector(this.bb_pos+f)+c*24,this.bb):null}dictionariesLength(){const c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__vector_len(this.bb_pos+c):0}recordBatches(c,u){const f=this.bb.__offset(this.bb_pos,10);return f?(u||new t.Block).__init(this.bb.__vector(this.bb_pos+f)+c*24,this.bb):null}recordBatchesLength(){const c=this.bb.__offset(this.bb_pos,10);return c?this.bb.__vector_len(this.bb_pos+c):0}customMetadata(c,u){const f=this.bb.__offset(this.bb_pos,12);return f?(u||new i.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+c*4),this.bb):null}customMetadataLength(){const c=this.bb.__offset(this.bb_pos,12);return c?this.bb.__vector_len(this.bb_pos+c):0}static startFooter(c){c.startObject(5)}static addVersion(c,u){c.addFieldInt16(0,u,r.MetadataVersion.V1)}static addSchema(c,u){c.addFieldOffset(1,u,0)}static addDictionaries(c,u){c.addFieldOffset(2,u,0)}static startDictionariesVector(c,u){c.startVector(24,u,8)}static addRecordBatches(c,u){c.addFieldOffset(3,u,0)}static startRecordBatchesVector(c,u){c.startVector(24,u,8)}static addCustomMetadata(c,u){c.addFieldOffset(4,u,0)}static createCustomMetadataVector(c,u){c.startVector(4,u.length,4);for(let f=u.length-1;f>=0;f--)c.addOffset(u[f]);return c.endVector()}static startCustomMetadataVector(c,u){c.startVector(4,u,4)}static endFooter(c){return c.endObject()}static finishFooterBuffer(c,u){c.finish(u)}static finishSizePrefixedFooterBuffer(c,u){c.finish(u,void 0,!0)}}return Um.Footer=o,Um}var dc={},cB;function rs(){if(cB)return dc;cB=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.Field=dc.Schema=void 0;const n=Ln(),e=An();class t{constructor(a=[],c,u,f=n.MetadataVersion.V5){this.fields=a||[],this.metadata=c||new Map,u||(u=s(a)),this.dictionaries=u,this.metadataVersion=f}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(a=>a.name)}toString(){return`Schema<{ ${this.fields.map((a,c)=>`${c}: ${a}`).join(", ")} }>`}select(a){const c=new Set(a),u=this.fields.filter(f=>c.has(f.name));return new t(u,this.metadata)}selectAt(a){const c=a.map(u=>this.fields[u]).filter(Boolean);return new t(c,this.metadata)}assign(...a){const c=a[0]instanceof t?a[0]:Array.isArray(a[0])?new t(a[0]):new t(a),u=[...this.fields],f=r(r(new Map,this.metadata),c.metadata),p=c.fields.filter(g=>{const v=u.findIndex(w=>w.name===g.name);return~v?(u[v]=g.clone({metadata:r(r(new Map,u[v].metadata),g.metadata)}))&&!1:!0}),m=s(p,new Map);return new t([...u,...p],f,new Map([...this.dictionaries,...m]))}}dc.Schema=t,t.prototype.fields=null,t.prototype.metadata=null,t.prototype.dictionaries=null;class i{static new(...a){let[c,u,f,p]=a;return a[0]&&typeof a[0]=="object"&&({name:c}=a[0],u===void 0&&(u=a[0].type),f===void 0&&(f=a[0].nullable),p===void 0&&(p=a[0].metadata)),new i(`${c}`,u,f,p)}constructor(a,c,u=!1,f){this.name=a,this.type=c,this.nullable=u,this.metadata=f||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...a){let[c,u,f,p]=a;return!a[0]||typeof a[0]!="object"?[c=this.name,u=this.type,f=this.nullable,p=this.metadata]=a:{name:c=this.name,type:u=this.type,nullable:f=this.nullable,metadata:p=this.metadata}=a[0],i.new(c,u,f,p)}}dc.Field=i,i.prototype.type=null,i.prototype.name=null,i.prototype.nullable=null,i.prototype.metadata=null;function r(o,a){return new Map([...o||new Map,...a||new Map])}function s(o,a=new Map){for(let c=-1,u=o.length;++c<u;){const p=o[c].type;if(e.DataType.isDictionary(p)){if(!a.has(p.id))a.set(p.id,p.dictionary);else if(a.get(p.id)!==p.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}p.children&&p.children.length>0&&s(p.children,a)}return a}return dc}var dB;function W3(){if(dB)return cc;dB=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.FileBlock=cc.Footer=void 0;const n=dt,e=P3(),t=Yte(),i=n.__importStar(Rt);var r=i.Builder,s=i.ByteBuffer;const o=rs(),a=Ln(),c=er(),u=GC();class f{static decode(v){v=new s((0,c.toUint8Array)(v));const w=t.Footer.getRootAsFooter(v),A=o.Schema.decode(w.schema(),new Map,w.version());return new p(A,w)}static encode(v){const w=new r,A=o.Schema.encode(w,v.schema);t.Footer.startRecordBatchesVector(w,v.numRecordBatches);for(const I of[...v.recordBatches()].slice().reverse())m.encode(w,I);const E=w.endVector();t.Footer.startDictionariesVector(w,v.numDictionaries);for(const I of[...v.dictionaryBatches()].slice().reverse())m.encode(w,I);const M=w.endVector();return t.Footer.startFooter(w),t.Footer.addSchema(w,A),t.Footer.addVersion(w,a.MetadataVersion.V5),t.Footer.addRecordBatches(w,E),t.Footer.addDictionaries(w,M),t.Footer.finishFooterBuffer(w,t.Footer.endFooter(w)),w.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(v,w=a.MetadataVersion.V5,A,E){this.schema=v,this.version=w,A&&(this._recordBatches=A),E&&(this._dictionaryBatches=E)}*recordBatches(){for(let v,w=-1,A=this.numRecordBatches;++w<A;)(v=this.getRecordBatch(w))&&(yield v)}*dictionaryBatches(){for(let v,w=-1,A=this.numDictionaries;++w<A;)(v=this.getDictionaryBatch(w))&&(yield v)}getRecordBatch(v){return v>=0&&v<this.numRecordBatches&&this._recordBatches[v]||null}getDictionaryBatch(v){return v>=0&&v<this.numDictionaries&&this._dictionaryBatches[v]||null}}cc.Footer=f;class p extends f{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(v,w){super(v,w.version()),this._footer=w}getRecordBatch(v){if(v>=0&&v<this.numRecordBatches){const w=this._footer.recordBatches(v);if(w)return m.decode(w)}return null}getDictionaryBatch(v){if(v>=0&&v<this.numDictionaries){const w=this._footer.dictionaries(v);if(w)return m.decode(w)}return null}}class m{static decode(v){return new m(v.metaDataLength(),v.bodyLength(),v.offset())}static encode(v,w){const{metaDataLength:A}=w,E=BigInt(w.offset),M=BigInt(w.bodyLength);return e.Block.createBlock(v,E,A,M)}constructor(v,w,A){this.metaDataLength=v,this.offset=(0,u.bigIntToNumber)(A),this.bodyLength=(0,u.bigIntToNumber)(w)}}return cc.FileBlock=m,cc}var ga={},FA={},fB;function jS(){return fB||(fB=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.AsyncQueue=n.ReadableInterop=n.ArrowJSON=n.ITERATOR_DONE=void 0;const e=dt,t=e.__importDefault(PS());n.ITERATOR_DONE=Object.freeze({done:!0,value:void 0});class i{constructor(a){this._json=a}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}n.ArrowJSON=i;class r{tee(){return this._getDOMStream().tee()}pipe(a,c){return this._getNodeStream().pipe(a,c)}pipeTo(a,c){return this._getDOMStream().pipeTo(a,c)}pipeThrough(a,c){return this._getDOMStream().pipeThrough(a,c)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}n.ReadableInterop=r;class s extends r{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(a=>this._closedPromiseResolve=a)}get closed(){return this._closedPromise}cancel(a){return e.__awaiter(this,void 0,void 0,function*(){yield this.return(a)})}write(a){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(a):this.resolvers.shift().resolve({done:!1,value:a}))}abort(a){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:a}:this.resolvers.shift().reject({done:!0,value:a}))}close(){if(this._closedPromiseResolve){const{resolvers:a}=this;for(;a.length>0;)a.shift().resolve(n.ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(a){return t.default.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,a)}toNodeStream(a){return t.default.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,a)}throw(a){return e.__awaiter(this,void 0,void 0,function*(){return yield this.abort(a),n.ITERATOR_DONE})}return(a){return e.__awaiter(this,void 0,void 0,function*(){return yield this.close(),n.ITERATOR_DONE})}read(a){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(a,"read")).value})}peek(a){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(a,"peek")).value})}next(...a){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((c,u)=>{this.resolvers.push({resolve:c,reject:u})}):Promise.resolve(n.ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}n.AsyncQueue=s}(FA)),FA}var hB;function Ud(){if(hB)return ga;hB=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.AsyncByteStream=ga.ByteStream=ga.AsyncByteQueue=void 0;const n=dt,e=n.__importDefault(PS()),t=pp(),i=jS(),r=er(),s=Pd();class o extends i.AsyncQueue{write(m){if((m=(0,r.toUint8Array)(m)).byteLength>0)return super.write(m)}toString(m=!1){return m?(0,t.decodeUtf8)(this.toUint8Array(!0)):this.toUint8Array(!1).then(t.decodeUtf8)}toUint8Array(m=!1){return m?(0,r.joinUint8Arrays)(this._values)[0]:n.__awaiter(this,void 0,void 0,function*(){var g,v,w,A;const E=[];let M=0;try{for(var I=!0,R=n.__asyncValues(this),D;D=yield R.next(),g=D.done,!g;I=!0){A=D.value,I=!1;const C=A;E.push(C),M+=C.byteLength}}catch(C){v={error:C}}finally{try{!I&&!g&&(w=R.return)&&(yield w.call(R))}finally{if(v)throw v.error}}return(0,r.joinUint8Arrays)(E,M)[0]})}}ga.AsyncByteQueue=o;class a{constructor(m){m&&(this.source=new u(e.default.fromIterable(m)))}[Symbol.iterator](){return this}next(m){return this.source.next(m)}throw(m){return this.source.throw(m)}return(m){return this.source.return(m)}peek(m){return this.source.peek(m)}read(m){return this.source.read(m)}}ga.ByteStream=a;class c{constructor(m){m instanceof c?this.source=m.source:m instanceof o?this.source=new f(e.default.fromAsyncIterable(m)):(0,s.isReadableNodeStream)(m)?this.source=new f(e.default.fromNodeStream(m)):(0,s.isReadableDOMStream)(m)?this.source=new f(e.default.fromDOMStream(m)):(0,s.isFetchResponse)(m)?this.source=new f(e.default.fromDOMStream(m.body)):(0,s.isIterable)(m)?this.source=new f(e.default.fromIterable(m)):(0,s.isPromise)(m)?this.source=new f(e.default.fromAsyncIterable(m)):(0,s.isAsyncIterable)(m)&&(this.source=new f(e.default.fromAsyncIterable(m)))}[Symbol.asyncIterator](){return this}next(m){return this.source.next(m)}throw(m){return this.source.throw(m)}return(m){return this.source.return(m)}get closed(){return this.source.closed}cancel(m){return this.source.cancel(m)}peek(m){return this.source.peek(m)}read(m){return this.source.read(m)}}ga.AsyncByteStream=c;class u{constructor(m){this.source=m}cancel(m){this.return(m)}peek(m){return this.next(m,"peek").value}read(m){return this.next(m,"read").value}next(m,g="read"){return this.source.next({cmd:g,size:m})}throw(m){return Object.create(this.source.throw&&this.source.throw(m)||i.ITERATOR_DONE)}return(m){return Object.create(this.source.return&&this.source.return(m)||i.ITERATOR_DONE)}}class f{constructor(m){this.source=m,this._closedPromise=new Promise(g=>this._closedPromiseResolve=g)}cancel(m){return n.__awaiter(this,void 0,void 0,function*(){yield this.return(m)})}get closed(){return this._closedPromise}read(m){return n.__awaiter(this,void 0,void 0,function*(){return(yield this.next(m,"read")).value})}peek(m){return n.__awaiter(this,void 0,void 0,function*(){return(yield this.next(m,"peek")).value})}next(m,g="read"){return n.__awaiter(this,void 0,void 0,function*(){return yield this.source.next({cmd:g,size:m})})}throw(m){return n.__awaiter(this,void 0,void 0,function*(){const g=this.source.throw&&(yield this.source.throw(m))||i.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(g)})}return(m){return n.__awaiter(this,void 0,void 0,function*(){const g=this.source.return&&(yield this.source.return(m))||i.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(g)})}}return ga}var fc={},pB;function K3(){if(pB)return fc;pB=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.AsyncRandomAccessFile=fc.RandomAccessFile=void 0;const n=dt,e=Ud(),t=er();class i extends e.ByteStream{constructor(o,a){super(),this.position=0,this.buffer=(0,t.toUint8Array)(o),this.size=a===void 0?this.buffer.byteLength:a}readInt32(o){const{buffer:a,byteOffset:c}=this.readAt(o,4);return new DataView(a,c).getInt32(0,!0)}seek(o){return this.position=Math.min(o,this.size),o<this.size}read(o){const{buffer:a,size:c,position:u}=this;return a&&u<c?(typeof o!="number"&&(o=Number.POSITIVE_INFINITY),this.position=Math.min(c,u+Math.min(c-u,o)),a.subarray(u,this.position)):null}readAt(o,a){const c=this.buffer,u=Math.min(this.size,o+a);return c?c.subarray(o,u):new Uint8Array(a)}close(){this.buffer&&(this.buffer=null)}throw(o){return this.close(),{done:!0,value:o}}return(o){return this.close(),{done:!0,value:o}}}fc.RandomAccessFile=i;class r extends e.AsyncByteStream{constructor(o,a){super(),this.position=0,this._handle=o,typeof a=="number"?this.size=a:this._pending=n.__awaiter(this,void 0,void 0,function*(){this.size=(yield o.stat()).size,delete this._pending})}readInt32(o){return n.__awaiter(this,void 0,void 0,function*(){const{buffer:a,byteOffset:c}=yield this.readAt(o,4);return new DataView(a,c).getInt32(0,!0)})}seek(o){return n.__awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(o,this.size),o<this.size})}read(o){return n.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:a,size:c,position:u}=this;if(a&&u<c){typeof o!="number"&&(o=Number.POSITIVE_INFINITY);let f=u,p=0,m=0;const g=Math.min(c,f+Math.min(c-f,o)),v=new Uint8Array(Math.max(0,(this.position=g)-f));for(;(f+=m)<g&&(p+=m)<v.byteLength;)({bytesRead:m}=yield a.read(v,p,v.byteLength-p,f));return v}return null})}readAt(o,a){return n.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:c,size:u}=this;if(c&&o+a<u){const f=Math.min(u,o+a),p=new Uint8Array(f-o);return(yield c.read(p,0,a,o)).buffer}return new Uint8Array(a)})}close(){return n.__awaiter(this,void 0,void 0,function*(){const o=this._handle;this._handle=null,o&&(yield o.close())})}throw(o){return n.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:o}})}return(o){return n.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:o}})}}return fc.AsyncRandomAccessFile=r,fc}var hc={},Ps={},mB;function X3(){if(mB)return Ps;mB=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.Int128=Ps.Int64=Ps.Uint64=Ps.BaseInt64=void 0;const n=65536;function e(c){return c<0&&(c=4294967295+c+1),`0x${c.toString(16)}`}const t=8,i=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class r{constructor(u){this.buffer=u}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(u){const f=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),p=new Uint32Array([u.buffer[1]>>>16,u.buffer[1]&65535,u.buffer[0]>>>16,u.buffer[0]&65535]);let m=f[3]*p[3];this.buffer[0]=m&65535;let g=m>>>16;return m=f[2]*p[3],g+=m,m=f[3]*p[2]>>>0,g+=m,this.buffer[0]+=g<<16,this.buffer[1]=g>>>0<m?n:0,this.buffer[1]+=g>>>16,this.buffer[1]+=f[1]*p[3]+f[2]*p[2]+f[3]*p[1],this.buffer[1]+=f[0]*p[3]+f[1]*p[2]+f[2]*p[1]+f[3]*p[0]<<16,this}_plus(u){const f=this.buffer[0]+u.buffer[0]>>>0;this.buffer[1]+=u.buffer[1],f<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=f}lessThan(u){return this.buffer[1]<u.buffer[1]||this.buffer[1]===u.buffer[1]&&this.buffer[0]<u.buffer[0]}equals(u){return this.buffer[1]===u.buffer[1]&&this.buffer[0]==u.buffer[0]}greaterThan(u){return u.lessThan(this)}hex(){return`${e(this.buffer[1])} ${e(this.buffer[0])}`}}Ps.BaseInt64=r;class s extends r{times(u){return this._times(u),this}plus(u){return this._plus(u),this}static from(u,f=new Uint32Array(2)){return s.fromString(typeof u=="string"?u:u.toString(),f)}static fromNumber(u,f=new Uint32Array(2)){return s.fromString(u.toString(),f)}static fromString(u,f=new Uint32Array(2)){const p=u.length,m=new s(f);for(let g=0;g<p;){const v=t<p-g?t:p-g,w=new s(new Uint32Array([Number.parseInt(u.slice(g,g+v),10),0])),A=new s(new Uint32Array([i[v],0]));m.times(A),m.plus(w),g+=v}return m}static convertArray(u){const f=new Uint32Array(u.length*2);for(let p=-1,m=u.length;++p<m;)s.from(u[p],new Uint32Array(f.buffer,f.byteOffset+2*p*4,2));return f}static multiply(u,f){return new s(new Uint32Array(u.buffer)).times(f)}static add(u,f){return new s(new Uint32Array(u.buffer)).plus(f)}}Ps.Uint64=s;class o extends r{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(u){return this._times(u),this}plus(u){return this._plus(u),this}lessThan(u){const f=this.buffer[1]<<0,p=u.buffer[1]<<0;return f<p||f===p&&this.buffer[0]<u.buffer[0]}static from(u,f=new Uint32Array(2)){return o.fromString(typeof u=="string"?u:u.toString(),f)}static fromNumber(u,f=new Uint32Array(2)){return o.fromString(u.toString(),f)}static fromString(u,f=new Uint32Array(2)){const p=u.startsWith("-"),m=u.length,g=new o(f);for(let v=p?1:0;v<m;){const w=t<m-v?t:m-v,A=new o(new Uint32Array([Number.parseInt(u.slice(v,v+w),10),0])),E=new o(new Uint32Array([i[w],0]));g.times(E),g.plus(A),v+=w}return p?g.negate():g}static convertArray(u){const f=new Uint32Array(u.length*2);for(let p=-1,m=u.length;++p<m;)o.from(u[p],new Uint32Array(f.buffer,f.byteOffset+2*p*4,2));return f}static multiply(u,f){return new o(new Uint32Array(u.buffer)).times(f)}static add(u,f){return new o(new Uint32Array(u.buffer)).plus(f)}}Ps.Int64=o;class a{constructor(u){this.buffer=u}high(){return new o(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new o(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(u){const f=new s(new Uint32Array([this.buffer[3],0])),p=new s(new Uint32Array([this.buffer[2],0])),m=new s(new Uint32Array([this.buffer[1],0])),g=new s(new Uint32Array([this.buffer[0],0])),v=new s(new Uint32Array([u.buffer[3],0])),w=new s(new Uint32Array([u.buffer[2],0])),A=new s(new Uint32Array([u.buffer[1],0])),E=new s(new Uint32Array([u.buffer[0],0]));let M=s.multiply(g,E);this.buffer[0]=M.low();const I=new s(new Uint32Array([M.high(),0]));return M=s.multiply(m,E),I.plus(M),M=s.multiply(g,A),I.plus(M),this.buffer[1]=I.low(),this.buffer[3]=I.lessThan(M)?1:0,this.buffer[2]=I.high(),new s(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(s.multiply(p,E)).plus(s.multiply(m,A)).plus(s.multiply(g,w)),this.buffer[3]+=s.multiply(f,E).plus(s.multiply(p,A)).plus(s.multiply(m,w)).plus(s.multiply(g,v)).low(),this}plus(u){const f=new Uint32Array(4);return f[3]=this.buffer[3]+u.buffer[3]>>>0,f[2]=this.buffer[2]+u.buffer[2]>>>0,f[1]=this.buffer[1]+u.buffer[1]>>>0,f[0]=this.buffer[0]+u.buffer[0]>>>0,f[0]<this.buffer[0]>>>0&&++f[1],f[1]<this.buffer[1]>>>0&&++f[2],f[2]<this.buffer[2]>>>0&&++f[3],this.buffer[3]=f[3],this.buffer[2]=f[2],this.buffer[1]=f[1],this.buffer[0]=f[0],this}hex(){return`${e(this.buffer[3])} ${e(this.buffer[2])} ${e(this.buffer[1])} ${e(this.buffer[0])}`}static multiply(u,f){return new a(new Uint32Array(u.buffer)).times(f)}static add(u,f){return new a(new Uint32Array(u.buffer)).plus(f)}static from(u,f=new Uint32Array(4)){return a.fromString(typeof u=="string"?u:u.toString(),f)}static fromNumber(u,f=new Uint32Array(4)){return a.fromString(u.toString(),f)}static fromString(u,f=new Uint32Array(4)){const p=u.startsWith("-"),m=u.length,g=new a(f);for(let v=p?1:0;v<m;){const w=t<m-v?t:m-v,A=new a(new Uint32Array([Number.parseInt(u.slice(v,v+w),10),0,0,0])),E=new a(new Uint32Array([i[w],0,0,0]));g.times(E),g.plus(A),v+=w}return p?g.negate():g}static convertArray(u){const f=new Uint32Array(u.length*4);for(let p=-1,m=u.length;++p<m;)a.from(u[p],new Uint32Array(f.buffer,f.byteOffset+4*4*p,4));return f}}return Ps.Int128=a,Ps}var gB;function Wte(){if(gB)return hc;gB=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.JSONVectorLoader=hc.VectorLoader=void 0;const n=ul(),e=rs(),t=An(),i=Ir(),r=gp(),s=pp(),o=X3(),a=Ln(),c=er();class u extends i.Visitor{constructor(g,v,w,A,E=a.MetadataVersion.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=g,this.nodes=v,this.buffers=w,this.dictionaries=A,this.metadataVersion=E}visit(g){return super.visit(g instanceof e.Field?g.type:g)}visitNull(g,{length:v}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v})}visitBool(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitInt(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitFloat(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitUtf8(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),valueOffsets:this.readOffsets(g),data:this.readData(g)})}visitBinary(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),valueOffsets:this.readOffsets(g),data:this.readData(g)})}visitFixedSizeBinary(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitDate(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitTimestamp(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitTime(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitDecimal(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitList(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),valueOffsets:this.readOffsets(g),child:this.visit(g.children[0])})}visitStruct(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),children:this.visitMany(g.children)})}visitUnion(g,{length:v,nullCount:w}=this.nextFieldNode()){return this.metadataVersion<a.MetadataVersion.V5&&this.readNullBitmap(g,w),g.mode===a.UnionMode.Sparse?this.visitSparseUnion(g,{length:v,nullCount:w}):this.visitDenseUnion(g,{length:v,nullCount:w})}visitDenseUnion(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,typeIds:this.readTypeIds(g),valueOffsets:this.readOffsets(g),children:this.visitMany(g.children)})}visitSparseUnion(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,typeIds:this.readTypeIds(g),children:this.visitMany(g.children)})}visitDictionary(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g.indices),dictionary:this.readDictionary(g)})}visitInterval(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitDuration(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),data:this.readData(g)})}visitFixedSizeList(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),child:this.visit(g.children[0])})}visitMap(g,{length:v,nullCount:w}=this.nextFieldNode()){return(0,n.makeData)({type:g,length:v,nullCount:w,nullBitmap:this.readNullBitmap(g,w),valueOffsets:this.readOffsets(g),child:this.visit(g.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(g,v,w=this.nextBufferRange()){return v>0&&this.readData(g,w)||new Uint8Array(0)}readOffsets(g,v){return this.readData(g,v)}readTypeIds(g,v){return this.readData(g,v)}readData(g,{length:v,offset:w}=this.nextBufferRange()){return this.bytes.subarray(w,w+v)}readDictionary(g){return this.dictionaries.get(g.id)}}hc.VectorLoader=u;class f extends u{constructor(g,v,w,A,E){super(new Uint8Array(0),v,w,A,E),this.sources=g}readNullBitmap(g,v,{offset:w}=this.nextBufferRange()){return v<=0?new Uint8Array(0):(0,r.packBools)(this.sources[w])}readOffsets(g,{offset:v}=this.nextBufferRange()){return(0,c.toArrayBufferView)(Uint8Array,(0,c.toArrayBufferView)(Int32Array,this.sources[v]))}readTypeIds(g,{offset:v}=this.nextBufferRange()){return(0,c.toArrayBufferView)(Uint8Array,(0,c.toArrayBufferView)(g.ArrayType,this.sources[v]))}readData(g,{offset:v}=this.nextBufferRange()){const{sources:w}=this;return t.DataType.isTimestamp(g)||(t.DataType.isInt(g)||t.DataType.isTime(g))&&g.bitWidth===64||t.DataType.isDuration(g)||t.DataType.isDate(g)&&g.unit===a.DateUnit.MILLISECOND?(0,c.toArrayBufferView)(Uint8Array,o.Int64.convertArray(w[v])):t.DataType.isDecimal(g)?(0,c.toArrayBufferView)(Uint8Array,o.Int128.convertArray(w[v])):t.DataType.isBinary(g)||t.DataType.isFixedSizeBinary(g)?p(w[v]):t.DataType.isBool(g)?(0,r.packBools)(w[v]):t.DataType.isUtf8(g)?(0,s.encodeUtf8)(w[v].join("")):(0,c.toArrayBufferView)(Uint8Array,(0,c.toArrayBufferView)(g.ArrayType,w[v].map(A=>+A)))}}hc.JSONVectorLoader=f;function p(m){const g=m.join(""),v=new Uint8Array(g.length/2);for(let w=0;w<g.length;w+=2)v[w>>1]=Number.parseInt(g.slice(w,w+2),16);return v}return hc}var pc={},ya={},Ur={},mc={},vg={},yB;function cI(){if(yB)return vg;yB=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.BinaryBuilder=void 0;const n=er(),e=yp(),t=Qn();class i extends t.VariableWidthBuilder{constructor(s){super(s),this._values=new e.BufferBuilder(new Uint8Array(0))}get byteLength(){let s=this._pendingLength+this.length*4;return this._offsets&&(s+=this._offsets.byteLength),this._values&&(s+=this._values.byteLength),this._nulls&&(s+=this._nulls.byteLength),s}setValue(s,o){return super.setValue(s,(0,n.toUint8Array)(o))}_flushPending(s,o){const a=this._offsets,c=this._values.reserve(o).buffer;let u=0;for(const[f,p]of s)if(p===void 0)a.set(f,0);else{const m=p.length;c.set(p,u),a.set(f,m),u+=m}}}return vg.BinaryBuilder=i,vg}var Sg={},bB;function J3(){if(bB)return Sg;bB=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.BoolBuilder=void 0;const n=yp(),e=Qn();class t extends e.Builder{constructor(r){super(r),this._values=new n.BitmapBufferBuilder}setValue(r,s){this._values.set(r,+s)}}return Sg.BoolBuilder=t,Sg}var ba={},_B;function Z3(){if(_B)return ba;_B=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.DateMillisecondBuilder=ba.DateDayBuilder=ba.DateBuilder=void 0;const n=Qn(),e=xs();class t extends n.FixedWidthBuilder{}ba.DateBuilder=t,t.prototype._setValue=e.setDate;class i extends t{}ba.DateDayBuilder=i,i.prototype._setValue=e.setDateDay;class r extends t{}return ba.DateMillisecondBuilder=r,r.prototype._setValue=e.setDateMillisecond,ba}var wg={},vB;function Q3(){if(vB)return wg;vB=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.DecimalBuilder=void 0;const n=Qn(),e=xs();class t extends n.FixedWidthBuilder{}return wg.DecimalBuilder=t,t.prototype._setValue=e.setDecimal,wg}var Tg={},SB;function e4(){if(SB)return Tg;SB=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.DictionaryBuilder=void 0;const n=An(),e=Qn(),t=HS();class i extends e.Builder{constructor({type:s,nullValues:o,dictionaryHashFunction:a}){super({type:new n.Dictionary(s.dictionary,s.indices,s.id,s.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=(0,t.makeBuilder)({type:this.type.indices,nullValues:o}),this.dictionary=(0,t.makeBuilder)({type:this.type.dictionary,nullValues:null}),typeof a=="function"&&(this.valueToKey=a)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(s){return this.indices.isValid(s)}setValid(s,o){const a=this.indices;return o=a.setValid(s,o),this.length=a.length,o}setValue(s,o){const a=this._keysToIndices,c=this.valueToKey(o);let u=a[c];return u===void 0&&(a[c]=u=this._dictionaryOffset+this.dictionary.append(o).length-1),this.indices.setValue(s,u)}flush(){const s=this.type,o=this._dictionary,a=this.dictionary.toVector(),c=this.indices.flush().clone(s);return c.dictionary=o?o.concat(a):a,this.finished||(this._dictionaryOffset+=a.length),this._dictionary=c.dictionary,this.clear(),c}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(s){return typeof s=="string"?s:`${s}`}}return Tg.DictionaryBuilder=i,Tg}var Ag={},wB;function t4(){if(wB)return Ag;wB=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.FixedSizeBinaryBuilder=void 0;const n=Qn(),e=xs();class t extends n.FixedWidthBuilder{}return Ag.FixedSizeBinaryBuilder=t,t.prototype._setValue=e.setFixedSizeBinary,Ag}var Eg={},TB;function n4(){if(TB)return Eg;TB=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.FixedSizeListBuilder=void 0;const n=rs(),e=Qn(),t=An();class i extends e.Builder{setValue(s,o){const[a]=this.children,c=s*this.stride;for(let u=-1,f=o.length;++u<f;)a.set(c+u,o[u])}addChild(s,o="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const a=this.children.push(s);return this.type=new t.FixedSizeList(this.type.listSize,new n.Field(o,s.type,!0)),a}}return Eg.FixedSizeListBuilder=i,Eg}var Ls={},AB;function i4(){if(AB)return Ls;AB=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.Float64Builder=Ls.Float32Builder=Ls.Float16Builder=Ls.FloatBuilder=void 0;const n=US(),e=Qn();class t extends e.FixedWidthBuilder{setValue(a,c){this._values.set(a,c)}}Ls.FloatBuilder=t;class i extends t{setValue(a,c){super.setValue(a,(0,n.float64ToUint16)(c))}}Ls.Float16Builder=i;class r extends t{}Ls.Float32Builder=r;class s extends t{}return Ls.Float64Builder=s,Ls}var _a={},EB;function r4(){if(EB)return _a;EB=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.IntervalYearMonthBuilder=_a.IntervalDayTimeBuilder=_a.IntervalBuilder=void 0;const n=Qn(),e=xs();class t extends n.FixedWidthBuilder{}_a.IntervalBuilder=t,t.prototype._setValue=e.setIntervalValue;class i extends t{}_a.IntervalDayTimeBuilder=i,i.prototype._setValue=e.setIntervalDayTime;class r extends t{}return _a.IntervalYearMonthBuilder=r,r.prototype._setValue=e.setIntervalYearMonth,_a}var zr={},CB;function s4(){if(CB)return zr;CB=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.DurationNanosecondBuilder=zr.DurationMicrosecondBuilder=zr.DurationMillisecondBuilder=zr.DurationSecondBuilder=zr.DurationBuilder=void 0;const n=Qn(),e=xs();class t extends n.FixedWidthBuilder{}zr.DurationBuilder=t,t.prototype._setValue=e.setDuration;class i extends t{}zr.DurationSecondBuilder=i,i.prototype._setValue=e.setDurationSecond;class r extends t{}zr.DurationMillisecondBuilder=r,r.prototype._setValue=e.setDurationMillisecond;class s extends t{}zr.DurationMicrosecondBuilder=s,s.prototype._setValue=e.setDurationMicrosecond;class o extends t{}return zr.DurationNanosecondBuilder=o,o.prototype._setValue=e.setDurationNanosecond,zr}var Xn={},IB;function o4(){if(IB)return Xn;IB=1,Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.Uint64Builder=Xn.Uint32Builder=Xn.Uint16Builder=Xn.Uint8Builder=Xn.Int64Builder=Xn.Int32Builder=Xn.Int16Builder=Xn.Int8Builder=Xn.IntBuilder=void 0;const n=Qn();class e extends n.FixedWidthBuilder{setValue(p,m){this._values.set(p,m)}}Xn.IntBuilder=e;class t extends e{}Xn.Int8Builder=t;class i extends e{}Xn.Int16Builder=i;class r extends e{}Xn.Int32Builder=r;class s extends e{}Xn.Int64Builder=s;class o extends e{}Xn.Uint8Builder=o;class a extends e{}Xn.Uint16Builder=a;class c extends e{}Xn.Uint32Builder=c;class u extends e{}return Xn.Uint64Builder=u,Xn}var Cg={},xB;function a4(){if(xB)return Cg;xB=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.ListBuilder=void 0;const n=rs(),e=An(),t=yp(),i=Qn();class r extends i.VariableWidthBuilder{constructor(o){super(o),this._offsets=new t.OffsetsBufferBuilder}addChild(o,a="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=o,this.type=new e.List(new n.Field(a,o.type,!0)),this.numChildren-1}_flushPending(o){const a=this._offsets,[c]=this.children;for(const[u,f]of o)if(typeof f>"u")a.set(u,0);else{const p=f,m=p.length,g=a.set(u,m).buffer[u];for(let v=-1;++v<m;)c.set(g+v,p[v])}}}return Cg.ListBuilder=r,Cg}var Ig={},MB;function l4(){if(MB)return Ig;MB=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.MapBuilder=void 0;const n=rs(),e=An(),t=Qn();class i extends t.VariableWidthBuilder{set(s,o){return super.set(s,o)}setValue(s,o){const a=o instanceof Map?o:new Map(Object.entries(o)),c=this._pending||(this._pending=new Map),u=c.get(s);u&&(this._pendingLength-=u.size),this._pendingLength+=a.size,c.set(s,a)}addChild(s,o=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=s,this.type=new e.Map_(new n.Field(o,s.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(s){const o=this._offsets,[a]=this.children;for(const[c,u]of s)if(u===void 0)o.set(c,0);else{let{[c]:f,[c+1]:p}=o.set(c,u.size).buffer;for(const m of u.entries())if(a.set(f,m),++f>=p)break}}}return Ig.MapBuilder=i,Ig}var xg={},DB;function u4(){if(DB)return xg;DB=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.NullBuilder=void 0;const n=Qn();class e extends n.Builder{setValue(i,r){}setValid(i,r){return this.length=Math.max(i+1,this.length),r}}return xg.NullBuilder=e,xg}var Mg={},RB;function c4(){if(RB)return Mg;RB=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.StructBuilder=void 0;const n=rs(),e=Qn(),t=An();class i extends e.Builder{setValue(s,o){const{children:a,type:c}=this;switch(Array.isArray(o)||o.constructor){case!0:return c.children.forEach((u,f)=>a[f].set(s,o[f]));case Map:return c.children.forEach((u,f)=>a[f].set(s,o.get(u.name)));default:return c.children.forEach((u,f)=>a[f].set(s,o[u.name]))}}setValid(s,o){return super.setValid(s,o)||this.children.forEach(a=>a.setValid(s,o)),o}addChild(s,o=`${this.numChildren}`){const a=this.children.push(s);return this.type=new t.Struct([...this.type.children,new n.Field(o,s.type,!0)]),a}}return Mg.StructBuilder=i,Mg}var Vr={},kB;function d4(){if(kB)return Vr;kB=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.TimestampNanosecondBuilder=Vr.TimestampMicrosecondBuilder=Vr.TimestampMillisecondBuilder=Vr.TimestampSecondBuilder=Vr.TimestampBuilder=void 0;const n=Qn(),e=xs();class t extends n.FixedWidthBuilder{}Vr.TimestampBuilder=t,t.prototype._setValue=e.setTimestamp;class i extends t{}Vr.TimestampSecondBuilder=i,i.prototype._setValue=e.setTimestampSecond;class r extends t{}Vr.TimestampMillisecondBuilder=r,r.prototype._setValue=e.setTimestampMillisecond;class s extends t{}Vr.TimestampMicrosecondBuilder=s,s.prototype._setValue=e.setTimestampMicrosecond;class o extends t{}return Vr.TimestampNanosecondBuilder=o,o.prototype._setValue=e.setTimestampNanosecond,Vr}var jr={},NB;function f4(){if(NB)return jr;NB=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.TimeNanosecondBuilder=jr.TimeMicrosecondBuilder=jr.TimeMillisecondBuilder=jr.TimeSecondBuilder=jr.TimeBuilder=void 0;const n=Qn(),e=xs();class t extends n.FixedWidthBuilder{}jr.TimeBuilder=t,t.prototype._setValue=e.setTime;class i extends t{}jr.TimeSecondBuilder=i,i.prototype._setValue=e.setTimeSecond;class r extends t{}jr.TimeMillisecondBuilder=r,r.prototype._setValue=e.setTimeMillisecond;class s extends t{}jr.TimeMicrosecondBuilder=s,s.prototype._setValue=e.setTimeMicrosecond;class o extends t{}return jr.TimeNanosecondBuilder=o,o.prototype._setValue=e.setTimeNanosecond,jr}var va={},OB;function h4(){if(OB)return va;OB=1,Object.defineProperty(va,"__esModule",{value:!0}),va.DenseUnionBuilder=va.SparseUnionBuilder=va.UnionBuilder=void 0;const n=rs(),e=yp(),t=Qn(),i=An();class r extends t.Builder{constructor(c){super(c),this._typeIds=new e.DataBufferBuilder(new Int8Array(0),1),typeof c.valueToChildTypeId=="function"&&(this._valueToChildTypeId=c.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(c,u){return this.set(this.length,c,u)}set(c,u,f){return f===void 0&&(f=this._valueToChildTypeId(this,u,c)),this.setValue(c,u,f),this}setValue(c,u,f){this._typeIds.set(c,f);const p=this.type.typeIdToChildIndex[f],m=this.children[p];m==null||m.set(c,u)}addChild(c,u=`${this.children.length}`){const f=this.children.push(c),{type:{children:p,mode:m,typeIds:g}}=this,v=[...p,new n.Field(u,c.type)];return this.type=new i.Union(m,[...g,f],v),f}_valueToChildTypeId(c,u,f){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}va.UnionBuilder=r;class s extends r{}va.SparseUnionBuilder=s;class o extends r{constructor(c){super(c),this._offsets=new e.DataBufferBuilder(new Int32Array(0))}setValue(c,u,f){const p=this._typeIds.set(c,f).buffer[c],m=this.getChildAt(this.type.typeIdToChildIndex[p]),g=this._offsets.set(c,m.length).buffer[c];m==null||m.set(g,u)}}return va.DenseUnionBuilder=o,va}var Dg={},BB;function p4(){if(BB)return Dg;BB=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.Utf8Builder=void 0;const n=pp(),e=cI(),t=yp(),i=Qn();class r extends i.VariableWidthBuilder{constructor(o){super(o),this._values=new t.BufferBuilder(new Uint8Array(0))}get byteLength(){let o=this._pendingLength+this.length*4;return this._offsets&&(o+=this._offsets.byteLength),this._values&&(o+=this._values.byteLength),this._nulls&&(o+=this._nulls.byteLength),o}setValue(o,a){return super.setValue(o,(0,n.encodeUtf8)(a))}_flushPending(o,a){}}return Dg.Utf8Builder=r,r.prototype._flushPending=e.BinaryBuilder.prototype._flushPending,Dg}var FB;function Kte(){if(FB)return mc;FB=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.instance=mc.GetBuilderCtor=void 0;const n=Ir(),e=cI(),t=J3(),i=Z3(),r=Q3(),s=e4(),o=t4(),a=n4(),c=i4(),u=r4(),f=s4(),p=o4(),m=a4(),g=l4(),v=u4(),w=c4(),A=d4(),E=f4(),M=h4(),I=p4();class R extends n.Visitor{visitNull(){return v.NullBuilder}visitBool(){return t.BoolBuilder}visitInt(){return p.IntBuilder}visitInt8(){return p.Int8Builder}visitInt16(){return p.Int16Builder}visitInt32(){return p.Int32Builder}visitInt64(){return p.Int64Builder}visitUint8(){return p.Uint8Builder}visitUint16(){return p.Uint16Builder}visitUint32(){return p.Uint32Builder}visitUint64(){return p.Uint64Builder}visitFloat(){return c.FloatBuilder}visitFloat16(){return c.Float16Builder}visitFloat32(){return c.Float32Builder}visitFloat64(){return c.Float64Builder}visitUtf8(){return I.Utf8Builder}visitBinary(){return e.BinaryBuilder}visitFixedSizeBinary(){return o.FixedSizeBinaryBuilder}visitDate(){return i.DateBuilder}visitDateDay(){return i.DateDayBuilder}visitDateMillisecond(){return i.DateMillisecondBuilder}visitTimestamp(){return A.TimestampBuilder}visitTimestampSecond(){return A.TimestampSecondBuilder}visitTimestampMillisecond(){return A.TimestampMillisecondBuilder}visitTimestampMicrosecond(){return A.TimestampMicrosecondBuilder}visitTimestampNanosecond(){return A.TimestampNanosecondBuilder}visitTime(){return E.TimeBuilder}visitTimeSecond(){return E.TimeSecondBuilder}visitTimeMillisecond(){return E.TimeMillisecondBuilder}visitTimeMicrosecond(){return E.TimeMicrosecondBuilder}visitTimeNanosecond(){return E.TimeNanosecondBuilder}visitDecimal(){return r.DecimalBuilder}visitList(){return m.ListBuilder}visitStruct(){return w.StructBuilder}visitUnion(){return M.UnionBuilder}visitDenseUnion(){return M.DenseUnionBuilder}visitSparseUnion(){return M.SparseUnionBuilder}visitDictionary(){return s.DictionaryBuilder}visitInterval(){return u.IntervalBuilder}visitIntervalDayTime(){return u.IntervalDayTimeBuilder}visitIntervalYearMonth(){return u.IntervalYearMonthBuilder}visitDuration(){return f.DurationBuilder}visitDurationSecond(){return f.DurationSecondBuilder}visitDurationMillisecond(){return f.DurationMillisecondBuilder}visitDurationMicrosecond(){return f.DurationMicrosecondBuilder}visistDurationNanosecond(){return f.DurationNanosecondBuilder}visitFixedSizeList(){return a.FixedSizeListBuilder}visitMap(){return g.MapBuilder}}return mc.GetBuilderCtor=R,mc.instance=new R,mc}var PA={},PB;function qS(){return PB||(PB=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.compareTypes=n.compareFields=n.compareSchemas=n.instance=n.TypeComparator=void 0;const e=Ir();class t extends e.Visitor{compareSchemas(k,j){return k===j||j instanceof k.constructor&&this.compareManyFields(k.fields,j.fields)}compareManyFields(k,j){return k===j||Array.isArray(k)&&Array.isArray(j)&&k.length===j.length&&k.every((U,F)=>this.compareFields(U,j[F]))}compareFields(k,j){return k===j||j instanceof k.constructor&&k.name===j.name&&k.nullable===j.nullable&&this.visit(k.type,j.type)}}n.TypeComparator=t;function i(C,k){return k instanceof C.constructor}function r(C,k){return C===k||i(C,k)}function s(C,k){return C===k||i(C,k)&&C.bitWidth===k.bitWidth&&C.isSigned===k.isSigned}function o(C,k){return C===k||i(C,k)&&C.precision===k.precision}function a(C,k){return C===k||i(C,k)&&C.byteWidth===k.byteWidth}function c(C,k){return C===k||i(C,k)&&C.unit===k.unit}function u(C,k){return C===k||i(C,k)&&C.unit===k.unit&&C.timezone===k.timezone}function f(C,k){return C===k||i(C,k)&&C.unit===k.unit&&C.bitWidth===k.bitWidth}function p(C,k){return C===k||i(C,k)&&C.children.length===k.children.length&&n.instance.compareManyFields(C.children,k.children)}function m(C,k){return C===k||i(C,k)&&C.children.length===k.children.length&&n.instance.compareManyFields(C.children,k.children)}function g(C,k){return C===k||i(C,k)&&C.mode===k.mode&&C.typeIds.every((j,U)=>j===k.typeIds[U])&&n.instance.compareManyFields(C.children,k.children)}function v(C,k){return C===k||i(C,k)&&C.id===k.id&&C.isOrdered===k.isOrdered&&n.instance.visit(C.indices,k.indices)&&n.instance.visit(C.dictionary,k.dictionary)}function w(C,k){return C===k||i(C,k)&&C.unit===k.unit}function A(C,k){return C===k||i(C,k)&&C.unit===k.unit}function E(C,k){return C===k||i(C,k)&&C.listSize===k.listSize&&C.children.length===k.children.length&&n.instance.compareManyFields(C.children,k.children)}function M(C,k){return C===k||i(C,k)&&C.keysSorted===k.keysSorted&&C.children.length===k.children.length&&n.instance.compareManyFields(C.children,k.children)}t.prototype.visitNull=r,t.prototype.visitBool=r,t.prototype.visitInt=s,t.prototype.visitInt8=s,t.prototype.visitInt16=s,t.prototype.visitInt32=s,t.prototype.visitInt64=s,t.prototype.visitUint8=s,t.prototype.visitUint16=s,t.prototype.visitUint32=s,t.prototype.visitUint64=s,t.prototype.visitFloat=o,t.prototype.visitFloat16=o,t.prototype.visitFloat32=o,t.prototype.visitFloat64=o,t.prototype.visitUtf8=r,t.prototype.visitBinary=r,t.prototype.visitFixedSizeBinary=a,t.prototype.visitDate=c,t.prototype.visitDateDay=c,t.prototype.visitDateMillisecond=c,t.prototype.visitTimestamp=u,t.prototype.visitTimestampSecond=u,t.prototype.visitTimestampMillisecond=u,t.prototype.visitTimestampMicrosecond=u,t.prototype.visitTimestampNanosecond=u,t.prototype.visitTime=f,t.prototype.visitTimeSecond=f,t.prototype.visitTimeMillisecond=f,t.prototype.visitTimeMicrosecond=f,t.prototype.visitTimeNanosecond=f,t.prototype.visitDecimal=r,t.prototype.visitList=p,t.prototype.visitStruct=m,t.prototype.visitUnion=g,t.prototype.visitDenseUnion=g,t.prototype.visitSparseUnion=g,t.prototype.visitDictionary=v,t.prototype.visitInterval=w,t.prototype.visitIntervalDayTime=w,t.prototype.visitIntervalYearMonth=w,t.prototype.visitDuration=A,t.prototype.visitDurationSecond=A,t.prototype.visitDurationMillisecond=A,t.prototype.visitDurationMicrosecond=A,t.prototype.visitDurationNanosecond=A,t.prototype.visitFixedSizeList=E,t.prototype.visitMap=M,n.instance=new t;function I(C,k){return n.instance.compareSchemas(C,k)}n.compareSchemas=I;function R(C,k){return n.instance.compareFields(C,k)}n.compareFields=R;function D(C,k){return n.instance.visit(C,k)}n.compareTypes=D}(PA)),PA}var LB;function HS(){if(LB)return Ur;LB=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.builderThroughAsyncIterable=Ur.builderThroughIterable=Ur.tableFromJSON=Ur.vectorFromArray=Ur.makeBuilder=void 0;const n=dt,e=rs(),t=n.__importStar(An()),i=ul(),r=xr(),s=Kte(),o=p_(),a=zd(),c=qS();function u(w){const A=w.type,E=new(s.instance.getVisitFn(A)())(w);if(A.children&&A.children.length>0){const M=w.children||[],I={nullValues:w.nullValues},R=Array.isArray(M)?(D,C)=>M[C]||I:({name:D})=>M[D]||I;for(const[D,C]of A.children.entries()){const{type:k}=C,j=R(C,D);E.children.push(u(Object.assign(Object.assign({},j),{type:k})))}}return E}Ur.makeBuilder=u;function f(w,A){if(w instanceof i.Data||w instanceof r.Vector||w.type instanceof t.DataType||ArrayBuffer.isView(w))return(0,r.makeVector)(w);const E={type:A??m(w),nullValues:[null]},M=[...g(E)(w)],I=M.length===1?M[0]:M.reduce((R,D)=>R.concat(D));return t.DataType.isDictionary(I.type)?I.memoize():I}Ur.vectorFromArray=f;function p(w){const A=f(w),E=new a.RecordBatch(new e.Schema(A.type.children),A.data[0]);return new o.Table(E)}Ur.tableFromJSON=p;function m(w){if(w.length===0)return new t.Null;let A=0,E=0,M=0,I=0,R=0,D=0,C=0,k=0;for(const j of w){if(j==null){++A;continue}switch(typeof j){case"bigint":++D;continue;case"boolean":++C;continue;case"number":++I;continue;case"string":++R;continue;case"object":Array.isArray(j)?++E:Object.prototype.toString.call(j)==="[object Date]"?++k:++M;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}if(I+A===w.length)return new t.Float64;if(R+A===w.length)return new t.Dictionary(new t.Utf8,new t.Int32);if(D+A===w.length)return new t.Int64;if(C+A===w.length)return new t.Bool;if(k+A===w.length)return new t.DateMillisecond;if(E+A===w.length){const j=w,U=m(j[j.findIndex(F=>F!=null)]);if(j.every(F=>F==null||(0,c.compareTypes)(U,m(F))))return new t.List(new e.Field("",U,!0))}else if(M+A===w.length){const j=new Map;for(const U of w)for(const F of Object.keys(U))!j.has(F)&&U[F]!=null&&j.set(F,new e.Field(F,m([U[F]]),!0));return new t.Struct([...j.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function g(w){const{["queueingStrategy"]:A="count"}=w,{["highWaterMark"]:E=A!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=w,M=A!=="bytes"?"length":"byteLength";return function*(I){let R=0;const D=u(w);for(const C of I)D.append(C)[M]>=E&&++R&&(yield D.toVector());(D.finish().length>0||R===0)&&(yield D.toVector())}}Ur.builderThroughIterable=g;function v(w){const{["queueingStrategy"]:A="count"}=w,{["highWaterMark"]:E=A!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=w,M=A!=="bytes"?"length":"byteLength";return function(I){return n.__asyncGenerator(this,arguments,function*(){var R,D,C,k;let j=0;const U=u(w);try{for(var F=!0,J=n.__asyncValues(I),G;G=yield n.__await(J.next()),R=G.done,!R;F=!0){k=G.value,F=!1;const ee=k;U.append(ee)[M]>=E&&++j&&(yield yield n.__await(U.toVector()))}}catch(ee){D={error:ee}}finally{try{!F&&!R&&(C=J.return)&&(yield n.__await(C.call(J)))}finally{if(D)throw D.error}}(U.finish().length>0||j===0)&&(yield yield n.__await(U.toVector()))})}}return Ur.builderThroughAsyncIterable=v,Ur}var Rg={},UB;function Xte(){if(UB)return Rg;UB=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.distributeVectorsIntoRecordBatches=void 0;const n=ul(),e=An(),t=zd();function i(o,a){return r(o,a.map(c=>c.data.concat()))}Rg.distributeVectorsIntoRecordBatches=i;function r(o,a){const c=[...o.fields],u=[],f={numBatches:a.reduce((E,M)=>Math.max(E,M.length),0)};let p=0,m=0,g=-1;const v=a.length;let w,A=[];for(;f.numBatches-- >0;){for(m=Number.POSITIVE_INFINITY,g=-1;++g<v;)A[g]=w=a[g].shift(),m=Math.min(m,w?w.length:m);Number.isFinite(m)&&(A=s(c,m,A,a,f),m>0&&(u[p++]=(0,n.makeData)({type:new e.Struct(c),length:m,nullCount:0,children:A.slice()})))}return[o=o.assign(c),u.map(E=>new t.RecordBatch(o,E))]}function s(o,a,c,u,f){var p;const m=(a+63&-64)>>3;for(let g=-1,v=u.length;++g<v;){const w=c[g],A=w==null?void 0:w.length;if(A>=a)A===a?c[g]=w:(c[g]=w.slice(0,a),f.numBatches=Math.max(f.numBatches,u[g].unshift(w.slice(a,A-a))));else{const E=o[g];o[g]=E.clone({nullable:!0}),c[g]=(p=w==null?void 0:w._changeLengthAndBackfillNullBitmap(a))!==null&&p!==void 0?p:(0,n.makeData)({type:E.type,length:a,nullCount:a,nullBitmap:new Uint8Array(m)})}}return c}return Rg}var zB;function p_(){if(zB)return ya;zB=1;var n;Object.defineProperty(ya,"__esModule",{value:!0}),ya.tableFromArrays=ya.makeTable=ya.Table=void 0;const e=Ln(),t=ul(),i=HS(),r=xr(),s=rs(),o=An(),a=qS(),c=Xte(),u=YC(),f=mp(),p=xs(),m=WC(),g=KC(),v=XC(),w=VS(),A=zd();class E{constructor(...D){var C,k;if(D.length===0)return this.batches=[],this.schema=new s.Schema([]),this._offsets=[0],this;let j,U;D[0]instanceof s.Schema&&(j=D.shift()),D.at(-1)instanceof Uint32Array&&(U=D.pop());const F=G=>{if(G){if(G instanceof A.RecordBatch)return[G];if(G instanceof E)return G.batches;if(G instanceof t.Data){if(G.type instanceof o.Struct)return[new A.RecordBatch(new s.Schema(G.type.children),G)]}else{if(Array.isArray(G))return G.flatMap(ee=>F(ee));if(typeof G[Symbol.iterator]=="function")return[...G].flatMap(ee=>F(ee));if(typeof G=="object"){const ee=Object.keys(G),oe=ee.map(V=>new r.Vector([G[V]])),me=new s.Schema(ee.map((V,te)=>new s.Field(String(V),oe[te].type))),[,Q]=(0,c.distributeVectorsIntoRecordBatches)(me,oe);return Q.length===0?[new A.RecordBatch(G)]:Q}}}return[]},J=D.flatMap(G=>F(G));if(j=(k=j??((C=J[0])===null||C===void 0?void 0:C.schema))!==null&&k!==void 0?k:new s.Schema([]),!(j instanceof s.Schema))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const G of J){if(!(G instanceof A.RecordBatch))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!(0,a.compareSchemas)(j,G.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=j,this.batches=J,this._offsets=U??(0,u.computeChunkOffsets)(this.data)}get data(){return this.batches.map(({data:D})=>D)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((D,C)=>D+C.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=(0,u.computeChunkNullCounts)(this.data)),this._nullCount}isValid(D){return!1}get(D){return null}set(D,C){}indexOf(D,C){return-1}getByteLength(D){return 0}[Symbol.iterator](){return this.batches.length>0?g.instance.visit(new r.Vector(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...D){const C=this.schema,k=this.data.concat(D.flatMap(({data:j})=>j));return new E(C,k.map(j=>new A.RecordBatch(C,j)))}slice(D,C){const k=this.schema;[D,C]=(0,w.clampRange)({length:this.numRows},D,C);const j=(0,u.sliceChunks)(this.data,this._offsets,D,C);return new E(k,j.map(U=>new A.RecordBatch(k,U)))}getChild(D){return this.getChildAt(this.schema.fields.findIndex(C=>C.name===D))}getChildAt(D){if(D>-1&&D<this.schema.fields.length){const C=this.data.map(k=>k.children[D]);if(C.length===0){const{type:k}=this.schema.fields[D],j=(0,t.makeData)({type:k,length:0,nullCount:0});C.push(j._changeLengthAndBackfillNullBitmap(this.numRows))}return new r.Vector(C)}return null}setChild(D,C){var k;return this.setChildAt((k=this.schema.fields)===null||k===void 0?void 0:k.findIndex(j=>j.name===D),C)}setChildAt(D,C){let k=this.schema,j=[...this.batches];if(D>-1&&D<this.numCols){C||(C=new r.Vector([(0,t.makeData)({type:new o.Null,length:this.numRows})]));const U=k.fields.slice(),F=U[D].clone({type:C.type}),J=this.schema.fields.map((G,ee)=>this.getChildAt(ee));[U[D],J[D]]=[F,C],[k,j]=(0,c.distributeVectorsIntoRecordBatches)(k,J)}return new E(k,j)}select(D){const C=this.schema.fields.reduce((k,j,U)=>k.set(j.name,U),new Map);return this.selectAt(D.map(k=>C.get(k)).filter(k=>k>-1))}selectAt(D){const C=this.schema.selectAt(D),k=this.batches.map(j=>j.selectAt(D));return new E(C,k)}assign(D){const C=this.schema.fields,[k,j]=D.schema.fields.reduce((J,G,ee)=>{const[oe,me]=J,Q=C.findIndex(V=>V.name===G.name);return~Q?me[Q]=ee:oe.push(ee),J},[[],[]]),U=this.schema.assign(D.schema),F=[...C.map((J,G)=>[G,j[G]]).map(([J,G])=>G===void 0?this.getChildAt(J):D.getChildAt(G)),...k.map(J=>D.getChildAt(J))].filter(Boolean);return new E(...(0,c.distributeVectorsIntoRecordBatches)(U,F))}}ya.Table=E,n=Symbol.toStringTag,E[n]=(R=>(R.schema=null,R.batches=[],R._offsets=new Uint32Array([0]),R._nullCount=-1,R[Symbol.isConcatSpreadable]=!0,R.isValid=(0,u.wrapChunkedCall1)(u.isChunkedValid),R.get=(0,u.wrapChunkedCall1)(f.instance.getVisitFn(e.Type.Struct)),R.set=(0,u.wrapChunkedCall2)(p.instance.getVisitFn(e.Type.Struct)),R.indexOf=(0,u.wrapChunkedIndexOf)(m.instance.getVisitFn(e.Type.Struct)),R.getByteLength=(0,u.wrapChunkedCall1)(v.instance.getVisitFn(e.Type.Struct)),"Table"))(E.prototype);function M(R){const D={},C=Object.entries(R);for(const[k,j]of C)D[k]=(0,r.makeVector)(j);return new E(D)}ya.makeTable=M;function I(R){const D={},C=Object.entries(R);for(const[k,j]of C)D[k]=(0,i.vectorFromArray)(j);return new E(D)}return ya.tableFromArrays=I,ya}var VB;function zd(){if(VB)return pc;VB=1;var n;Object.defineProperty(pc,"__esModule",{value:!0}),pc._InternalEmptyPlaceholderRecordBatch=pc.RecordBatch=void 0;const e=ul(),t=p_(),i=xr(),r=rs(),s=An(),o=mp(),a=xs(),c=WC(),u=KC(),f=XC();class p{constructor(...A){switch(A.length){case 2:{if([this.schema]=A,!(this.schema instanceof r.Schema))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=(0,e.makeData)({nullCount:0,type:new s.Struct(this.schema.fields),children:this.schema.fields.map(E=>(0,e.makeData)({type:E.type,nullCount:0}))})]=A,!(this.data instanceof e.Data))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=m(this.schema,this.data.children);break}case 1:{const[E]=A,{fields:M,children:I,length:R}=Object.keys(E).reduce((k,j,U)=>(k.children[U]=E[j],k.length=Math.max(k.length,E[j].length),k.fields[U]=r.Field.new({name:j,type:E[j].type,nullable:!0}),k),{length:0,fields:new Array,children:new Array}),D=new r.Schema(M),C=(0,e.makeData)({type:new s.Struct(M),length:R,children:I,nullCount:0});[this.schema,this.data]=m(D,C.children,R);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=g(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(A){return this.data.getValid(A)}get(A){return o.instance.visit(this.data,A)}set(A,E){return a.instance.visit(this.data,A,E)}indexOf(A,E){return c.instance.visit(this.data,A,E)}getByteLength(A){return f.instance.visit(this.data,A)}[Symbol.iterator](){return u.instance.visit(new i.Vector([this.data]))}toArray(){return[...this]}concat(...A){return new t.Table(this.schema,[this,...A])}slice(A,E){const[M]=new i.Vector([this.data]).slice(A,E).data;return new p(this.schema,M)}getChild(A){var E;return this.getChildAt((E=this.schema.fields)===null||E===void 0?void 0:E.findIndex(M=>M.name===A))}getChildAt(A){return A>-1&&A<this.schema.fields.length?new i.Vector([this.data.children[A]]):null}setChild(A,E){var M;return this.setChildAt((M=this.schema.fields)===null||M===void 0?void 0:M.findIndex(I=>I.name===A),E)}setChildAt(A,E){let M=this.schema,I=this.data;if(A>-1&&A<this.numCols){E||(E=new i.Vector([(0,e.makeData)({type:new s.Null,length:this.numRows})]));const R=M.fields.slice(),D=I.children.slice(),C=R[A].clone({type:E.type});[R[A],D[A]]=[C,E.data[0]],M=new r.Schema(R,new Map(this.schema.metadata)),I=(0,e.makeData)({type:new s.Struct(R),children:D})}return new p(M,I)}select(A){const E=this.schema.select(A),M=new s.Struct(E.fields),I=[];for(const R of A){const D=this.schema.fields.findIndex(C=>C.name===R);~D&&(I[D]=this.data.children[D])}return new p(E,(0,e.makeData)({type:M,length:this.numRows,children:I}))}selectAt(A){const E=this.schema.selectAt(A),M=A.map(R=>this.data.children[R]).filter(Boolean),I=(0,e.makeData)({type:new s.Struct(E.fields),length:this.numRows,children:M});return new p(E,I)}}pc.RecordBatch=p,n=Symbol.toStringTag,p[n]=(w=>(w._nullCount=-1,w[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(p.prototype);function m(w,A,E=A.reduce((M,I)=>Math.max(M,I.length),0)){var M;const I=[...w.fields],R=[...A],D=(E+63&-64)>>3;for(const[C,k]of w.fields.entries()){const j=A[C];(!j||j.length!==E)&&(I[C]=k.clone({nullable:!0}),R[C]=(M=j==null?void 0:j._changeLengthAndBackfillNullBitmap(E))!==null&&M!==void 0?M:(0,e.makeData)({type:k.type,length:E,nullCount:E,nullBitmap:new Uint8Array(D)}))}return[w.assign(I),(0,e.makeData)({type:new s.Struct(I),length:E,children:R})]}function g(w,A,E=new Map){var M,I;if(((M=w==null?void 0:w.length)!==null&&M!==void 0?M:0)>0&&(w==null?void 0:w.length)===(A==null?void 0:A.length))for(let R=-1,D=w.length;++R<D;){const{type:C}=w[R],k=A[R];for(const j of[k,...((I=k==null?void 0:k.dictionary)===null||I===void 0?void 0:I.data)||[]])g(C.children,j==null?void 0:j.children,E);if(s.DataType.isDictionary(C)){const{id:j}=C;if(!E.has(j))k!=null&&k.dictionary&&E.set(j,k.dictionary);else if(E.get(j)!==k.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return E}class v extends p{constructor(A){const E=A.fields.map(I=>(0,e.makeData)({type:I.type})),M=(0,e.makeData)({type:new s.Struct(A.fields),nullCount:0,children:E});super(A,M)}}return pc._InternalEmptyPlaceholderRecordBatch=v,pc}var LA={},qr={},kg={},Ng={},Og={},jB;function Jte(){if(jB)return Og;jB=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.BodyCompressionMethod=void 0;var n;return function(e){e[e.BUFFER=0]="BUFFER"}(n||(Og.BodyCompressionMethod=n={})),Og}var Bg={},qB;function Zte(){if(qB)return Bg;qB=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.CompressionType=void 0;var n;return function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"}(n||(Bg.CompressionType=n={})),Bg}var HB;function Qte(){if(HB)return Ng;HB=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.BodyCompression=void 0;const e=dt.__importStar(Rt),t=Jte(),i=Zte();class r{constructor(){this.bb=null,this.bb_pos=0}__init(o,a){return this.bb_pos=o,this.bb=a,this}static getRootAsBodyCompression(o,a){return(a||new r).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsBodyCompression(o,a){return o.setPosition(o.position()+e.SIZE_PREFIX_LENGTH),(a||new r).__init(o.readInt32(o.position())+o.position(),o)}codec(){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readInt8(this.bb_pos+o):i.CompressionType.LZ4_FRAME}method(){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.readInt8(this.bb_pos+o):t.BodyCompressionMethod.BUFFER}static startBodyCompression(o){o.startObject(2)}static addCodec(o,a){o.addFieldInt8(0,a,i.CompressionType.LZ4_FRAME)}static addMethod(o,a){o.addFieldInt8(1,a,t.BodyCompressionMethod.BUFFER)}static endBodyCompression(o){return o.endObject()}static createBodyCompression(o,a,c){return r.startBodyCompression(o),r.addCodec(o,a),r.addMethod(o,c),r.endBodyCompression(o)}}return Ng.BodyCompression=r,Ng}var Fg={},GB;function Vd(){if(GB)return Fg;GB=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.Buffer=void 0;class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,i,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(i??0)),t.offset()}}return Fg.Buffer=n,Fg}var Pg={},$B;function m4(){if($B)return Pg;$B=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.FieldNode=void 0;class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,i){return this.bb_pos=t,this.bb=i,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,i,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(i??0)),t.offset()}}return Pg.FieldNode=n,Pg}var YB;function dI(){if(YB)return kg;YB=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.RecordBatch=void 0;const e=dt.__importStar(Rt),t=Qte(),i=Vd(),r=m4();class s{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsRecordBatch(a,c){return(c||new s).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsRecordBatch(a,c){return a.setPosition(a.position()+e.SIZE_PREFIX_LENGTH),(c||new s).__init(a.readInt32(a.position())+a.position(),a)}length(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}nodes(a,c){const u=this.bb.__offset(this.bb_pos,6);return u?(c||new r.FieldNode).__init(this.bb.__vector(this.bb_pos+u)+a*16,this.bb):null}nodesLength(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}buffers(a,c){const u=this.bb.__offset(this.bb_pos,8);return u?(c||new i.Buffer).__init(this.bb.__vector(this.bb_pos+u)+a*16,this.bb):null}buffersLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}compression(a){const c=this.bb.__offset(this.bb_pos,10);return c?(a||new t.BodyCompression).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}static startRecordBatch(a){a.startObject(4)}static addLength(a,c){a.addFieldInt64(0,c,BigInt("0"))}static addNodes(a,c){a.addFieldOffset(1,c,0)}static startNodesVector(a,c){a.startVector(16,c,8)}static addBuffers(a,c){a.addFieldOffset(2,c,0)}static startBuffersVector(a,c){a.startVector(16,c,8)}static addCompression(a,c){a.addFieldOffset(3,c,0)}static endRecordBatch(a){return a.endObject()}}return kg.RecordBatch=s,kg}var Lg={},WB;function g4(){if(WB)return Lg;WB=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.DictionaryBatch=void 0;const e=dt.__importStar(Rt),t=dI();class i{constructor(){this.bb=null,this.bb_pos=0}__init(s,o){return this.bb_pos=s,this.bb=o,this}static getRootAsDictionaryBatch(s,o){return(o||new i).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDictionaryBatch(s,o){return s.setPosition(s.position()+e.SIZE_PREFIX_LENGTH),(o||new i).__init(s.readInt32(s.position())+s.position(),s)}id(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):BigInt("0")}data(s){const o=this.bb.__offset(this.bb_pos,6);return o?(s||new t.RecordBatch).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}isDelta(){const s=this.bb.__offset(this.bb_pos,8);return s?!!this.bb.readInt8(this.bb_pos+s):!1}static startDictionaryBatch(s){s.startObject(3)}static addId(s,o){s.addFieldInt64(0,o,BigInt("0"))}static addData(s,o){s.addFieldOffset(1,o,0)}static addIsDelta(s,o){s.addFieldInt8(2,+o,0)}static endDictionaryBatch(s){return s.endObject()}}return Lg.DictionaryBatch=i,Lg}var Ug={},Sa={},zg={},wa={},Vg={},jg={},KB;function ene(){if(KB)return jg;KB=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.SparseMatrixCompressedAxis=void 0;var n;return function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(n||(jg.SparseMatrixCompressedAxis=n={})),jg}var XB;function tne(){if(XB)return Vg;XB=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.SparseMatrixIndexCSX=void 0;const e=dt.__importStar(Rt),t=Vd(),i=Ld(),r=ene();class s{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsSparseMatrixIndexCSX(a,c){return(c||new s).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSparseMatrixIndexCSX(a,c){return a.setPosition(a.position()+e.SIZE_PREFIX_LENGTH),(c||new s).__init(a.readInt32(a.position())+a.position(),a)}compressedAxis(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):r.SparseMatrixCompressedAxis.Row}indptrType(a){const c=this.bb.__offset(this.bb_pos,6);return c?(a||new i.Int).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}indptrBuffer(a){const c=this.bb.__offset(this.bb_pos,8);return c?(a||new t.Buffer).__init(this.bb_pos+c,this.bb):null}indicesType(a){const c=this.bb.__offset(this.bb_pos,10);return c?(a||new i.Int).__init(this.bb.__indirect(this.bb_pos+c),this.bb):null}indicesBuffer(a){const c=this.bb.__offset(this.bb_pos,12);return c?(a||new t.Buffer).__init(this.bb_pos+c,this.bb):null}static startSparseMatrixIndexCSX(a){a.startObject(5)}static addCompressedAxis(a,c){a.addFieldInt16(0,c,r.SparseMatrixCompressedAxis.Row)}static addIndptrType(a,c){a.addFieldOffset(1,c,0)}static addIndptrBuffer(a,c){a.addFieldStruct(2,c,0)}static addIndicesType(a,c){a.addFieldOffset(3,c,0)}static addIndicesBuffer(a,c){a.addFieldStruct(4,c,0)}static endSparseMatrixIndexCSX(a){const c=a.endObject();return a.requiredField(c,6),a.requiredField(c,8),a.requiredField(c,10),a.requiredField(c,12),c}}return Vg.SparseMatrixIndexCSX=s,Vg}var qg={},JB;function nne(){if(JB)return qg;JB=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.SparseTensorIndexCOO=void 0;const e=dt.__importStar(Rt),t=Vd(),i=Ld();class r{constructor(){this.bb=null,this.bb_pos=0}__init(o,a){return this.bb_pos=o,this.bb=a,this}static getRootAsSparseTensorIndexCOO(o,a){return(a||new r).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsSparseTensorIndexCOO(o,a){return o.setPosition(o.position()+e.SIZE_PREFIX_LENGTH),(a||new r).__init(o.readInt32(o.position())+o.position(),o)}indicesType(o){const a=this.bb.__offset(this.bb_pos,4);return a?(o||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indicesStrides(o){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt64(this.bb.__vector(this.bb_pos+a)+o*8):BigInt(0)}indicesStridesLength(){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__vector_len(this.bb_pos+o):0}indicesBuffer(o){const a=this.bb.__offset(this.bb_pos,8);return a?(o||new t.Buffer).__init(this.bb_pos+a,this.bb):null}isCanonical(){const o=this.bb.__offset(this.bb_pos,10);return o?!!this.bb.readInt8(this.bb_pos+o):!1}static startSparseTensorIndexCOO(o){o.startObject(4)}static addIndicesType(o,a){o.addFieldOffset(0,a,0)}static addIndicesStrides(o,a){o.addFieldOffset(1,a,0)}static createIndicesStridesVector(o,a){o.startVector(8,a.length,8);for(let c=a.length-1;c>=0;c--)o.addInt64(a[c]);return o.endVector()}static startIndicesStridesVector(o,a){o.startVector(8,a,8)}static addIndicesBuffer(o,a){o.addFieldStruct(2,a,0)}static addIsCanonical(o,a){o.addFieldInt8(3,+a,0)}static endSparseTensorIndexCOO(o){const a=o.endObject();return o.requiredField(a,4),o.requiredField(a,8),a}}return qg.SparseTensorIndexCOO=r,qg}var Hg={},ZB;function ine(){if(ZB)return Hg;ZB=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.SparseTensorIndexCSF=void 0;const e=dt.__importStar(Rt),t=Vd(),i=Ld();class r{constructor(){this.bb=null,this.bb_pos=0}__init(o,a){return this.bb_pos=o,this.bb=a,this}static getRootAsSparseTensorIndexCSF(o,a){return(a||new r).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsSparseTensorIndexCSF(o,a){return o.setPosition(o.position()+e.SIZE_PREFIX_LENGTH),(a||new r).__init(o.readInt32(o.position())+o.position(),o)}indptrType(o){const a=this.bb.__offset(this.bb_pos,4);return a?(o||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indptrBuffers(o,a){const c=this.bb.__offset(this.bb_pos,6);return c?(a||new t.Buffer).__init(this.bb.__vector(this.bb_pos+c)+o*16,this.bb):null}indptrBuffersLength(){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__vector_len(this.bb_pos+o):0}indicesType(o){const a=this.bb.__offset(this.bb_pos,8);return a?(o||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indicesBuffers(o,a){const c=this.bb.__offset(this.bb_pos,10);return c?(a||new t.Buffer).__init(this.bb.__vector(this.bb_pos+c)+o*16,this.bb):null}indicesBuffersLength(){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__vector_len(this.bb_pos+o):0}axisOrder(o){const a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readInt32(this.bb.__vector(this.bb_pos+a)+o*4):0}axisOrderLength(){const o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__vector_len(this.bb_pos+o):0}axisOrderArray(){const o=this.bb.__offset(this.bb_pos,12);return o?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+o),this.bb.__vector_len(this.bb_pos+o)):null}static startSparseTensorIndexCSF(o){o.startObject(5)}static addIndptrType(o,a){o.addFieldOffset(0,a,0)}static addIndptrBuffers(o,a){o.addFieldOffset(1,a,0)}static startIndptrBuffersVector(o,a){o.startVector(16,a,8)}static addIndicesType(o,a){o.addFieldOffset(2,a,0)}static addIndicesBuffers(o,a){o.addFieldOffset(3,a,0)}static startIndicesBuffersVector(o,a){o.startVector(16,a,8)}static addAxisOrder(o,a){o.addFieldOffset(4,a,0)}static createAxisOrderVector(o,a){o.startVector(4,a.length,4);for(let c=a.length-1;c>=0;c--)o.addInt32(a[c]);return o.endVector()}static startAxisOrderVector(o,a){o.startVector(4,a,4)}static endSparseTensorIndexCSF(o){const a=o.endObject();return o.requiredField(a,4),o.requiredField(a,6),o.requiredField(a,8),o.requiredField(a,10),o.requiredField(a,12),a}}return Hg.SparseTensorIndexCSF=r,Hg}var QB;function rne(){if(QB)return wa;QB=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.unionListToSparseTensorIndex=wa.unionToSparseTensorIndex=wa.SparseTensorIndex=void 0;const n=tne(),e=nne(),t=ine();var i;(function(o){o[o.NONE=0]="NONE",o[o.SparseTensorIndexCOO=1]="SparseTensorIndexCOO",o[o.SparseMatrixIndexCSX=2]="SparseMatrixIndexCSX",o[o.SparseTensorIndexCSF=3]="SparseTensorIndexCSF"})(i||(wa.SparseTensorIndex=i={}));function r(o,a){switch(i[o]){case"NONE":return null;case"SparseTensorIndexCOO":return a(new e.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return a(new n.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return a(new t.SparseTensorIndexCSF);default:return null}}wa.unionToSparseTensorIndex=r;function s(o,a,c){switch(i[o]){case"NONE":return null;case"SparseTensorIndexCOO":return a(c,new e.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return a(c,new n.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return a(c,new t.SparseTensorIndexCSF);default:return null}}return wa.unionListToSparseTensorIndex=s,wa}var Gg={},eF;function y4(){if(eF)return Gg;eF=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.TensorDim=void 0;const e=dt.__importStar(Rt);class t{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsTensorDim(r,s){return(s||new t).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsTensorDim(r,s){return r.setPosition(r.position()+e.SIZE_PREFIX_LENGTH),(s||new t).__init(r.readInt32(r.position())+r.position(),r)}size(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt64(this.bb_pos+r):BigInt("0")}name(r){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__string(this.bb_pos+s,r):null}static startTensorDim(r){r.startObject(2)}static addSize(r,s){r.addFieldInt64(0,s,BigInt("0"))}static addName(r,s){r.addFieldOffset(1,s,0)}static endTensorDim(r){return r.endObject()}static createTensorDim(r,s,o){return t.startTensorDim(r),t.addSize(r,s),t.addName(r,o),t.endTensorDim(r)}}return Gg.TensorDim=t,Gg}var tF;function sne(){if(tF)return zg;tF=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.SparseTensor=void 0;const e=dt.__importStar(Rt),t=Vd(),i=rne(),r=y4(),s=h_();class o{constructor(){this.bb=null,this.bb_pos=0}__init(c,u){return this.bb_pos=c,this.bb=u,this}static getRootAsSparseTensor(c,u){return(u||new o).__init(c.readInt32(c.position())+c.position(),c)}static getSizePrefixedRootAsSparseTensor(c,u){return c.setPosition(c.position()+e.SIZE_PREFIX_LENGTH),(u||new o).__init(c.readInt32(c.position())+c.position(),c)}typeType(){const c=this.bb.__offset(this.bb_pos,4);return c?this.bb.readUint8(this.bb_pos+c):s.Type.NONE}type(c){const u=this.bb.__offset(this.bb_pos,6);return u?this.bb.__union(c,this.bb_pos+u):null}shape(c,u){const f=this.bb.__offset(this.bb_pos,8);return f?(u||new r.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+f)+c*4),this.bb):null}shapeLength(){const c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__vector_len(this.bb_pos+c):0}nonZeroLength(){const c=this.bb.__offset(this.bb_pos,10);return c?this.bb.readInt64(this.bb_pos+c):BigInt("0")}sparseIndexType(){const c=this.bb.__offset(this.bb_pos,12);return c?this.bb.readUint8(this.bb_pos+c):i.SparseTensorIndex.NONE}sparseIndex(c){const u=this.bb.__offset(this.bb_pos,14);return u?this.bb.__union(c,this.bb_pos+u):null}data(c){const u=this.bb.__offset(this.bb_pos,16);return u?(c||new t.Buffer).__init(this.bb_pos+u,this.bb):null}static startSparseTensor(c){c.startObject(7)}static addTypeType(c,u){c.addFieldInt8(0,u,s.Type.NONE)}static addType(c,u){c.addFieldOffset(1,u,0)}static addShape(c,u){c.addFieldOffset(2,u,0)}static createShapeVector(c,u){c.startVector(4,u.length,4);for(let f=u.length-1;f>=0;f--)c.addOffset(u[f]);return c.endVector()}static startShapeVector(c,u){c.startVector(4,u,4)}static addNonZeroLength(c,u){c.addFieldInt64(3,u,BigInt("0"))}static addSparseIndexType(c,u){c.addFieldInt8(4,u,i.SparseTensorIndex.NONE)}static addSparseIndex(c,u){c.addFieldOffset(5,u,0)}static addData(c,u){c.addFieldStruct(6,u,0)}static endSparseTensor(c){const u=c.endObject();return c.requiredField(u,6),c.requiredField(u,8),c.requiredField(u,14),c.requiredField(u,16),u}static finishSparseTensorBuffer(c,u){c.finish(u)}static finishSizePrefixedSparseTensorBuffer(c,u){c.finish(u,void 0,!0)}}return zg.SparseTensor=o,zg}var $g={},nF;function one(){if(nF)return $g;nF=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.Tensor=void 0;const e=dt.__importStar(Rt),t=Vd(),i=y4(),r=h_();class s{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsTensor(a,c){return(c||new s).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTensor(a,c){return a.setPosition(a.position()+e.SIZE_PREFIX_LENGTH),(c||new s).__init(a.readInt32(a.position())+a.position(),a)}typeType(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readUint8(this.bb_pos+a):r.Type.NONE}type(a){const c=this.bb.__offset(this.bb_pos,6);return c?this.bb.__union(a,this.bb_pos+c):null}shape(a,c){const u=this.bb.__offset(this.bb_pos,8);return u?(c||new i.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+a*4),this.bb):null}shapeLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}strides(a){const c=this.bb.__offset(this.bb_pos,10);return c?this.bb.readInt64(this.bb.__vector(this.bb_pos+c)+a*8):BigInt(0)}stridesLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0}data(a){const c=this.bb.__offset(this.bb_pos,12);return c?(a||new t.Buffer).__init(this.bb_pos+c,this.bb):null}static startTensor(a){a.startObject(5)}static addTypeType(a,c){a.addFieldInt8(0,c,r.Type.NONE)}static addType(a,c){a.addFieldOffset(1,c,0)}static addShape(a,c){a.addFieldOffset(2,c,0)}static createShapeVector(a,c){a.startVector(4,c.length,4);for(let u=c.length-1;u>=0;u--)a.addOffset(c[u]);return a.endVector()}static startShapeVector(a,c){a.startVector(4,c,4)}static addStrides(a,c){a.addFieldOffset(3,c,0)}static createStridesVector(a,c){a.startVector(8,c.length,8);for(let u=c.length-1;u>=0;u--)a.addInt64(c[u]);return a.endVector()}static startStridesVector(a,c){a.startVector(8,c,8)}static addData(a,c){a.addFieldStruct(4,c,0)}static endTensor(a){const c=a.endObject();return a.requiredField(c,6),a.requiredField(c,8),a.requiredField(c,12),c}static finishTensorBuffer(a,c){a.finish(c)}static finishSizePrefixedTensorBuffer(a,c){a.finish(c,void 0,!0)}}return $g.Tensor=s,$g}var iF;function b4(){if(iF)return Sa;iF=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.unionListToMessageHeader=Sa.unionToMessageHeader=Sa.MessageHeader=void 0;const n=g4(),e=dI(),t=uI(),i=sne(),r=one();var s;(function(c){c[c.NONE=0]="NONE",c[c.Schema=1]="Schema",c[c.DictionaryBatch=2]="DictionaryBatch",c[c.RecordBatch=3]="RecordBatch",c[c.Tensor=4]="Tensor",c[c.SparseTensor=5]="SparseTensor"})(s||(Sa.MessageHeader=s={}));function o(c,u){switch(s[c]){case"NONE":return null;case"Schema":return u(new t.Schema);case"DictionaryBatch":return u(new n.DictionaryBatch);case"RecordBatch":return u(new e.RecordBatch);case"Tensor":return u(new r.Tensor);case"SparseTensor":return u(new i.SparseTensor);default:return null}}Sa.unionToMessageHeader=o;function a(c,u,f){switch(s[c]){case"NONE":return null;case"Schema":return u(f,new t.Schema);case"DictionaryBatch":return u(f,new n.DictionaryBatch);case"RecordBatch":return u(f,new e.RecordBatch);case"Tensor":return u(f,new r.Tensor);case"SparseTensor":return u(f,new i.SparseTensor);default:return null}}return Sa.unionListToMessageHeader=a,Sa}var rF;function ane(){if(rF)return Ug;rF=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.Message=void 0;const e=dt.__importStar(Rt),t=f_(),i=b4(),r=L3();class s{constructor(){this.bb=null,this.bb_pos=0}__init(a,c){return this.bb_pos=a,this.bb=c,this}static getRootAsMessage(a,c){return(c||new s).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsMessage(a,c){return a.setPosition(a.position()+e.SIZE_PREFIX_LENGTH),(c||new s).__init(a.readInt32(a.position())+a.position(),a)}version(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):r.MetadataVersion.V1}headerType(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readUint8(this.bb_pos+a):i.MessageHeader.NONE}header(a){const c=this.bb.__offset(this.bb_pos,8);return c?this.bb.__union(a,this.bb_pos+c):null}bodyLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}customMetadata(a,c){const u=this.bb.__offset(this.bb_pos,12);return u?(c||new t.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+u)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,12);return a?this.bb.__vector_len(this.bb_pos+a):0}static startMessage(a){a.startObject(5)}static addVersion(a,c){a.addFieldInt16(0,c,r.MetadataVersion.V1)}static addHeaderType(a,c){a.addFieldInt8(1,c,i.MessageHeader.NONE)}static addHeader(a,c){a.addFieldOffset(2,c,0)}static addBodyLength(a,c){a.addFieldInt64(3,c,BigInt("0"))}static addCustomMetadata(a,c){a.addFieldOffset(4,c,0)}static createCustomMetadataVector(a,c){a.startVector(4,c.length,4);for(let u=c.length-1;u>=0;u--)a.addOffset(c[u]);return a.endVector()}static startCustomMetadataVector(a,c){a.startVector(4,c,4)}static endMessage(a){return a.endObject()}static finishMessageBuffer(a,c){a.finish(c)}static finishSizePrefixedMessageBuffer(a,c){a.finish(c,void 0,!0)}static createMessage(a,c,u,f,p,m){return s.startMessage(a),s.addVersion(a,c),s.addHeaderType(a,u),s.addHeader(a,f),s.addBodyLength(a,p),s.addCustomMetadata(a,m),s.endMessage(a)}}return Ug.Message=s,Ug}var gc={},sF;function lne(){if(sF)return gc;sF=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.instance=gc.TypeAssembler=void 0;const n=Ir(),e=H3(),t=Ld(),i=iI(),r=V3(),s=j3(),o=$3(),a=ZC(),c=JC(),u=oI(),f=aI(),p=rI(),m=eI(),g=q3(),v=G3(),w=lI(),A=z3(),E=tI(),M=nI(),I=sI();class R extends n.Visitor{visit(C,k){return C==null||k==null?void 0:super.visit(C,k)}visitNull(C,k){return e.Null.startNull(k),e.Null.endNull(k)}visitInt(C,k){return t.Int.startInt(k),t.Int.addBitWidth(k,C.bitWidth),t.Int.addIsSigned(k,C.isSigned),t.Int.endInt(k)}visitFloat(C,k){return i.FloatingPoint.startFloatingPoint(k),i.FloatingPoint.addPrecision(k,C.precision),i.FloatingPoint.endFloatingPoint(k)}visitBinary(C,k){return r.Binary.startBinary(k),r.Binary.endBinary(k)}visitBool(C,k){return s.Bool.startBool(k),s.Bool.endBool(k)}visitUtf8(C,k){return o.Utf8.startUtf8(k),o.Utf8.endUtf8(k)}visitDecimal(C,k){return a.Decimal.startDecimal(k),a.Decimal.addScale(k,C.scale),a.Decimal.addPrecision(k,C.precision),a.Decimal.addBitWidth(k,C.bitWidth),a.Decimal.endDecimal(k)}visitDate(C,k){return c.Date.startDate(k),c.Date.addUnit(k,C.unit),c.Date.endDate(k)}visitTime(C,k){return u.Time.startTime(k),u.Time.addUnit(k,C.unit),u.Time.addBitWidth(k,C.bitWidth),u.Time.endTime(k)}visitTimestamp(C,k){const j=C.timezone&&k.createString(C.timezone)||void 0;return f.Timestamp.startTimestamp(k),f.Timestamp.addUnit(k,C.unit),j!==void 0&&f.Timestamp.addTimezone(k,j),f.Timestamp.endTimestamp(k)}visitInterval(C,k){return p.Interval.startInterval(k),p.Interval.addUnit(k,C.unit),p.Interval.endInterval(k)}visitDuration(C,k){return m.Duration.startDuration(k),m.Duration.addUnit(k,C.unit),m.Duration.endDuration(k)}visitList(C,k){return g.List.startList(k),g.List.endList(k)}visitStruct(C,k){return v.Struct_.startStruct_(k),v.Struct_.endStruct_(k)}visitUnion(C,k){w.Union.startTypeIdsVector(k,C.typeIds.length);const j=w.Union.createTypeIdsVector(k,C.typeIds);return w.Union.startUnion(k),w.Union.addMode(k,C.mode),w.Union.addTypeIds(k,j),w.Union.endUnion(k)}visitDictionary(C,k){const j=this.visit(C.indices,k);return A.DictionaryEncoding.startDictionaryEncoding(k),A.DictionaryEncoding.addId(k,BigInt(C.id)),A.DictionaryEncoding.addIsOrdered(k,C.isOrdered),j!==void 0&&A.DictionaryEncoding.addIndexType(k,j),A.DictionaryEncoding.endDictionaryEncoding(k)}visitFixedSizeBinary(C,k){return E.FixedSizeBinary.startFixedSizeBinary(k),E.FixedSizeBinary.addByteWidth(k,C.byteWidth),E.FixedSizeBinary.endFixedSizeBinary(k)}visitFixedSizeList(C,k){return M.FixedSizeList.startFixedSizeList(k),M.FixedSizeList.addListSize(k,C.listSize),M.FixedSizeList.endFixedSizeList(k)}visitMap(C,k){return I.Map.startMap(k),I.Map.addKeysSorted(k,C.keysSorted),I.Map.endMap(k)}}return gc.TypeAssembler=R,gc.instance=new R,gc}var Us={},oF;function une(){if(oF)return Us;oF=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.fieldFromJSON=Us.dictionaryBatchFromJSON=Us.recordBatchFromJSON=Us.schemaFromJSON=void 0;const n=rs(),e=An(),t=ap(),i=Ln();function r(A,E=new Map){return new n.Schema(a(A,E),g(A.metadata),E)}Us.schemaFromJSON=r;function s(A){return new t.RecordBatch(A.count,u(A.columns),f(A.columns))}Us.recordBatchFromJSON=s;function o(A){return new t.DictionaryBatch(s(A.data),A.id,A.isDelta)}Us.dictionaryBatchFromJSON=o;function a(A,E){return(A.fields||[]).filter(Boolean).map(M=>n.Field.fromJSON(M,E))}function c(A,E){return(A.children||[]).filter(Boolean).map(M=>n.Field.fromJSON(M,E))}function u(A){return(A||[]).reduce((E,M)=>[...E,new t.FieldNode(M.count,p(M.VALIDITY)),...u(M.children)],[])}function f(A,E=[]){for(let M=-1,I=(A||[]).length;++M<I;){const R=A[M];R.VALIDITY&&E.push(new t.BufferRegion(E.length,R.VALIDITY.length)),R.TYPE_ID&&E.push(new t.BufferRegion(E.length,R.TYPE_ID.length)),R.OFFSET&&E.push(new t.BufferRegion(E.length,R.OFFSET.length)),R.DATA&&E.push(new t.BufferRegion(E.length,R.DATA.length)),E=f(R.children,E)}return E}function p(A){return(A||[]).reduce((E,M)=>E+ +(M===0),0)}function m(A,E){let M,I,R,D,C,k;return!E||!(D=A.dictionary)?(C=w(A,c(A,E)),R=new n.Field(A.name,C,A.nullable,g(A.metadata))):E.has(M=D.id)?(I=(I=D.indexType)?v(I):new e.Int32,k=new e.Dictionary(E.get(M),I,M,D.isOrdered),R=new n.Field(A.name,k,A.nullable,g(A.metadata))):(I=(I=D.indexType)?v(I):new e.Int32,E.set(M,C=w(A,c(A,E))),k=new e.Dictionary(C,I,M,D.isOrdered),R=new n.Field(A.name,k,A.nullable,g(A.metadata))),R||null}Us.fieldFromJSON=m;function g(A=[]){return new Map(A.map(({key:E,value:M})=>[E,M]))}function v(A){return new e.Int(A.isSigned,A.bitWidth)}function w(A,E){const M=A.type.name;switch(M){case"NONE":return new e.Null;case"null":return new e.Null;case"binary":return new e.Binary;case"utf8":return new e.Utf8;case"bool":return new e.Bool;case"list":return new e.List((E||[])[0]);case"struct":return new e.Struct(E||[]);case"struct_":return new e.Struct(E||[])}switch(M){case"int":{const I=A.type;return new e.Int(I.isSigned,I.bitWidth)}case"floatingpoint":{const I=A.type;return new e.Float(i.Precision[I.precision])}case"decimal":{const I=A.type;return new e.Decimal(I.scale,I.precision,I.bitWidth)}case"date":{const I=A.type;return new e.Date_(i.DateUnit[I.unit])}case"time":{const I=A.type;return new e.Time(i.TimeUnit[I.unit],I.bitWidth)}case"timestamp":{const I=A.type;return new e.Timestamp(i.TimeUnit[I.unit],I.timezone)}case"interval":{const I=A.type;return new e.Interval(i.IntervalUnit[I.unit])}case"duration":{const I=A.type;return new e.Duration(i.TimeUnit[I.unit])}case"union":{const I=A.type,[R,...D]=(I.mode+"").toLowerCase(),C=R.toUpperCase()+D.join("");return new e.Union(i.UnionMode[C],I.typeIds||[],E||[])}case"fixedsizebinary":{const I=A.type;return new e.FixedSizeBinary(I.byteWidth)}case"fixedsizelist":{const I=A.type;return new e.FixedSizeList(I.listSize,(E||[])[0])}case"map":{const I=A.type;return new e.Map_((E||[])[0],I.keysSorted)}}throw new Error(`Unrecognized type: "${M}"`)}return Us}var aF;function ap(){if(aF)return qr;aF=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.FieldNode=qr.BufferRegion=qr.DictionaryBatch=qr.RecordBatch=qr.Message=void 0;const e=dt.__importStar(Rt),t=uI(),i=Ld(),r=dI(),s=g4(),o=Vd(),a=Y3(),c=m4(),u=h_(),f=f_(),p=U3(),m=iI(),g=ZC(),v=JC(),w=oI(),A=aI(),E=rI(),M=eI(),I=lI(),R=tI(),D=nI(),C=sI(),k=ane(),j=rs(),U=er(),F=GC(),J=Ln(),G=lne(),ee=une();var oe=e.Builder,me=e.ByteBuffer;const Q=An();class V{static fromJSON(Y,Z){const ue=new V(0,J.MetadataVersion.V5,Z);return ue._createHeader=Me(Y,Z),ue}static decode(Y){Y=new me((0,U.toUint8Array)(Y));const Z=k.Message.getRootAsMessage(Y),ue=Z.bodyLength(),Oe=Z.version(),Le=Z.headerType(),st=new V(ue,Oe,Le);return st._createHeader=q(Z,Le),st}static encode(Y){const Z=new oe;let ue=-1;return Y.isSchema()?ue=j.Schema.encode(Z,Y.header()):Y.isRecordBatch()?ue=te.encode(Z,Y.header()):Y.isDictionaryBatch()&&(ue=xe.encode(Z,Y.header())),k.Message.startMessage(Z),k.Message.addVersion(Z,J.MetadataVersion.V5),k.Message.addHeader(Z,ue),k.Message.addHeaderType(Z,Y.headerType),k.Message.addBodyLength(Z,BigInt(Y.bodyLength)),k.Message.finishMessageBuffer(Z,k.Message.endMessage(Z)),Z.asUint8Array()}static from(Y,Z=0){if(Y instanceof j.Schema)return new V(0,J.MetadataVersion.V5,J.MessageHeader.Schema,Y);if(Y instanceof te)return new V(Z,J.MetadataVersion.V5,J.MessageHeader.RecordBatch,Y);if(Y instanceof xe)return new V(Z,J.MetadataVersion.V5,J.MessageHeader.DictionaryBatch,Y);throw new Error(`Unrecognized Message header: ${Y}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===J.MessageHeader.Schema}isRecordBatch(){return this.headerType===J.MessageHeader.RecordBatch}isDictionaryBatch(){return this.headerType===J.MessageHeader.DictionaryBatch}constructor(Y,Z,ue,Oe){this._version=Z,this._headerType=ue,this.body=new Uint8Array(0),Oe&&(this._createHeader=()=>Oe),this._bodyLength=(0,F.bigIntToNumber)(Y)}}qr.Message=V;class te{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(Y,Z,ue){this._nodes=Z,this._buffers=ue,this._length=(0,F.bigIntToNumber)(Y)}}qr.RecordBatch=te;class xe{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(Y,Z,ue=!1){this._data=Y,this._isDelta=ue,this._id=(0,F.bigIntToNumber)(Z)}}qr.DictionaryBatch=xe;class N{constructor(Y,Z){this.offset=(0,F.bigIntToNumber)(Y),this.length=(0,F.bigIntToNumber)(Z)}}qr.BufferRegion=N;class ce{constructor(Y,Z){this.length=(0,F.bigIntToNumber)(Y),this.nullCount=(0,F.bigIntToNumber)(Z)}}qr.FieldNode=ce;function Me(X,Y){return()=>{switch(Y){case J.MessageHeader.Schema:return j.Schema.fromJSON(X);case J.MessageHeader.RecordBatch:return te.fromJSON(X);case J.MessageHeader.DictionaryBatch:return xe.fromJSON(X)}throw new Error(`Unrecognized Message type: { name: ${J.MessageHeader[Y]}, type: ${Y} }`)}}function q(X,Y){return()=>{switch(Y){case J.MessageHeader.Schema:return j.Schema.decode(X.header(new t.Schema),new Map,X.version());case J.MessageHeader.RecordBatch:return te.decode(X.header(new r.RecordBatch),X.version());case J.MessageHeader.DictionaryBatch:return xe.decode(X.header(new s.DictionaryBatch),X.version())}throw new Error(`Unrecognized Message type: { name: ${J.MessageHeader[Y]}, type: ${Y} }`)}}j.Field.encode=$t,j.Field.decode=$e,j.Field.fromJSON=ee.fieldFromJSON,j.Schema.encode=Zt,j.Schema.decode=Re,j.Schema.fromJSON=ee.schemaFromJSON,te.encode=we,te.decode=je,te.fromJSON=ee.recordBatchFromJSON,xe.encode=Ae,xe.decode=re,xe.fromJSON=ee.dictionaryBatchFromJSON,ce.encode=Se,ce.decode=de,N.encode=Ze,N.decode=ae;function Re(X,Y=new Map,Z=J.MetadataVersion.V5){const ue=Ue(X,Y);return new j.Schema(ue,tt(X),Y,Z)}function je(X,Y=J.MetadataVersion.V5){if(X.compression()!==null)throw new Error("Record batch compression not implemented");return new te(X.length(),fe(X),Pe(X,Y))}function re(X,Y=J.MetadataVersion.V5){return new xe(te.decode(X.data(),Y),X.id(),X.isDelta())}function ae(X){return new N(X.offset(),X.length())}function de(X){return new ce(X.length(),X.nullCount())}function fe(X){const Y=[];for(let Z,ue=-1,Oe=-1,Le=X.nodesLength();++ue<Le;)(Z=X.nodes(ue))&&(Y[++Oe]=ce.decode(Z));return Y}function Pe(X,Y){const Z=[];for(let ue,Oe=-1,Le=-1,st=X.buffersLength();++Oe<st;)(ue=X.buffers(Oe))&&(Y<J.MetadataVersion.V4&&(ue.bb_pos+=8*(Oe+1)),Z[++Le]=N.decode(ue));return Z}function Ue(X,Y){const Z=[];for(let ue,Oe=-1,Le=-1,st=X.fieldsLength();++Oe<st;)(ue=X.fields(Oe))&&(Z[++Le]=j.Field.decode(ue,Y));return Z}function Je(X,Y){const Z=[];for(let ue,Oe=-1,Le=-1,st=X.childrenLength();++Oe<st;)(ue=X.children(Oe))&&(Z[++Le]=j.Field.decode(ue,Y));return Z}function $e(X,Y){let Z,ue,Oe,Le,st,Yt;return!Y||!(Yt=X.dictionary())?(Oe=zt(X,Je(X,Y)),ue=new j.Field(X.name(),Oe,X.nullable(),tt(X))):Y.has(Z=(0,F.bigIntToNumber)(Yt.id()))?(Le=(Le=Yt.indexType())?Ut(Le):new Q.Int32,st=new Q.Dictionary(Y.get(Z),Le,Z,Yt.isOrdered()),ue=new j.Field(X.name(),st,X.nullable(),tt(X))):(Le=(Le=Yt.indexType())?Ut(Le):new Q.Int32,Y.set(Z,Oe=zt(X,Je(X,Y))),st=new Q.Dictionary(Oe,Le,Z,Yt.isOrdered()),ue=new j.Field(X.name(),st,X.nullable(),tt(X))),ue||null}function tt(X){const Y=new Map;if(X)for(let Z,ue,Oe=-1,Le=Math.trunc(X.customMetadataLength());++Oe<Le;)(Z=X.customMetadata(Oe))&&(ue=Z.key())!=null&&Y.set(ue,Z.value());return Y}function Ut(X){return new Q.Int(X.isSigned(),X.bitWidth())}function zt(X,Y){const Z=X.typeType();switch(Z){case u.Type.NONE:return new Q.Null;case u.Type.Null:return new Q.Null;case u.Type.Binary:return new Q.Binary;case u.Type.Utf8:return new Q.Utf8;case u.Type.Bool:return new Q.Bool;case u.Type.List:return new Q.List((Y||[])[0]);case u.Type.Struct_:return new Q.Struct(Y||[])}switch(Z){case u.Type.Int:{const ue=X.type(new i.Int);return new Q.Int(ue.isSigned(),ue.bitWidth())}case u.Type.FloatingPoint:{const ue=X.type(new m.FloatingPoint);return new Q.Float(ue.precision())}case u.Type.Decimal:{const ue=X.type(new g.Decimal);return new Q.Decimal(ue.scale(),ue.precision(),ue.bitWidth())}case u.Type.Date:{const ue=X.type(new v.Date);return new Q.Date_(ue.unit())}case u.Type.Time:{const ue=X.type(new w.Time);return new Q.Time(ue.unit(),ue.bitWidth())}case u.Type.Timestamp:{const ue=X.type(new A.Timestamp);return new Q.Timestamp(ue.unit(),ue.timezone())}case u.Type.Interval:{const ue=X.type(new E.Interval);return new Q.Interval(ue.unit())}case u.Type.Duration:{const ue=X.type(new M.Duration);return new Q.Duration(ue.unit())}case u.Type.Union:{const ue=X.type(new I.Union);return new Q.Union(ue.mode(),ue.typeIdsArray()||[],Y||[])}case u.Type.FixedSizeBinary:{const ue=X.type(new R.FixedSizeBinary);return new Q.FixedSizeBinary(ue.byteWidth())}case u.Type.FixedSizeList:{const ue=X.type(new D.FixedSizeList);return new Q.FixedSizeList(ue.listSize(),(Y||[])[0])}case u.Type.Map:{const ue=X.type(new C.Map);return new Q.Map_((Y||[])[0],ue.keysSorted())}}throw new Error(`Unrecognized type: "${u.Type[Z]}" (${Z})`)}function Zt(X,Y){const Z=Y.fields.map(Le=>j.Field.encode(X,Le));t.Schema.startFieldsVector(X,Z.length);const ue=t.Schema.createFieldsVector(X,Z),Oe=Y.metadata&&Y.metadata.size>0?t.Schema.createCustomMetadataVector(X,[...Y.metadata].map(([Le,st])=>{const Yt=X.createString(`${Le}`),ei=X.createString(`${st}`);return f.KeyValue.startKeyValue(X),f.KeyValue.addKey(X,Yt),f.KeyValue.addValue(X,ei),f.KeyValue.endKeyValue(X)})):-1;return t.Schema.startSchema(X),t.Schema.addFields(X,ue),t.Schema.addEndianness(X,ge?p.Endianness.Little:p.Endianness.Big),Oe!==-1&&t.Schema.addCustomMetadata(X,Oe),t.Schema.endSchema(X)}function $t(X,Y){let Z=-1,ue=-1,Oe=-1;const Le=Y.type;let st=Y.typeId;Q.DataType.isDictionary(Le)?(st=Le.dictionary.typeId,Oe=G.instance.visit(Le,X),ue=G.instance.visit(Le.dictionary,X)):ue=G.instance.visit(Le,X);const Yt=(Le.children||[]).map(Si=>j.Field.encode(X,Si)),ei=a.Field.createChildrenVector(X,Yt),Mn=Y.metadata&&Y.metadata.size>0?a.Field.createCustomMetadataVector(X,[...Y.metadata].map(([Si,En])=>{const vn=X.createString(`${Si}`),Ce=X.createString(`${En}`);return f.KeyValue.startKeyValue(X),f.KeyValue.addKey(X,vn),f.KeyValue.addValue(X,Ce),f.KeyValue.endKeyValue(X)})):-1;return Y.name&&(Z=X.createString(Y.name)),a.Field.startField(X),a.Field.addType(X,ue),a.Field.addTypeType(X,st),a.Field.addChildren(X,ei),a.Field.addNullable(X,!!Y.nullable),Z!==-1&&a.Field.addName(X,Z),Oe!==-1&&a.Field.addDictionary(X,Oe),Mn!==-1&&a.Field.addCustomMetadata(X,Mn),a.Field.endField(X)}function we(X,Y){const Z=Y.nodes||[],ue=Y.buffers||[];r.RecordBatch.startNodesVector(X,Z.length);for(const st of Z.slice().reverse())ce.encode(X,st);const Oe=X.endVector();r.RecordBatch.startBuffersVector(X,ue.length);for(const st of ue.slice().reverse())N.encode(X,st);const Le=X.endVector();return r.RecordBatch.startRecordBatch(X),r.RecordBatch.addLength(X,BigInt(Y.length)),r.RecordBatch.addNodes(X,Oe),r.RecordBatch.addBuffers(X,Le),r.RecordBatch.endRecordBatch(X)}function Ae(X,Y){const Z=te.encode(X,Y.data);return s.DictionaryBatch.startDictionaryBatch(X),s.DictionaryBatch.addId(X,BigInt(Y.id)),s.DictionaryBatch.addIsDelta(X,Y.isDelta),s.DictionaryBatch.addData(X,Z),s.DictionaryBatch.endDictionaryBatch(X)}function Se(X,Y){return c.FieldNode.createFieldNode(X,BigInt(Y.length),BigInt(Y.nullCount))}function Ze(X,Y){return o.Buffer.createBuffer(X,BigInt(Y.offset),BigInt(Y.length))}const ge=(()=>{const X=new ArrayBuffer(2);return new DataView(X).setInt16(0,256,!0),new Int16Array(X)[0]===256})();return qr}var lF;function fI(){return lF||(lF=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.magicX2AndPadding=n.magicAndPadding=n.magicLength=n.checkForMagicArrowString=n.MAGIC=n.MAGIC_STR=n.PADDING=n.JSONMessageReader=n.AsyncMessageReader=n.MessageReader=void 0;const e=dt,t=Ln(),i=Rt,r=ap(),s=Pd(),o=K3(),a=er(),c=Ud(),u=jS(),f=M=>`Expected ${t.MessageHeader[M]} Message in stream, but was null or length 0.`,p=M=>`Header pointer of flatbuffer-encoded ${t.MessageHeader[M]} Message is null or length 0.`,m=(M,I)=>`Expected to read ${M} metadata bytes, but only read ${I}.`,g=(M,I)=>`Expected to read ${M} bytes for message body, but only read ${I}.`;class v{constructor(I){this.source=I instanceof c.ByteStream?I:new c.ByteStream(I)}[Symbol.iterator](){return this}next(){let I;return(I=this.readMetadataLength()).done||I.value===-1&&(I=this.readMetadataLength()).done||(I=this.readMetadata(I.value)).done?u.ITERATOR_DONE:I}throw(I){return this.source.throw(I)}return(I){return this.source.return(I)}readMessage(I){let R;if((R=this.next()).done)return null;if(I!=null&&R.value.headerType!==I)throw new Error(f(I));return R.value}readMessageBody(I){if(I<=0)return new Uint8Array(0);const R=(0,a.toUint8Array)(this.source.read(I));if(R.byteLength<I)throw new Error(g(I,R.byteLength));return R.byteOffset%8===0&&R.byteOffset+R.byteLength<=R.buffer.byteLength?R:R.slice()}readSchema(I=!1){const R=t.MessageHeader.Schema,D=this.readMessage(R),C=D==null?void 0:D.header();if(I&&!C)throw new Error(p(R));return C}readMetadataLength(){const I=this.source.read(n.PADDING),R=I&&new i.ByteBuffer(I),D=(R==null?void 0:R.readInt32(0))||0;return{done:D===0,value:D}}readMetadata(I){const R=this.source.read(I);if(!R)return u.ITERATOR_DONE;if(R.byteLength<I)throw new Error(m(I,R.byteLength));return{done:!1,value:r.Message.decode(R)}}}n.MessageReader=v;class w{constructor(I,R){this.source=I instanceof c.AsyncByteStream?I:(0,s.isFileHandle)(I)?new o.AsyncRandomAccessFile(I,R):new c.AsyncByteStream(I)}[Symbol.asyncIterator](){return this}next(){return e.__awaiter(this,void 0,void 0,function*(){let I;return(I=yield this.readMetadataLength()).done||I.value===-1&&(I=yield this.readMetadataLength()).done||(I=yield this.readMetadata(I.value)).done?u.ITERATOR_DONE:I})}throw(I){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.throw(I)})}return(I){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.return(I)})}readMessage(I){return e.__awaiter(this,void 0,void 0,function*(){let R;if((R=yield this.next()).done)return null;if(I!=null&&R.value.headerType!==I)throw new Error(f(I));return R.value})}readMessageBody(I){return e.__awaiter(this,void 0,void 0,function*(){if(I<=0)return new Uint8Array(0);const R=(0,a.toUint8Array)(yield this.source.read(I));if(R.byteLength<I)throw new Error(g(I,R.byteLength));return R.byteOffset%8===0&&R.byteOffset+R.byteLength<=R.buffer.byteLength?R:R.slice()})}readSchema(I=!1){return e.__awaiter(this,void 0,void 0,function*(){const R=t.MessageHeader.Schema,D=yield this.readMessage(R),C=D==null?void 0:D.header();if(I&&!C)throw new Error(p(R));return C})}readMetadataLength(){return e.__awaiter(this,void 0,void 0,function*(){const I=yield this.source.read(n.PADDING),R=I&&new i.ByteBuffer(I),D=(R==null?void 0:R.readInt32(0))||0;return{done:D===0,value:D}})}readMetadata(I){return e.__awaiter(this,void 0,void 0,function*(){const R=yield this.source.read(I);if(!R)return u.ITERATOR_DONE;if(R.byteLength<I)throw new Error(m(I,R.byteLength));return{done:!1,value:r.Message.decode(R)}})}}n.AsyncMessageReader=w;class A extends v{constructor(I){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=I instanceof u.ArrowJSON?I:new u.ArrowJSON(I)}next(){const{_json:I}=this;if(!this._schema)return this._schema=!0,{done:!1,value:r.Message.fromJSON(I.schema,t.MessageHeader.Schema)};if(this._dictionaryIndex<I.dictionaries.length){const R=I.dictionaries[this._dictionaryIndex++];return this._body=R.data.columns,{done:!1,value:r.Message.fromJSON(R,t.MessageHeader.DictionaryBatch)}}if(this._batchIndex<I.batches.length){const R=I.batches[this._batchIndex++];return this._body=R.columns,{done:!1,value:r.Message.fromJSON(R,t.MessageHeader.RecordBatch)}}return this._body=[],u.ITERATOR_DONE}readMessageBody(I){return R(this._body);function R(D){return(D||[]).reduce((C,k)=>[...C,...k.VALIDITY&&[k.VALIDITY]||[],...k.TYPE_ID&&[k.TYPE_ID]||[],...k.OFFSET&&[k.OFFSET]||[],...k.DATA&&[k.DATA]||[],...R(k.children)],[])}}readMessage(I){let R;if((R=this.next()).done)return null;if(I!=null&&R.value.headerType!==I)throw new Error(f(I));return R.value}readSchema(){const I=t.MessageHeader.Schema,R=this.readMessage(I),D=R==null?void 0:R.header();if(!R||!D)throw new Error(p(I));return D}}n.JSONMessageReader=A,n.PADDING=4,n.MAGIC_STR="ARROW1",n.MAGIC=new Uint8Array(n.MAGIC_STR.length);for(let M=0;M<n.MAGIC_STR.length;M+=1)n.MAGIC[M]=n.MAGIC_STR.codePointAt(M);function E(M,I=0){for(let R=-1,D=n.MAGIC.length;++R<D;)if(n.MAGIC[R]!==M[I+R])return!1;return!0}n.checkForMagicArrowString=E,n.magicLength=n.MAGIC.length,n.magicAndPadding=n.magicLength+n.PADDING,n.magicX2AndPadding=n.magicLength*2+n.PADDING}(LA)),LA}var uF;function GS(){if(uF)return Lr;uF=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.AsyncRecordBatchFileReader=Lr.RecordBatchFileReader=Lr.AsyncRecordBatchStreamReader=Lr.RecordBatchStreamReader=Lr.RecordBatchReader=void 0;const n=dt,e=ul(),t=xr(),i=An(),r=Ln(),s=W3(),o=n.__importDefault(PS()),a=Ud(),c=K3(),u=Wte(),f=zd(),p=jS(),m=fI(),g=Pd();class v extends p.ReadableInterop{constructor(V){super(),this._impl=V}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(V){return this._impl.throw(V)}return(V){return this._impl.return(V)}cancel(){return this._impl.cancel()}reset(V){return this._impl.reset(V),this._DOMStream=void 0,this._nodeStream=void 0,this}open(V){const te=this._impl.open(V);return(0,g.isPromise)(te)?te.then(()=>this):this}readRecordBatch(V){return this._impl.isFile()?this._impl.readRecordBatch(V):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return o.default.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return o.default.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(V){throw new Error('"throughNode" not available in this environment')}static throughDOM(V,te){throw new Error('"throughDOM" not available in this environment')}static from(V){return V instanceof v?V:(0,g.isArrowJSON)(V)?G(V):(0,g.isFileHandle)(V)?me(V):(0,g.isPromise)(V)?n.__awaiter(this,void 0,void 0,function*(){return yield v.from(yield V)}):(0,g.isFetchResponse)(V)||(0,g.isReadableDOMStream)(V)||(0,g.isReadableNodeStream)(V)||(0,g.isAsyncIterable)(V)?oe(new a.AsyncByteStream(V)):ee(new a.ByteStream(V))}static readAll(V){return V instanceof v?V.isSync()?F(V):J(V):(0,g.isArrowJSON)(V)||ArrayBuffer.isView(V)||(0,g.isIterable)(V)||(0,g.isIteratorResult)(V)?F(V):J(V)}}Lr.RecordBatchReader=v;class w extends v{constructor(V){super(V),this._impl=V}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return n.__asyncGenerator(this,arguments,function*(){yield n.__await(yield*n.__asyncDelegator(n.__asyncValues(this[Symbol.iterator]())))})}}Lr.RecordBatchStreamReader=w;class A extends v{constructor(V){super(V),this._impl=V}readAll(){var V,te,xe,N;return n.__awaiter(this,void 0,void 0,function*(){const ce=new Array;try{for(var Me=!0,q=n.__asyncValues(this),Re;Re=yield q.next(),V=Re.done,!V;Me=!0){N=Re.value,Me=!1;const je=N;ce.push(je)}}catch(je){te={error:je}}finally{try{!Me&&!V&&(xe=q.return)&&(yield xe.call(q))}finally{if(te)throw te.error}}return ce})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}Lr.AsyncRecordBatchStreamReader=A;class E extends w{constructor(V){super(V),this._impl=V}}Lr.RecordBatchFileReader=E;class M extends A{constructor(V){super(V),this._impl=V}}Lr.AsyncRecordBatchFileReader=M;class I{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(V=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=V}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(V){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=V,this.dictionaries=new Map,this}_loadRecordBatch(V,te){const xe=this._loadVectors(V,te,this.schema.fields),N=(0,e.makeData)({type:new i.Struct(this.schema.fields),length:V.length,children:xe});return new f.RecordBatch(this.schema,N)}_loadDictionaryBatch(V,te){const{id:xe,isDelta:N}=V,{dictionaries:ce,schema:Me}=this,q=ce.get(xe);if(N||!q){const Re=Me.dictionaries.get(xe),je=this._loadVectors(V.data,te,[Re]);return(q&&N?q.concat(new t.Vector(je)):new t.Vector(je)).memoize()}return q.memoize()}_loadVectors(V,te,xe){return new u.VectorLoader(te,V.nodes,V.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(xe)}}class R extends I{constructor(V,te){super(te),this._reader=(0,g.isArrowJSON)(V)?new m.JSONMessageReader(this._handle=V):new m.MessageReader(this._handle=V)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(V){return this.closed||(this.autoDestroy=U(this,V),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(V){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(V):p.ITERATOR_DONE}return(V){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(V):p.ITERATOR_DONE}next(){if(this.closed)return p.ITERATOR_DONE;let V;const{_reader:te}=this;for(;V=this._readNextMessageAndValidate();)if(V.isSchema())this.reset(V.header());else if(V.isRecordBatch()){this._recordBatchIndex++;const xe=V.header(),N=te.readMessageBody(V.bodyLength);return{done:!1,value:this._loadRecordBatch(xe,N)}}else if(V.isDictionaryBatch()){this._dictionaryIndex++;const xe=V.header(),N=te.readMessageBody(V.bodyLength),ce=this._loadDictionaryBatch(xe,N);this.dictionaries.set(xe.id,ce)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new f._InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(V){return this._reader.readMessage(V)}}class D extends I{constructor(V,te){super(te),this._reader=new m.AsyncMessageReader(this._handle=V)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return n.__awaiter(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(V){return n.__awaiter(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=U(this,V),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(V){return n.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(V):p.ITERATOR_DONE})}return(V){return n.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(V):p.ITERATOR_DONE})}next(){return n.__awaiter(this,void 0,void 0,function*(){if(this.closed)return p.ITERATOR_DONE;let V;const{_reader:te}=this;for(;V=yield this._readNextMessageAndValidate();)if(V.isSchema())yield this.reset(V.header());else if(V.isRecordBatch()){this._recordBatchIndex++;const xe=V.header(),N=yield te.readMessageBody(V.bodyLength);return{done:!1,value:this._loadRecordBatch(xe,N)}}else if(V.isDictionaryBatch()){this._dictionaryIndex++;const xe=V.header(),N=yield te.readMessageBody(V.bodyLength),ce=this._loadDictionaryBatch(xe,N);this.dictionaries.set(xe.id,ce)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new f._InternalEmptyPlaceholderRecordBatch(this.schema)}):yield this.return()})}_readNextMessageAndValidate(V){return n.__awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(V)})}}class C extends R{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(V,te){super(V instanceof c.RandomAccessFile?V:new c.RandomAccessFile(V),te)}isSync(){return!0}isFile(){return!0}open(V){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const te of this._footer.dictionaryBatches())te&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(V)}readRecordBatch(V){var te;if(this.closed)return null;this._footer||this.open();const xe=(te=this._footer)===null||te===void 0?void 0:te.getRecordBatch(V);if(xe&&this._handle.seek(xe.offset)){const N=this._reader.readMessage(r.MessageHeader.RecordBatch);if(N!=null&&N.isRecordBatch()){const ce=N.header(),Me=this._reader.readMessageBody(N.bodyLength);return this._loadRecordBatch(ce,Me)}}return null}_readDictionaryBatch(V){var te;const xe=(te=this._footer)===null||te===void 0?void 0:te.getDictionaryBatch(V);if(xe&&this._handle.seek(xe.offset)){const N=this._reader.readMessage(r.MessageHeader.DictionaryBatch);if(N!=null&&N.isDictionaryBatch()){const ce=N.header(),Me=this._reader.readMessageBody(N.bodyLength),q=this._loadDictionaryBatch(ce,Me);this.dictionaries.set(ce.id,q)}}}_readFooter(){const{_handle:V}=this,te=V.size-m.magicAndPadding,xe=V.readInt32(te),N=V.readAt(te-xe,xe);return s.Footer.decode(N)}_readNextMessageAndValidate(V){var te;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const xe=(te=this._footer)===null||te===void 0?void 0:te.getRecordBatch(this._recordBatchIndex);if(xe&&this._handle.seek(xe.offset))return this._reader.readMessage(V)}return null}}class k extends D{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(V,...te){const xe=typeof te[0]!="number"?te.shift():void 0,N=te[0]instanceof Map?te.shift():void 0;super(V instanceof c.AsyncRandomAccessFile?V:new c.AsyncRandomAccessFile(V,xe),N)}isFile(){return!0}isAsync(){return!0}open(V){const te=Object.create(null,{open:{get:()=>super.open}});return n.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const xe of this._footer.dictionaryBatches())xe&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield te.open.call(this,V)})}readRecordBatch(V){var te;return n.__awaiter(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const xe=(te=this._footer)===null||te===void 0?void 0:te.getRecordBatch(V);if(xe&&(yield this._handle.seek(xe.offset))){const N=yield this._reader.readMessage(r.MessageHeader.RecordBatch);if(N!=null&&N.isRecordBatch()){const ce=N.header(),Me=yield this._reader.readMessageBody(N.bodyLength);return this._loadRecordBatch(ce,Me)}}return null})}_readDictionaryBatch(V){var te;return n.__awaiter(this,void 0,void 0,function*(){const xe=(te=this._footer)===null||te===void 0?void 0:te.getDictionaryBatch(V);if(xe&&(yield this._handle.seek(xe.offset))){const N=yield this._reader.readMessage(r.MessageHeader.DictionaryBatch);if(N!=null&&N.isDictionaryBatch()){const ce=N.header(),Me=yield this._reader.readMessageBody(N.bodyLength),q=this._loadDictionaryBatch(ce,Me);this.dictionaries.set(ce.id,q)}}})}_readFooter(){return n.__awaiter(this,void 0,void 0,function*(){const{_handle:V}=this;V._pending&&(yield V._pending);const te=V.size-m.magicAndPadding,xe=yield V.readInt32(te),N=yield V.readAt(te-xe,xe);return s.Footer.decode(N)})}_readNextMessageAndValidate(V){return n.__awaiter(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const te=this._footer.getRecordBatch(this._recordBatchIndex);if(te&&(yield this._handle.seek(te.offset)))return yield this._reader.readMessage(V)}return null})}}class j extends R{constructor(V,te){super(V,te)}_loadVectors(V,te,xe){return new u.JSONVectorLoader(te,V.nodes,V.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(xe)}}function U(Q,V){return V&&typeof V.autoDestroy=="boolean"?V.autoDestroy:Q.autoDestroy}function*F(Q){const V=v.from(Q);try{if(!V.open({autoDestroy:!1}).closed)do yield V;while(!V.reset().open().closed)}finally{V.cancel()}}function J(Q){return n.__asyncGenerator(this,arguments,function*(){const te=yield n.__await(v.from(Q));try{if(!(yield n.__await(te.open({autoDestroy:!1}))).closed)do yield yield n.__await(te);while(!(yield n.__await(te.reset().open())).closed)}finally{yield n.__await(te.cancel())}})}function G(Q){return new w(new j(Q))}function ee(Q){const V=Q.peek(m.magicLength+7&-8);return V&&V.byteLength>=4?(0,m.checkForMagicArrowString)(V)?new E(new C(Q.read())):new w(new R(Q)):new w(new R(function*(){}()))}function oe(Q){return n.__awaiter(this,void 0,void 0,function*(){const V=yield Q.peek(m.magicLength+7&-8);return V&&V.byteLength>=4?(0,m.checkForMagicArrowString)(V)?new E(new C(yield Q.read())):new A(new D(Q)):new A(new D(function(){return n.__asyncGenerator(this,arguments,function*(){})}()))})}function me(Q){return n.__awaiter(this,void 0,void 0,function*(){const{size:V}=yield Q.stat(),te=new c.AsyncRandomAccessFile(Q,V);return V>=m.magicX2AndPadding&&(0,m.checkForMagicArrowString)(yield te.readAt(0,m.magicLength+7&-8))?new M(new k(te)):new A(new D(te))})}return Lr}var zs={},Yg={},cF;function cne(){if(cF)return Yg;cF=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.VectorAssembler=void 0;const n=xr(),e=Ir(),t=Ln(),i=zd(),r=er(),s=gp(),o=ap(),a=An();class c extends e.Visitor{static assemble(...E){const M=R=>R.flatMap(D=>Array.isArray(D)?M(D):D instanceof i.RecordBatch?D.data.children:D.data),I=new c;return I.visitMany(M(E)),I}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(E){if(E instanceof n.Vector)return this.visitMany(E.data),this;const{type:M}=E;if(!a.DataType.isDictionary(M)){const{length:I}=E;if(I>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(a.DataType.isUnion(M))this.nodes.push(new o.FieldNode(I,0));else{const{nullCount:R}=E;a.DataType.isNull(M)||u.call(this,R<=0?new Uint8Array(0):(0,s.truncateBitmap)(E.offset,I,E.nullBitmap)),this.nodes.push(new o.FieldNode(I,R))}}return super.visit(E)}visitNull(E){return this}visitDictionary(E){return this.visit(E.clone(E.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}Yg.VectorAssembler=c;function u(A){const E=A.byteLength+7&-8;return this.buffers.push(A),this.bufferRegions.push(new o.BufferRegion(this._byteLength,E)),this._byteLength+=E,this}function f(A){var E;const{type:M,length:I,typeIds:R,valueOffsets:D}=A;if(u.call(this,R),M.mode===t.UnionMode.Sparse)return w.call(this,A);if(M.mode===t.UnionMode.Dense){if(A.offset<=0)return u.call(this,D),w.call(this,A);{const C=new Int32Array(I),k=Object.create(null),j=Object.create(null);for(let U,F,J=-1;++J<I;)(U=R[J])!==void 0&&((F=k[U])===void 0&&(F=k[U]=D[J]),C[J]=D[J]-F,j[U]=((E=j[U])!==null&&E!==void 0?E:0)+1);u.call(this,C),this.visitMany(A.children.map((U,F)=>{const J=M.typeIds[F],G=k[J],ee=j[J];return U.slice(G,Math.min(I,ee))}))}}return this}function p(A){let E;return A.nullCount>=A.length?u.call(this,new Uint8Array(0)):(E=A.values)instanceof Uint8Array?u.call(this,(0,s.truncateBitmap)(A.offset,A.length,E)):u.call(this,(0,s.packBools)(A.values))}function m(A){return u.call(this,A.values.subarray(0,A.length*A.stride))}function g(A){const{length:E,values:M,valueOffsets:I}=A,{[0]:R,[E]:D}=I,C=Math.min(D-R,M.byteLength-R);return u.call(this,(0,r.rebaseValueOffsets)(-R,E+1,I)),u.call(this,M.subarray(R,R+C)),this}function v(A){const{length:E,valueOffsets:M}=A;if(M){const{[0]:I,[E]:R}=M;return u.call(this,(0,r.rebaseValueOffsets)(-I,E+1,M)),this.visit(A.children[0].slice(I,R-I))}return this.visit(A.children[0])}function w(A){return this.visitMany(A.type.children.map((E,M)=>A.children[M]).filter(Boolean))[0]}return c.prototype.visitBool=p,c.prototype.visitInt=m,c.prototype.visitFloat=m,c.prototype.visitUtf8=g,c.prototype.visitBinary=g,c.prototype.visitFixedSizeBinary=m,c.prototype.visitDate=m,c.prototype.visitTimestamp=m,c.prototype.visitTime=m,c.prototype.visitDecimal=m,c.prototype.visitList=v,c.prototype.visitStruct=w,c.prototype.visitUnion=f,c.prototype.visitInterval=m,c.prototype.visitDuration=m,c.prototype.visitFixedSizeList=v,c.prototype.visitMap=v,Yg}var Wg={},dF;function dne(){if(dF)return Wg;dF=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.JSONTypeAssembler=void 0;const n=Ir(),e=h_(),t=Ln();class i extends n.Visitor{visit(s){return s==null?void 0:super.visit(s)}visitNull({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitInt({typeId:s,bitWidth:o,isSigned:a}){return{name:e.Type[s].toLowerCase(),bitWidth:o,isSigned:a}}visitFloat({typeId:s,precision:o}){return{name:e.Type[s].toLowerCase(),precision:t.Precision[o]}}visitBinary({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitBool({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitUtf8({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitDecimal({typeId:s,scale:o,precision:a,bitWidth:c}){return{name:e.Type[s].toLowerCase(),scale:o,precision:a,bitWidth:c}}visitDate({typeId:s,unit:o}){return{name:e.Type[s].toLowerCase(),unit:t.DateUnit[o]}}visitTime({typeId:s,unit:o,bitWidth:a}){return{name:e.Type[s].toLowerCase(),unit:t.TimeUnit[o],bitWidth:a}}visitTimestamp({typeId:s,timezone:o,unit:a}){return{name:e.Type[s].toLowerCase(),unit:t.TimeUnit[a],timezone:o}}visitInterval({typeId:s,unit:o}){return{name:e.Type[s].toLowerCase(),unit:t.IntervalUnit[o]}}visitDuration({typeId:s,unit:o}){return{name:e.Type[s].toLocaleLowerCase(),unit:t.TimeUnit[o]}}visitList({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitStruct({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitUnion({typeId:s,mode:o,typeIds:a}){return{name:e.Type[s].toLowerCase(),mode:t.UnionMode[o].toUpperCase(),typeIds:[...a]}}visitDictionary(s){return this.visit(s.dictionary)}visitFixedSizeBinary({typeId:s,byteWidth:o}){return{name:e.Type[s].toLowerCase(),byteWidth:o}}visitFixedSizeList({typeId:s,listSize:o}){return{name:e.Type[s].toLowerCase(),listSize:o}}visitMap({typeId:s,keysSorted:o}){return{name:e.Type[s].toLowerCase(),keysSorted:o}}}return Wg.JSONTypeAssembler=i,Wg}var Kg={},fF;function fne(){if(fF)return Kg;fF=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.JSONVectorAssembler=void 0;const n=HC(),e=xr(),t=Ir(),i=Ln(),r=Ln(),s=gp(),o=An();class a extends t.Visitor{static assemble(...p){const m=new a;return p.map(({schema:g,data:v})=>m.visitMany(g.fields,v.children))}visit({name:p},m){const{length:g}=m,{offset:v,nullCount:w,nullBitmap:A}=m,E=o.DataType.isDictionary(m.type)?m.type.indices:m.type,M=Object.assign([],m.buffers,{[i.BufferType.VALIDITY]:void 0});return Object.assign({name:p,count:g,VALIDITY:o.DataType.isNull(E)||o.DataType.isUnion(E)?void 0:w<=0?Array.from({length:g},()=>1):[...new s.BitIterator(A,v,g,null,s.getBit)]},super.visit(m.clone(E,v,g,0,M)))}visitNull(){return{}}visitBool({values:p,offset:m,length:g}){return{DATA:[...new s.BitIterator(p,m,g,null,s.getBool)]}}visitInt(p){return{DATA:p.type.bitWidth<64?[...p.values]:[...u(p.values,2)]}}visitFloat(p){return{DATA:[...p.values]}}visitUtf8(p){return{DATA:[...new e.Vector([p])],OFFSET:[...p.valueOffsets]}}visitBinary(p){return{DATA:[...c(new e.Vector([p]))],OFFSET:[...p.valueOffsets]}}visitFixedSizeBinary(p){return{DATA:[...c(new e.Vector([p]))]}}visitDate(p){return{DATA:p.type.unit===r.DateUnit.DAY?[...p.values]:[...u(p.values,2)]}}visitTimestamp(p){return{DATA:[...u(p.values,2)]}}visitTime(p){return{DATA:p.type.unit<r.TimeUnit.MICROSECOND?[...p.values]:[...u(p.values,2)]}}visitDecimal(p){return{DATA:[...u(p.values,4)]}}visitList(p){return{OFFSET:[...p.valueOffsets],children:this.visitMany(p.type.children,p.children)}}visitStruct(p){return{children:this.visitMany(p.type.children,p.children)}}visitUnion(p){return{TYPE_ID:[...p.typeIds],OFFSET:p.type.mode===r.UnionMode.Dense?[...p.valueOffsets]:void 0,children:this.visitMany(p.type.children,p.children)}}visitInterval(p){return{DATA:[...p.values]}}visitDuration(p){return{DATA:[...u(p.values,2)]}}visitFixedSizeList(p){return{children:this.visitMany(p.type.children,p.children)}}visitMap(p){return{OFFSET:[...p.valueOffsets],children:this.visitMany(p.type.children,p.children)}}}Kg.JSONVectorAssembler=a;function*c(f){for(const p of f)yield p.reduce((m,g)=>`${m}${("0"+(g&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*u(f,p){const m=new Uint32Array(f.buffer);for(let g=-1,v=m.length/p;++g<v;)yield`${n.BN.new(m.subarray((g+0)*p,(g+1)*p),!1)}`}return Kg}var hF;function hI(){if(hF)return zs;hF=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.RecordBatchJSONWriter=zs.RecordBatchFileWriter=zs.RecordBatchStreamWriter=zs.RecordBatchWriter=void 0;const n=dt,e=p_(),t=fI(),i=xr(),r=An(),s=ap(),o=n.__importStar(ap()),a=W3(),c=Ln(),u=qS(),f=Ud(),p=cne(),m=dne(),g=fne(),v=er(),w=zd(),A=jS(),E=Pd();class M extends A.ReadableInterop{static throughNode(G){throw new Error('"throughNode" not available in this environment')}static throughDOM(G,ee){throw new Error('"throughDOM" not available in this environment')}constructor(G){super(),this._position=0,this._started=!1,this._sink=new f.AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(0,E.isObject)(G)||(G={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof G.autoDestroy=="boolean"?G.autoDestroy:!0,this._writeLegacyIpcFormat=typeof G.writeLegacyIpcFormat=="boolean"?G.writeLegacyIpcFormat:!1}toString(G=!1){return this._sink.toString(G)}toUint8Array(G=!1){return this._sink.toUint8Array(G)}writeAll(G){return(0,E.isPromise)(G)?G.then(ee=>this.writeAll(ee)):(0,E.isAsyncIterable)(G)?k(this,G):C(this,G)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(G){return this._sink.toDOMStream(G)}toNodeStream(G){return this._sink.toNodeStream(G)}close(){return this.reset()._sink.close()}abort(G){return this.reset()._sink.abort(G)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(G=this._sink,ee=null){return G===this._sink||G instanceof f.AsyncByteQueue?this._sink=G:(this._sink=new f.AsyncByteQueue,G&&(0,E.isWritableDOMStream)(G)?this.toDOMStream({type:"bytes"}).pipeTo(G):G&&(0,E.isWritableNodeStream)(G)&&this.toNodeStream({objectMode:!1}).pipe(G)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!ee||!(0,u.compareSchemas)(ee,this._schema))&&(ee==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=ee,this._writeSchema(ee))),this}write(G){let ee=null;if(this._sink){if(G==null)return this.finish()&&void 0;if(G instanceof e.Table&&!(ee=G.schema))return this.finish()&&void 0;if(G instanceof w.RecordBatch&&!(ee=G.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(ee&&!(0,u.compareSchemas)(ee,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,ee)}G instanceof w.RecordBatch?G instanceof w._InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(G):G instanceof e.Table?this.writeAll(G.batches):(0,E.isIterable)(G)&&this.writeAll(G)}_writeMessage(G,ee=8){const oe=ee-1,me=s.Message.encode(G),Q=me.byteLength,V=this._writeLegacyIpcFormat?4:8,te=Q+V+oe&~oe,xe=te-Q-V;return G.headerType===c.MessageHeader.RecordBatch?this._recordBatchBlocks.push(new a.FileBlock(te,G.bodyLength,this._position)):G.headerType===c.MessageHeader.DictionaryBatch&&this._dictionaryBlocks.push(new a.FileBlock(te,G.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(te-V)),Q>0&&this._write(me),this._writePadding(xe)}_write(G){if(this._started){const ee=(0,v.toUint8Array)(G);ee&&ee.byteLength>0&&(this._sink.write(ee),this._position+=ee.byteLength)}return this}_writeSchema(G){return this._writeMessage(s.Message.from(G))}_writeFooter(G){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(t.MAGIC)}_writePadding(G){return G>0?this._write(new Uint8Array(G)):this}_writeRecordBatch(G){const{byteLength:ee,nodes:oe,bufferRegions:me,buffers:Q}=p.VectorAssembler.assemble(G),V=new o.RecordBatch(G.numRows,oe,me),te=s.Message.from(V,ee);return this._writeDictionaries(G)._writeMessage(te)._writeBodyBuffers(Q)}_writeDictionaryBatch(G,ee,oe=!1){this._dictionaryDeltaOffsets.set(ee,G.length+(this._dictionaryDeltaOffsets.get(ee)||0));const{byteLength:me,nodes:Q,bufferRegions:V,buffers:te}=p.VectorAssembler.assemble(new i.Vector([G])),xe=new o.RecordBatch(G.length,Q,V),N=new o.DictionaryBatch(xe,ee,oe),ce=s.Message.from(N,me);return this._writeMessage(ce)._writeBodyBuffers(te)}_writeBodyBuffers(G){let ee,oe,me;for(let Q=-1,V=G.length;++Q<V;)(ee=G[Q])&&(oe=ee.byteLength)>0&&(this._write(ee),(me=(oe+7&-8)-oe)>0&&this._writePadding(me));return this}_writeDictionaries(G){for(let[ee,oe]of G.dictionaries){let me=this._dictionaryDeltaOffsets.get(ee)||0;if(me===0||(oe=oe==null?void 0:oe.slice(me)).length>0)for(const Q of oe.data)this._writeDictionaryBatch(Q,ee,me>0),me+=Q.length}return this}}zs.RecordBatchWriter=M;class I extends M{static writeAll(G,ee){const oe=new I(ee);return(0,E.isPromise)(G)?G.then(me=>oe.writeAll(me)):(0,E.isAsyncIterable)(G)?k(oe,G):C(oe,G)}}zs.RecordBatchStreamWriter=I;class R extends M{static writeAll(G){const ee=new R;return(0,E.isPromise)(G)?G.then(oe=>ee.writeAll(oe)):(0,E.isAsyncIterable)(G)?k(ee,G):C(ee,G)}constructor(){super(),this._autoDestroy=!0}_writeSchema(G){return this._writeMagic()._writePadding(2)}_writeFooter(G){const ee=a.Footer.encode(new a.Footer(G,c.MetadataVersion.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(G)._write(ee)._write(Int32Array.of(ee.byteLength))._writeMagic()}}zs.RecordBatchFileWriter=R;class D extends M{static writeAll(G){return new D().writeAll(G)}constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._dictionaries=[]}_writeMessage(){return this}_writeFooter(G){return this}_writeSchema(G){return this._write(`{
  "schema": ${JSON.stringify({fields:G.fields.map(ee=>j(ee))},null,2)}`)}_writeDictionaries(G){return G.dictionaries.size>0&&this._dictionaries.push(G),this}_writeDictionaryBatch(G,ee,oe=!1){return this._dictionaryDeltaOffsets.set(ee,G.length+(this._dictionaryDeltaOffsets.get(ee)||0)),this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(`${U(G,ee,oe)}`),this._dictionaryBlocks.push(new a.FileBlock(0,0,0)),this}_writeRecordBatch(G){return this._writeDictionaries(G),this._recordBatches.push(G),this}close(){if(this._dictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const G of this._dictionaries)super._writeDictionaries(G);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let G=-1,ee=this._recordBatches.length;++G<ee;)this._write(G===0?`,
  "batches": [
    `:`,
    `),this._write(`${F(this._recordBatches[G])}`),this._recordBatchBlocks.push(new a.FileBlock(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._dictionaries=[],this._recordBatches=[],super.close()}}zs.RecordBatchJSONWriter=D;function C(J,G){let ee=G;G instanceof e.Table&&(ee=G.batches,J.reset(void 0,G.schema));for(const oe of ee)J.write(oe);return J.finish()}function k(J,G){var ee,oe,me,Q,V,te,xe;return n.__awaiter(this,void 0,void 0,function*(){try{for(ee=!0,oe=n.__asyncValues(G);me=yield oe.next(),Q=me.done,!Q;ee=!0){xe=me.value,ee=!1;const N=xe;J.write(N)}}catch(N){V={error:N}}finally{try{!ee&&!Q&&(te=oe.return)&&(yield te.call(oe))}finally{if(V)throw V.error}}return J.finish()})}function j({name:J,type:G,nullable:ee}){const oe=new m.JSONTypeAssembler;return{name:J,nullable:ee,type:oe.visit(G),children:(G.children||[]).map(me=>j(me)),dictionary:r.DataType.isDictionary(G)?{id:G.id,isOrdered:G.isOrdered,indexType:oe.visit(G.indices)}:void 0}}function U(J,G,ee=!1){const[oe]=g.JSONVectorAssembler.assemble(new w.RecordBatch({[G]:J}));return JSON.stringify({id:G,isDelta:ee,data:{count:J.length,columns:oe}},null,2)}function F(J){const[G]=g.JSONVectorAssembler.assemble(J);return JSON.stringify({count:J.numRows,columns:G},null,2)}return zs}var Xg={},pF;function hne(){if(pF)return Xg;pF=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.toDOMStream=void 0;const n=dt,e=er(),t=Pd();function i(o,a){if((0,t.isAsyncIterable)(o))return s(o,a);if((0,t.isIterable)(o))return r(o,a);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}Xg.toDOMStream=i;function r(o,a){let c=null;const u=(a==null?void 0:a.type)==="bytes"||!1,f=(a==null?void 0:a.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},a),{start(m){p(m,c||(c=o[Symbol.iterator]()))},pull(m){c?p(m,c):m.close()},cancel(){(c!=null&&c.return&&c.return()||!0)&&(c=null)}}),Object.assign({highWaterMark:u?f:void 0},a));function p(m,g){let v,w=null,A=m.desiredSize||null;for(;!(w=g.next(u?A:null)).done;)if(ArrayBuffer.isView(w.value)&&(v=(0,e.toUint8Array)(w.value))&&(A!=null&&u&&(A=A-v.byteLength+1),w.value=v),m.enqueue(w.value),A!=null&&--A<=0)return;m.close()}}function s(o,a){let c=null;const u=(a==null?void 0:a.type)==="bytes"||!1,f=(a==null?void 0:a.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},a),{start(m){return n.__awaiter(this,void 0,void 0,function*(){yield p(m,c||(c=o[Symbol.asyncIterator]()))})},pull(m){return n.__awaiter(this,void 0,void 0,function*(){c?yield p(m,c):m.close()})},cancel(){return n.__awaiter(this,void 0,void 0,function*(){(c!=null&&c.return&&(yield c.return())||!0)&&(c=null)})}}),Object.assign({highWaterMark:u?f:void 0},a));function p(m,g){return n.__awaiter(this,void 0,void 0,function*(){let v,w=null,A=m.desiredSize||null;for(;!(w=yield g.next(u?A:null)).done;)if(ArrayBuffer.isView(w.value)&&(v=(0,e.toUint8Array)(w.value))&&(A!=null&&u&&(A=A-v.byteLength+1),w.value=v),m.enqueue(w.value),A!=null&&--A<=0)return;m.close()})}}return Xg}var yc={},mF;function pne(){if(mF)return yc;mF=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.BuilderTransform=yc.builderThroughDOMStream=void 0;const n=dt,e=HS();function t(o){return new i(o)}yc.builderThroughDOMStream=t;class i{constructor(a){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:c,["writableStrategy"]:u,["queueingStrategy"]:f="count"}=a,p=n.__rest(a,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=(0,e.makeBuilder)(p),this._getSize=f!=="bytes"?r:s;const{["highWaterMark"]:m=f==="bytes"?Math.pow(2,14):1e3}=Object.assign({},c),{["highWaterMark"]:g=f==="bytes"?Math.pow(2,14):1e3}=Object.assign({},u);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:v=>{this._maybeFlush(this._builder,this._controller=v)},start:v=>{this._maybeFlush(this._builder,this._controller=v)}},{highWaterMark:m,size:f!=="bytes"?r:s}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:g,size:v=>this._writeValueAndReturnChunkSize(v)})}_writeValueAndReturnChunkSize(a){const c=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(a)),this._bufferedSize-c}_maybeFlush(a,c){c!=null&&(this._bufferedSize>=c.desiredSize&&++this._numChunks&&this._enqueue(c,a.toVector()),a.finished&&((a.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(c,a.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(c,null)))}_enqueue(a,c){this._bufferedSize=0,this._controller=null,c==null?a.close():a.enqueue(c)}}yc.BuilderTransform=i;const r=o=>{var a;return(a=o==null?void 0:o.length)!==null&&a!==void 0?a:0},s=o=>{var a;return(a=o==null?void 0:o.byteLength)!==null&&a!==void 0?a:0};return yc}var Jg={},gF;function mne(){if(gF)return Jg;gF=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.recordBatchReaderThroughDOMStream=void 0;const n=dt,e=Ud(),t=GS();function i(r,s){const o=new e.AsyncByteQueue;let a=null;const c=new ReadableStream({cancel(){return n.__awaiter(this,void 0,void 0,function*(){yield o.close()})},start(p){return n.__awaiter(this,void 0,void 0,function*(){yield f(p,a||(a=yield u()))})},pull(p){return n.__awaiter(this,void 0,void 0,function*(){a?yield f(p,a):p.close()})}});return{writable:new WritableStream(o,Object.assign({highWaterMark:Math.pow(2,14)},r)),readable:c};function u(){return n.__awaiter(this,void 0,void 0,function*(){return yield(yield t.RecordBatchReader.from(o)).open(s)})}function f(p,m){return n.__awaiter(this,void 0,void 0,function*(){let g=p.desiredSize,v=null;for(;!(v=yield m.next()).done;)if(p.enqueue(v.value),g!=null&&--g<=0)return;p.close()})}}return Jg.recordBatchReaderThroughDOMStream=i,Jg}var Zg={},yF;function gne(){if(yF)return Zg;yF=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.recordBatchWriterThroughDOMStream=void 0;const n=dt,e=Ud();function t(i,r){const s=new this(i),o=new e.AsyncByteStream(s),a=new ReadableStream({cancel(){return n.__awaiter(this,void 0,void 0,function*(){yield o.cancel()})},pull(u){return n.__awaiter(this,void 0,void 0,function*(){yield c(u)})},start(u){return n.__awaiter(this,void 0,void 0,function*(){yield c(u)})}},Object.assign({highWaterMark:Math.pow(2,14)},r));return{writable:new WritableStream(s,i),readable:a};function c(u){return n.__awaiter(this,void 0,void 0,function*(){let f=null,p=u.desiredSize;for(;f=yield o.read(p||null);)if(u.enqueue(f),p!=null&&(p-=f.byteLength)<=0)return;u.close()})}}return Zg.recordBatchWriterThroughDOMStream=t,Zg}var UA={},bc={},bF;function yne(){if(bF)return bc;bF=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.tableToIPC=bc.tableFromIPC=void 0;const n=p_(),e=Pd(),t=GS(),i=hI();function r(o){const a=t.RecordBatchReader.from(o);return(0,e.isPromise)(a)?a.then(c=>r(c)):a.isAsync()?a.readAll().then(c=>new n.Table(c)):new n.Table(a.readAll())}bc.tableFromIPC=r;function s(o,a="stream"){return(a==="stream"?i.RecordBatchStreamWriter:i.RecordBatchFileWriter).writeAll(o).toUint8Array(!0)}return bc.tableToIPC=s,bc}var _F;function vF(){return _F||(_F=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Dictionary=n.SparseUnion=n.DenseUnion=n.Union=n.Struct=n.List=n.Decimal=n.TimeNanosecond=n.TimeMicrosecond=n.TimeMillisecond=n.TimeSecond=n.Time=n.TimestampNanosecond=n.TimestampMicrosecond=n.TimestampMillisecond=n.TimestampSecond=n.Timestamp=n.DateMillisecond=n.DateDay=n.Date_=n.FixedSizeBinary=n.Binary=n.Utf8=n.Float64=n.Float32=n.Float16=n.Float=n.Uint64=n.Uint32=n.Uint16=n.Uint8=n.Int64=n.Int32=n.Int16=n.Int8=n.Int=n.Bool=n.Null=n.DataType=n.makeData=n.Data=n.MetadataVersion=n.IntervalUnit=n.UnionMode=n.Precision=n.TimeUnit=n.DateUnit=n.BufferType=n.Type=n.MessageHeader=void 0,n.TimeMillisecondBuilder=n.TimeSecondBuilder=n.TimeBuilder=n.Uint64Builder=n.Uint32Builder=n.Uint16Builder=n.Uint8Builder=n.Int64Builder=n.Int32Builder=n.Int16Builder=n.Int8Builder=n.IntBuilder=n.Float64Builder=n.Float32Builder=n.Float16Builder=n.FloatBuilder=n.FixedSizeBinaryBuilder=n.DictionaryBuilder=n.DecimalBuilder=n.DateMillisecondBuilder=n.DateDayBuilder=n.DateBuilder=n.NullBuilder=n.BoolBuilder=n.builderThroughAsyncIterable=n.builderThroughIterable=n.tableFromJSON=n.vectorFromArray=n.makeBuilder=n.Builder=n.StructRow=n.MapRow=n.Field=n.Schema=n.Visitor=n.makeVector=n.Vector=n.tableFromArrays=n.makeTable=n.Table=n.Map_=n.FixedSizeList=n.DurationNanosecond=n.DurationMicrosecond=n.DurationMillisecond=n.DurationSecond=n.Duration=n.IntervalYearMonth=n.IntervalDayTime=n.Interval=void 0,n.util=n.RecordBatch=n.Message=n.JSONMessageReader=n.AsyncMessageReader=n.MessageReader=n.tableFromIPC=n.tableToIPC=n.RecordBatchJSONWriter=n.RecordBatchStreamWriter=n.RecordBatchFileWriter=n.RecordBatchWriter=n.AsyncRecordBatchStreamReader=n.AsyncRecordBatchFileReader=n.RecordBatchStreamReader=n.RecordBatchFileReader=n.RecordBatchReader=n.AsyncByteQueue=n.AsyncByteStream=n.ByteStream=n.DenseUnionBuilder=n.SparseUnionBuilder=n.UnionBuilder=n.StructBuilder=n.MapBuilder=n.FixedSizeListBuilder=n.ListBuilder=n.BinaryBuilder=n.Utf8Builder=n.DurationNanosecondBuilder=n.DurationMicrosecondBuilder=n.DurationMillisecondBuilder=n.DurationSecondBuilder=n.DurationBuilder=n.IntervalYearMonthBuilder=n.IntervalDayTimeBuilder=n.IntervalBuilder=n.TimestampNanosecondBuilder=n.TimestampMicrosecondBuilder=n.TimestampMillisecondBuilder=n.TimestampSecondBuilder=n.TimestampBuilder=n.TimeNanosecondBuilder=n.TimeMicrosecondBuilder=void 0;const e=dt;var t=b4();Object.defineProperty(n,"MessageHeader",{enumerable:!0,get:function(){return t.MessageHeader}});var i=Ln();Object.defineProperty(n,"Type",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(n,"BufferType",{enumerable:!0,get:function(){return i.BufferType}}),Object.defineProperty(n,"DateUnit",{enumerable:!0,get:function(){return i.DateUnit}}),Object.defineProperty(n,"TimeUnit",{enumerable:!0,get:function(){return i.TimeUnit}}),Object.defineProperty(n,"Precision",{enumerable:!0,get:function(){return i.Precision}}),Object.defineProperty(n,"UnionMode",{enumerable:!0,get:function(){return i.UnionMode}}),Object.defineProperty(n,"IntervalUnit",{enumerable:!0,get:function(){return i.IntervalUnit}}),Object.defineProperty(n,"MetadataVersion",{enumerable:!0,get:function(){return i.MetadataVersion}});var r=ul();Object.defineProperty(n,"Data",{enumerable:!0,get:function(){return r.Data}}),Object.defineProperty(n,"makeData",{enumerable:!0,get:function(){return r.makeData}});var s=An();Object.defineProperty(n,"DataType",{enumerable:!0,get:function(){return s.DataType}}),Object.defineProperty(n,"Null",{enumerable:!0,get:function(){return s.Null}}),Object.defineProperty(n,"Bool",{enumerable:!0,get:function(){return s.Bool}}),Object.defineProperty(n,"Int",{enumerable:!0,get:function(){return s.Int}}),Object.defineProperty(n,"Int8",{enumerable:!0,get:function(){return s.Int8}}),Object.defineProperty(n,"Int16",{enumerable:!0,get:function(){return s.Int16}}),Object.defineProperty(n,"Int32",{enumerable:!0,get:function(){return s.Int32}}),Object.defineProperty(n,"Int64",{enumerable:!0,get:function(){return s.Int64}}),Object.defineProperty(n,"Uint8",{enumerable:!0,get:function(){return s.Uint8}}),Object.defineProperty(n,"Uint16",{enumerable:!0,get:function(){return s.Uint16}}),Object.defineProperty(n,"Uint32",{enumerable:!0,get:function(){return s.Uint32}}),Object.defineProperty(n,"Uint64",{enumerable:!0,get:function(){return s.Uint64}}),Object.defineProperty(n,"Float",{enumerable:!0,get:function(){return s.Float}}),Object.defineProperty(n,"Float16",{enumerable:!0,get:function(){return s.Float16}}),Object.defineProperty(n,"Float32",{enumerable:!0,get:function(){return s.Float32}}),Object.defineProperty(n,"Float64",{enumerable:!0,get:function(){return s.Float64}}),Object.defineProperty(n,"Utf8",{enumerable:!0,get:function(){return s.Utf8}}),Object.defineProperty(n,"Binary",{enumerable:!0,get:function(){return s.Binary}}),Object.defineProperty(n,"FixedSizeBinary",{enumerable:!0,get:function(){return s.FixedSizeBinary}}),Object.defineProperty(n,"Date_",{enumerable:!0,get:function(){return s.Date_}}),Object.defineProperty(n,"DateDay",{enumerable:!0,get:function(){return s.DateDay}}),Object.defineProperty(n,"DateMillisecond",{enumerable:!0,get:function(){return s.DateMillisecond}}),Object.defineProperty(n,"Timestamp",{enumerable:!0,get:function(){return s.Timestamp}}),Object.defineProperty(n,"TimestampSecond",{enumerable:!0,get:function(){return s.TimestampSecond}}),Object.defineProperty(n,"TimestampMillisecond",{enumerable:!0,get:function(){return s.TimestampMillisecond}}),Object.defineProperty(n,"TimestampMicrosecond",{enumerable:!0,get:function(){return s.TimestampMicrosecond}}),Object.defineProperty(n,"TimestampNanosecond",{enumerable:!0,get:function(){return s.TimestampNanosecond}}),Object.defineProperty(n,"Time",{enumerable:!0,get:function(){return s.Time}}),Object.defineProperty(n,"TimeSecond",{enumerable:!0,get:function(){return s.TimeSecond}}),Object.defineProperty(n,"TimeMillisecond",{enumerable:!0,get:function(){return s.TimeMillisecond}}),Object.defineProperty(n,"TimeMicrosecond",{enumerable:!0,get:function(){return s.TimeMicrosecond}}),Object.defineProperty(n,"TimeNanosecond",{enumerable:!0,get:function(){return s.TimeNanosecond}}),Object.defineProperty(n,"Decimal",{enumerable:!0,get:function(){return s.Decimal}}),Object.defineProperty(n,"List",{enumerable:!0,get:function(){return s.List}}),Object.defineProperty(n,"Struct",{enumerable:!0,get:function(){return s.Struct}}),Object.defineProperty(n,"Union",{enumerable:!0,get:function(){return s.Union}}),Object.defineProperty(n,"DenseUnion",{enumerable:!0,get:function(){return s.DenseUnion}}),Object.defineProperty(n,"SparseUnion",{enumerable:!0,get:function(){return s.SparseUnion}}),Object.defineProperty(n,"Dictionary",{enumerable:!0,get:function(){return s.Dictionary}}),Object.defineProperty(n,"Interval",{enumerable:!0,get:function(){return s.Interval}}),Object.defineProperty(n,"IntervalDayTime",{enumerable:!0,get:function(){return s.IntervalDayTime}}),Object.defineProperty(n,"IntervalYearMonth",{enumerable:!0,get:function(){return s.IntervalYearMonth}}),Object.defineProperty(n,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(n,"DurationSecond",{enumerable:!0,get:function(){return s.DurationSecond}}),Object.defineProperty(n,"DurationMillisecond",{enumerable:!0,get:function(){return s.DurationMillisecond}}),Object.defineProperty(n,"DurationMicrosecond",{enumerable:!0,get:function(){return s.DurationMicrosecond}}),Object.defineProperty(n,"DurationNanosecond",{enumerable:!0,get:function(){return s.DurationNanosecond}}),Object.defineProperty(n,"FixedSizeList",{enumerable:!0,get:function(){return s.FixedSizeList}}),Object.defineProperty(n,"Map_",{enumerable:!0,get:function(){return s.Map_}});var o=p_();Object.defineProperty(n,"Table",{enumerable:!0,get:function(){return o.Table}}),Object.defineProperty(n,"makeTable",{enumerable:!0,get:function(){return o.makeTable}}),Object.defineProperty(n,"tableFromArrays",{enumerable:!0,get:function(){return o.tableFromArrays}});var a=xr();Object.defineProperty(n,"Vector",{enumerable:!0,get:function(){return a.Vector}}),Object.defineProperty(n,"makeVector",{enumerable:!0,get:function(){return a.makeVector}});var c=Ir();Object.defineProperty(n,"Visitor",{enumerable:!0,get:function(){return c.Visitor}});var u=rs();Object.defineProperty(n,"Schema",{enumerable:!0,get:function(){return u.Schema}}),Object.defineProperty(n,"Field",{enumerable:!0,get:function(){return u.Field}});var f=zS();Object.defineProperty(n,"MapRow",{enumerable:!0,get:function(){return f.MapRow}});var p=$C();Object.defineProperty(n,"StructRow",{enumerable:!0,get:function(){return p.StructRow}});var m=Qn();Object.defineProperty(n,"Builder",{enumerable:!0,get:function(){return m.Builder}});var g=HS();Object.defineProperty(n,"makeBuilder",{enumerable:!0,get:function(){return g.makeBuilder}}),Object.defineProperty(n,"vectorFromArray",{enumerable:!0,get:function(){return g.vectorFromArray}}),Object.defineProperty(n,"tableFromJSON",{enumerable:!0,get:function(){return g.tableFromJSON}}),Object.defineProperty(n,"builderThroughIterable",{enumerable:!0,get:function(){return g.builderThroughIterable}}),Object.defineProperty(n,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return g.builderThroughAsyncIterable}});var v=J3();Object.defineProperty(n,"BoolBuilder",{enumerable:!0,get:function(){return v.BoolBuilder}});var w=u4();Object.defineProperty(n,"NullBuilder",{enumerable:!0,get:function(){return w.NullBuilder}});var A=Z3();Object.defineProperty(n,"DateBuilder",{enumerable:!0,get:function(){return A.DateBuilder}}),Object.defineProperty(n,"DateDayBuilder",{enumerable:!0,get:function(){return A.DateDayBuilder}}),Object.defineProperty(n,"DateMillisecondBuilder",{enumerable:!0,get:function(){return A.DateMillisecondBuilder}});var E=Q3();Object.defineProperty(n,"DecimalBuilder",{enumerable:!0,get:function(){return E.DecimalBuilder}});var M=e4();Object.defineProperty(n,"DictionaryBuilder",{enumerable:!0,get:function(){return M.DictionaryBuilder}});var I=t4();Object.defineProperty(n,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return I.FixedSizeBinaryBuilder}});var R=i4();Object.defineProperty(n,"FloatBuilder",{enumerable:!0,get:function(){return R.FloatBuilder}}),Object.defineProperty(n,"Float16Builder",{enumerable:!0,get:function(){return R.Float16Builder}}),Object.defineProperty(n,"Float32Builder",{enumerable:!0,get:function(){return R.Float32Builder}}),Object.defineProperty(n,"Float64Builder",{enumerable:!0,get:function(){return R.Float64Builder}});var D=o4();Object.defineProperty(n,"IntBuilder",{enumerable:!0,get:function(){return D.IntBuilder}}),Object.defineProperty(n,"Int8Builder",{enumerable:!0,get:function(){return D.Int8Builder}}),Object.defineProperty(n,"Int16Builder",{enumerable:!0,get:function(){return D.Int16Builder}}),Object.defineProperty(n,"Int32Builder",{enumerable:!0,get:function(){return D.Int32Builder}}),Object.defineProperty(n,"Int64Builder",{enumerable:!0,get:function(){return D.Int64Builder}}),Object.defineProperty(n,"Uint8Builder",{enumerable:!0,get:function(){return D.Uint8Builder}}),Object.defineProperty(n,"Uint16Builder",{enumerable:!0,get:function(){return D.Uint16Builder}}),Object.defineProperty(n,"Uint32Builder",{enumerable:!0,get:function(){return D.Uint32Builder}}),Object.defineProperty(n,"Uint64Builder",{enumerable:!0,get:function(){return D.Uint64Builder}});var C=f4();Object.defineProperty(n,"TimeBuilder",{enumerable:!0,get:function(){return C.TimeBuilder}}),Object.defineProperty(n,"TimeSecondBuilder",{enumerable:!0,get:function(){return C.TimeSecondBuilder}}),Object.defineProperty(n,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return C.TimeMillisecondBuilder}}),Object.defineProperty(n,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return C.TimeMicrosecondBuilder}}),Object.defineProperty(n,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return C.TimeNanosecondBuilder}});var k=d4();Object.defineProperty(n,"TimestampBuilder",{enumerable:!0,get:function(){return k.TimestampBuilder}}),Object.defineProperty(n,"TimestampSecondBuilder",{enumerable:!0,get:function(){return k.TimestampSecondBuilder}}),Object.defineProperty(n,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return k.TimestampMillisecondBuilder}}),Object.defineProperty(n,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return k.TimestampMicrosecondBuilder}}),Object.defineProperty(n,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return k.TimestampNanosecondBuilder}});var j=r4();Object.defineProperty(n,"IntervalBuilder",{enumerable:!0,get:function(){return j.IntervalBuilder}}),Object.defineProperty(n,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return j.IntervalDayTimeBuilder}}),Object.defineProperty(n,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return j.IntervalYearMonthBuilder}});var U=s4();Object.defineProperty(n,"DurationBuilder",{enumerable:!0,get:function(){return U.DurationBuilder}}),Object.defineProperty(n,"DurationSecondBuilder",{enumerable:!0,get:function(){return U.DurationSecondBuilder}}),Object.defineProperty(n,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return U.DurationMillisecondBuilder}}),Object.defineProperty(n,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return U.DurationMicrosecondBuilder}}),Object.defineProperty(n,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return U.DurationNanosecondBuilder}});var F=p4();Object.defineProperty(n,"Utf8Builder",{enumerable:!0,get:function(){return F.Utf8Builder}});var J=cI();Object.defineProperty(n,"BinaryBuilder",{enumerable:!0,get:function(){return J.BinaryBuilder}});var G=a4();Object.defineProperty(n,"ListBuilder",{enumerable:!0,get:function(){return G.ListBuilder}});var ee=n4();Object.defineProperty(n,"FixedSizeListBuilder",{enumerable:!0,get:function(){return ee.FixedSizeListBuilder}});var oe=l4();Object.defineProperty(n,"MapBuilder",{enumerable:!0,get:function(){return oe.MapBuilder}});var me=c4();Object.defineProperty(n,"StructBuilder",{enumerable:!0,get:function(){return me.StructBuilder}});var Q=h4();Object.defineProperty(n,"UnionBuilder",{enumerable:!0,get:function(){return Q.UnionBuilder}}),Object.defineProperty(n,"SparseUnionBuilder",{enumerable:!0,get:function(){return Q.SparseUnionBuilder}}),Object.defineProperty(n,"DenseUnionBuilder",{enumerable:!0,get:function(){return Q.DenseUnionBuilder}});var V=Ud();Object.defineProperty(n,"ByteStream",{enumerable:!0,get:function(){return V.ByteStream}}),Object.defineProperty(n,"AsyncByteStream",{enumerable:!0,get:function(){return V.AsyncByteStream}}),Object.defineProperty(n,"AsyncByteQueue",{enumerable:!0,get:function(){return V.AsyncByteQueue}});var te=GS();Object.defineProperty(n,"RecordBatchReader",{enumerable:!0,get:function(){return te.RecordBatchReader}}),Object.defineProperty(n,"RecordBatchFileReader",{enumerable:!0,get:function(){return te.RecordBatchFileReader}}),Object.defineProperty(n,"RecordBatchStreamReader",{enumerable:!0,get:function(){return te.RecordBatchStreamReader}}),Object.defineProperty(n,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return te.AsyncRecordBatchFileReader}}),Object.defineProperty(n,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return te.AsyncRecordBatchStreamReader}});var xe=hI();Object.defineProperty(n,"RecordBatchWriter",{enumerable:!0,get:function(){return xe.RecordBatchWriter}}),Object.defineProperty(n,"RecordBatchFileWriter",{enumerable:!0,get:function(){return xe.RecordBatchFileWriter}}),Object.defineProperty(n,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return xe.RecordBatchStreamWriter}}),Object.defineProperty(n,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return xe.RecordBatchJSONWriter}});var N=yne();Object.defineProperty(n,"tableToIPC",{enumerable:!0,get:function(){return N.tableToIPC}}),Object.defineProperty(n,"tableFromIPC",{enumerable:!0,get:function(){return N.tableFromIPC}});var ce=fI();Object.defineProperty(n,"MessageReader",{enumerable:!0,get:function(){return ce.MessageReader}}),Object.defineProperty(n,"AsyncMessageReader",{enumerable:!0,get:function(){return ce.AsyncMessageReader}}),Object.defineProperty(n,"JSONMessageReader",{enumerable:!0,get:function(){return ce.JSONMessageReader}});var Me=ap();Object.defineProperty(n,"Message",{enumerable:!0,get:function(){return Me.Message}});var q=zd();Object.defineProperty(n,"RecordBatch",{enumerable:!0,get:function(){return q.RecordBatch}});const Re=e.__importStar(HC()),je=e.__importStar(X3()),re=e.__importStar(gp()),ae=e.__importStar(US()),de=e.__importStar(er()),fe=e.__importStar(VS()),Pe=e.__importStar(LS()),Ue=qS();n.util=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Re),je),re),ae),de),fe),Pe),{compareSchemas:Ue.compareSchemas,compareFields:Ue.compareFields,compareTypes:Ue.compareTypes})}(UA)),UA}var SF;function bp(){return SF||(SF=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.SparseUnion=n.DenseUnion=n.Union=n.StructRow=n.Struct=n.List=n.Decimal=n.TimeNanosecond=n.TimeMicrosecond=n.TimeMillisecond=n.TimeSecond=n.Time=n.TimestampNanosecond=n.TimestampMicrosecond=n.TimestampMillisecond=n.TimestampSecond=n.Timestamp=n.DateMillisecond=n.DateDay=n.Date_=n.FixedSizeBinary=n.Binary=n.Utf8=n.Float64=n.Float32=n.Float16=n.Float=n.Uint64=n.Uint32=n.Uint16=n.Uint8=n.Int64=n.Int32=n.Int16=n.Int8=n.Int=n.Bool=n.Null=n.DataType=n.makeData=n.Data=n.BufferType=n.UnionMode=n.Type=n.TimeUnit=n.Precision=n.MetadataVersion=n.MessageHeader=n.IntervalUnit=n.DateUnit=void 0,n.DateDayBuilder=n.DateBuilder=n.BoolBuilder=n.BinaryBuilder=n.builderThroughAsyncIterable=n.builderThroughIterable=n.makeBuilder=n.Builder=n.util=n.RecordBatch=n.Message=n.JSONMessageReader=n.AsyncMessageReader=n.MessageReader=n.tableToIPC=n.tableFromIPC=n.RecordBatchJSONWriter=n.RecordBatchStreamWriter=n.RecordBatchFileWriter=n.RecordBatchWriter=n.AsyncRecordBatchStreamReader=n.AsyncRecordBatchFileReader=n.RecordBatchStreamReader=n.RecordBatchFileReader=n.RecordBatchReader=n.AsyncByteQueue=n.AsyncByteStream=n.ByteStream=n.tableFromJSON=n.vectorFromArray=n.makeVector=n.Vector=n.Visitor=n.Field=n.Schema=n.tableFromArrays=n.makeTable=n.Table=n.MapRow=n.Map_=n.FixedSizeList=n.DurationNanosecond=n.DurationMicrosecond=n.DurationMillisecond=n.DurationSecond=n.Duration=n.IntervalYearMonth=n.IntervalDayTime=n.Interval=n.Dictionary=void 0,n.Utf8Builder=n.SparseUnionBuilder=n.DenseUnionBuilder=n.UnionBuilder=n.TimeNanosecondBuilder=n.TimeMicrosecondBuilder=n.TimeMillisecondBuilder=n.TimeSecondBuilder=n.TimeBuilder=n.TimestampNanosecondBuilder=n.TimestampMicrosecondBuilder=n.TimestampMillisecondBuilder=n.TimestampSecondBuilder=n.TimestampBuilder=n.StructBuilder=n.NullBuilder=n.MapBuilder=n.ListBuilder=n.Uint64Builder=n.Uint32Builder=n.Uint16Builder=n.Uint8Builder=n.Int64Builder=n.Int32Builder=n.Int16Builder=n.Int8Builder=n.IntBuilder=n.DurationNanosecondBuilder=n.DurationMicrosecondBuilder=n.DurationMillisecondBuilder=n.DurationSecondBuilder=n.DurationBuilder=n.IntervalYearMonthBuilder=n.IntervalDayTimeBuilder=n.IntervalBuilder=n.Float64Builder=n.Float32Builder=n.Float16Builder=n.FloatBuilder=n.FixedSizeListBuilder=n.FixedSizeBinaryBuilder=n.DictionaryBuilder=n.DecimalBuilder=n.DateMillisecondBuilder=void 0;const t=dt.__importDefault(PS()),i=Qn(),r=GS(),s=hI(),o=hne(),a=pne(),c=mne(),u=gne();t.default.toDOMStream=o.toDOMStream,i.Builder.throughDOM=a.builderThroughDOMStream,r.RecordBatchReader.throughDOM=c.recordBatchReaderThroughDOMStream,r.RecordBatchFileReader.throughDOM=c.recordBatchReaderThroughDOMStream,r.RecordBatchStreamReader.throughDOM=c.recordBatchReaderThroughDOMStream,s.RecordBatchWriter.throughDOM=u.recordBatchWriterThroughDOMStream,s.RecordBatchFileWriter.throughDOM=u.recordBatchWriterThroughDOMStream,s.RecordBatchStreamWriter.throughDOM=u.recordBatchWriterThroughDOMStream;var f=vF();Object.defineProperty(n,"DateUnit",{enumerable:!0,get:function(){return f.DateUnit}}),Object.defineProperty(n,"IntervalUnit",{enumerable:!0,get:function(){return f.IntervalUnit}}),Object.defineProperty(n,"MessageHeader",{enumerable:!0,get:function(){return f.MessageHeader}}),Object.defineProperty(n,"MetadataVersion",{enumerable:!0,get:function(){return f.MetadataVersion}}),Object.defineProperty(n,"Precision",{enumerable:!0,get:function(){return f.Precision}}),Object.defineProperty(n,"TimeUnit",{enumerable:!0,get:function(){return f.TimeUnit}}),Object.defineProperty(n,"Type",{enumerable:!0,get:function(){return f.Type}}),Object.defineProperty(n,"UnionMode",{enumerable:!0,get:function(){return f.UnionMode}}),Object.defineProperty(n,"BufferType",{enumerable:!0,get:function(){return f.BufferType}}),Object.defineProperty(n,"Data",{enumerable:!0,get:function(){return f.Data}}),Object.defineProperty(n,"makeData",{enumerable:!0,get:function(){return f.makeData}}),Object.defineProperty(n,"DataType",{enumerable:!0,get:function(){return f.DataType}}),Object.defineProperty(n,"Null",{enumerable:!0,get:function(){return f.Null}}),Object.defineProperty(n,"Bool",{enumerable:!0,get:function(){return f.Bool}}),Object.defineProperty(n,"Int",{enumerable:!0,get:function(){return f.Int}}),Object.defineProperty(n,"Int8",{enumerable:!0,get:function(){return f.Int8}}),Object.defineProperty(n,"Int16",{enumerable:!0,get:function(){return f.Int16}}),Object.defineProperty(n,"Int32",{enumerable:!0,get:function(){return f.Int32}}),Object.defineProperty(n,"Int64",{enumerable:!0,get:function(){return f.Int64}}),Object.defineProperty(n,"Uint8",{enumerable:!0,get:function(){return f.Uint8}}),Object.defineProperty(n,"Uint16",{enumerable:!0,get:function(){return f.Uint16}}),Object.defineProperty(n,"Uint32",{enumerable:!0,get:function(){return f.Uint32}}),Object.defineProperty(n,"Uint64",{enumerable:!0,get:function(){return f.Uint64}}),Object.defineProperty(n,"Float",{enumerable:!0,get:function(){return f.Float}}),Object.defineProperty(n,"Float16",{enumerable:!0,get:function(){return f.Float16}}),Object.defineProperty(n,"Float32",{enumerable:!0,get:function(){return f.Float32}}),Object.defineProperty(n,"Float64",{enumerable:!0,get:function(){return f.Float64}}),Object.defineProperty(n,"Utf8",{enumerable:!0,get:function(){return f.Utf8}}),Object.defineProperty(n,"Binary",{enumerable:!0,get:function(){return f.Binary}}),Object.defineProperty(n,"FixedSizeBinary",{enumerable:!0,get:function(){return f.FixedSizeBinary}}),Object.defineProperty(n,"Date_",{enumerable:!0,get:function(){return f.Date_}}),Object.defineProperty(n,"DateDay",{enumerable:!0,get:function(){return f.DateDay}}),Object.defineProperty(n,"DateMillisecond",{enumerable:!0,get:function(){return f.DateMillisecond}}),Object.defineProperty(n,"Timestamp",{enumerable:!0,get:function(){return f.Timestamp}}),Object.defineProperty(n,"TimestampSecond",{enumerable:!0,get:function(){return f.TimestampSecond}}),Object.defineProperty(n,"TimestampMillisecond",{enumerable:!0,get:function(){return f.TimestampMillisecond}}),Object.defineProperty(n,"TimestampMicrosecond",{enumerable:!0,get:function(){return f.TimestampMicrosecond}}),Object.defineProperty(n,"TimestampNanosecond",{enumerable:!0,get:function(){return f.TimestampNanosecond}}),Object.defineProperty(n,"Time",{enumerable:!0,get:function(){return f.Time}}),Object.defineProperty(n,"TimeSecond",{enumerable:!0,get:function(){return f.TimeSecond}}),Object.defineProperty(n,"TimeMillisecond",{enumerable:!0,get:function(){return f.TimeMillisecond}}),Object.defineProperty(n,"TimeMicrosecond",{enumerable:!0,get:function(){return f.TimeMicrosecond}}),Object.defineProperty(n,"TimeNanosecond",{enumerable:!0,get:function(){return f.TimeNanosecond}}),Object.defineProperty(n,"Decimal",{enumerable:!0,get:function(){return f.Decimal}}),Object.defineProperty(n,"List",{enumerable:!0,get:function(){return f.List}}),Object.defineProperty(n,"Struct",{enumerable:!0,get:function(){return f.Struct}}),Object.defineProperty(n,"StructRow",{enumerable:!0,get:function(){return f.StructRow}}),Object.defineProperty(n,"Union",{enumerable:!0,get:function(){return f.Union}}),Object.defineProperty(n,"DenseUnion",{enumerable:!0,get:function(){return f.DenseUnion}}),Object.defineProperty(n,"SparseUnion",{enumerable:!0,get:function(){return f.SparseUnion}}),Object.defineProperty(n,"Dictionary",{enumerable:!0,get:function(){return f.Dictionary}}),Object.defineProperty(n,"Interval",{enumerable:!0,get:function(){return f.Interval}}),Object.defineProperty(n,"IntervalDayTime",{enumerable:!0,get:function(){return f.IntervalDayTime}}),Object.defineProperty(n,"IntervalYearMonth",{enumerable:!0,get:function(){return f.IntervalYearMonth}}),Object.defineProperty(n,"Duration",{enumerable:!0,get:function(){return f.Duration}}),Object.defineProperty(n,"DurationSecond",{enumerable:!0,get:function(){return f.DurationSecond}}),Object.defineProperty(n,"DurationMillisecond",{enumerable:!0,get:function(){return f.DurationMillisecond}}),Object.defineProperty(n,"DurationMicrosecond",{enumerable:!0,get:function(){return f.DurationMicrosecond}}),Object.defineProperty(n,"DurationNanosecond",{enumerable:!0,get:function(){return f.DurationNanosecond}}),Object.defineProperty(n,"FixedSizeList",{enumerable:!0,get:function(){return f.FixedSizeList}}),Object.defineProperty(n,"Map_",{enumerable:!0,get:function(){return f.Map_}}),Object.defineProperty(n,"MapRow",{enumerable:!0,get:function(){return f.MapRow}}),Object.defineProperty(n,"Table",{enumerable:!0,get:function(){return f.Table}}),Object.defineProperty(n,"makeTable",{enumerable:!0,get:function(){return f.makeTable}}),Object.defineProperty(n,"tableFromArrays",{enumerable:!0,get:function(){return f.tableFromArrays}}),Object.defineProperty(n,"Schema",{enumerable:!0,get:function(){return f.Schema}}),Object.defineProperty(n,"Field",{enumerable:!0,get:function(){return f.Field}}),Object.defineProperty(n,"Visitor",{enumerable:!0,get:function(){return f.Visitor}}),Object.defineProperty(n,"Vector",{enumerable:!0,get:function(){return f.Vector}}),Object.defineProperty(n,"makeVector",{enumerable:!0,get:function(){return f.makeVector}}),Object.defineProperty(n,"vectorFromArray",{enumerable:!0,get:function(){return f.vectorFromArray}}),Object.defineProperty(n,"tableFromJSON",{enumerable:!0,get:function(){return f.tableFromJSON}}),Object.defineProperty(n,"ByteStream",{enumerable:!0,get:function(){return f.ByteStream}}),Object.defineProperty(n,"AsyncByteStream",{enumerable:!0,get:function(){return f.AsyncByteStream}}),Object.defineProperty(n,"AsyncByteQueue",{enumerable:!0,get:function(){return f.AsyncByteQueue}}),Object.defineProperty(n,"RecordBatchReader",{enumerable:!0,get:function(){return f.RecordBatchReader}}),Object.defineProperty(n,"RecordBatchFileReader",{enumerable:!0,get:function(){return f.RecordBatchFileReader}}),Object.defineProperty(n,"RecordBatchStreamReader",{enumerable:!0,get:function(){return f.RecordBatchStreamReader}}),Object.defineProperty(n,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return f.AsyncRecordBatchFileReader}}),Object.defineProperty(n,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return f.AsyncRecordBatchStreamReader}}),Object.defineProperty(n,"RecordBatchWriter",{enumerable:!0,get:function(){return f.RecordBatchWriter}}),Object.defineProperty(n,"RecordBatchFileWriter",{enumerable:!0,get:function(){return f.RecordBatchFileWriter}}),Object.defineProperty(n,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return f.RecordBatchStreamWriter}}),Object.defineProperty(n,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return f.RecordBatchJSONWriter}}),Object.defineProperty(n,"tableFromIPC",{enumerable:!0,get:function(){return f.tableFromIPC}}),Object.defineProperty(n,"tableToIPC",{enumerable:!0,get:function(){return f.tableToIPC}}),Object.defineProperty(n,"MessageReader",{enumerable:!0,get:function(){return f.MessageReader}}),Object.defineProperty(n,"AsyncMessageReader",{enumerable:!0,get:function(){return f.AsyncMessageReader}}),Object.defineProperty(n,"JSONMessageReader",{enumerable:!0,get:function(){return f.JSONMessageReader}}),Object.defineProperty(n,"Message",{enumerable:!0,get:function(){return f.Message}}),Object.defineProperty(n,"RecordBatch",{enumerable:!0,get:function(){return f.RecordBatch}}),Object.defineProperty(n,"util",{enumerable:!0,get:function(){return f.util}}),Object.defineProperty(n,"Builder",{enumerable:!0,get:function(){return f.Builder}}),Object.defineProperty(n,"makeBuilder",{enumerable:!0,get:function(){return f.makeBuilder}}),Object.defineProperty(n,"builderThroughIterable",{enumerable:!0,get:function(){return f.builderThroughIterable}}),Object.defineProperty(n,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return f.builderThroughAsyncIterable}});var p=vF();Object.defineProperty(n,"BinaryBuilder",{enumerable:!0,get:function(){return p.BinaryBuilder}}),Object.defineProperty(n,"BoolBuilder",{enumerable:!0,get:function(){return p.BoolBuilder}}),Object.defineProperty(n,"DateBuilder",{enumerable:!0,get:function(){return p.DateBuilder}}),Object.defineProperty(n,"DateDayBuilder",{enumerable:!0,get:function(){return p.DateDayBuilder}}),Object.defineProperty(n,"DateMillisecondBuilder",{enumerable:!0,get:function(){return p.DateMillisecondBuilder}}),Object.defineProperty(n,"DecimalBuilder",{enumerable:!0,get:function(){return p.DecimalBuilder}}),Object.defineProperty(n,"DictionaryBuilder",{enumerable:!0,get:function(){return p.DictionaryBuilder}}),Object.defineProperty(n,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return p.FixedSizeBinaryBuilder}}),Object.defineProperty(n,"FixedSizeListBuilder",{enumerable:!0,get:function(){return p.FixedSizeListBuilder}}),Object.defineProperty(n,"FloatBuilder",{enumerable:!0,get:function(){return p.FloatBuilder}}),Object.defineProperty(n,"Float16Builder",{enumerable:!0,get:function(){return p.Float16Builder}}),Object.defineProperty(n,"Float32Builder",{enumerable:!0,get:function(){return p.Float32Builder}}),Object.defineProperty(n,"Float64Builder",{enumerable:!0,get:function(){return p.Float64Builder}}),Object.defineProperty(n,"IntervalBuilder",{enumerable:!0,get:function(){return p.IntervalBuilder}}),Object.defineProperty(n,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return p.IntervalDayTimeBuilder}}),Object.defineProperty(n,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return p.IntervalYearMonthBuilder}}),Object.defineProperty(n,"DurationBuilder",{enumerable:!0,get:function(){return p.DurationBuilder}}),Object.defineProperty(n,"DurationSecondBuilder",{enumerable:!0,get:function(){return p.DurationSecondBuilder}}),Object.defineProperty(n,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return p.DurationMillisecondBuilder}}),Object.defineProperty(n,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return p.DurationMicrosecondBuilder}}),Object.defineProperty(n,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return p.DurationNanosecondBuilder}}),Object.defineProperty(n,"IntBuilder",{enumerable:!0,get:function(){return p.IntBuilder}}),Object.defineProperty(n,"Int8Builder",{enumerable:!0,get:function(){return p.Int8Builder}}),Object.defineProperty(n,"Int16Builder",{enumerable:!0,get:function(){return p.Int16Builder}}),Object.defineProperty(n,"Int32Builder",{enumerable:!0,get:function(){return p.Int32Builder}}),Object.defineProperty(n,"Int64Builder",{enumerable:!0,get:function(){return p.Int64Builder}}),Object.defineProperty(n,"Uint8Builder",{enumerable:!0,get:function(){return p.Uint8Builder}}),Object.defineProperty(n,"Uint16Builder",{enumerable:!0,get:function(){return p.Uint16Builder}}),Object.defineProperty(n,"Uint32Builder",{enumerable:!0,get:function(){return p.Uint32Builder}}),Object.defineProperty(n,"Uint64Builder",{enumerable:!0,get:function(){return p.Uint64Builder}}),Object.defineProperty(n,"ListBuilder",{enumerable:!0,get:function(){return p.ListBuilder}}),Object.defineProperty(n,"MapBuilder",{enumerable:!0,get:function(){return p.MapBuilder}}),Object.defineProperty(n,"NullBuilder",{enumerable:!0,get:function(){return p.NullBuilder}}),Object.defineProperty(n,"StructBuilder",{enumerable:!0,get:function(){return p.StructBuilder}}),Object.defineProperty(n,"TimestampBuilder",{enumerable:!0,get:function(){return p.TimestampBuilder}}),Object.defineProperty(n,"TimestampSecondBuilder",{enumerable:!0,get:function(){return p.TimestampSecondBuilder}}),Object.defineProperty(n,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return p.TimestampMillisecondBuilder}}),Object.defineProperty(n,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return p.TimestampMicrosecondBuilder}}),Object.defineProperty(n,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return p.TimestampNanosecondBuilder}}),Object.defineProperty(n,"TimeBuilder",{enumerable:!0,get:function(){return p.TimeBuilder}}),Object.defineProperty(n,"TimeSecondBuilder",{enumerable:!0,get:function(){return p.TimeSecondBuilder}}),Object.defineProperty(n,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return p.TimeMillisecondBuilder}}),Object.defineProperty(n,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return p.TimeMicrosecondBuilder}}),Object.defineProperty(n,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return p.TimeNanosecondBuilder}}),Object.defineProperty(n,"UnionBuilder",{enumerable:!0,get:function(){return p.UnionBuilder}}),Object.defineProperty(n,"DenseUnionBuilder",{enumerable:!0,get:function(){return p.DenseUnionBuilder}}),Object.defineProperty(n,"SparseUnionBuilder",{enumerable:!0,get:function(){return p.SparseUnionBuilder}}),Object.defineProperty(n,"Utf8Builder",{enumerable:!0,get:function(){return p.Utf8Builder}})}(xA)),xA}var Nn={},Qg={},wF;function bne(){if(wF)return Qg;wF=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.sanitizeSchema=void 0;const n=bp();function e(C){if(C!=null){if(!(C instanceof Map))throw Error("Expected metadata, if present, to be a Map<string, string>");for(const k of C)if(!(typeof k[0]=="string"||typeof k[1]!="string"))throw Error("Expected metadata, if present, to be a Map<string, string> but it had non-string keys or values");return C}}function t(C){if(!("bitWidth"in C)||typeof C.bitWidth!="number"||!("isSigned"in C)||typeof C.isSigned!="boolean")throw Error("Expected an Int Type to have a `bitWidth` and `isSigned` property");return new n.Int(C.isSigned,C.bitWidth)}function i(C){if(!("precision"in C)||typeof C.precision!="number")throw Error("Expected a Float Type to have a `precision` property");return new n.Float(C.precision)}function r(C){if(!("scale"in C)||typeof C.scale!="number"||!("precision"in C)||typeof C.precision!="number"||!("bitWidth"in C)||typeof C.bitWidth!="number")throw Error("Expected a Decimal Type to have `scale`, `precision`, and `bitWidth` properties");return new n.Decimal(C.scale,C.precision,C.bitWidth)}function s(C){if(!("unit"in C)||typeof C.unit!="number")throw Error("Expected a Date type to have a `unit` property");return new n.Date_(C.unit)}function o(C){if(!("unit"in C)||typeof C.unit!="number"||!("bitWidth"in C)||typeof C.bitWidth!="number")throw Error("Expected a Time type to have `unit` and `bitWidth` properties");return new n.Time(C.unit,C.bitWidth)}function a(C){if(!("unit"in C)||typeof C.unit!="number")throw Error("Expected a Timestamp type to have a `unit` property");let k=null;return"timezone"in C&&typeof C.timezone=="string"&&(k=C.timezone),new n.Timestamp(C.unit,k)}function c(C,k){let j=null;return"timezone"in C&&typeof C.timezone=="string"&&(j=C.timezone),new k(j)}function u(C){if(!("unit"in C)||typeof C.unit!="number")throw Error("Expected an Interval type to have a `unit` property");return new n.Interval(C.unit)}function f(C){if(!("children"in C)||!Array.isArray(C.children))throw Error("Expected a List type to have an array-like `children` property");if(C.children.length!==1)throw Error("Expected a List type to have exactly one child");return new n.List(R(C.children[0]))}function p(C){if(!("children"in C)||!Array.isArray(C.children))throw Error("Expected a Struct type to have an array-like `children` property");return new n.Struct(C.children.map(k=>R(k)))}function m(C){if(!("typeIds"in C)||!("mode"in C)||typeof C.mode!="number")throw Error("Expected a Union type to have `typeIds` and `mode` properties");if(!("children"in C)||!Array.isArray(C.children))throw Error("Expected a Union type to have an array-like `children` property");return new n.Union(C.mode,C.typeIds,C.children.map(k=>R(k)))}function g(C,k){if(!("typeIds"in C))throw Error("Expected a DenseUnion/SparseUnion type to have a `typeIds` property");if(!("children"in C)||!Array.isArray(C.children))throw Error("Expected a DenseUnion/SparseUnion type to have an array-like `children` property");return new k(C.typeIds,C.children.map(j=>R(j)))}function v(C){if(!("byteWidth"in C)||typeof C.byteWidth!="number")throw Error("Expected a FixedSizeBinary type to have a `byteWidth` property");return new n.FixedSizeBinary(C.byteWidth)}function w(C){if(!("listSize"in C)||typeof C.listSize!="number")throw Error("Expected a FixedSizeList type to have a `listSize` property");if(!("children"in C)||!Array.isArray(C.children))throw Error("Expected a FixedSizeList type to have an array-like `children` property");if(C.children.length!==1)throw Error("Expected a FixedSizeList type to have exactly one child");return new n.FixedSizeList(C.listSize,R(C.children[0]))}function A(C){if(!("children"in C)||!Array.isArray(C.children))throw Error("Expected a Map type to have an array-like `children` property");if(!("keysSorted"in C)||typeof C.keysSorted!="boolean")throw Error("Expected a Map type to have a `keysSorted` property");return new n.Map_(C.children.map(k=>R(k)),C.keysSorted)}function E(C){if(!("unit"in C)||typeof C.unit!="number")throw Error("Expected a Duration type to have a `unit` property");return new n.Duration(C.unit)}function M(C){if(!("id"in C)||typeof C.id!="number")throw Error("Expected a Dictionary type to have an `id` property");if(!("indices"in C)||typeof C.indices!="object")throw Error("Expected a Dictionary type to have an `indices` property");if(!("dictionary"in C)||typeof C.dictionary!="object")throw Error("Expected a Dictionary type to have an `dictionary` property");if(!("isOrdered"in C)||typeof C.isOrdered!="boolean")throw Error("Expected a Dictionary type to have an `isOrdered` property");return new n.Dictionary(I(C.dictionary),I(C.indices),C.id,C.isOrdered)}function I(C){if(typeof C!="object"||C===null)throw Error("Expected a Type but object was null/undefined");if(!("typeId"in C)||typeof C.typeId=="function")throw Error("Expected a Type to have a typeId function");let k;if(typeof C.typeId=="function")k=C.typeId();else if(typeof C.typeId=="number")k=C.typeId;else throw Error("Type's typeId property was not a function or number");switch(k){case n.Type.NONE:throw Error("Received a Type with a typeId of NONE");case n.Type.Null:return new n.Null;case n.Type.Int:return t(C);case n.Type.Float:return i(C);case n.Type.Binary:return new n.Binary;case n.Type.Utf8:return new n.Utf8;case n.Type.Bool:return new n.Bool;case n.Type.Decimal:return r(C);case n.Type.Date:return s(C);case n.Type.Time:return o(C);case n.Type.Timestamp:return a(C);case n.Type.Interval:return u(C);case n.Type.List:return f(C);case n.Type.Struct:return p(C);case n.Type.Union:return m(C);case n.Type.FixedSizeBinary:return v(C);case n.Type.FixedSizeList:return w(C);case n.Type.Map:return A(C);case n.Type.Duration:return E(C);case n.Type.Dictionary:return M(C);case n.Type.Int8:return new n.Int8;case n.Type.Int16:return new n.Int16;case n.Type.Int32:return new n.Int32;case n.Type.Int64:return new n.Int64;case n.Type.Uint8:return new n.Uint8;case n.Type.Uint16:return new n.Uint16;case n.Type.Uint32:return new n.Uint32;case n.Type.Uint64:return new n.Uint64;case n.Type.Float16:return new n.Float16;case n.Type.Float32:return new n.Float32;case n.Type.Float64:return new n.Float64;case n.Type.DateMillisecond:return new n.DateMillisecond;case n.Type.DateDay:return new n.DateDay;case n.Type.TimeNanosecond:return new n.TimeNanosecond;case n.Type.TimeMicrosecond:return new n.TimeMicrosecond;case n.Type.TimeMillisecond:return new n.TimeMillisecond;case n.Type.TimeSecond:return new n.TimeSecond;case n.Type.TimestampNanosecond:return c(C,n.TimestampNanosecond);case n.Type.TimestampMicrosecond:return c(C,n.TimestampMicrosecond);case n.Type.TimestampMillisecond:return c(C,n.TimestampMillisecond);case n.Type.TimestampSecond:return c(C,n.TimestampSecond);case n.Type.DenseUnion:return g(C,n.DenseUnion);case n.Type.SparseUnion:return g(C,n.SparseUnion);case n.Type.IntervalDayTime:return new n.IntervalDayTime;case n.Type.IntervalYearMonth:return new n.IntervalYearMonth;case n.Type.DurationNanosecond:return new n.DurationNanosecond;case n.Type.DurationMicrosecond:return new n.DurationMicrosecond;case n.Type.DurationMillisecond:return new n.DurationMillisecond;case n.Type.DurationSecond:return new n.DurationSecond}}function R(C){if(C instanceof n.Field)return C;if(typeof C!="object"||C===null)throw Error("Expected a Field but object was null/undefined");if(!("type"in C)||!("name"in C)||!("nullable"in C))throw Error("The field passed in is missing a `type`/`name`/`nullable` property");const k=I(C.type),j=C.name;if(typeof j!="string")throw Error("The field passed in had a non-string `name` property");const U=C.nullable;if(typeof U!="boolean")throw Error("The field passed in had a non-boolean `nullable` property");let F;return"metadata"in C&&(F=e(C.metadata)),new n.Field(j,k,U,F)}function D(C){if(C instanceof n.Schema)return C;if(typeof C!="object"||C===null)throw Error("Expected a Schema but object was null/undefined");if(!("fields"in C))throw Error("The schema passed in does not appear to be a schema (no 'fields' property)");let k;if("metadata"in C&&(k=e(C.metadata)),!Array.isArray(C.fields))throw Error("The schema passed in had a 'fields' property but it was not an array");const j=C.fields.map(U=>R(U));return new n.Schema(j,k)}return Qg.sanitizeSchema=D,Qg}var TF;function YE(){if(TF)return Nn;TF=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.createEmptyTable=Nn.fromTableToStreamBuffer=Nn.fromTableToBuffer=Nn.fromRecordsToStreamBuffer=Nn.fromRecordsToBuffer=Nn.convertToTable=Nn.makeEmptyTable=Nn.makeArrowTable=Nn.MakeArrowTableOptions=Nn.VectorColumnOptions=void 0;const n=bp(),e=bne();class t{constructor(R){this.type=new n.Float32,Object.assign(this,R)}}Nn.VectorColumnOptions=t;class i{constructor(R){this.vectorColumns={vector:new t},this.dictionaryEncodeStrings=!1,Object.assign(this,R)}}Nn.MakeArrowTableOptions=i;function r(I,R){var j,U;if(I.length===0&&((R==null?void 0:R.schema)===void 0||(R==null?void 0:R.schema)===null))throw new Error("At least one record or a schema needs to be provided");const D=new i(R!==void 0?R:{});D.schema!==void 0&&D.schema!==null&&(D.schema=(0,e.sanitizeSchema)(D.schema),D.schema=M(D.schema,I,D.embeddings));const C={},k=D.schema!=null?D.schema.names:Object.keys(I[0]);for(const F of k){if(I.length!==0&&!Object.prototype.hasOwnProperty.call(I[0],F))continue;let J=I.map(ee=>ee[F]),G;if(D.schema!==void 0)G=(U=(j=D.schema)==null?void 0:j.fields.filter(ee=>ee.name===F)[0])==null?void 0:U.type,n.DataType.isInt(G)&&G.bitWidth===64&&(J=J.map(ee=>ee===null?ee:BigInt(ee)));else{const ee=D.vectorColumns[F];ee!==void 0&&(G=f(J[0].length,ee.type))}try{C[F]=a(J,G,D.dictionaryEncodeStrings)}catch(ee){throw Error(`Could not convert column "${F}" to Arrow: ${ee}`)}}if(D.schema!=null){const J=new n.Table(C).batches.map(G=>new n.RecordBatch(D.schema,G.data));return new n.Table(D.schema,J)}else return new n.Table(C)}Nn.makeArrowTable=r;function s(I){return r([],{schema:I})}Nn.makeEmptyTable=s;function o(I){if(I.length===0||I[0].length===0)throw Error("Cannot infer list vector from empty array or empty list");const R=I[0];let D;try{D=a(R).type}catch(k){throw Error(`Cannot infer list vector.  Cannot infer inner type: ${k}`)}const C=(0,n.makeBuilder)({type:new n.List(new n.Field("item",D,!0))});for(const k of I)C.append(k);return C.finish().toVector()}function a(I,R,D){if(R!==void 0)return(0,n.vectorFromArray)(I,R);if(I.length===0)throw Error("makeVector requires at least one value or the type must be specfied");const C=I.find(k=>k!=null);if(C===void 0)throw Error("makeVector cannot infer the type if all values are null or undefined");return Array.isArray(C)?o(I):Buffer.isBuffer(C)?(0,n.vectorFromArray)(I,new n.Binary):!(D??!1)&&(typeof C=="string"||C instanceof String)?(0,n.vectorFromArray)(I,new n.Utf8):(0,n.vectorFromArray)(I)}async function c(I,R,D){if(R==null)return I;D!=null&&(D=(0,e.sanitizeSchema)(D));const C=[...Array(I.numCols).keys()].map((G,ee)=>{const oe=I.schema.fields[ee].name,me=I.getChildAt(ee);return[oe,me]}),k=Object.fromEntries(C),j=k[R.sourceColumn],U=R.destColumn??"vector",F=R.embeddingDataType??new n.Float32;if(j===void 0)throw new Error(`Cannot apply embedding function because the source column '${R.sourceColumn}' was not present in the data`);if(I.numRows===0){if(Object.prototype.hasOwnProperty.call(k,U))return I;if(R.embeddingDimension!==void 0){const G=f(R.embeddingDimension,F);k[U]=a([],G)}else if(D!=null){const G=D.fields.find(ee=>ee.name===U);if(G!=null)k[U]=a([],G.type);else throw new Error(`Attempt to apply embeddings to an empty table failed because schema was missing embedding column '${U}'`)}else throw new Error("Attempt to apply embeddings to an empty table when the embeddings function does not specify `embeddingDimension`")}else{if(Object.prototype.hasOwnProperty.call(k,U))throw new Error(`Attempt to apply embeddings to table failed because column ${U} already existed`);if(I.batches.length>1)throw new Error("Internal error: `makeArrowTable` unexpectedly created a table with more than one batch");const G=j.toArray(),ee=await R.embed(G);if(ee.length!==G.length)throw new Error("Embedding function did not return an embedding for each input element");const oe=f(ee[0].length,F);k[U]=a(ee,oe)}const J=new n.Table(k);if(D!=null){if(D.fields.find(G=>G.name===U)===void 0)throw new Error(`When using embedding functions and specifying a schema the schema should include the embedding column but the column ${U} was missing`);return A(J,D)}return J}async function u(I,R,D){const C=r(I,D);return await c(C,R,D==null?void 0:D.schema)}Nn.convertToTable=u;function f(I,R){const D=new n.Field("item",R,!0);return new n.FixedSizeList(I,D)}async function p(I,R,D){D!=null&&(D=(0,e.sanitizeSchema)(D));const C=await u(I,R,{schema:D,embeddings:R}),k=n.RecordBatchFileWriter.writeAll(C);return Buffer.from(await k.toUint8Array())}Nn.fromRecordsToBuffer=p;async function m(I,R,D){D!=null&&(D=(0,e.sanitizeSchema)(D));const C=await u(I,R,{schema:D}),k=n.RecordBatchStreamWriter.writeAll(C);return Buffer.from(await k.toUint8Array())}Nn.fromRecordsToStreamBuffer=m;async function g(I,R,D){D!=null&&(D=(0,e.sanitizeSchema)(D));const C=await c(I,R,D),k=n.RecordBatchFileWriter.writeAll(C);return Buffer.from(await k.toUint8Array())}Nn.fromTableToBuffer=g;async function v(I,R,D){D!=null&&(D=(0,e.sanitizeSchema)(D));const C=await c(I,R,D),k=n.RecordBatchStreamWriter.writeAll(C);return Buffer.from(await k.toUint8Array())}Nn.fromTableToStreamBuffer=v;function w(I,R){var k;const D=[];for(const j of R.fields){const U=(k=I.schema.fields)==null?void 0:k.findIndex(F=>F.name===j.name);if(U<0)throw new Error(`The column ${j.name} was not found in the Arrow Table`);D.push(I.data.children[U])}const C=(0,n.makeData)({type:new n.Struct(R.fields),length:I.numRows,nullCount:I.nullCount,children:D});return new n.RecordBatch(R,C)}function A(I,R){const D=I.batches.map(C=>w(C,R));return new n.Table(R,D)}function E(I){return new n.Table((0,e.sanitizeSchema)(I))}Nn.createEmptyTable=E;function M(I,R,D){var j;const C=[],k=[];for(const U of I.fields)U.type instanceof n.FixedSizeList&&R.length!==0&&((j=R==null?void 0:R[0])==null?void 0:j[U.name])===void 0?k.push(U):C.push(U);if(k.length>0&&D===void 0)throw new Error(`Table has embeddings: "${k.map(U=>U.name).join(",")}", but no embedding function was provided`);return new n.Schema(C,I.metadata)}return Nn}var Ta={},ey={};function _ne(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Aa={},AF;function vne(){if(AF)return Aa;AF=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.lazy=Aa.bin=Aa.currentTarget=void 0;function n(){let s=null;switch(process.platform){case"android":switch(process.arch){case"arm":return"android-arm-eabi";case"arm64":return"android-arm64"}s="Android";break;case"win32":switch(process.arch){case"x64":return"win32-x64-msvc";case"arm64":return"win32-arm64-msvc";case"ia32":return"win32-ia32-msvc"}s="Windows";break;case"darwin":switch(process.arch){case"x64":return"darwin-x64";case"arm64":return"darwin-arm64"}s="macOS";break;case"linux":switch(process.arch){case"x64":case"arm64":return e()?`linux-${process.arch}-gnu`:`linux-${process.arch}-musl`;case"arm":return"linux-arm-gnueabihf"}s="Linux";break;case"freebsd":if(process.arch==="x64")return"freebsd-x64";s="FreeBSD";break}throw s?new Error(`Neon: unsupported ${s} architecture: ${process.arch}`):new Error(`Neon: unsupported system: ${process.platform}`)}Aa.currentTarget=n;function e(){var a;const s=(a=process.report)==null?void 0:a.getReport();if(typeof s!="object"||!s||!("header"in s))return!1;const o=s.header;return typeof o=="object"&&!!o&&"glibcVersionRuntime"in o}function*t(s,o){const a=Math.max(s.length,o.length);for(let c=0;c<a;c++)c<s.length&&(yield s[c]),c<o.length&&(yield o[c])}function i(s,...o){return[...t(s,o)].join("")+"/"+n()}Aa.bin=i;function r(s,o){let a=null;function c(){if(a)return a;const f=n();if(!s.hasOwnProperty(f))throw new Error(`no precompiled module found for ${f}`);return a=s[f](),a}let u={};for(const f of o)Object.defineProperty(u,f,{get(){return c()[f]}});return u}return Aa.lazy=r,Aa}var zA,EF;function _4(){if(EF)return zA;EF=1;const{currentTarget:n}=vne();let e;try{e=require("./index.node")}catch{try{e=_ne(`@lancedb/vectordb-${n()}`)}catch(t){throw new Error(`vectordb: failed to load native library.
  You may need to run \`npm install @lancedb/vectordb-${n()}\`.

  If that does not work, please file a bug report at https://github.com/lancedb/lancedb/issues

  Source error: ${t}`)}}return zA=e,zA}var CF;function v4(){if(CF)return ey;CF=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.Query=void 0;const n=bp(),{tableSearch:e}=_4();class t{constructor(r,s,o){this.where=this.filter,this._tbl=s,this._query=r,this._limit=10,this._nprobes=20,this._refineFactor=void 0,this._select=void 0,this._filter=void 0,this._metricType=void 0,this._embeddings=o,this._prefilter=!1,this._fastSearch=!1}limit(r){return this._limit=r,this}refineFactor(r){return this._refineFactor=r,this}nprobes(r){return this._nprobes=r,this}filter(r){return this._filter=r,this}select(r){return this._select=r,this}metricType(r){return this._metricType=r,this}prefilter(r){return this._prefilter=r,this}fastSearch(r){return this._fastSearch=r,this}async execute(){this._query!==void 0&&(this._embeddings!==void 0?this._queryVector=(await this._embeddings.embed([this._query]))[0]:this._queryVector=this._query);const r=this.isElectron(),s=await e.call(this._tbl,this,r);return(0,n.tableFromIPC)(s).toArray().map(a=>{const c={};return Object.keys(a).forEach(u=>{a[u]instanceof n.Vector?c[u]=a[u].toJSON():c[u]=a[u]}),c})}isElectron(){var r,s,o;try{return((r=process==null?void 0:process.versions)==null?void 0:r.hasOwnProperty("electron"))||((o=(s=navigator==null?void 0:navigator.userAgent)==null?void 0:s.toLowerCase())==null?void 0:o.includes(" electron"))}catch{return!1}}}return ey.Query=t,ey}var ty={};/*! Axios v1.9.0 Copyright (c) 2025 Matt Zabriskie and contributors */var VA,IF;function Sne(){if(IF)return VA;IF=1;function n(B,P){return function(){return B.apply(P,arguments)}}const{toString:e}=Object.prototype,{getPrototypeOf:t}=Object,{iterator:i,toStringTag:r}=Symbol,s=(B=>P=>{const W=e.call(P);return B[W]||(B[W]=W.slice(8,-1).toLowerCase())})(Object.create(null)),o=B=>(B=B.toLowerCase(),P=>s(P)===B),a=B=>P=>typeof P===B,{isArray:c}=Array,u=a("undefined");function f(B){return B!==null&&!u(B)&&B.constructor!==null&&!u(B.constructor)&&v(B.constructor.isBuffer)&&B.constructor.isBuffer(B)}const p=o("ArrayBuffer");function m(B){let P;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?P=ArrayBuffer.isView(B):P=B&&B.buffer&&p(B.buffer),P}const g=a("string"),v=a("function"),w=a("number"),A=B=>B!==null&&typeof B=="object",E=B=>B===!0||B===!1,M=B=>{if(s(B)!=="object")return!1;const P=t(B);return(P===null||P===Object.prototype||Object.getPrototypeOf(P)===null)&&!(r in B)&&!(i in B)},I=o("Date"),R=o("File"),D=o("Blob"),C=o("FileList"),k=B=>A(B)&&v(B.pipe),j=B=>{let P;return B&&(typeof FormData=="function"&&B instanceof FormData||v(B.append)&&((P=s(B))==="formdata"||P==="object"&&v(B.toString)&&B.toString()==="[object FormData]"))},U=o("URLSearchParams"),[F,J,G,ee]=["ReadableStream","Request","Response","Headers"].map(o),oe=B=>B.trim?B.trim():B.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function me(B,P,{allOwnKeys:W=!1}={}){if(B===null||typeof B>"u")return;let K,se;if(typeof B!="object"&&(B=[B]),c(B))for(K=0,se=B.length;K<se;K++)P.call(null,B[K],K,B);else{const ye=W?Object.getOwnPropertyNames(B):Object.keys(B),be=ye.length;let Fe;for(K=0;K<be;K++)Fe=ye[K],P.call(null,B[Fe],Fe,B)}}function Q(B,P){P=P.toLowerCase();const W=Object.keys(B);let K=W.length,se;for(;K-- >0;)if(se=W[K],P===se.toLowerCase())return se;return null}const V=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:oV,te=B=>!u(B)&&B!==V;function xe(){const{caseless:B}=te(this)&&this||{},P={},W=(K,se)=>{const ye=B&&Q(P,se)||se;M(P[ye])&&M(K)?P[ye]=xe(P[ye],K):M(K)?P[ye]=xe({},K):c(K)?P[ye]=K.slice():P[ye]=K};for(let K=0,se=arguments.length;K<se;K++)arguments[K]&&me(arguments[K],W);return P}const N=(B,P,W,{allOwnKeys:K}={})=>(me(P,(se,ye)=>{W&&v(se)?B[ye]=n(se,W):B[ye]=se},{allOwnKeys:K}),B),ce=B=>(B.charCodeAt(0)===65279&&(B=B.slice(1)),B),Me=(B,P,W,K)=>{B.prototype=Object.create(P.prototype,K),B.prototype.constructor=B,Object.defineProperty(B,"super",{value:P.prototype}),W&&Object.assign(B.prototype,W)},q=(B,P,W,K)=>{let se,ye,be;const Fe={};if(P=P||{},B==null)return P;do{for(se=Object.getOwnPropertyNames(B),ye=se.length;ye-- >0;)be=se[ye],(!K||K(be,B,P))&&!Fe[be]&&(P[be]=B[be],Fe[be]=!0);B=W!==!1&&t(B)}while(B&&(!W||W(B,P))&&B!==Object.prototype);return P},Re=(B,P,W)=>{B=String(B),(W===void 0||W>B.length)&&(W=B.length),W-=P.length;const K=B.indexOf(P,W);return K!==-1&&K===W},je=B=>{if(!B)return null;if(c(B))return B;let P=B.length;if(!w(P))return null;const W=new Array(P);for(;P-- >0;)W[P]=B[P];return W},re=(B=>P=>B&&P instanceof B)(typeof Uint8Array<"u"&&t(Uint8Array)),ae=(B,P)=>{const K=(B&&B[i]).call(B);let se;for(;(se=K.next())&&!se.done;){const ye=se.value;P.call(B,ye[0],ye[1])}},de=(B,P)=>{let W;const K=[];for(;(W=B.exec(P))!==null;)K.push(W);return K},fe=o("HTMLFormElement"),Pe=B=>B.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(W,K,se){return K.toUpperCase()+se}),Ue=(({hasOwnProperty:B})=>(P,W)=>B.call(P,W))(Object.prototype),Je=o("RegExp"),$e=(B,P)=>{const W=Object.getOwnPropertyDescriptors(B),K={};me(W,(se,ye)=>{let be;(be=P(se,ye,B))!==!1&&(K[ye]=be||se)}),Object.defineProperties(B,K)},tt=B=>{$e(B,(P,W)=>{if(v(B)&&["arguments","caller","callee"].indexOf(W)!==-1)return!1;const K=B[W];if(v(K)){if(P.enumerable=!1,"writable"in P){P.writable=!1;return}P.set||(P.set=()=>{throw Error("Can not rewrite read-only method '"+W+"'")})}})},Ut=(B,P)=>{const W={},K=se=>{se.forEach(ye=>{W[ye]=!0})};return c(B)?K(B):K(String(B).split(P)),W},zt=()=>{},Zt=(B,P)=>B!=null&&Number.isFinite(B=+B)?B:P;function $t(B){return!!(B&&v(B.append)&&B[r]==="FormData"&&B[i])}const we=B=>{const P=new Array(10),W=(K,se)=>{if(A(K)){if(P.indexOf(K)>=0)return;if(!("toJSON"in K)){P[se]=K;const ye=c(K)?[]:{};return me(K,(be,Fe)=>{const nt=W(be,se+1);!u(nt)&&(ye[Fe]=nt)}),P[se]=void 0,ye}}return K};return W(B,0)},Ae=o("AsyncFunction"),Se=B=>B&&(A(B)||v(B))&&v(B.then)&&v(B.catch),Ze=((B,P)=>B?setImmediate:P?((W,K)=>(V.addEventListener("message",({source:se,data:ye})=>{se===V&&ye===W&&K.length&&K.shift()()},!1),se=>{K.push(se),V.postMessage(W,"*")}))(`axios@${Math.random()}`,[]):W=>setTimeout(W))(typeof setImmediate=="function",v(V.postMessage)),ge=typeof queueMicrotask<"u"?queueMicrotask.bind(V):typeof process<"u"&&process.nextTick||Ze;var Y={isArray:c,isArrayBuffer:p,isBuffer:f,isFormData:j,isArrayBufferView:m,isString:g,isNumber:w,isBoolean:E,isObject:A,isPlainObject:M,isReadableStream:F,isRequest:J,isResponse:G,isHeaders:ee,isUndefined:u,isDate:I,isFile:R,isBlob:D,isRegExp:Je,isFunction:v,isStream:k,isURLSearchParams:U,isTypedArray:re,isFileList:C,forEach:me,merge:xe,extend:N,trim:oe,stripBOM:ce,inherits:Me,toFlatObject:q,kindOf:s,kindOfTest:o,endsWith:Re,toArray:je,forEachEntry:ae,matchAll:de,isHTMLForm:fe,hasOwnProperty:Ue,hasOwnProp:Ue,reduceDescriptors:$e,freezeMethods:tt,toObjectSet:Ut,toCamelCase:Pe,noop:zt,toFiniteNumber:Zt,findKey:Q,global:V,isContextDefined:te,isSpecCompliantForm:$t,toJSONObject:we,isAsyncFn:Ae,isThenable:Se,setImmediate:Ze,asap:ge,isIterable:B=>B!=null&&v(B[i])};function Z(B,P,W,K,se){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=B,this.name="AxiosError",P&&(this.code=P),W&&(this.config=W),K&&(this.request=K),se&&(this.response=se,this.status=se.status?se.status:null)}Y.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Y.toJSONObject(this.config),code:this.code,status:this.status}}});const ue=Z.prototype,Oe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(B=>{Oe[B]={value:B}}),Object.defineProperties(Z,Oe),Object.defineProperty(ue,"isAxiosError",{value:!0}),Z.from=(B,P,W,K,se,ye)=>{const be=Object.create(ue);return Y.toFlatObject(B,be,function(nt){return nt!==Error.prototype},Fe=>Fe!=="isAxiosError"),Z.call(be,B.message,P,W,K,se),be.cause=B,be.name=B.name,ye&&Object.assign(be,ye),be};var Le=null;function st(B){return Y.isPlainObject(B)||Y.isArray(B)}function Yt(B){return Y.endsWith(B,"[]")?B.slice(0,-2):B}function ei(B,P,W){return B?B.concat(P).map(function(se,ye){return se=Yt(se),!W&&ye?"["+se+"]":se}).join(W?".":""):P}function Mn(B){return Y.isArray(B)&&!B.some(st)}const Si=Y.toFlatObject(Y,{},null,function(P){return/^is[A-Z]/.test(P)});function En(B,P,W){if(!Y.isObject(B))throw new TypeError("target must be an object");P=P||new FormData,W=Y.toFlatObject(W,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Tt,ct){return!Y.isUndefined(ct[Tt])});const K=W.metaTokens,se=W.visitor||He,ye=W.dots,be=W.indexes,nt=(W.Blob||typeof Blob<"u"&&Blob)&&Y.isSpecCompliantForm(P);if(!Y.isFunction(se))throw new TypeError("visitor must be a function");function qe(at){if(at===null)return"";if(Y.isDate(at))return at.toISOString();if(!nt&&Y.isBlob(at))throw new Z("Blob is not supported. Use a Buffer instead.");return Y.isArrayBuffer(at)||Y.isTypedArray(at)?nt&&typeof Blob=="function"?new Blob([at]):Buffer.from(at):at}function He(at,Tt,ct){let Rn=at;if(at&&!ct&&typeof at=="object"){if(Y.endsWith(Tt,"{}"))Tt=K?Tt:Tt.slice(0,-2),at=JSON.stringify(at);else if(Y.isArray(at)&&Mn(at)||(Y.isFileList(at)||Y.endsWith(Tt,"[]"))&&(Rn=Y.toArray(at)))return Tt=Yt(Tt),Rn.forEach(function(ii,ks){!(Y.isUndefined(ii)||ii===null)&&P.append(be===!0?ei([Tt],ks,ye):be===null?Tt:Tt+"[]",qe(ii))}),!1}return st(at)?!0:(P.append(ei(ct,Tt,ye),qe(at)),!1)}const ut=[],an=Object.assign(Si,{defaultVisitor:He,convertValue:qe,isVisitable:st});function Hn(at,Tt){if(!Y.isUndefined(at)){if(ut.indexOf(at)!==-1)throw Error("Circular reference detected in "+Tt.join("."));ut.push(at),Y.forEach(at,function(Rn,Un){(!(Y.isUndefined(Rn)||Rn===null)&&se.call(P,Rn,Y.isString(Un)?Un.trim():Un,Tt,an))===!0&&Hn(Rn,Tt?Tt.concat(Un):[Un])}),ut.pop()}}if(!Y.isObject(B))throw new TypeError("data must be an object");return Hn(B),P}function vn(B){const P={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(B).replace(/[!'()~]|%20|%00/g,function(K){return P[K]})}function Ce(B,P){this._pairs=[],B&&En(B,this,P)}const ve=Ce.prototype;ve.append=function(P,W){this._pairs.push([P,W])},ve.toString=function(P){const W=P?function(K){return P.call(this,K,vn)}:vn;return this._pairs.map(function(se){return W(se[0])+"="+W(se[1])},"").join("&")};function mn(B){return encodeURIComponent(B).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ui(B,P,W){if(!P)return B;const K=W&&W.encode||mn;Y.isFunction(W)&&(W={serialize:W});const se=W&&W.serialize;let ye;if(se?ye=se(P,W):ye=Y.isURLSearchParams(P)?P.toString():new Ce(P,W).toString(K),ye){const be=B.indexOf("#");be!==-1&&(B=B.slice(0,be)),B+=(B.indexOf("?")===-1?"?":"&")+ye}return B}class tr{constructor(){this.handlers=[]}use(P,W,K){return this.handlers.push({fulfilled:P,rejected:W,synchronous:K?K.synchronous:!1,runWhen:K?K.runWhen:null}),this.handlers.length-1}eject(P){this.handlers[P]&&(this.handlers[P]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(P){Y.forEach(this.handlers,function(K){K!==null&&P(K)})}}var pr=tr,$o={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ru=typeof URLSearchParams<"u"?URLSearchParams:Ce,g_=typeof FormData<"u"?FormData:null,_p=typeof Blob<"u"?Blob:null,vp={isBrowser:!0,classes:{URLSearchParams:Ru,FormData:g_,Blob:_p},protocols:["http","https","file","blob","url","data"]};const jd=typeof window<"u"&&typeof document<"u",Sp=typeof navigator=="object"&&navigator||void 0,lo=jd&&(!Sp||["ReactNative","NativeScript","NS"].indexOf(Sp.product)<0),wi=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zi=jd&&window.location.href||"http://localhost";var cl=Object.freeze({__proto__:null,hasBrowserEnv:jd,hasStandardBrowserWebWorkerEnv:wi,hasStandardBrowserEnv:lo,navigator:Sp,origin:zi}),ti={...cl,...vp};function KS(B,P){return En(B,new ti.classes.URLSearchParams,Object.assign({visitor:function(W,K,se,ye){return ti.isNode&&Y.isBuffer(W)?(this.append(K,W.toString("base64")),!1):ye.defaultVisitor.apply(this,arguments)}},P))}function XS(B){return Y.matchAll(/\w+|\[(\w*)]/g,B).map(P=>P[0]==="[]"?"":P[1]||P[0])}function y_(B){const P={},W=Object.keys(B);let K;const se=W.length;let ye;for(K=0;K<se;K++)ye=W[K],P[ye]=B[ye];return P}function dl(B){function P(W,K,se,ye){let be=W[ye++];if(be==="__proto__")return!0;const Fe=Number.isFinite(+be),nt=ye>=W.length;return be=!be&&Y.isArray(se)?se.length:be,nt?(Y.hasOwnProp(se,be)?se[be]=[se[be],K]:se[be]=K,!Fe):((!se[be]||!Y.isObject(se[be]))&&(se[be]=[]),P(W,K,se[be],ye)&&Y.isArray(se[be])&&(se[be]=y_(se[be])),!Fe)}if(Y.isFormData(B)&&Y.isFunction(B.entries)){const W={};return Y.forEachEntry(B,(K,se)=>{P(XS(K),se,W,0)}),W}return null}function wp(B,P,W){if(Y.isString(B))try{return(P||JSON.parse)(B),Y.trim(B)}catch(K){if(K.name!=="SyntaxError")throw K}return(W||JSON.stringify)(B)}const uo={transitional:$o,adapter:["xhr","http","fetch"],transformRequest:[function(P,W){const K=W.getContentType()||"",se=K.indexOf("application/json")>-1,ye=Y.isObject(P);if(ye&&Y.isHTMLForm(P)&&(P=new FormData(P)),Y.isFormData(P))return se?JSON.stringify(dl(P)):P;if(Y.isArrayBuffer(P)||Y.isBuffer(P)||Y.isStream(P)||Y.isFile(P)||Y.isBlob(P)||Y.isReadableStream(P))return P;if(Y.isArrayBufferView(P))return P.buffer;if(Y.isURLSearchParams(P))return W.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),P.toString();let Fe;if(ye){if(K.indexOf("application/x-www-form-urlencoded")>-1)return KS(P,this.formSerializer).toString();if((Fe=Y.isFileList(P))||K.indexOf("multipart/form-data")>-1){const nt=this.env&&this.env.FormData;return En(Fe?{"files[]":P}:P,nt&&new nt,this.formSerializer)}}return ye||se?(W.setContentType("application/json",!1),wp(P)):P}],transformResponse:[function(P){const W=this.transitional||uo.transitional,K=W&&W.forcedJSONParsing,se=this.responseType==="json";if(Y.isResponse(P)||Y.isReadableStream(P))return P;if(P&&Y.isString(P)&&(K&&!this.responseType||se)){const be=!(W&&W.silentJSONParsing)&&se;try{return JSON.parse(P)}catch(Fe){if(be)throw Fe.name==="SyntaxError"?Z.from(Fe,Z.ERR_BAD_RESPONSE,this,null,this.response):Fe}}return P}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ti.classes.FormData,Blob:ti.classes.Blob},validateStatus:function(P){return P>=200&&P<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Y.forEach(["delete","get","head","post","put","patch"],B=>{uo.headers[B]={}});var co=uo;const ku=Y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var fl=B=>{const P={};let W,K,se;return B&&B.split(`
`).forEach(function(be){se=be.indexOf(":"),W=be.substring(0,se).trim().toLowerCase(),K=be.substring(se+1).trim(),!(!W||P[W]&&ku[W])&&(W==="set-cookie"?P[W]?P[W].push(K):P[W]=[K]:P[W]=P[W]?P[W]+", "+K:K)}),P};const qn=Symbol("internals");function hl(B){return B&&String(B).trim().toLowerCase()}function Nu(B){return B===!1||B==null?B:Y.isArray(B)?B.map(Nu):String(B)}function Yo(B){const P=Object.create(null),W=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let K;for(;K=W.exec(B);)P[K[1]]=K[2];return P}const pl=B=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(B.trim());function Tp(B,P,W,K,se){if(Y.isFunction(K))return K.call(this,P,W);if(se&&(P=W),!!Y.isString(P)){if(Y.isString(K))return P.indexOf(K)!==-1;if(Y.isRegExp(K))return K.test(P)}}function b_(B){return B.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(P,W,K)=>W.toUpperCase()+K)}function __(B,P){const W=Y.toCamelCase(" "+P);["get","set","has"].forEach(K=>{Object.defineProperty(B,K+W,{value:function(se,ye,be){return this[K].call(this,P,se,ye,be)},configurable:!0})})}class qd{constructor(P){P&&this.set(P)}set(P,W,K){const se=this;function ye(Fe,nt,qe){const He=hl(nt);if(!He)throw new Error("header name must be a non-empty string");const ut=Y.findKey(se,He);(!ut||se[ut]===void 0||qe===!0||qe===void 0&&se[ut]!==!1)&&(se[ut||nt]=Nu(Fe))}const be=(Fe,nt)=>Y.forEach(Fe,(qe,He)=>ye(qe,He,nt));if(Y.isPlainObject(P)||P instanceof this.constructor)be(P,W);else if(Y.isString(P)&&(P=P.trim())&&!pl(P))be(fl(P),W);else if(Y.isObject(P)&&Y.isIterable(P)){let Fe={},nt,qe;for(const He of P){if(!Y.isArray(He))throw TypeError("Object iterator must return a key-value pair");Fe[qe=He[0]]=(nt=Fe[qe])?Y.isArray(nt)?[...nt,He[1]]:[nt,He[1]]:He[1]}be(Fe,W)}else P!=null&&ye(W,P,K);return this}get(P,W){if(P=hl(P),P){const K=Y.findKey(this,P);if(K){const se=this[K];if(!W)return se;if(W===!0)return Yo(se);if(Y.isFunction(W))return W.call(this,se,K);if(Y.isRegExp(W))return W.exec(se);throw new TypeError("parser must be boolean|regexp|function")}}}has(P,W){if(P=hl(P),P){const K=Y.findKey(this,P);return!!(K&&this[K]!==void 0&&(!W||Tp(this,this[K],K,W)))}return!1}delete(P,W){const K=this;let se=!1;function ye(be){if(be=hl(be),be){const Fe=Y.findKey(K,be);Fe&&(!W||Tp(K,K[Fe],Fe,W))&&(delete K[Fe],se=!0)}}return Y.isArray(P)?P.forEach(ye):ye(P),se}clear(P){const W=Object.keys(this);let K=W.length,se=!1;for(;K--;){const ye=W[K];(!P||Tp(this,this[ye],ye,P,!0))&&(delete this[ye],se=!0)}return se}normalize(P){const W=this,K={};return Y.forEach(this,(se,ye)=>{const be=Y.findKey(K,ye);if(be){W[be]=Nu(se),delete W[ye];return}const Fe=P?b_(ye):String(ye).trim();Fe!==ye&&delete W[ye],W[Fe]=Nu(se),K[Fe]=!0}),this}concat(...P){return this.constructor.concat(this,...P)}toJSON(P){const W=Object.create(null);return Y.forEach(this,(K,se)=>{K!=null&&K!==!1&&(W[se]=P&&Y.isArray(K)?K.join(", "):K)}),W}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([P,W])=>P+": "+W).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(P){return P instanceof this?P:new this(P)}static concat(P,...W){const K=new this(P);return W.forEach(se=>K.set(se)),K}static accessor(P){const K=(this[qn]=this[qn]={accessors:{}}).accessors,se=this.prototype;function ye(be){const Fe=hl(be);K[Fe]||(__(se,be),K[Fe]=!0)}return Y.isArray(P)?P.forEach(ye):ye(P),this}}qd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Y.reduceDescriptors(qd.prototype,({value:B},P)=>{let W=P[0].toUpperCase()+P.slice(1);return{get:()=>B,set(K){this[W]=K}}}),Y.freezeMethods(qd);var Vi=qd;function ml(B,P){const W=this||co,K=P||W,se=Vi.from(K.headers);let ye=K.data;return Y.forEach(B,function(Fe){ye=Fe.call(W,ye,se.normalize(),P?P.status:void 0)}),se.normalize(),ye}function ss(B){return!!(B&&B.__CANCEL__)}function fo(B,P,W){Z.call(this,B??"canceled",Z.ERR_CANCELED,P,W),this.name="CanceledError"}Y.inherits(fo,Z,{__CANCEL__:!0});function Ap(B,P,W){const K=W.config.validateStatus;!W.status||!K||K(W.status)?B(W):P(new Z("Request failed with status code "+W.status,[Z.ERR_BAD_REQUEST,Z.ERR_BAD_RESPONSE][Math.floor(W.status/100)-4],W.config,W.request,W))}function gl(B){const P=/^([-+\w]{1,25})(:?\/\/|:)/.exec(B);return P&&P[1]||""}function Ep(B,P){B=B||10;const W=new Array(B),K=new Array(B);let se=0,ye=0,be;return P=P!==void 0?P:1e3,function(nt){const qe=Date.now(),He=K[ye];be||(be=qe),W[se]=nt,K[se]=qe;let ut=ye,an=0;for(;ut!==se;)an+=W[ut++],ut=ut%B;if(se=(se+1)%B,se===ye&&(ye=(ye+1)%B),qe-be<P)return;const Hn=He&&qe-He;return Hn?Math.round(an*1e3/Hn):void 0}}function Cp(B,P){let W=0,K=1e3/P,se,ye;const be=(qe,He=Date.now())=>{W=He,se=null,ye&&(clearTimeout(ye),ye=null),B.apply(null,qe)};return[(...qe)=>{const He=Date.now(),ut=He-W;ut>=K?be(qe,He):(se=qe,ye||(ye=setTimeout(()=>{ye=null,be(se)},K-ut)))},()=>se&&be(se)]}const Hd=(B,P,W=3)=>{let K=0;const se=Ep(50,250);return Cp(ye=>{const be=ye.loaded,Fe=ye.lengthComputable?ye.total:void 0,nt=be-K,qe=se(nt),He=be<=Fe;K=be;const ut={loaded:be,total:Fe,progress:Fe?be/Fe:void 0,bytes:nt,rate:qe||void 0,estimated:qe&&Fe&&He?(Fe-be)/qe:void 0,event:ye,lengthComputable:Fe!=null,[P?"download":"upload"]:!0};B(ut)},W)},Ip=(B,P)=>{const W=B!=null;return[K=>P[0]({lengthComputable:W,total:B,loaded:K}),P[1]]},nr=B=>(...P)=>Y.asap(()=>B(...P));var v_=ti.hasStandardBrowserEnv?((B,P)=>W=>(W=new URL(W,ti.origin),B.protocol===W.protocol&&B.host===W.host&&(P||B.port===W.port)))(new URL(ti.origin),ti.navigator&&/(msie|trident)/i.test(ti.navigator.userAgent)):()=>!0,JS=ti.hasStandardBrowserEnv?{write(B,P,W,K,se,ye){const be=[B+"="+encodeURIComponent(P)];Y.isNumber(W)&&be.push("expires="+new Date(W).toGMTString()),Y.isString(K)&&be.push("path="+K),Y.isString(se)&&be.push("domain="+se),ye===!0&&be.push("secure"),document.cookie=be.join("; ")},read(B){const P=document.cookie.match(new RegExp("(^|;\\s*)("+B+")=([^;]*)"));return P?decodeURIComponent(P[3]):null},remove(B){this.write(B,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Gd(B){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(B)}function S_(B,P){return P?B.replace(/\/?\/$/,"")+"/"+P.replace(/^\/+/,""):B}function Ou(B,P,W){let K=!Gd(P);return B&&(K||W==!1)?S_(B,P):P}const w_=B=>B instanceof Vi?{...B}:B;function ni(B,P){P=P||{};const W={};function K(qe,He,ut,an){return Y.isPlainObject(qe)&&Y.isPlainObject(He)?Y.merge.call({caseless:an},qe,He):Y.isPlainObject(He)?Y.merge({},He):Y.isArray(He)?He.slice():He}function se(qe,He,ut,an){if(Y.isUndefined(He)){if(!Y.isUndefined(qe))return K(void 0,qe,ut,an)}else return K(qe,He,ut,an)}function ye(qe,He){if(!Y.isUndefined(He))return K(void 0,He)}function be(qe,He){if(Y.isUndefined(He)){if(!Y.isUndefined(qe))return K(void 0,qe)}else return K(void 0,He)}function Fe(qe,He,ut){if(ut in P)return K(qe,He);if(ut in B)return K(void 0,qe)}const nt={url:ye,method:ye,data:ye,baseURL:be,transformRequest:be,transformResponse:be,paramsSerializer:be,timeout:be,timeoutMessage:be,withCredentials:be,withXSRFToken:be,adapter:be,responseType:be,xsrfCookieName:be,xsrfHeaderName:be,onUploadProgress:be,onDownloadProgress:be,decompress:be,maxContentLength:be,maxBodyLength:be,beforeRedirect:be,transport:be,httpAgent:be,httpsAgent:be,cancelToken:be,socketPath:be,responseEncoding:be,validateStatus:Fe,headers:(qe,He,ut)=>se(w_(qe),w_(He),ut,!0)};return Y.forEach(Object.keys(Object.assign({},B,P)),function(He){const ut=nt[He]||se,an=ut(B[He],P[He],He);Y.isUndefined(an)&&ut!==Fe||(W[He]=an)}),W}var $d=B=>{const P=ni({},B);let{data:W,withXSRFToken:K,xsrfHeaderName:se,xsrfCookieName:ye,headers:be,auth:Fe}=P;P.headers=be=Vi.from(be),P.url=Ui(Ou(P.baseURL,P.url,P.allowAbsoluteUrls),B.params,B.paramsSerializer),Fe&&be.set("Authorization","Basic "+btoa((Fe.username||"")+":"+(Fe.password?unescape(encodeURIComponent(Fe.password)):"")));let nt;if(Y.isFormData(W)){if(ti.hasStandardBrowserEnv||ti.hasStandardBrowserWebWorkerEnv)be.setContentType(void 0);else if((nt=be.getContentType())!==!1){const[qe,...He]=nt?nt.split(";").map(ut=>ut.trim()).filter(Boolean):[];be.setContentType([qe||"multipart/form-data",...He].join("; "))}}if(ti.hasStandardBrowserEnv&&(K&&Y.isFunction(K)&&(K=K(P)),K||K!==!1&&v_(P.url))){const qe=se&&ye&&JS.read(ye);qe&&be.set(se,qe)}return P},xp=typeof XMLHttpRequest<"u"&&function(B){return new Promise(function(W,K){const se=$d(B);let ye=se.data;const be=Vi.from(se.headers).normalize();let{responseType:Fe,onUploadProgress:nt,onDownloadProgress:qe}=se,He,ut,an,Hn,at;function Tt(){Hn&&Hn(),at&&at(),se.cancelToken&&se.cancelToken.unsubscribe(He),se.signal&&se.signal.removeEventListener("abort",He)}let ct=new XMLHttpRequest;ct.open(se.method.toUpperCase(),se.url,!0),ct.timeout=se.timeout;function Rn(){if(!ct)return;const ii=Vi.from("getAllResponseHeaders"in ct&&ct.getAllResponseHeaders()),ji={data:!Fe||Fe==="text"||Fe==="json"?ct.responseText:ct.response,status:ct.status,statusText:ct.statusText,headers:ii,config:B,request:ct};Ap(function(Jo){W(Jo),Tt()},function(Jo){K(Jo),Tt()},ji),ct=null}"onloadend"in ct?ct.onloadend=Rn:ct.onreadystatechange=function(){!ct||ct.readyState!==4||ct.status===0&&!(ct.responseURL&&ct.responseURL.indexOf("file:")===0)||setTimeout(Rn)},ct.onabort=function(){ct&&(K(new Z("Request aborted",Z.ECONNABORTED,B,ct)),ct=null)},ct.onerror=function(){K(new Z("Network Error",Z.ERR_NETWORK,B,ct)),ct=null},ct.ontimeout=function(){let ks=se.timeout?"timeout of "+se.timeout+"ms exceeded":"timeout exceeded";const ji=se.transitional||$o;se.timeoutErrorMessage&&(ks=se.timeoutErrorMessage),K(new Z(ks,ji.clarifyTimeoutError?Z.ETIMEDOUT:Z.ECONNABORTED,B,ct)),ct=null},ye===void 0&&be.setContentType(null),"setRequestHeader"in ct&&Y.forEach(be.toJSON(),function(ks,ji){ct.setRequestHeader(ji,ks)}),Y.isUndefined(se.withCredentials)||(ct.withCredentials=!!se.withCredentials),Fe&&Fe!=="json"&&(ct.responseType=se.responseType),qe&&([an,at]=Hd(qe,!0),ct.addEventListener("progress",an)),nt&&ct.upload&&([ut,Hn]=Hd(nt),ct.upload.addEventListener("progress",ut),ct.upload.addEventListener("loadend",Hn)),(se.cancelToken||se.signal)&&(He=ii=>{ct&&(K(!ii||ii.type?new fo(null,B,ct):ii),ct.abort(),ct=null)},se.cancelToken&&se.cancelToken.subscribe(He),se.signal&&(se.signal.aborted?He():se.signal.addEventListener("abort",He)));const Un=gl(se.url);if(Un&&ti.protocols.indexOf(Un)===-1){K(new Z("Unsupported protocol "+Un+":",Z.ERR_BAD_REQUEST,B));return}ct.send(ye||null)})},T_=(B,P)=>{const{length:W}=B=B?B.filter(Boolean):[];if(P||W){let K=new AbortController,se;const ye=function(qe){if(!se){se=!0,Fe();const He=qe instanceof Error?qe:this.reason;K.abort(He instanceof Z?He:new fo(He instanceof Error?He.message:He))}};let be=P&&setTimeout(()=>{be=null,ye(new Z(`timeout ${P} of ms exceeded`,Z.ETIMEDOUT))},P);const Fe=()=>{B&&(be&&clearTimeout(be),be=null,B.forEach(qe=>{qe.unsubscribe?qe.unsubscribe(ye):qe.removeEventListener("abort",ye)}),B=null)};B.forEach(qe=>qe.addEventListener("abort",ye));const{signal:nt}=K;return nt.unsubscribe=()=>Y.asap(Fe),nt}};const A_=function*(B,P){let W=B.byteLength;if(W<P){yield B;return}let K=0,se;for(;K<W;)se=K+P,yield B.slice(K,se),K=se},yl=async function*(B,P){for await(const W of QS(B))yield*A_(W,P)},QS=async function*(B){if(B[Symbol.asyncIterator]){yield*B;return}const P=B.getReader();try{for(;;){const{done:W,value:K}=await P.read();if(W)break;yield K}}finally{await P.cancel()}},Mp=(B,P,W,K)=>{const se=yl(B,P);let ye=0,be,Fe=nt=>{be||(be=!0,K&&K(nt))};return new ReadableStream({async pull(nt){try{const{done:qe,value:He}=await se.next();if(qe){Fe(),nt.close();return}let ut=He.byteLength;if(W){let an=ye+=ut;W(an)}nt.enqueue(new Uint8Array(He))}catch(qe){throw Fe(qe),qe}},cancel(nt){return Fe(nt),se.return()}},{highWaterMark:2})},Fu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Yd=Fu&&typeof ReadableStream=="function",ew=Fu&&(typeof TextEncoder=="function"?(B=>P=>B.encode(P))(new TextEncoder):async B=>new Uint8Array(await new Response(B).arrayBuffer())),E_=(B,...P)=>{try{return!!B(...P)}catch{return!1}},Wd=Yd&&E_(()=>{let B=!1;const P=new Request(ti.origin,{body:new ReadableStream,method:"POST",get duplex(){return B=!0,"half"}}).headers.has("Content-Type");return B&&!P}),Kd=64*1024,Pu=Yd&&E_(()=>Y.isReadableStream(new Response("").body)),Ms={stream:Pu&&(B=>B.body)};Fu&&(B=>{["text","arrayBuffer","blob","formData","stream"].forEach(P=>{!Ms[P]&&(Ms[P]=Y.isFunction(B[P])?W=>W[P]():(W,K)=>{throw new Z(`Response type '${P}' is not supported`,Z.ERR_NOT_SUPPORT,K)})})})(new Response);const bl=async B=>{if(B==null)return 0;if(Y.isBlob(B))return B.size;if(Y.isSpecCompliantForm(B))return(await new Request(ti.origin,{method:"POST",body:B}).arrayBuffer()).byteLength;if(Y.isArrayBufferView(B)||Y.isArrayBuffer(B))return B.byteLength;if(Y.isURLSearchParams(B)&&(B=B+""),Y.isString(B))return(await ew(B)).byteLength},C_=async(B,P)=>{const W=Y.toFiniteNumber(B.getContentLength());return W??bl(P)};var Dp=Fu&&(async B=>{let{url:P,method:W,data:K,signal:se,cancelToken:ye,timeout:be,onDownloadProgress:Fe,onUploadProgress:nt,responseType:qe,headers:He,withCredentials:ut="same-origin",fetchOptions:an}=$d(B);qe=qe?(qe+"").toLowerCase():"text";let Hn=T_([se,ye&&ye.toAbortSignal()],be),at;const Tt=Hn&&Hn.unsubscribe&&(()=>{Hn.unsubscribe()});let ct;try{if(nt&&Wd&&W!=="get"&&W!=="head"&&(ct=await C_(He,K))!==0){let ji=new Request(P,{method:"POST",body:K,duplex:"half"}),ho;if(Y.isFormData(K)&&(ho=ji.headers.get("content-type"))&&He.setContentType(ho),ji.body){const[Jo,ef]=Ip(ct,Hd(nr(nt)));K=Mp(ji.body,Kd,Jo,ef)}}Y.isString(ut)||(ut=ut?"include":"omit");const Rn="credentials"in Request.prototype;at=new Request(P,{...an,signal:Hn,method:W.toUpperCase(),headers:He.normalize().toJSON(),body:K,duplex:"half",credentials:Rn?ut:void 0});let Un=await fetch(at);const ii=Pu&&(qe==="stream"||qe==="response");if(Pu&&(Fe||ii&&Tt)){const ji={};["status","statusText","headers"].forEach(I_=>{ji[I_]=Un[I_]});const ho=Y.toFiniteNumber(Un.headers.get("content-length")),[Jo,ef]=Fe&&Ip(ho,Hd(nr(Fe),!0))||[];Un=new Response(Mp(Un.body,Kd,Jo,()=>{ef&&ef(),Tt&&Tt()}),ji)}qe=qe||"text";let ks=await Ms[Y.findKey(Ms,qe)||"text"](Un,B);return!ii&&Tt&&Tt(),await new Promise((ji,ho)=>{Ap(ji,ho,{data:ks,headers:Vi.from(Un.headers),status:Un.status,statusText:Un.statusText,config:B,request:at})})}catch(Rn){throw Tt&&Tt(),Rn&&Rn.name==="TypeError"&&/Load failed|fetch/i.test(Rn.message)?Object.assign(new Z("Network Error",Z.ERR_NETWORK,B,at),{cause:Rn.cause||Rn}):Z.from(Rn,Rn&&Rn.code,B,at)}});const Xd={http:Le,xhr:xp,fetch:Dp};Y.forEach(Xd,(B,P)=>{if(B){try{Object.defineProperty(B,"name",{value:P})}catch{}Object.defineProperty(B,"adapterName",{value:P})}});const _l=B=>`- ${B}`,Ds=B=>Y.isFunction(B)||B===null||B===!1;var Jd={getAdapter:B=>{B=Y.isArray(B)?B:[B];const{length:P}=B;let W,K;const se={};for(let ye=0;ye<P;ye++){W=B[ye];let be;if(K=W,!Ds(W)&&(K=Xd[(be=String(W)).toLowerCase()],K===void 0))throw new Z(`Unknown adapter '${be}'`);if(K)break;se[be||"#"+ye]=K}if(!K){const ye=Object.entries(se).map(([Fe,nt])=>`adapter ${Fe} `+(nt===!1?"is not supported by the environment":"is not available in the build"));let be=P?ye.length>1?`since :
`+ye.map(_l).join(`
`):" "+_l(ye[0]):"as no adapter specified";throw new Z("There is no suitable adapter to dispatch the request "+be,"ERR_NOT_SUPPORT")}return K},adapters:Xd};function Wo(B){if(B.cancelToken&&B.cancelToken.throwIfRequested(),B.signal&&B.signal.aborted)throw new fo(null,B)}function Rs(B){return Wo(B),B.headers=Vi.from(B.headers),B.data=ml.call(B,B.transformRequest),["post","put","patch"].indexOf(B.method)!==-1&&B.headers.setContentType("application/x-www-form-urlencoded",!1),Jd.getAdapter(B.adapter||co.adapter)(B).then(function(K){return Wo(B),K.data=ml.call(B,B.transformResponse,K),K.headers=Vi.from(K.headers),K},function(K){return ss(K)||(Wo(B),K&&K.response&&(K.response.data=ml.call(B,B.transformResponse,K.response),K.response.headers=Vi.from(K.response.headers))),Promise.reject(K)})}const Zd="1.9.0",Ko={};["object","boolean","number","function","string","symbol"].forEach((B,P)=>{Ko[B]=function(K){return typeof K===B||"a"+(P<1?"n ":" ")+B}});const Rp={};Ko.transitional=function(P,W,K){function se(ye,be){return"[Axios v"+Zd+"] Transitional option '"+ye+"'"+be+(K?". "+K:"")}return(ye,be,Fe)=>{if(P===!1)throw new Z(se(be," has been removed"+(W?" in "+W:"")),Z.ERR_DEPRECATED);return W&&!Rp[be]&&(Rp[be]=!0,console.warn(se(be," has been deprecated since v"+W+" and will be removed in the near future"))),P?P(ye,be,Fe):!0}},Ko.spelling=function(P){return(W,K)=>(console.warn(`${K} is likely a misspelling of ${P}`),!0)};function Qd(B,P,W){if(typeof B!="object")throw new Z("options must be an object",Z.ERR_BAD_OPTION_VALUE);const K=Object.keys(B);let se=K.length;for(;se-- >0;){const ye=K[se],be=P[ye];if(be){const Fe=B[ye],nt=Fe===void 0||be(Fe,ye,B);if(nt!==!0)throw new Z("option "+ye+" must be "+nt,Z.ERR_BAD_OPTION_VALUE);continue}if(W!==!0)throw new Z("Unknown option "+ye,Z.ERR_BAD_OPTION)}}var Xo={assertOptions:Qd,validators:Ko};const Mr=Xo.validators;class di{constructor(P){this.defaults=P||{},this.interceptors={request:new pr,response:new pr}}async request(P,W){try{return await this._request(P,W)}catch(K){if(K instanceof Error){let se={};Error.captureStackTrace?Error.captureStackTrace(se):se=new Error;const ye=se.stack?se.stack.replace(/^.+\n/,""):"";try{K.stack?ye&&!String(K.stack).endsWith(ye.replace(/^.+\n.+\n/,""))&&(K.stack+=`
`+ye):K.stack=ye}catch{}}throw K}}_request(P,W){typeof P=="string"?(W=W||{},W.url=P):W=P||{},W=ni(this.defaults,W);const{transitional:K,paramsSerializer:se,headers:ye}=W;K!==void 0&&Xo.assertOptions(K,{silentJSONParsing:Mr.transitional(Mr.boolean),forcedJSONParsing:Mr.transitional(Mr.boolean),clarifyTimeoutError:Mr.transitional(Mr.boolean)},!1),se!=null&&(Y.isFunction(se)?W.paramsSerializer={serialize:se}:Xo.assertOptions(se,{encode:Mr.function,serialize:Mr.function},!0)),W.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?W.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:W.allowAbsoluteUrls=!0),Xo.assertOptions(W,{baseUrl:Mr.spelling("baseURL"),withXsrfToken:Mr.spelling("withXSRFToken")},!0),W.method=(W.method||this.defaults.method||"get").toLowerCase();let be=ye&&Y.merge(ye.common,ye[W.method]);ye&&Y.forEach(["delete","get","head","post","put","patch","common"],at=>{delete ye[at]}),W.headers=Vi.concat(be,ye);const Fe=[];let nt=!0;this.interceptors.request.forEach(function(Tt){typeof Tt.runWhen=="function"&&Tt.runWhen(W)===!1||(nt=nt&&Tt.synchronous,Fe.unshift(Tt.fulfilled,Tt.rejected))});const qe=[];this.interceptors.response.forEach(function(Tt){qe.push(Tt.fulfilled,Tt.rejected)});let He,ut=0,an;if(!nt){const at=[Rs.bind(this),void 0];for(at.unshift.apply(at,Fe),at.push.apply(at,qe),an=at.length,He=Promise.resolve(W);ut<an;)He=He.then(at[ut++],at[ut++]);return He}an=Fe.length;let Hn=W;for(ut=0;ut<an;){const at=Fe[ut++],Tt=Fe[ut++];try{Hn=at(Hn)}catch(ct){Tt.call(this,ct);break}}try{He=Rs.call(this,Hn)}catch(at){return Promise.reject(at)}for(ut=0,an=qe.length;ut<an;)He=He.then(qe[ut++],qe[ut++]);return He}getUri(P){P=ni(this.defaults,P);const W=Ou(P.baseURL,P.url,P.allowAbsoluteUrls);return Ui(W,P.params,P.paramsSerializer)}}Y.forEach(["delete","get","head","options"],function(P){di.prototype[P]=function(W,K){return this.request(ni(K||{},{method:P,url:W,data:(K||{}).data}))}}),Y.forEach(["post","put","patch"],function(P){function W(K){return function(ye,be,Fe){return this.request(ni(Fe||{},{method:P,headers:K?{"Content-Type":"multipart/form-data"}:{},url:ye,data:be}))}}di.prototype[P]=W(),di.prototype[P+"Form"]=W(!0)});var os=di;class vl{constructor(P){if(typeof P!="function")throw new TypeError("executor must be a function.");let W;this.promise=new Promise(function(ye){W=ye});const K=this;this.promise.then(se=>{if(!K._listeners)return;let ye=K._listeners.length;for(;ye-- >0;)K._listeners[ye](se);K._listeners=null}),this.promise.then=se=>{let ye;const be=new Promise(Fe=>{K.subscribe(Fe),ye=Fe}).then(se);return be.cancel=function(){K.unsubscribe(ye)},be},P(function(ye,be,Fe){K.reason||(K.reason=new fo(ye,be,Fe),W(K.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(P){if(this.reason){P(this.reason);return}this._listeners?this._listeners.push(P):this._listeners=[P]}unsubscribe(P){if(!this._listeners)return;const W=this._listeners.indexOf(P);W!==-1&&this._listeners.splice(W,1)}toAbortSignal(){const P=new AbortController,W=K=>{P.abort(K)};return this.subscribe(W),P.signal.unsubscribe=()=>this.unsubscribe(W),P.signal}static source(){let P;return{token:new vl(function(se){P=se}),cancel:P}}}var Lu=vl;function tw(B){return function(W){return B.apply(null,W)}}function kp(B){return Y.isObject(B)&&B.isAxiosError===!0}const Uu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Uu).forEach(([B,P])=>{Uu[P]=B});var zu=Uu;function Vu(B){const P=new os(B),W=n(os.prototype.request,P);return Y.extend(W,os.prototype,P,{allOwnKeys:!0}),Y.extend(W,P,null,{allOwnKeys:!0}),W.create=function(se){return Vu(ni(B,se))},W}const Dn=Vu(co);return Dn.Axios=os,Dn.CanceledError=fo,Dn.CancelToken=Lu,Dn.isCancel=ss,Dn.VERSION=Zd,Dn.toFormData=En,Dn.AxiosError=Z,Dn.Cancel=Dn.CanceledError,Dn.all=function(P){return Promise.all(P)},Dn.spread=tw,Dn.isAxiosError=kp,Dn.mergeConfig=ni,Dn.AxiosHeaders=Vi,Dn.formToJSON=B=>dl(Y.isHTMLForm(B)?new FormData(B):B),Dn.getAdapter=Jd.getAdapter,Dn.HttpStatusCode=zu,Dn.default=Dn,VA=Dn,VA}var ny={},xF;function wne(){if(xF)return ny;xF=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.Method=void 0;var n;return function(e){e[e.GET=0]="GET",e[e.POST=1]="POST"}(n||(ny.Method=n={})),ny}var MF;function Tne(){if(MF)return ty;MF=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.HttpLancedbClient=void 0;const n=Sne(),e=bp(),t=wne();async function i(c,u,f){async function p(m,g){var v;if(m>u.length){const w=Object.fromEntries(g.headers.entries()),A=Object.fromEntries(((v=g.params)==null?void 0:v.entries())??[]),E=f==null?void 0:f.timeout;let M;return g.method===t.Method.POST?M=await n.default.post(g.uri,g.body,{headers:w,params:A,timeout:E,responseType:f==null?void 0:f.responseType}):M=await n.default.get(g.uri,{headers:w,params:A,timeout:E}),r(M)}return await u[m-1].onRemoteRequest(g,async w=>await p(m+1,w))}return await p(1,c)}function r(c){const u=new Map;for(const f in c.headers)u.set(f,c.headers[f]);return{status:c.status,statusText:c.statusText,headers:u,body:async()=>c.data}}async function s(c,u){const f=await c.body();return u==="arraybuffer"?new TextDecoder().decode(f):typeof f=="object"?JSON.stringify(f):f}class o{constructor(u,f,p,m){this._dbName=m,this._url=u,this._apiKey=()=>f,this._middlewares=[],this._timeout=p}get uri(){return this._url}async search(u,f,p,m,g,v,w,A,E,M){const I=await this.post(`/v1/table/${u}/query/`,{vector:f,k:p,nprobes:m,refine_factor:v,columns:w,filter:A,prefilter:g,metric:E,fast_search:M},void 0,void 0,"arraybuffer");return(0,e.tableFromIPC)(await I.body())}async get(u,f){const p={uri:`${this._url}${u}`,method:t.Method.GET,headers:new Map(Object.entries({"Content-Type":"application/json","x-api-key":this._apiKey(),...this._dbName!==void 0?{"x-lancedb-database":this._dbName}:{}})),params:new Map(Object.entries(f??{}))};let m;try{return m=await i(p,this._middlewares),m}catch(g){if(console.error(a(g)),g.response===void 0)throw new Error(`Network Error: ${g.message}`);m=r(g.response)}if(m.status!==200){const g=await s(m);throw new Error(`Server Error, status: ${m.status}, message: ${m.statusText}: ${g}`)}return m}async post(u,f,p,m,g){const v={uri:`${this._url}${u}`,method:t.Method.POST,headers:new Map(Object.entries({"Content-Type":m??"application/json","x-api-key":this._apiKey(),...this._dbName!==void 0?{"x-lancedb-database":this._dbName}:{}})),params:new Map(Object.entries(p??{})),body:f};let w;try{w=await i(v,this._middlewares,{responseType:g,timeout:this._timeout})}catch(A){if(console.error(a(A)),A.response===void 0)throw new Error(`Network Error: ${A.message}`);w=r(A.response)}if(w.status!==200){const A=await s(w,g);throw new Error(`Server Error, status: ${w.status}, message: ${w.statusText}: ${A}`)}return w}withMiddleware(u){const f=this.clone();return f._middlewares.push(u),f}clone(){const u=new o(this._url,this._apiKey(),this._timeout,this._dbName);for(const f of this._middlewares)u._middlewares.push(f);return u}}ty.HttpLancedbClient=o;function a(c){const u=JSON.parse(JSON.stringify(c,Object.getOwnPropertyNames(c)));return u.response=c.response!=null?JSON.parse(JSON.stringify(c.response,Object.getOwnPropertyNames(c.response).filter(f=>f!=="config"))):null,JSON.stringify({error:u})}return ty}var iy={},DF;function S4(){if(DF)return iy;DF=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.isEmbeddingFunction=void 0;function n(e){return typeof e.sourceColumn=="string"&&typeof e.embed=="function"}return iy.isEmbeddingFunction=n,iy}var _c={},RF;function w4(){if(RF)return _c;RF=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.TTLCache=_c.toSQL=void 0;function n(t){if(typeof t=="string")return`'${t}'`;if(typeof t=="number")return t.toString();if(typeof t=="boolean")return t?"TRUE":"FALSE";if(t===null)return"NULL";if(t instanceof Date)return`'${t.toISOString()}'`;if(Array.isArray(t))return`[${t.map(n).join(", ")}]`;throw new Error(`Unsupported value type: ${typeof t} value: (${t})`)}_c.toSQL=n;class e{constructor(i){this.ttl=i,this.cache=new Map}get(i){const r=this.cache.get(i);if(r!==void 0){if(r.expires<Date.now()){this.cache.delete(i);return}return r.value}}set(i,r){this.cache.set(i,{value:r,expires:Date.now()+this.ttl})}delete(i){this.cache.delete(i)}}return _c.TTLCache=e,_c}var kF;function Ane(){if(kF)return Ta;kF=1;var n={};Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.RemoteTable=Ta.RemoteQuery=Ta.RemoteConnection=void 0;const e=T4(),t=v4(),i=bp(),r=Tne(),s=S4(),o=YE(),a=w4();class c{constructor(m){if(this._tableCache=new a.TTLCache(3e5),!m.uri.startsWith("db://"))throw new Error(`Invalid remote DB URI: ${m.uri}`);if((m.apiKey==null||m.apiKey==="")&&(m=Object.assign({},m,{apiKey:n.LANCEDB_API_KEY})),m.apiKey===void 0||m.region===void 0)throw new Error("API key and region are must be passed for remote connections. API key can also be set through LANCEDB_API_KEY env variable.");this._dbName=m.uri.slice(5);let g;m.hostOverride===void 0?g=`https://${this._dbName}.${m.region}.api.lancedb.com`:g=m.hostOverride,this._client=new r.HttpLancedbClient(g,m.apiKey,m.timeout,m.hostOverride===void 0?void 0:this._dbName)}get uri(){return"db://"+this._client.uri}async tableNames(m="",g=10){const w=await(await this._client.get("/v1/table/",{limit:`${g}`,page_token:m})).body();for(const A of w.tables)this._tableCache.set(A,!0);return w.tables}async openTable(m,g){return this._tableCache.get(m)===void 0&&(await this._client.post(`/v1/table/${encodeURIComponent(m)}/describe/`),this._tableCache.set(m,!0)),g!==void 0?new f(this._client,m,g):new f(this._client,m)}async createTable(m,g,v,w){let A,E,M;typeof m=="string"?(v!==void 0&&(0,s.isEmbeddingFunction)(v)&&(E=v),M=m):(A=m.schema,E=m.embeddingFunction,M=m.name,g===void 0&&(g=m.data));let I;function R(C){return C instanceof i.Table?C.numRows===0:C.length===0}if(g===void 0||R(g)){if(A===void 0)throw new Error("Either data or schema needs to defined");I=await(0,o.fromTableToStreamBuffer)((0,o.createEmptyTable)(A))}else g instanceof i.Table?I=await(0,o.fromTableToStreamBuffer)(g,E):I=await(0,o.fromRecordsToStreamBuffer)(g,E);const D=await this._client.post(`/v1/table/${encodeURIComponent(M)}/create/`,I,void 0,"application/vnd.apache.arrow.stream");if(D.status!==200)throw new Error(`Server Error, status: ${D.status}, message: ${D.statusText}: ${await D.body()}`);return this._tableCache.set(M,!0),E===void 0?new f(this._client,M):new f(this._client,M,E)}async dropTable(m){await this._client.post(`/v1/table/${encodeURIComponent(m)}/drop/`),this._tableCache.delete(m)}withMiddleware(m){const g=this.clone();return g._client=g._client.withMiddleware(m),g}clone(){const m=Object.create(c.prototype);return Object.assign(m,this)}}Ta.RemoteConnection=c;class u extends t.Query{constructor(m,g,v,w){super(m,void 0,w),this._client=g,this._name=v}async execute(){const m=this._embeddings,g=this._query;let v;return m!==void 0?v=(await m.embed([g]))[0]:v=g,(await this._client.search(this._name,v,this._limit,this._nprobes,this._prefilter,this._refineFactor,this._select,this._filter,this._metricType,this._fastSearch)).toArray().map(A=>{const E={};return Object.keys(A).forEach(M=>{A[M]instanceof i.Vector?E[M]=A[M].toArray():E[M]=A[M]}),E})}}Ta.RemoteQuery=u;class f{constructor(m,g,v){this._client=m,this._name=g,this._embeddings=v}get name(){return this._name}get schema(){return this._client.post(`/v1/table/${encodeURIComponent(this._name)}/describe/`).then(async m=>{var g;if(m.status!==200)throw new Error(`Server Error, status: ${m.status}, message: ${m.statusText}: ${await m.body()}`);return(g=await m.body())==null?void 0:g.schema})}search(m){return new u(m,this._client,encodeURIComponent(this._name))}filter(m){throw new Error("Not implemented")}async mergeInsert(m,g,v){let w;g instanceof i.Table?w=g:w=(0,e.makeArrowTable)(g,await this.schema);const A={on:m};v.whenMatchedUpdateAll!==!1&&v.whenMatchedUpdateAll!==null&&v.whenMatchedUpdateAll!==void 0?(A.when_matched_update_all="true",typeof v.whenMatchedUpdateAll=="string"&&(A.when_matched_update_all_filt=v.whenMatchedUpdateAll)):A.when_matched_update_all="false",v.whenNotMatchedInsertAll??!1?A.when_not_matched_insert_all="true":A.when_not_matched_insert_all="false",v.whenNotMatchedBySourceDelete!==!1&&v.whenNotMatchedBySourceDelete!==null&&v.whenNotMatchedBySourceDelete!==void 0?(A.when_not_matched_by_source_delete="true",typeof v.whenNotMatchedBySourceDelete=="string"&&(A.when_not_matched_by_source_delete_filt=v.whenNotMatchedBySourceDelete)):A.when_not_matched_by_source_delete="false";const E=await(0,o.fromTableToStreamBuffer)(w,this._embeddings),M=await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/merge_insert/`,E,A,"application/vnd.apache.arrow.stream");if(M.status!==200)throw new Error(`Server Error, status: ${M.status}, message: ${M.statusText}: ${await M.body()}`)}async add(m){let g;m instanceof i.Table?g=m:g=(0,e.makeArrowTable)(m,await this.schema);const v=await(0,o.fromTableToStreamBuffer)(g,this._embeddings),w=await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/insert/`,v,{mode:"append"},"application/vnd.apache.arrow.stream");if(w.status!==200)throw new Error(`Server Error, status: ${w.status}, message: ${w.statusText}: ${await w.body()}`);return g.numRows}async overwrite(m){let g;m instanceof i.Table?g=m:g=(0,e.makeArrowTable)(m);const v=await(0,o.fromTableToStreamBuffer)(g,this._embeddings),w=await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/insert/`,v,{mode:"overwrite"},"application/vnd.apache.arrow.stream");if(w.status!==200)throw new Error(`Server Error, status: ${w.status}, message: ${w.statusText}: ${await w.body()}`);return g.numRows}async createIndex(m){const g=["index_name","num_partitions","max_iters","use_opq","num_sub_vectors","num_bits","max_opq_iters","replace"];for(const R of g)if(m[R])throw new Error(`${R} is not supported for remote connections`);const v=m.column??"vector",w="vector",A=m.metric_type??"L2",E=m.index_cache_size??null,M={column:v,index_type:w,metric_type:A,index_cache_size:E},I=await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/create_index/`,M);if(I.status!==200)throw new Error(`Server Error, status: ${I.status}, message: ${I.statusText}: ${await I.body()}`)}async createScalarIndex(m){const v={column:m,index_type:"scalar",replace:!0},w=await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/create_scalar_index/`,v);if(w.status!==200)throw new Error(`Server Error, status: ${w.status}, message: ${w.statusText}: ${await w.body()}`)}async dropIndex(m){const g=await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/index/${encodeURIComponent(m)}/drop/`);if(g.status!==200)throw new Error(`Server Error, status: ${g.status}, message: ${g.statusText}: ${await g.body()}`)}async countRows(m){return await(await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/count_rows/`,{predicate:m})).body()}async delete(m){await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/delete/`,{predicate:m})}async update(m){let g,v;if("valuesSql"in m)g=m.where??null,v=m.valuesSql;else{g=m.where??null,v={};for(const[w,A]of Object.entries(m.values))v[w]=(0,a.toSQL)(A)}await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/update/`,{predicate:g,updates:Object.entries(v).map(([w,A])=>[w,A])})}async listIndices(){var g;return(g=(await(await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/index/list/`)).body()).indexes)==null?void 0:g.map(v=>({columns:v.columns,name:v.index_name,uuid:v.index_uuid,status:v.status}))}async indexStats(m){const v=await(await this._client.post(`/v1/table/${encodeURIComponent(this._name)}/index/${m}/stats/`)).body();return{numIndexedRows:v==null?void 0:v.num_indexed_rows,numUnindexedRows:v==null?void 0:v.num_unindexed_rows,indexType:v==null?void 0:v.index_type,distanceType:v==null?void 0:v.distance_type}}async addColumns(m){throw new Error("Add columns is not yet supported in LanceDB Cloud.")}async alterColumns(m){throw new Error("Alter columns is not yet supported in LanceDB Cloud.")}async dropColumns(m){throw new Error("Drop columns is not yet supported in LanceDB Cloud.")}withMiddleware(m){const g=this.clone();return g._client=g._client.withMiddleware(m),g}clone(){const m=Object.create(f.prototype);return Object.assign(m,this)}}return Ta.RemoteTable=f,Ta}var ry={},NF;function Ene(){if(NF)return ry;NF=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.OpenAIEmbeddingFunction=void 0;class n{constructor(t,i,r="text-embedding-ada-002"){let s;try{s=require("openai")}catch{throw new Error("please install openai@^4.24.1 using npm install openai")}this.sourceColumn=t;const o={apiKey:i};this._openai=new s(o),this._modelName=r}async embed(t){const i=await this._openai.embeddings.create({model:this._modelName,input:t}),r=[];for(let s=0;s<i.data.length;s++)r.push(i.data[s].embedding);return r}}return ry.OpenAIEmbeddingFunction=n,ry}var OF;function T4(){return OF||(OF=1,function(n){var e={};Object.defineProperty(n,"__esModule",{value:!0}),n.MetricType=n.isWriteOptions=n.DefaultWriteOptions=n.WriteMode=n.LocalTable=n.LocalConnection=n.IndexStatus=n.connect=n.makeArrowTable=n.convertToTable=n.OpenAIEmbeddingFunction=n.Query=void 0;const t=bp(),i=YE(),r=Ane(),s=v4();Object.defineProperty(n,"Query",{enumerable:!0,get:function(){return s.Query}});const o=S4(),a=w4(),{databaseNew:c,databaseTableNames:u,databaseOpenTable:f,databaseDropTable:p,tableCreate:m,tableAdd:g,tableCreateScalarIndex:v,tableCreateVectorIndex:w,tableCountRows:A,tableDelete:E,tableUpdate:M,tableMergeInsert:I,tableCleanupOldVersions:R,tableCompactFiles:D,tableListIndices:C,tableIndexStats:k,tableSchema:j,tableAddColumns:U,tableAlterColumns:F,tableDropColumns:J,tableDropIndex:G}=_4();var ee=Ene();Object.defineProperty(n,"OpenAIEmbeddingFunction",{enumerable:!0,get:function(){return ee.OpenAIEmbeddingFunction}});var oe=YE();Object.defineProperty(n,"convertToTable",{enumerable:!0,get:function(){return oe.convertToTable}}),Object.defineProperty(n,"makeArrowTable",{enumerable:!0,get:function(){return oe.makeArrowTable}});const me="us-east-1",Q=1e4;function V(re){const ae=[],de=re.awsCredentials;return de!==void 0?(ae.push(de.accessKeyId),ae.push(de.secretKey),ae.push(de.sessionToken)):ae.fill(void 0,0,3),ae.push(re.awsRegion),ae}async function te(re){var $e,tt,Ut;let ae;if(typeof re=="string")ae={uri:re};else{const zt=Object.keys(re);zt.length===1&&zt[0]==="uri"&&typeof re.uri=="string"?ae={uri:re.uri}:ae=re}let de=e.AWS_REGION??e.AWS_DEFAULT_REGION;de=(de??"").trim()!==""?de:me;const fe={uri:ae.uri??"",awsCredentials:ae.awsCredentials??void 0,awsRegion:ae.awsRegion??de,apiKey:ae.apiKey??void 0,region:ae.region??de,timeout:ae.timeout??Q,readConsistencyInterval:ae.readConsistencyInterval??void 0,storageOptions:ae.storageOptions??void 0,hostOverride:ae.hostOverride??void 0};if(fe.uri.startsWith("db://"))return new r.RemoteConnection(fe);const Pe=fe.storageOptions??{};(($e=fe.awsCredentials)==null?void 0:$e.accessKeyId)!==void 0&&(Pe.aws_access_key_id=fe.awsCredentials.accessKeyId),((tt=fe.awsCredentials)==null?void 0:tt.secretKey)!==void 0&&(Pe.aws_secret_access_key=fe.awsCredentials.secretKey),((Ut=fe.awsCredentials)==null?void 0:Ut.sessionToken)!==void 0&&(Pe.aws_session_token=fe.awsCredentials.sessionToken),fe.awsRegion!==void 0&&(Pe.region=fe.awsRegion);const Ue=Object.entries(Pe),Je=await c(fe.uri,Ue,fe.readConsistencyInterval);return new N(Je,fe)}n.connect=te;var xe;(function(re){re.Pending="pending",re.Indexing="indexing",re.Done="done",re.Failed="failed"})(xe||(n.IndexStatus=xe={}));class N{constructor(ae,de){this._options=()=>de,this._db=ae}get uri(){return this._options().uri}async tableNames(){return u.call(this._db)}async openTable(ae,de){const fe=await f.call(this._db,ae);return de!==void 0?new ce(fe,ae,this._options(),de):new ce(fe,ae,this._options())}async createTable(ae,de,fe,Pe){if(typeof ae=="string"){let Ue=new q;Pe!==void 0&&Re(Pe)?Ue=Pe:fe!==void 0&&Re(fe)&&(Ue=fe);let Je;return fe!==void 0&&(0,o.isEmbeddingFunction)(fe)&&(Je=fe),await this.createTableImpl({name:ae,data:de,embeddingFunction:Je,writeOptions:Ue})}return await this.createTableImpl(ae)}async createTableImpl({name:ae,data:de,schema:fe,embeddingFunction:Pe,writeOptions:Ue=new q}){var Ut;let Je;function $e(zt){return zt instanceof t.Table?zt.data.length===0:zt.length===0}if(de===void 0||$e(de)){if(fe===void 0)throw new Error("Either data or schema needs to defined");Je=await(0,i.fromTableToBuffer)((0,i.createEmptyTable)(fe))}else de instanceof t.Table?Je=await(0,i.fromTableToBuffer)(de,Pe,fe):Je=await(0,i.fromRecordsToBuffer)(de,Pe,fe);const tt=await m.call(this._db,ae,Je,(Ut=Ue==null?void 0:Ue.writeMode)==null?void 0:Ut.toString(),...V(this._options()));return Pe!==void 0?new ce(tt,ae,this._options(),Pe):new ce(tt,ae,this._options())}async dropTable(ae){await p.call(this._db,ae)}withMiddleware(ae){return this}}n.LocalConnection=N;class ce{constructor(ae,de,fe,Pe){this.where=this.filter,this._tbl=ae,this._name=de,this._embeddings=Pe,this._options=()=>fe,this._isElectron=this.checkElectron()}get name(){return this._name}search(ae){return new s.Query(ae,this._tbl,this._embeddings)}filter(ae){return new s.Query(void 0,this._tbl,this._embeddings).filter(ae)}async add(ae){const de=await this.schema;let fe;return ae instanceof t.Table?fe=ae:fe=(0,i.makeArrowTable)(ae,{schema:de,embeddings:this._embeddings}),g.call(this._tbl,await(0,i.fromTableToBuffer)(fe,this._embeddings,de),Me.Append.toString(),...V(this._options())).then(Pe=>{this._tbl=Pe})}async overwrite(ae){let de;return ae instanceof t.Table?de=await(0,i.fromTableToBuffer)(ae,this._embeddings):de=await(0,i.fromRecordsToBuffer)(ae,this._embeddings),g.call(this._tbl,de,Me.Overwrite.toString(),...V(this._options())).then(fe=>{this._tbl=fe})}async createIndex(ae){return w.call(this._tbl,ae).then(de=>{this._tbl=de})}async createScalarIndex(ae,de){return de===void 0&&(de=!0),v.call(this._tbl,ae,de)}async countRows(ae){return A.call(this._tbl,ae)}async delete(ae){return E.call(this._tbl,ae).then(de=>{this._tbl=de})}async update(ae){let de,fe;if("valuesSql"in ae)de=ae.where??null,fe=ae.valuesSql;else{de=ae.where??null,fe={};for(const[Pe,Ue]of Object.entries(ae.values))fe[Pe]=(0,a.toSQL)(Ue)}return M.call(this._tbl,de,fe).then(Pe=>{this._tbl=Pe})}async mergeInsert(ae,de,fe){let Pe=!1,Ue=null;fe.whenMatchedUpdateAll!==void 0&&fe.whenMatchedUpdateAll!==null&&(Pe=!0,fe.whenMatchedUpdateAll!==!0&&(Ue=fe.whenMatchedUpdateAll));const Je=fe.whenNotMatchedInsertAll??!1;let $e=!1,tt=null;fe.whenNotMatchedBySourceDelete!==void 0&&fe.whenNotMatchedBySourceDelete!==null&&($e=!0,fe.whenNotMatchedBySourceDelete!==!0&&(tt=fe.whenNotMatchedBySourceDelete));const Ut=await this.schema;let zt;de instanceof t.Table?zt=de:zt=(0,i.makeArrowTable)(de,{schema:Ut});const Zt=await(0,i.fromTableToBuffer)(zt,this._embeddings,Ut);this._tbl=await I.call(this._tbl,ae,Pe,Ue,Je,$e,tt,Zt)}async cleanupOldVersions(ae,de){return R.call(this._tbl,ae,de).then(fe=>(this._tbl=fe.newTable,fe.metrics))}async compactFiles(ae){const de=ae??{};return D.call(this._tbl,de).then(fe=>(this._tbl=fe.newTable,fe.metrics))}async listIndices(){return C.call(this._tbl)}async indexStats(ae){return k.call(this._tbl,ae)}get schema(){return this.getSchema()}async getSchema(){const ae=await j.call(this._tbl,this._isElectron);return(0,t.tableFromIPC)(ae).schema}checkElectron(){var ae,de;try{return Object.prototype.hasOwnProperty.call(process==null?void 0:process.versions,"electron")||((de=(ae=navigator==null?void 0:navigator.userAgent)==null?void 0:ae.toLowerCase())==null?void 0:de.includes(" electron"))}catch{return!1}}async addColumns(ae){return U.call(this._tbl,ae)}async alterColumns(ae){return F.call(this._tbl,ae)}async dropColumns(ae){return J.call(this._tbl,ae)}async dropIndex(ae){return G.call(this._tbl,ae)}withMiddleware(ae){return this}}n.LocalTable=ce;var Me;(function(re){re.Create="create",re.Overwrite="overwrite",re.Append="append"})(Me||(n.WriteMode=Me={}));class q{constructor(){this.writeMode=Me.Create}}n.DefaultWriteOptions=q;function Re(re){return Object.keys(re).length===1&&(re.writeMode===void 0||typeof re.writeMode=="string")}n.isWriteOptions=Re;var je;(function(re){re.L2="l2",re.Cosine="cosine",re.Dot="dot"})(je||(n.MetricType=je={}))}(IA)),IA}var Cne=T4();const Ine="ChromaAIDB-RAG",sy="rag_chunks";let Gv=null,jo=null;const xne=async()=>{if(Gv)return Gv;try{return Gv=await Cne.connect(Ine),console.log("Connected to LanceDB for RAG."),Gv}catch(n){throw console.error("Failed to connect to LanceDB:",n),new Error("Failed to connect to LanceDB for RAG.")}},pI=async()=>{const n=await xne();try{if((await n.tableNames()).includes(sy))jo=await n.openTable(sy),console.log(`Opened existing RAG table: ${sy}`);else{const i=new no([new es("id",new Yf,!1),new es("sourceId",new Yf,!0),new es("sourceType",new Yf,!0),new es("text",new Yf,!0),new es("vector",new qE(768,new es("value",new B3,!0)),!0)]);jo=await n.createTable(sy,i),console.log(`Created new RAG table: ${sy}`)}}catch(e){throw console.error("Failed to initialize RAG table:",e),new Error("Failed to initialize RAG table in LanceDB.")}},BF=async(n,e)=>{if(!jo&&(console.warn("RAG table not initialized. Initializing now..."),await pI(),!jo))throw new Error("RAG table still not available after re-initialization.");if(n.length!==e.length)throw new Error("Number of chunks and vectors must match.");if(n.length===0){console.log("No chunks to add.");return}const t=n.map((i,r)=>({id:`${i.sourceId}-${i.sourceType}-${r}-${Date.now()}`,sourceId:i.sourceId,sourceType:i.sourceType,text:i.text,vector:e[r]}));try{await jo.add(t),console.log(`Added ${t.length} chunks to RAG table.`)}catch(i){throw console.error("Failed to add chunks to RAG table:",i),new Error("Failed to add chunks to LanceDB.")}},Mne=async(n,e,t,i=5)=>{if(!jo&&(console.warn("RAG table not initialized. Initializing now..."),await pI(),!jo))throw new Error("RAG table still not available after re-initialization.");try{let r=jo.search(n).limit(i),s=[];e&&s.push(`sourceType = '${e}'`),t&&s.push(`sourceId = '${t}'`),s.length>0&&(r=r.where(s.join(" AND ")));const o=await r.execute();return console.log(`Found ${o.length} relevant chunks from RAG search.`),o.map(({vector:a,_distance:c,...u})=>u)}catch(r){return console.error("Failed to search chunks in RAG table:",r),[]}},WE=async n=>{if(!jo){console.warn("RAG table not initialized, cannot clear chunks.");return}try{await jo.delete(`sourceId = '${n}'`),console.log(`Cleared RAG chunks for sourceId: ${n}`)}catch(e){throw console.error(`Failed to clear chunks for sourceId ${n}:`,e),new Error(`Failed to clear chunks for sourceId ${n}.`)}},m_=pe.createContext(void 0),Dne=({children:n,geminiApiKey:e})=>{const[t,i]=pe.useState(null),[r,s]=pe.useState([]),[o,a]=pe.useState(null),[c,u]=pe.useState(null),[f,p]=pe.useState(null),[m,g]=pe.useState(!1),[v,w]=pe.useState(!1);pe.useEffect(()=>{if(e&&e!=="YOUR_GEMINI_API_KEY_HERE")try{const k=new BP({apiKey:e});a(k),console.log("RAGContext: AI Instance for embeddings created."),p(null)}catch(k){console.error("RAGContext: Failed to initialize GoogleGenAI for RAG embeddings:",k);const j=k instanceof Error?k.message:String(k);a(null),p(`RAG AI Initialization Error: ${j}. Embeddings and file/note processing may fail. Please check your Gemini API key.`)}else a(null),p("RAGContext: Gemini API Key not configured. Embeddings and file/note processing will not work.")},[e]),pe.useEffect(()=>{pI().catch(j=>{console.error("RAGContext: Failed to initialize RAG table on mount:",j),p("RAG system could not be initialized. File/note Q&A may not work.")}),(async()=>{const j=await BS();s(j),o&&j.length>0&&(console.log("RAGContext: Processing existing notes on init."),j.forEach(U=>M(U,o)))})()},[o]);const A=pe.useCallback((k,j=700,U=100)=>{const F=[];if(!k)return F;for(let J=0;J<k.length;J+=j-U)F.push(k.substring(J,J+j));return F.filter(J=>J.trim()!=="")},[]),E=pe.useCallback(async(k,j)=>{const U=j||o;if(!U)throw new Error("RAGContext: AI instance not available for embeddings.");const F=[];for(const J of k)try{const G=await U.models.embedContent({model:"gemini-2.5-flash-preview-04-17",contents:{parts:[{text:J}]}});if(G.embeddings&&G.embeddings.length>0)F.push(G.embeddings[0].values);else throw new Error("Failed to generate embedding, no embedding data returned.")}catch(G){throw console.error("RAGContext: Error generating embedding for a chunk:",G),new Error(`RAGContext: Failed to generate embedding. ${G instanceof Error?G.message:""}`)}return F},[o]),M=pe.useCallback(async(k,j)=>{const U=j||o;if(!(!k.content||!U))try{console.log(`RAGContext: Processing note ${k.id} for RAG.`);const F=A(k.content);if(F.length>0){const J=await E(F,U),G=F.map(ee=>({sourceId:k.id,sourceType:"note",text:ee}));await BF(G,J)}}catch(F){console.error(`RAGContext: Failed to process note ${k.id} for RAG:`,F),p(`RAGContext: Failed to process note ${k.id}. ${F instanceof Error?F.message:""}`)}},[o,A,E]),I=pe.useCallback(async(k,j)=>{if(k){p(null),g(!0),p(null);try{const U=await xte(k);if(i(U),U.extractedText&&o){c&&(await WE(c.sourceId),console.log(`RAGContext: Cleared old chunks for source ID ${c.sourceId}`));const F=A(U.extractedText);if(F.length>0){const J=await E(F,o),G=F.map(ee=>({sourceId:U.name,sourceType:"file",text:ee}));await BF(G,J),u({name:U.name,sourceId:U.name}),j({text:`File '${U.name}' processed and ready for RAG context.`,role:"system"})}else j({text:`File '${U.name}' processed, but no text content found to index for RAG.`,role:"system"})}else if(!U.extractedText&&o)u(null),j({text:`File '${U.name}' has no extractable text content for RAG. You can still ask general questions about it if the AI supports its format (e.g. images).`,role:"system"});else if(!o)throw new Error("AI instance for embeddings is not available. Check API Key.")}catch(U){console.error("RAGContext: Error processing file for RAG:",U);const F=`Failed to process file '${k.name}': ${U instanceof Error?U.message:"Unknown error"}.`;p(F),j({text:F,role:"error"}),i(null),u(null)}finally{g(!1)}}else i(null)},[o,A,E,c]),R=async(k,j)=>{if(!k.trim()){j({text:"Error: Note content cannot be empty.",role:"error"});return}w(!0),p(null);try{const U=await zU(k);s(F=>[U,...F]),o?(await M(U,o),j({text:`Note "${U.id}" added and processed for RAG.`,role:"system"})):j({text:`Note "${U.id}" added, but RAG processing skipped (AI instance not ready).`,role:"system"})}catch(U){const F=`Failed to add note: ${U.message||"Unknown error"}.`;j({text:F,role:"error"}),p(F)}finally{w(!1)}},D=async(k,j)=>{w(!0),p(null);try{await VU(k),await WE(k),s(U=>U.filter(F=>F.id!==k)),j({text:`Note "${k}" deleted successfully.`,role:"system"})}catch(U){const F=`Failed to delete note "${k}": ${U.message||"Unknown error"}.`;j({text:F,role:"error"}),p(F)}finally{w(!1)}},C=pe.useCallback(()=>{i(null)},[]);return ne.jsx(m_.Provider,{value:{uploadedFileData:t,setUploadedFileData:i,localNotes:r,setLocalNotes:s,aiInstance:o,setAiInstance:a,activeRAGFile:c,setActiveRAGFile:u,handleFileChange:I,processNoteForRAG:M,chunkText:A,getEmbeddings:E,handleManualAddNote:R,handleManualDeleteNote:D,clearUploadedFile:C,searchRelevantChunks:Mne},children:n})},$S="https://www.googleapis.com/calendar/v3",Rne=async(n,e)=>{var t;if(!n)throw new Error("Access token is required for Google Calendar API.");if(!e.summary||!e.start||!e.end)throw new Error("Event summary, start, and end times are required.");try{const i=await fetch(`${$S}/calendars/primary/events`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!i.ok){const s=await i.json().catch(()=>({}));throw console.error("Google Calendar API Error Data (Add Event):",s),new Error(`Failed to add calendar event: ${i.status} ${i.statusText}. ${((t=s.error)==null?void 0:t.message)||""}`)}return await i.json()}catch(i){throw console.error("Error adding Google Calendar event:",i),i}},kne=async(n,e,t,i,r=10)=>{var o;if(!n)throw new Error("Access token is required.");const s=new URLSearchParams;s.append("maxResults",r.toString()),s.append("orderBy","startTime"),s.append("singleEvents","true"),e&&s.append("q",e),t&&s.append("timeMin",t),i&&s.append("timeMax",i),!t&&!e&&s.append("timeMin",new Date().toISOString());try{const a=await fetch(`${$S}/calendars/primary/events?${s.toString()}`,{headers:{Authorization:`Bearer ${n}`,Accept:"application/json"}});if(!a.ok){const u=await a.json().catch(()=>({message:"Unknown error"}));throw new Error(`Failed to search calendar events: ${a.status} ${a.statusText}. ${((o=u.error)==null?void 0:o.message)||u.message}`)}return(await a.json()).items||[]}catch(a){throw console.error("Error searching Google Calendar events:",a),a}},Nne=async(n,e,t)=>{var i;if(!n)throw new Error("Access token is required.");if(!e)throw new Error("Event ID is required for updating.");if(Object.keys(t).length===0)throw new Error("No updates provided for the event.");t.start&&typeof t.start.dateTime=="string"&&t.start.timeZone,t.end&&typeof t.end.dateTime=="string"&&t.end.timeZone;try{const r=await fetch(`${$S}/calendars/primary/events/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(!r.ok){const s=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(`Failed to update calendar event: ${r.status} ${r.statusText}. ${((i=s.error)==null?void 0:i.message)||s.message}`)}return await r.json()}catch(r){throw console.error("Error updating Google Calendar event:",r),r}},One=async(n,e)=>{var t;if(!n)throw new Error("Access token is required.");if(!e)throw new Error("Event ID is required for deletion.");try{const i=await fetch(`${$S}/calendars/primary/events/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}});if(!i.ok||i.status===204){if(i.status===204)return;const r=await i.json().catch(()=>({message:"Unknown error"}));throw new Error(`Failed to delete calendar event: ${i.status} ${i.statusText}. ${((t=r.error)==null?void 0:t.message)||r.message}`)}}catch(i){throw console.error("Error deleting Google Calendar event:",i),i}},YS="https://www.googleapis.com/tasks/v1",Bne=async(n,e="@default",t={})=>{var r;if(!n)throw new Error("Access token is required for Google Tasks API.");const i=new URLSearchParams;t.dueMin&&!t.dueMin.includes("T")?i.append("dueMin",new Date(t.dueMin+"T00:00:00Z").toISOString()):t.dueMin&&i.append("dueMin",new Date(t.dueMin).toISOString()),t.dueMax&&!t.dueMax.includes("T")?i.append("dueMax",new Date(t.dueMax+"T23:59:59Z").toISOString()):t.dueMax&&i.append("dueMax",new Date(t.dueMax).toISOString()),t.completedMin&&i.append("completedMin",new Date(t.completedMin).toISOString()),t.completedMax&&i.append("completedMax",new Date(t.completedMax).toISOString()),t.showCompleted!==void 0&&i.append("showCompleted",String(t.showCompleted)),t.showHidden!==void 0&&i.append("showHidden",String(t.showHidden)),i.append("maxResults",(t.maxResults||20).toString());try{const s=await fetch(`${YS}/lists/${e}/tasks?${i.toString()}`,{headers:{Authorization:`Bearer ${n}`,Accept:"application/json"}});if(!s.ok){const a=await s.json().catch(()=>({message:"Unknown error"}));throw new Error(`Failed to search tasks: ${s.status} ${s.statusText}. ${((r=a.error)==null?void 0:r.message)||a.message}`)}let o=(await s.json()).items||[];if(t.query){const a=t.query.toLowerCase();o=o.filter(c=>c.title&&c.title.toLowerCase().includes(a)||c.notes&&c.notes.toLowerCase().includes(a))}return t.status&&(o=o.filter(a=>a.status===t.status)),o}catch(s){throw console.error("Error searching Google Tasks:",s),s}},Fne=async(n,e="@default",t)=>{var r;if(!n)throw new Error("Access token is required for Google Tasks API.");if(!t.title)throw new Error("Task title is required.");const i={title:t.title};t.notes&&(i.notes=t.notes),t.due&&(t.due.includes("T")?i.due=new Date(t.due).toISOString():i.due=new Date(t.due+"T00:00:00Z").toISOString());try{const s=await fetch(`${YS}/lists/${e}/tasks`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)});if(!s.ok){const a=await s.json().catch(()=>({}));throw new Error(`Failed to add task: ${s.status} ${s.statusText}. ${((r=a.error)==null?void 0:r.message)||""}`)}return await s.json()}catch(s){throw console.error("Error adding Google Task:",s),s}},Pne=async(n,e="@default",t,i)=>{var s;if(!n)throw new Error("Access token is required for Google Tasks API.");if(!t)throw new Error("Task ID is required for updating.");const r={...i};r.due&&typeof r.due=="string"&&(r.due.includes("T")?r.due=new Date(r.due).toISOString():r.due=new Date(r.due+"T00:00:00Z").toISOString()),"completed"in r&&r.status&&delete r.completed,delete r.id;try{const o=await fetch(`${YS}/lists/${e}/tasks/${t}`,{method:"PATCH",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!o.ok){const c=await o.json().catch(()=>({}));throw new Error(`Failed to update task: ${o.status} ${o.statusText}. ${((s=c.error)==null?void 0:s.message)||""}`)}return await o.json()}catch(o){throw console.error("Error updating Google Task:",o),o}},Lne=async(n,e="@default",t)=>{var i;if(!n)throw new Error("Access token is required for Google Tasks API.");if(!t)throw new Error("Task ID is required for deletion.");try{const r=await fetch(`${YS}/lists/${e}/tasks/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}});if(r.status===204)return;if(!r.ok){const s=await r.json().catch(()=>({message:"Unknown error"}));throw new Error(`Failed to delete task: ${r.status} ${r.statusText}. ${((i=s.error)==null?void 0:i.message)||s.message}`)}}catch(r){throw console.error("Error deleting Google Task:",r),r}},Une=async n=>(console.log(`WeatherService: Fetching weather for ${n}`),await new Promise(e=>setTimeout(e,700)),n.toLowerCase().includes("london")?{location:"London, UK",temperature:"15°C",description:"Cloudy with a chance of rain",humidity:"75%",wind:"10 km/h West"}:n.toLowerCase().includes("san francisco")?{location:"San Francisco, CA",temperature:"18°C",description:"Partly cloudy and cool",humidity:"60%",wind:"15 km/h North-West"}:n.toLowerCase().includes("tokyo")?{location:"Tokyo, Japan",temperature:"22°C",description:"Sunny",humidity:"50%",wind:"5 km/h East"}:{location:n,temperature:"20°C",description:"Pleasant weather"}),zne="YOUR_GEMINI_API_KEY_HERE",WS=pe.createContext(void 0),Vne=({children:n,allTools:e})=>{const t=pe.useContext(l_),i=pe.useContext(CS),r=pe.useContext(m_),[s,o]=pe.useState([]),[a,c]=pe.useState(!1),[u,f]=pe.useState(null),[p,m]=pe.useState(null),[g,v]=pe.useState(null),[w,A]=pe.useState("");pe.useEffect(()=>{var U,F,J;if(!t||!i)return;const{apiKeys:M,selectedProvider:I,selectedPersonaName:R,customSystemPrompt:D,personas:C}=t,{isGoogleLoggedIn:k}=i;let j=null;if(I===AiProviderType.GEMINI){const G=M[AiProviderType.GEMINI];if(G&&G!==zne)try{j=new BP({apiKey:G});let ee=C.length>0?C[0].prompt:"You are a helpful AI.";if(R==="Custom")ee=D.trim()||ee;else{const te=C.find(xe=>xe.name===R);ee=te?te.prompt:ee}const oe=[ee,"You are equipped with several tools to assist the user."];k?oe.push(`The user is logged into their Google Account. You have access to tools that can interact with their Google Calendar and Google Tasks, including creating, searching, updating, and deleting events and tasks. When a user's request implies such actions, use the available tools. If event or task IDs are needed for updates or deletions and not provided, use a search tool first or ask clarifying questions. For example, if asked "cancel my meeting tomorrow", first search for meetings tomorrow, then confirm with the user which one to cancel before calling the delete tool. When dealing with calendar events or tasks, if the user provides dates or times in natural language (e.g., 'tomorrow at 3pm', 'next Monday', 'in two hours'), make your best effort to convert these into the required ISO 8601 format (e.g., YYYY-MM-DDTHH:mm:ssZ or YYYY-MM-DD for due dates) for the tool arguments. If a date or time is ambiguous or crucial information is missing, ask for clarification. Always confirm event/task details before creation if derived from ambiguous phrasing.`):oe.push("The user is not logged into Google. If topics related to Google Calendar or Tasks arise, you can inform the user that these features require Google Sign-In."),oe.push("You also have access to Google Search for up-to-date information about current events, news, or rapidly changing topics. When you use Google Search, you MUST inform the user (e.g., 'Searching the web for...') and you MUST cite your sources by providing the URLs of the web pages you used. Your text response should incorporate information from the search, and the citations will be displayed separately."),oe.push("The user may upload files (like text documents or PDFs). If a file is uploaded, relevant excerpts from its content might be provided to you prefixed with 'Use the following context...'. Use this file content to answer the user's query, such as summarizing the document, answering specific questions about it, or extracting information. When such context is provided, please base your answer primarily on that information."),oe.push("You also have tools to manage local notes for the user: `addNote` to save a new note, `viewNotes` to see all notes (you can then summarize or list them based on user request), and `deleteNote` to remove a note by its ID. For `deleteNote`, if the user's request is vague (e.g., 'delete my last note'), use `viewNotes` first to list them with their IDs, then ask the user to confirm which note ID to delete. Content from these notes may also be provided as context for RAG."),oe.push("Always confirm destructive actions like deletion if the user's intent isn't perfectly clear or if multiple items match a vague request.");const me=oe.join(`

`);A(me);const Q=[];e&&e.length>0&&Q.push({functionDeclarations:e}),Q.push({googleSearch:{}});const V=j.chats.create({model:"gemini-2.5-flash-preview-04-17",config:{systemInstruction:me,tools:Q}});m(V),f(null)}catch(ee){console.error("ChatContext: Failed to initialize Gemini chat:",ee);const oe=ee instanceof Error?ee.message:String(ee);f(`Failed to initialize Gemini Chat: ${oe}. Please check your API key and persona settings.`),m(null)}else!((U=i.error)!=null&&U.includes("Google integration disabled"))&&I===AiProviderType.GEMINI&&(f("Gemini API Key is not configured or is invalid. Please set it in the sidebar to use Gemini."),m(null))}else m(null),((F=t==null?void 0:t.personas)==null?void 0:F.length)>0&&t.selectedProvider!==AiProviderType.GEMINI||((J=t==null?void 0:t.personas)==null?void 0:J.length)>0?A(t.personas[0].prompt):A("You are a helpful AI.")},[t,i,e,A,m,f]);const E=pe.useCallback(async M=>{var V,te,xe,N,ce,Me;if(!t||!i||!r){f("Required contexts are not available for sending message.");return}const{selectedProvider:I}=t,{googleAccessToken:R}=i,{aiInstance:D,activeRAGFile:C,uploadedFileData:k,clearUploadedFile:j,searchRelevantChunks:U,getEmbeddingsFromRAG:F,chunkText:J,processNoteForRAG:G}=r;if(!M.trim()&&!k){f("Please type a message or upload a file.");return}const ee=M.trim(),oe={id:Date.now().toString(),text:k?`${ee} (File: ${k.name})`:ee,sender:Ss.USER,timestamp:new Date};o(q=>[...q,oe]),c(!0),f(null),v(null);let me=Date.now().toString()+"-ai",Q=!1;try{if(I===AiProviderType.GEMINI){if(!p||!D)throw new Error("Gemini chat or RAG AI instance is not initialized. Check API Key and Persona configuration.");o(fe=>[...fe,{id:"ai-typing",text:"",sender:Ss.MODEL,timestamp:new Date,streaming:!0}]);const q=[];let Re=ee;if(ee&&D){const fe=(await F([ee]))[0];let Pe="";if(C){const Je=await U(fe,"file",C.sourceId,3);Je.length>0&&(Pe+=`Context from file '${C.name}':
`+Je.map($e=>$e.text).join(`
---
`)+`
`)}const Ue=await U(fe,"note",void 0,2);Ue.length>0&&(Pe+=`Context from your notes:
`+Ue.map(Je=>Je.text).join(`
---
`)+`
`),Pe&&(Re=`Use the following context to answer the user's question:

---
${Pe}
---
User question: ${ee}`,Q=!0)}if(Re?q.push({text:Re}):ee&&q.push({text:ee}),k&&(!Q||!k.extractedText)&&(k.extractedText&&k.extractedText.trim()?(!Q||Q&&(C==null?void 0:C.sourceId)!==k.name)&&q.push({text:`Full content of uploaded file '${k.name}':

${k.extractedText}`}):k.extractedText||q.push({inlineData:{mimeType:k.type,data:k.base64Data}})),q.length===0)throw new Error("No content to send (empty message and no file data/RAG context).");let je=await p.sendMessageStream({message:q}),re="",ae,de=[];for await(const fe of je){if(fe.functionCalls&&fe.functionCalls.length>0){ae=fe.functionCalls,fe.text&&(re+=fe.text);break}fe.text&&(re+=fe.text,o(Ue=>Ue.map(Je=>Je.id==="ai-typing"?{...Je,text:re}:Je)));const Pe=(xe=(te=(V=fe.candidates)==null?void 0:V[0])==null?void 0:te.groundingMetadata)==null?void 0:xe.groundingChunks;Pe&&Pe.length>0&&Pe.forEach(Ue=>{Ue.web&&(de.some(Je=>Je.uri===Ue.web.uri)||de.push({title:Ue.web.title||Ue.web.uri,uri:Ue.web.uri}))})}if(me="ai-typing",ae&&ae.length>0){const fe=ae[0],Pe=fe.name,Ue=fe.args||{};v(Pe),o($t=>$t.map(we=>we.id==="ai-typing"?{...we,text:re+`
*(Using tool: ${Pe}...)*`,toolCallInProgress:Pe}:we));const Je=Date.now().toString()+"-ai-tool-intermediate";o($t=>$t.map(we=>we.id==="ai-typing"?{...we,id:Je,streaming:!1}:we));let $e,tt=null;try{if(!R&&(Pe.toLowerCase().includes("calendar")||Pe.toLowerCase().includes("task")))throw new Error("Google account not connected. Please sign in to use this feature.");switch(Pe){case"createCalendarEvent":$e=await Rne(R,Ue);break;case"addTask":$e=await Fne(R,Ue.taskListId||"@default",Ue);break;case"getWeather":$e=await Une(Ue.location);break;case"searchCalendarEvents":$e=await kne(R,Ue.query,Ue.timeMin,Ue.timeMax);break;case"updateCalendarEvent":const{eventId:$t,...we}=Ue;$e=await Nne(R,$t,we);break;case"deleteCalendarEvent":const Ae=Ue==null?void 0:Ue.eventId;typeof Ae=="string"&&Ae.trim()!==""?(await One(R,Ae),$e={success:!0,message:`Calendar event '${Ae}' deleted successfully.`}):(tt=`Could not delete calendar event: Event ID was missing or invalid. Args: ${JSON.stringify(Ue)}`,console.error(tt),$e={error:tt});break;case"searchTasks":const Se=Ue;$e=await Bne(R,Se.taskListId||"@default",{query:Se.query,dueMin:Se.dueAfter,dueMax:Se.dueBefore,status:Se.status,showCompleted:Se.status==="completed"||void 0});break;case"updateTask":const{taskId:Ze,taskListId:ge,...X}=Ue;!Ze||Ze.trim()===""?(tt=`Could not update task: Task ID was missing. Args: ${JSON.stringify(Ue)}`,$e={error:tt}):$e=await Pne(R,ge||"@default",Ze,X);break;case"deleteTask":const{taskId:Y,taskListId:Z}=Ue;!Y||Y.trim()===""?(tt=`Could not delete task: Task ID was missing. Args: ${JSON.stringify(Ue)}`,$e={error:tt}):(await Lne(R,Z||"@default",Y),$e={success:!0,message:`Task '${Y}' deleted successfully.`});break;case"addNote":const ue=Ue.content;if(!ue||ue.trim()==="")tt="Could not add note: Content was empty.",$e={error:tt};else{const Le=await zU(ue);D&&await G(Le,D),$e={success:!0,noteId:Le.id,message:"Note added successfully."}}break;case"viewNotes":$e={notes:await BS()};break;case"deleteNote":const Oe=Ue.noteId;!Oe||Oe.trim()===""?(tt=`Could not delete note: Note ID was missing. Args: ${JSON.stringify(Ue)}`,$e={error:tt}):(await VU(Oe),await WE(Oe),$e={success:!0,message:`Note '${Oe}' deleted successfully.`});break;default:tt=`Error: Unknown tool '${Pe}' was called by the AI.`,console.error(tt),$e={error:tt}}}catch($t){console.error(`Error executing tool ${Pe}:`,$t),tt=$t.message||`An unexpected error occurred while executing tool: ${Pe}.`,$e={error:tt}}tt&&!$e.error&&($e={error:tt});const Ut=[{functionResponse:{name:Pe,response:$e}}],zt=Date.now().toString()+"-ai-typing-tool-response";o($t=>[...$t,{id:zt,text:"",sender:Ss.MODEL,timestamp:new Date,streaming:!0}]),me=zt;const Zt=await p.sendMessageStream({message:Ut});re="";for await(const $t of Zt){$t.text&&(re+=$t.text,o(Ae=>Ae.map(Se=>Se.id===me?{...Se,text:re}:Se)));const we=(Me=(ce=(N=$t.candidates)==null?void 0:N[0])==null?void 0:ce.groundingMetadata)==null?void 0:Me.groundingChunks;we&&we.length>0&&we.forEach(Ae=>{Ae.web&&(de.some(Se=>Se.uri===Ae.web.uri)||de.push({title:Ae.web.title||Ae.web.uri,uri:Ae.web.uri}))})}}o(fe=>fe.map(Pe=>Pe.id===me?{...Pe,id:Date.now().toString()+"-ai-final",streaming:!1,text:re,timestamp:new Date,sources:de.length>0?de:void 0,toolCallInProgress:void 0,ragContextUsed:Q}:Pe))}else{await new Promise(Re=>setTimeout(Re,1e3));const q={id:Date.now().toString()+"-ai",text:`Response from ${I}: "${M}" (Provider not fully implemented yet)`,sender:Ss.MODEL,timestamp:new Date};o(Re=>[...Re,q])}}catch(q){console.error("Error sending message:",q);const Re=q instanceof Error?q.message:"An unknown error occurred.";f(`Failed to get response: ${Re}`),o(je=>[...je.filter(ae=>!ae.id.startsWith("ai-typing")&&ae.id!==me),{id:Date.now().toString()+"-error",text:`Error: ${Re}`,sender:Ss.MODEL,timestamp:new Date}])}finally{c(!1),v(null),!Q&&k&&j(),o(q=>q.filter(Re=>!(Re.id==="ai-typing"&&Re.streaming))),o(q=>q.filter(Re=>!(Re.id.endsWith("-ai-typing-tool-response")&&Re.streaming))),o(q=>q.filter(Re=>!(Re.id.endsWith("-ai-tool-intermediate")&&Re.toolCallInProgress)))}},[p,t,i,r,o,c,f,v,e]);return!t||!i||!r?ne.jsx("div",{children:"Loading settings or auth provider..."}):ne.jsx(WS.Provider,{value:{messages:s,setMessages:o,isLoading:a,setIsLoading:c,error:u,setError:f,geminiChat:p,setGeminiChat:m,isUsingTool:g,setIsUsingTool:v,handleSendMessage:E,currentSystemPrompt:w,setCurrentSystemPrompt:A},children:n})},jne="YOUR_GEMINI_API_KEY_HERE",qne=({error:n})=>{const e=pe.useContext(WS),t=pe.useContext(l_),i=pe.useContext(m_),r=pe.useRef(null),[s,o]=pe.useState(null);if(pe.useEffect(()=>{var U;(U=r.current)==null||U.scrollIntoView({behavior:"smooth"})},[e==null?void 0:e.messages]),!e||!t||!i)return ne.jsx("div",{className:"flex-1 flex flex-col p-6 justify-center items-center text-white",children:"Loading chat contexts..."});const{messages:a,handleSendMessage:c,isLoading:u,error:f,setMessages:p}=e,{selectedProvider:m,apiKeys:g}=t,{uploadedFileData:v,handleFileChange:w,isProcessingFile:A,ragError:E,setUploadedFileData:M}=i,I=m===sn.GEMINI&&(g[sn.GEMINI]===jne||!g[sn.GEMINI]),R=u||A,D=n||f||E||s,C=U=>{p(F=>[...F,{id:Date.now().toString(),text:U.text,sender:(U.role==="system",Ss.SYSTEM),timestamp:new Date,role:U.role}])},k=async U=>{if(U){if(U.size>20*1024*1024){o("File size exceeds 20MB. Max 20MB allowed.");return}if(!["text/plain","application/pdf","image/jpeg","image/png"].includes(U.type)){o(`Unsupported file type: ${U.type}. Supported: TXT, PDF, JPG, PNG.`);return}o(null),await w(U,C)}},j=()=>{M(null),o(null)};return ne.jsxs("div",{className:"flex flex-col h-full pt-16",children:[" ",ne.jsxs("div",{className:"flex-grow overflow-y-auto p-6 space-y-4 scrollbar-thin",children:[a.length===0&&!R&&!D&&ne.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-400",children:[ne.jsx("div",{className:"w-24 h-24 mb-4",children:ne.jsx(Y6,{})}),ne.jsx("h2",{className:"text-2xl font-semibold text-gray-200",children:"Welcome to Chroma AI"}),ne.jsxs("p",{className:"mt-2",children:["Using ",ne.jsx("span",{className:"font-semibold chroma-accent-text",children:m}),". Type a message to start chatting."]}),m===sn.GEMINI&&I&&ne.jsxs("p",{className:"mt-2 text-yellow-500 text-sm",children:[ne.jsx(Gf,{className:"inline w-4 h-4 mr-1"}),"Note: Gemini API key is missing or a placeholder. Please set your API key in the sidebar for full functionality."]}),A&&v&&ne.jsxs("p",{className:"mt-2 text-blue-400 text-sm",children:["Processing '",v.name,"'..."]})]}),a.map(U=>ne.jsx(B$,{message:U},U.id)),ne.jsx("div",{ref:r})]}),D&&ne.jsxs("div",{className:"p-4 m-4 bg-red-800/50 border border-red-700 text-red-200 rounded-lg text-sm flex items-center",children:[ne.jsx(Gf,{className:"inline w-5 h-5 mr-2 flex-shrink-0"}),ne.jsx("span",{children:D})]}),ne.jsx(cj,{onSendMessage:c,isLoading:R,onFileChange:k,uploadedFileData:v,onClearFile:j,disabled:I&&m===sn.GEMINI})]})},Hne="YOUR_GEMINI_API_KEY_HERE",Gne="your_gemini_api_key_here",FF={[sn.GEMINI]:sj,[sn.OPENAI]:oj,[sn.GROQ]:aj,[sn.HUGGINGFACE]:lj,[sn.OPENROUTER]:uj},$ne=()=>{var de;const n=pe.useContext(CS),e=pe.useContext(l_),t=pe.useContext(m_),i=pe.useContext(WS),[r,s]=pe.useState(!1),[o,a]=pe.useState(!0),[c,u]=pe.useState(!0),[f,p]=pe.useState(!1),[m,g]=pe.useState("");if(!n||!e||!t||!i)return ne.jsx("aside",{className:"w-72 bg-black/50 backdrop-blur-md p-5 border-r border-purple-900/30 flex flex-col space-y-6 scrollbar-thin overflow-y-auto",children:"Loading sidebar contexts..."});const{isGoogleLoggedIn:v,googleUserProfile:w,handleGoogleLogin:A,handleGoogleLogout:E,isLoading:M,error:I,isGoogleClientConfigured:R}=n,{selectedProvider:D,setSelectedProvider:C,apiKeys:k,handleApiKeyChange:j,personas:U,selectedPersonaName:F,handleSelectPersona:J,customSystemPrompt:G,handleCustomSystemPromptChange:ee}=e,{localNotes:oe,handleManualAddNote:me,handleManualDeleteNote:Q,isProcessingNote:V,ragError:te}=t,{error:xe,setMessages:N}=i,ce=k[sn.GEMINI]===Gne,Me=k[sn.GEMINI]===Hne,q=fe=>{N(Pe=>[...Pe,{id:Date.now().toString(),text:fe.text,sender:(fe.role==="system",Ss.SYSTEM),timestamp:new Date,role:fe.role}])},Re=()=>{m.trim()&&(me(m.trim(),q),g(""))},je=k[D],re=D===sn.GEMINI?ce?"Using key from environment":"Enter Gemini API Key":`Enter ${D} API Key`;let ae=null;return D===sn.GEMINI&&(xe!=null&&xe.includes("API Key")||te!=null&&te.includes("API Key"))&&(ae=xe||te),ne.jsxs("aside",{className:"w-72 bg-black/50 backdrop-blur-md p-5 border-r border-purple-900/30 flex flex-col space-y-6 scrollbar-thin overflow-y-auto",children:[ne.jsxs("div",{children:[ne.jsx("h2",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3",children:"AI Provider"}),ne.jsxs("div",{className:"relative",children:[ne.jsx("select",{value:D,onChange:fe=>C(fe.target.value),className:"w-full p-3 bg-gray-800/70 border border-purple-700/60 rounded-lg appearance-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none text-white placeholder-gray-400 transition-colors","aria-label":"Select AI Provider",children:Object.values(sn).map(fe=>ne.jsx("option",{value:fe,children:fe},fe))}),ne.jsx(Rf,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none"})]}),FF[D]&&VF.createElement(FF[D],{className:"w-8 h-8 mx-auto my-3 text-gray-300"})]}),ne.jsxs("div",{children:[ne.jsxs("button",{onClick:()=>s(!r),className:"flex items-center justify-between w-full text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 hover:text-purple-400 transition-colors","aria-expanded":r,children:["API Key Configuration",r?ne.jsx(Mv,{className:"w-4 h-4"}):ne.jsx(Rf,{className:"w-4 h-4"})]}),r&&ne.jsxs("div",{className:"mt-2 space-y-2",children:[ne.jsxs("label",{htmlFor:"apiKeyInput",className:"text-sm text-gray-300 block mb-1",children:["API Key for ",D]}),ne.jsxs("div",{className:"relative",children:[ne.jsx(X6,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),ne.jsx("input",{id:"apiKeyInput",type:"password",placeholder:re,value:D===sn.GEMINI&&Me?"":je,onChange:fe=>j(D,fe.target.value),className:"w-full p-3 pl-10 bg-gray-800/70 border border-purple-700/60 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none text-white placeholder-gray-500 transition-colors","aria-label":`API Key for ${D}`,disabled:D===sn.GEMINI&&ce})]}),ae&&ne.jsxs("p",{className:"text-xs text-red-400/90 mt-1 flex items-center",children:[ne.jsx(Gf,{className:"inline w-4 h-4 mr-1 flex-shrink-0"}),ae]}),D===sn.GEMINI&&ce&&ne.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Using API key from environment variables for Gemini."}),D===sn.GEMINI&&Me&&!ce&&!ae&&ne.jsxs("p",{className:"text-xs text-yellow-400/80 mt-1",children:[ne.jsx(Gf,{className:"inline w-3 h-3 mr-1"}),"Gemini API Key is a placeholder. Please enter your key."]}),D!==sn.GEMINI&&ne.jsx("p",{className:"text-xs text-yellow-400/80 mt-1",children:"Note: Only Gemini is fully implemented in this version."})]})]}),ne.jsxs("div",{className:"border-t border-purple-900/30 pt-6",children:[ne.jsxs("button",{onClick:()=>u(!c),className:"flex items-center justify-between w-full text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 hover:text-purple-400 transition-colors","aria-expanded":c,children:[ne.jsxs("span",{className:"flex items-center",children:[ne.jsx(ej,{className:"w-4 h-4 mr-2"})," AI Persona"]}),c?ne.jsx(Mv,{className:"w-4 h-4"}):ne.jsx(Rf,{className:"w-4 h-4"})]}),c&&ne.jsxs("div",{className:"space-y-3",children:[ne.jsxs("div",{children:[ne.jsx("label",{htmlFor:"personaSelector",className:"text-sm text-gray-300 block mb-1",children:"Select Persona"}),ne.jsxs("div",{className:"relative",children:[ne.jsx("select",{id:"personaSelector",value:F,onChange:fe=>J(fe.target.value),className:"w-full p-3 bg-gray-800/70 border border-purple-700/60 rounded-lg appearance-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none text-white placeholder-gray-400 transition-colors","aria-label":"Select AI Persona",children:U.map(fe=>ne.jsx("option",{value:fe.name,children:fe.name},fe.name))}),ne.jsx(Rf,{className:"w-5 h-5 text-gray-400 absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none"})]})]}),F==="Custom"&&ne.jsxs("div",{children:[ne.jsx("label",{htmlFor:"customPromptInput",className:"text-sm text-gray-300 block mb-1",children:"Custom System Prompt"}),ne.jsx("textarea",{id:"customPromptInput",value:G,onChange:fe=>ee(fe.target.value),placeholder:"Enter your custom system prompt for the AI...",rows:4,className:"w-full p-3 bg-gray-800/70 border border-purple-700/60 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none text-white placeholder-gray-500 transition-colors scrollbar-thin text-sm","aria-label":"Custom System Prompt"})]})]})]}),ne.jsxs("div",{className:"border-t border-purple-900/30 pt-6",children:[ne.jsxs("button",{onClick:()=>a(!o),className:"flex items-center justify-between w-full text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 hover:text-purple-400 transition-colors","aria-expanded":o,children:["Google Integrations",o?ne.jsx(Mv,{className:"w-4 h-4"}):ne.jsx(Rf,{className:"w-4 h-4"})]}),o&&ne.jsxs("div",{className:"space-y-3",children:[I&&ne.jsxs("div",{className:"p-3 bg-red-800/30 border border-red-700 text-red-200 rounded-lg text-sm flex items-center",children:[ne.jsx(Gf,{className:"w-5 h-5 mr-2 flex-shrink-0"}),ne.jsx("span",{children:I})]}),!R&&ne.jsxs("div",{className:"p-3 bg-yellow-800/30 border border-yellow-700 text-yellow-200 rounded-lg text-sm",children:[ne.jsx(Gf,{className:"inline w-5 h-5 mr-2"}),"Google Client ID not configured. Google integrations are disabled."]}),v&&w&&ne.jsxs("div",{className:"p-3 rounded-lg glassmorphism border-green-500/50 border flex items-center space-x-3",children:[w.picture?ne.jsx("img",{src:w.picture,alt:"User",className:"w-10 h-10 rounded-full"}):ne.jsx(Q6,{className:"w-10 h-10 text-gray-400"}),ne.jsxs("div",{children:[ne.jsx("p",{className:"text-sm font-medium text-gray-100",children:w.name}),ne.jsx("p",{className:"text-xs text-gray-400",children:w.email})]})]}),ne.jsxs("button",{onClick:v?E:A,disabled:!R||M,className:`w-full flex items-center justify-center p-3 rounded-lg text-sm font-medium transition-all duration-200 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900
                ${v?"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500":"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white focus:ring-blue-500"}
                ${!R||M?"opacity-50 cursor-not-allowed":""}`,"aria-label":v?"Disconnect Google Account":"Connect Google Account",children:[ne.jsx(K6,{className:"w-5 h-5 mr-2"}),M?v?"Disconnecting...":"Connecting...":v?"Disconnect Google":"Connect Google Account"]}),ne.jsx("div",{className:`p-3 rounded-lg glassmorphism ${v?"border-green-500/50":"border-gray-700/50"} border`,children:ne.jsxs("div",{className:"flex items-center text-sm",children:[ne.jsx(J6,{className:`w-5 h-5 mr-2 ${v?"text-green-400":"text-gray-500"}`}),ne.jsx("span",{className:`${v?"text-gray-200":"text-gray-500"}`,children:"Google Calendar"}),ne.jsx("span",{className:`ml-auto text-xs px-2 py-0.5 rounded-full ${v?"bg-green-500/30 text-green-300":"bg-gray-600/50 text-gray-400"}`,children:v?"Active":"Disabled"})]})}),ne.jsx("div",{className:`p-3 rounded-lg glassmorphism ${v?"border-green-500/50":"border-gray-700/50"} border`,children:ne.jsxs("div",{className:"flex items-center text-sm",children:[ne.jsx(Z6,{className:`w-5 h-5 mr-2 ${v?"text-green-400":"text-gray-500"}`}),ne.jsx("span",{className:`${v?"text-gray-200":"text-gray-500"}`,children:"Google Tasks"}),ne.jsx("span",{className:`ml-auto text-xs px-2 py-0.5 rounded-full ${v?"bg-green-500/30 text-green-300":"bg-gray-600/50 text-gray-400"}`,children:v?"Active":"Disabled"})]})}),ne.jsx("p",{className:"text-xs text-gray-500 mt-2",children:R?v?"Chatbot can now be developed to interact with your Google services.":"Connect to enable Google service interactions.":"Google integration is disabled due to missing configuration."})]})]}),ne.jsxs("div",{className:"border-t border-purple-900/30 pt-6",children:[ne.jsxs("button",{onClick:()=>p(!f),className:"flex items-center justify-between w-full text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 hover:text-purple-400 transition-colors","aria-expanded":f,children:[ne.jsxs("span",{className:"flex items-center",children:[ne.jsx(ij,{className:"w-4 h-4 mr-2"})," Local Notes"]}),f?ne.jsx(Mv,{className:"w-4 h-4"}):ne.jsx(Rf,{className:"w-4 h-4"})]}),f&&ne.jsxs("div",{className:"space-y-3",children:[ne.jsxs("div",{children:[ne.jsx("textarea",{value:m,onChange:fe=>g(fe.target.value),placeholder:"Type a new note...",rows:3,className:"w-full p-2 bg-gray-800/70 border border-purple-700/60 rounded-lg focus:ring-1 focus:ring-purple-500 focus:border-purple-500 outline-none text-white placeholder-gray-500 transition-colors scrollbar-thin text-sm","aria-label":"New Note Input"}),te&&te.includes("note")&&ne.jsx("p",{className:"text-xs text-red-400/90 mt-1",children:te}),ne.jsx("button",{onClick:Re,className:"mt-2 w-full p-2 bg-purple-600 hover:bg-purple-700 text-white text-sm rounded-md transition-colors disabled:opacity-50",disabled:!m.trim()||V,children:V&&!m.includes(((de=oe[0])==null?void 0:de.content)||"impossible_match")?"Adding Note...":"Add Note"})]}),oe.length>0?ne.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto scrollbar-thin pr-1",children:oe.slice().reverse().map(fe=>ne.jsxs("div",{className:"p-2.5 bg-gray-700/50 rounded-md text-sm text-gray-300 group relative",children:[ne.jsx("p",{className:"whitespace-pre-wrap break-words",children:fe.content}),ne.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(fe.createdAt).toLocaleDateString()}),ne.jsx("button",{onClick:()=>Q(fe.id,q),disabled:V,className:"absolute top-1 right-1 p-1 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50","aria-label":"Delete note",children:V&&oe.find(Pe=>Pe.id===fe.id)?ne.jsx("div",{className:"w-3 h-3 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):ne.jsx(rj,{className:"w-4 h-4"})})]},fe.id))}):ne.jsx("p",{className:"text-xs text-gray-500 text-center",children:"No notes yet."})]})]}),ne.jsxs("div",{className:"mt-auto pt-6 border-t border-purple-900/30",children:[ne.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 hover:text-purple-400 transition-colors cursor-pointer",role:"button",tabIndex:0,onClick:()=>alert("Settings panel not yet implemented."),onKeyDown:fe=>fe.key==="Enter"&&alert("Settings panel not yet implemented."),children:[ne.jsx(W6,{className:"w-5 h-5"}),ne.jsx("span",{className:"text-sm",children:"Settings"})]}),ne.jsx("p",{className:"text-xs text-gray-600 mt-4",children:"Chroma AI v0.3.1"})," "]})]})},Yne={name:"createCalendarEvent",description:"Creates a new event in the user's Google Calendar. Requires user to be logged into Google. Interpret natural language dates/times (e.g., 'next Friday at noon', 'tomorrow 3pm') and convert to ISO 8601 for startTime and endTime.",parameters:{type:rt.OBJECT,properties:{summary:{type:rt.STRING,description:"The title or summary of the event."},description:{type:rt.STRING,description:"A more detailed description of the event."},startTime:{type:rt.STRING,description:"The start date and time of the event in ISO 8601 format (e.g., YYYY-MM-DDTHH:mm:ssZ or YYYY-MM-DDTHH:mm:ss±HH:mm). Convert natural language like 'tomorrow 3pm' to this format."},endTime:{type:rt.STRING,description:"The end date and time of the event in ISO 8601 format. Convert natural language like 'next Monday 5pm' to this format."},location:{type:rt.STRING,description:"The location of the event."}},required:["summary","startTime","endTime"]}},Wne={name:"addTask",description:"Adds a new task to the user's Google Tasks. Requires user to be logged into Google. Interpret natural language for dueDate (e.g., 'next Wednesday') and convert to YYYY-MM-DD format.",parameters:{type:rt.OBJECT,properties:{title:{type:rt.STRING,description:"The title of the task."},notes:{type:rt.STRING,description:"Additional details or notes for the task."},dueDate:{type:rt.STRING,description:"The due date of the task in YYYY-MM-DD ISO 8601 format. Convert natural language like 'by Friday' to this format."},taskListId:{type:rt.STRING,description:"Optional ID of the task list to add to. Defaults to the primary task list."}},required:["title"]}},Kne={name:"getWeather",description:"Gets the current weather for a specified location.",parameters:{type:rt.OBJECT,properties:{location:{type:rt.STRING,description:"The city and state, or city and country, e.g., San Francisco, CA or London, UK."}},required:["location"]}},Xne={name:"searchCalendarEvents",description:"Searches for events in the user's Google Calendar based on a query, date range, or both. Requires user to be logged into Google. Interpret natural language dates/times for timeMin and timeMax and convert to ISO 8601 format.",parameters:{type:rt.OBJECT,properties:{query:{type:rt.STRING,description:"Text to search for in event summaries, descriptions, or locations."},timeMin:{type:rt.STRING,description:"The start of the date range for the search, in ISO 8601 format (e.g., YYYY-MM-DDTHH:mm:ssZ). Convert natural language like 'start of next week' to this format. If not provided, searches from the current time."},timeMax:{type:rt.STRING,description:"The end of the date range for the search, in ISO 8601 format. Convert natural language like 'end of next month' to this format. If not provided, no upper bound on time."}},required:[]}},Jne={name:"updateCalendarEvent",description:"Updates an existing event in the user's Google Calendar. Requires the eventId. Requires user to be logged into Google. Interpret natural language dates/times for startTime and endTime and convert to ISO 8601 format.",parameters:{type:rt.OBJECT,properties:{eventId:{type:rt.STRING,description:"The ID of the calendar event to update."},summary:{type:rt.STRING,description:"The new title or summary for the event."},description:{type:rt.STRING,description:"The new detailed description for the event."},startTime:{type:rt.STRING,description:"The new start date and time in ISO 8601 format. Convert natural language to this format."},endTime:{type:rt.STRING,description:"The new end date and time in ISO 8601 format. Convert natural language to this format."},location:{type:rt.STRING,description:"The new location for the event."}},required:["eventId"]}},Zne={name:"deleteCalendarEvent",description:"Deletes an event from the user's Google Calendar. Requires the eventId. Requires user to be logged into Google.",parameters:{type:rt.OBJECT,properties:{eventId:{type:rt.STRING,description:"The ID of the calendar event to delete."}},required:["eventId"]}},Qne={name:"searchTasks",description:"Searches for tasks in the user's Google Tasks. Can filter by query, due date, or status. Requires user to be logged into Google. Interpret natural language for dueBefore/dueAfter and convert to YYYY-MM-DD format.",parameters:{type:rt.OBJECT,properties:{taskListId:{type:rt.STRING,description:"Optional ID of the task list to search within. Defaults to the primary task list."},query:{type:rt.STRING,description:"Text to search for in task titles or notes."},dueBefore:{type:rt.STRING,description:"Filter for tasks due before this ISO 8601 date (YYYY-MM-DD). Convert natural language to this format."},dueAfter:{type:rt.STRING,description:"Filter for tasks due after this ISO 8601 date (YYYY-MM-DD). Convert natural language to this format."},status:{type:rt.STRING,enum:["needsAction","completed"],description:"Filter by task status."}},required:[]}},eie={name:"updateTask",description:"Updates an existing task in Google Tasks (e.g., title, notes, due date, status). Requires taskId. Requires user to be logged into Google. Interpret natural language for dueDate and convert to YYYY-MM-DD format.",parameters:{type:rt.OBJECT,properties:{taskId:{type:rt.STRING,description:"The ID of the task to update."},taskListId:{type:rt.STRING,description:"Optional ID of the task list. Defaults to the primary task list."},title:{type:rt.STRING,description:"The new title for the task."},notes:{type:rt.STRING,description:"The new notes for the task."},dueDate:{type:rt.STRING,description:"The new due date in YYYY-MM-DD ISO 8601 format. Convert natural language to this format."},status:{type:rt.STRING,enum:["needsAction","completed"],description:"The new status for the task."}},required:["taskId"]}},tie={name:"deleteTask",description:"Deletes a task from Google Tasks. Requires taskId. Requires user to be logged into Google.",parameters:{type:rt.OBJECT,properties:{taskId:{type:rt.STRING,description:"The ID of the task to delete."},taskListId:{type:rt.STRING,description:"Optional ID of the task list. Defaults to the primary task list."}},required:["taskId"]}},nie={name:"addNote",description:"Adds a new local note for the user. Notes are stored in the browser.",parameters:{type:rt.OBJECT,properties:{content:{type:rt.STRING,description:"The content of the note to be saved."}},required:["content"]}},iie={name:"viewNotes",description:"Retrieves all local notes for the user. Can optionally filter by a query string (client-side).",parameters:{type:rt.OBJECT,properties:{query:{type:rt.STRING,description:"Optional text to filter notes by. The AI can use this to pre-filter or can summarize all notes if not provided."}},required:[]}},rie={name:"deleteNote",description:"Deletes a specific local note by its ID. The AI should list notes first if the ID is unknown.",parameters:{type:rt.OBJECT,properties:{noteId:{type:rt.STRING,description:"The ID of the note to delete."}},required:["noteId"]}},sie=[Yne,Wne,Kne,Xne,Jne,Zne,Qne,eie,tie,nie,iie,rie],oie="YOUR_GEMINI_API_KEY_HERE",A4="your_gemini_api_key_here",PF=A4;var UF;const E4=((UF=document.querySelector('meta[name="google-signin-client_id"]'))==null?void 0:UF.content)||"YOUR_GOOGLE_CLIENT_ID",KE=[{name:"Helpful Assistant",prompt:"You are a helpful and friendly AI assistant. Be concise and informative."},{name:"Creative Idea Generator",prompt:"You are a highly creative AI. Brainstorm innovative ideas and think outside the box. Your responses should be imaginative and inspiring."},{name:"Code Helper",prompt:"You are an expert AI programmer. Provide code examples in markdown, explain complex programming concepts clearly, and help debug code. Be precise and technically accurate."},{name:"Formal Assistant",prompt:"You are a professional and formal AI assistant. Maintain a respectful and business-like tone in all your communications. Avoid colloquialisms."},{name:"Sarcastic Bot",prompt:"You are a sarcastic bot. Your responses should be witty and have a dry sense of humor, but still be helpful in your own quirky way. Don't be mean, just amusingly cynical."},{name:"Custom",prompt:"You are a custom AI. Follow the instructions provided."}],aie=KE[0].prompt,lie=()=>ne.jsx(fQ,{defaultPersonas:KE,initialGeminiKey:PF,initialSelectedPersonaName:KE[0].name,initialCustomSystemPrompt:"You are a helpful AI. Behave as I instruct.",children:ne.jsx(vQ,{googleClientId:E4,children:ne.jsxs(Dne,{geminiApiKey:PF,children:[" ",ne.jsx(Vne,{allTools:sie,defaultSystemPrompt:aie,children:ne.jsx(N6,{children:ne.jsx("div",{className:"flex h-screen overflow-hidden antialiased",children:ne.jsx(uie,{})})})})]})})}),uie=()=>{const n=pe.useContext(CS),e=pe.useContext(l_),t=pe.useContext(WS),i=pe.useContext(m_);if(!n||!e||!t||!i)return ne.jsx("div",{children:"Loading contexts or context error..."});const{googleUserProfile:r,isGoogleLoggedIn:s,handleGoogleLogin:o,handleGoogleLogout:a,isLoading:c,error:u}=n,{apiKeys:f,selectedProvider:p,personas:m,selectedPersonaName:g,customSystemPrompt:v,handleApiKeyChange:w,setSelectedProvider:A,handleSelectPersona:E,handleCustomSystemPromptChange:M}=e,{messages:I,isLoading:R,error:D,isUsingTool:C,geminiChat:k,handleSendMessage:j,setMessages:U,setIsLoading:F,setError:J}=t,{localNotes:G,uploadedFileData:ee,activeRAGFile:oe,aiInstance:me,handleFileChange:Q,handleManualAddNote:V,handleManualDeleteNote:te,getEmbeddings:xe,chunkText:N,searchRelevantChunks:ce,clearUploadedFile:Me}=i,q=f[sn.GEMINI]===oie,Re=f[sn.GEMINI]===A4,je={aiInstance:me,activeRAGFile:oe,uploadedFileData:ee,clearUploadedFile:Me,addMessageToChat:fe=>U(Pe=>[...Pe,{...fe,id:Date.now().toString(),timestamp:new Date,sender:fe.role}]),searchRelevantChunks:ce,getEmbeddingsFromRAG:fe=>xe(fe,me),chunkText:N},re={apiKeys:f,selectedProvider:p,selectedPersonaName:g,customSystemPrompt:v,personas:m},ae={googleAccessToken:n.googleAccessToken,isGoogleLoggedIn:s};let de=null;return n.error?de=n.error:i.ragError?de=i.ragError:t.error&&(de=t.error),n.isLoading||t.isLoading||i.isProcessingFile||i.isProcessingNote,ne.jsxs(ne.Fragment,{children:[ne.jsx($ne,{selectedProvider:p,onSelectProvider:A,apiKeys:f,onApiKeyChange:w,isGoogleLoggedIn:s,googleUserProfile:r,onGoogleLogin:o,onGoogleLogout:a,isGoogleClientConfigured:E4!=="YOUR_GOOGLE_CLIENT_ID",personas:m,selectedPersonaName:g,onSelectPersona:E,customSystemPrompt:v,onCustomSystemPromptChange:M,isGeminiKeyFromEnv:Re,isGeminiKeyPlaceholder:q,localNotes:G,onManualAddNote:fe=>V(fe,je.addMessageToChat),onManualDeleteNote:fe=>te(fe,je.addMessageToChat)}),ne.jsxs("main",{className:"flex-1 flex flex-col h-full chroma-gradient-bg relative",children:[ne.jsxs("div",{className:"absolute top-0 left-0 right-0 h-16 bg-black/30 backdrop-blur-sm flex items-center px-6 z-10",children:[ne.jsx("h1",{className:"text-2xl font-bold chroma-accent-text tracking-wider",children:"Chroma AI"}),ne.jsxs("span",{className:"ml-auto text-sm text-gray-400",children:["Provider: ",p," | Persona: ",g,C?`| Tool: ${C}`:"",oe?`| Context: ${oe.name}`:""]})]}),ne.jsxs(u6,{children:[ne.jsx(qA,{path:"/",element:ne.jsx(qne,{messages:I,onSendMessage:fe=>j(fe,je,re,ae),isLoading:t.isLoading,error:de,currentProvider:p,isGeminiKeyPlaceholder:q,onFileChange:fe=>Q(fe,je.addMessageToChat),uploadedFileData:ee})}),ne.jsx(qA,{path:"*",element:ne.jsx(a6,{to:"/"})})]})]})]})},C4=document.getElementById("root");if(!C4)throw new Error("Could not find root element to mount to");const cie=yV.createRoot(C4);cie.render(ne.jsx(VF.StrictMode,{children:ne.jsx(lie,{})}));
